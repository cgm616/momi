!function(){var e,t=function(e){var t;return function(i){return t||e(t={exports:{},parent:i},t.exports),t.exports}},i=t((function(e,t){const{forceArray:i}=ju,{isItemId:s}=Vu;e.exports=e=>{const t=r({})(e);return(e,r,s={})=>{var{limit:n,caseInsensitive:c,keepProperties:p}=s;const h=c?l:o,m=p?"":"FILTER NOT EXISTS { ?subject rdf:type wikibase:Property . } ";var f=i(e);f.forEach(Pp.propertyId),f=f.map(u).join("|");var d=`SELECT DISTINCT ?subject WHERE { ${a(r,h,f,m)} }`;return n&&(d+=" LIMIT "+n),t(d)}};const a=(e,t,i,r)=>e instanceof Array?"{ "+e.map(n).map(e=>t(i,e,r)).join("} UNION {")+" }":t(i,n(e),r),n=e=>(s(e)?e="wd:"+e:"string"==typeof e&&(e=`'${e}'`),e),o=(e,t,i,r)=>`?subject ${e} ${t} .\n    ${i}`,l=(e,t,i,r)=>`?subject ${e} ?value .\n    FILTER (lcase(?value) = ${t.toLowerCase()})\n    ${i}`,u=e=>"wdt:"+e})),r=t((function(e,t){const{fixedEncodeURIComponent:i}=ju;e.exports=e=>t=>{const r=i(t);return`${e}?format=json&query=${r}`}})),s=t((function(e,t){const{isPlainObject:i,forceArray:r,shortLang:s}=ju;e.exports=e=>(t,n,o,l,u,c)=>{if(i(t)){const e=t;t=e.titles,n=e.sites,o=e.languages,l=e.props,u=e.format,c=e.redirects}if(u=u||"json",!(t&&t.length>0))throw new Error("no titles provided");n&&n.length>0||(n=["enwiki"]),t=r(t),n=r(n).map(a),l=r(l);const p={action:"wbgetentities",titles:t.join("|"),sites:n.join("|"),format:u};return 1===n.length&&1===t.length&&(p.normalize=!0),o&&(o=r(o).map(s),p.languages=o.join("|")),l&&l.length>0&&(p.props=l.join("|")),!1===c&&(p.redirects="no"),e(p)};const a=e=>2===e.length?e+"wiki":e})),a=t((function(e,t){const{isPlainObject:i}=ju;e.exports=e=>(t,r)=>(i(t)&&(r=t.revision,t=t.id),Pp.entityId(t),Pp.revisionId(r),`${e}/w/index.php?title=Special:EntityData/${t}.json&revision=${r}`)})),n=t((function(e,t){const{forceArray:i}=ju;e.exports=e=>(t,s={})=>{(t=i(t)).forEach(Pp.entityPageTitle);const a=1===t.length,n={action:"query",prop:"revisions"};n.titles=t.join("|"),n.format=s.format||"json",a&&(n.rvlimit=s.limit||"max"),a&&s.start&&(n.rvstart=r(s.start)),a&&s.end&&(n.rvend=r(s.end));const{prop:o,user:l,excludeuser:u,tag:c}=s;return o&&(n.rvprop=i(o).join("|")),l&&(n.rvuser=l),u&&(n.rvexcludeuser=u),c&&(n.rvtag=c),e(n)};const r=e=>"number"==typeof e&&e<s?e:Math.trunc(new Date(e).getTime()/1e3),s=new Date("2000-01-01").getTime()})),o=t((function(e,t){const{isPlainObject:i}=ju;e.exports=e=>{const t=l({})(e);return(e,s,a,n,o)=>{if(i(e)&&({ids:e,languages:s,props:a,format:n,redirects:o}=e),!(e instanceof Array))throw new Error("getManyEntities expects an array of ids");return r(e).map(e=>t(e,s,a,n,o))}};const r=e=>{const t=[];for(;e.length>0;){const i=e.slice(0,50);e=e.slice(50),t.push(i)}return t}})),l=t((function(e,t){const{isPlainObject:i,forceArray:r,shortLang:s}=ju;e.exports=e=>(t,a,n,o,l)=>{if(i(t)&&({ids:t,languages:a,props:n,format:o,redirects:l}=t),o=o||"json",!(t&&t.length>0))throw new Error("no id provided");(t=r(t)).forEach(Pp.entityId),t.length>50&&console.warn("getEntities accepts 50 ids max to match Wikidata API limitations:\n      this request won't get all the desired entities.\n      You can use getManyEntities instead to generate several request urls\n      to work around this limitation");const u={action:"wbgetentities",ids:t.join("|"),format:o};return!1===l&&(u.redirects="no"),a&&(a=r(a).map(s),u.languages=a.join("|")),n&&n.length>0&&(u.props=r(n).join("|")),e(u)}})),u=t((function(e,t){const{isPlainObject:i}=ju,r=["item","property","lexeme","form","sense"];e.exports=e=>(t,s,a,n,o)=>{var l,u;if(i(t)){const e=t;t=e.search,s=e.language,a=e.limit,u=e.continue,n=e.format,o=e.uselang,l=e.type}if(!(t&&t.length>0))throw new Error("search can't be empty");if(s=s||"en",o=o||s,a=a||"20",n=n||"json",l=l||"item",u=u||"0",!r.includes(l))throw new Error("invalid type: "+l);return e({action:"wbsearchentities",search:t,language:s,limit:a,continue:u,format:n,uselang:o,type:l})}})),c=t((function(e,t){const i="undefined"!=typeof location&&"undefined"!=typeof document,r=i?Tp:Np;e.exports=e=>t=>(i&&(t.origin="*"),e+"?"+r.stringify(t))})),p=t((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(y({})),r=u(ir),s=u(us),a=u(ds),n=u(h({})),o=u(m({}));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,t&&t.set(e,i),i}function c(e,t={}){return this instanceof c?(this._options=t,this.log=[],this.data=[],this.set(e,t),this.options(t),this.save(),this):new c(e,t)}Object.assign(c.prototype,i,r,s,a,n),c.prototype[Symbol.iterator]=function*(){yield*this.data},Object.assign(c,o);var p=c;t.default=p})),h=t((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIds=function(){return this.data.map(e=>e.id)},t.format=function(e,...t){return(0,_s.format)(e,(0,Br.clean)(this.data),...t)},t.get=function(e={}){(0,i.validateOutputOptions)(e);const t=Object.assign({},this.defaultOptions,this._options.output,e),{type:r,style:s}=t,[a,n]=s.split("-"),o="citation"===a?"bibliography":"csl"===a?"data":a,l="string"===r?"text":"json"===r?"object":r;let u;switch(o){case"bibliography":{const{lang:e,append:i,prepend:r}=t;u={template:n,lang:e,format:l,append:i,prepend:r};break}case"data":case"bibtex":case"bibtxt":case"ndjson":case"ris":u={type:l};break;default:throw new Error(`Invalid style "${o}"`)}const c=this.format(o,Object.assign(u,e._newOptions)),{format:p}=t;if("real"===p&&"html"===l&&"undefined"!=typeof document&&"function"==typeof document.createElement){const e=document.createElement("div");return e.innerHTML=c,e.firstChild}return"string"===p&&"object"==typeof c?JSON.stringify(c):c};var i=m({})})),m=t((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={async:!0};Object.defineProperty(t,"async",{enumerable:!0,get:function(){return s.default}});var r,s=(r=f({}))&&r.__esModule?r:{default:r};Object.keys(Ji).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===Ji[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return Ji[e]}}))}))})),f=t((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=p({}))&&i.__esModule?i:{default:i};t.default=function(e,t,i){"function"!=typeof t||i||(i=t,t=void 0);const s=(0,r.default)().setAsync(e,t);return"function"==typeof i?void s.then(i):s}})),d=t((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.list=t.has=t.remove=t.get=t.add=void 0;var i=g({});const r={};t.add=(e,t)=>{const s=new gr.FormatParser(e,t);s.validate();const a=r[e]||(r[e]={});s.typeParser&&((0,or.addTypeParser)(e,s.typeParser),a.type=!0),s.dataParser&&((0,i.addDataParser)(e,s.dataParser),a.data=!0),s.asyncDataParser&&((0,i.addDataParser)(e,s.asyncDataParser),a.asyncData=!0),t.outputs&&(a.outputs=t.outputs)},t.get=e=>r[e],t.remove=e=>{const t=r[e];t&&(t.type&&(0,or.removeTypeParser)(e),t.data&&(0,i.removeDataParser)(e),t.asyncData&&(0,i.removeDataParser)(e,!0),delete r[e])},t.has=e=>e in r,t.list=()=>Object.keys(r)})),g=t((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.listDataParser=t.removeDataParser=t.hasDataParser=t.addDataParser=t.dataAsync=t.data=void 0;var i=b({});const r=e=>[].concat(...e),s={},a={},n={"@csl/object":e=>[e],"@csl/list+object":e=>e,"@else/list+object":e=>r(e.map(i.chain)),"@invalid":()=>{throw new Error("This format is not supported or recognized")}},o={"@else/list+object":async e=>r(await Promise.all(e.map(i.chainAsync)))},l=(e,t)=>{if("function"==typeof s[t])return s[t](e);if("function"==typeof n[t])return n[t](e);throw new TypeError("No synchronous parser found for "+t)};t.data=l,t.dataAsync=async(e,t)=>{if("function"==typeof a[t])return a[t](e);if("function"==typeof o[t])return o[t](e);if(u(t,!1))return l(e,t);throw new TypeError("No parser found for "+t)},t.addDataParser=(e,{parser:t,async:i})=>{i?a[e]=t:s[e]=t};const u=(e,t)=>t?a[e]||o[e]:s[e]||n[e];t.hasDataParser=u,t.removeDataParser=(e,t)=>{delete(t?a:s)[e]},t.listDataParser=e=>Object.keys(e?a:s)})),b=t((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chainLinkAsync=t.chainAsync=t.chainLink=t.chain=void 0;var i=n(Wr),r=n(nr),s=d({}),a=g({});function n(e){return e&&e.__esModule?e:{default:e}}class o{constructor(e,t={}){this.options=Object.assign({generateGraph:!0,forceType:(0,or.type)(e),maxChainLength:10,strict:!0,target:"@csl/list+object"},t),this.type=this.options.forceType,this.data="object"==typeof e?(0,i.default)(e):e,this.graph=[{type:this.type,data:e}],this.iteration=0}iterate(){if(0!==this.iteration){const e=(0,s.get)(this.type);e&&e.outputs?this.type=e.outputs:this.type=(0,or.type)(this.data),this.graph.push({type:this.type})}return!this.error&&this.type!==this.options.target&&(this.iteration>=this.options.maxChainLength?(this.error=new RangeError(`Max. number of parsing iterations reached (${e=this.graph,e.reduce((e,t)=>{const i=e[e.length-1];return i&&i.type===t.type?i.count=i.count+1||2:e.push(t),e},[]).map(e=>(e.count>1?e.count+"x ":"")+e.type).join(" -> ")})`),!1):(this.iteration++,!0));var e}end(){if(this.error){if(r.default.error("[core]",this.error.message),!1!==this.options.strict)throw this.error;return[]}return"@csl/list+object"===this.options.target?this.data.map(this.options.generateGraph?e=>(0,ar.applyGraph)(e,this.graph):ar.removeGraph):this.data}}t.chain=(...e)=>{const t=new o(...e);for(;t.iterate();)try{t.data=(0,a.data)(t.data,t.type)}catch(i){t.error=i}return t.end()},t.chainLink=e=>{const t=(0,or.type)(e),r=t.match(/array|object/)?(0,i.default)(e):e;return(0,a.data)(r,t)},t.chainAsync=async(...e)=>{const t=new o(...e);for(;t.iterate();)t.data=await(0,a.dataAsync)(t.data,t.type).catch(e=>{t.error=e});return t.end()},t.chainLinkAsync=async e=>{const t=(0,or.type)(e),r=t.match(/array|object/)?(0,i.default)(e):e;return(0,a.dataAsync)(r,t)}})),y=t((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.save=t.undo=t.retrieveLastVersion=t.retrieveVersion=t.currentVersion=void 0;var i,r=(i=p({}))&&i.__esModule?i:{default:i};t.currentVersion=function(){return this.log.length},t.retrieveVersion=function(e=1){if(e<=0||e>this.currentVersion())return null;{const[t,i]=this.log[e-1],s=new r.default(JSON.parse(t),JSON.parse(i));return s.log=this.log.slice(0,e),s}},t.undo=function(e=1){return this.retrieveVersion(this.currentVersion()-e)},t.retrieveLastVersion=function(){return this.retrieveVersion(this.currentVersion())},t.save=function(){return this.log.push([JSON.stringify(this.data),JSON.stringify(this._options)]),this}})),v=t((function(e,t){(function(t,i){(function(){"use strict";var r;e.exports=w,w.ReadableState=v,M.EventEmitter;var s,a=function(e,t){return e.listeners(t).length},n=L({}).Buffer,o=i.Uint8Array||function(){};s=ue&&ue.debuglog?ue.debuglog("stream"):function(){};var l,u,c,p=si.getHighWaterMark,h=Zt.codes,m=h.ERR_INVALID_ARG_TYPE,f=h.ERR_STREAM_PUSH_AFTER_EOF,d=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;X(w,zt);var b=Kt.errorOrDestroy,y=["error","close","destroy","pause","resume"];function v(e,t,i){r=r||E({}),e=e||{},"boolean"!=typeof i&&(i=t instanceof r),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=p(this,e,"readableHighWaterMark",i),this.buffer=new Xt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(l||(l=P({}).StringDecoder),this.decoder=new l(e.encoding),this.encoding=e.encoding)}function w(e){if(r=r||E({}),!(this instanceof w))return new w(e);var t=this instanceof r;this._readableState=new v(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),zt.call(this)}function A(e,t,i,r,a){s("readableAddChunk",t);var l,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(s("onEofChunk"),!t.ended){if(t.decoder){var i=t.decoder.end();i&&i.length&&(t.buffer.push(i),t.length+=t.objectMode?1:i.length)}t.ended=!0,t.sync?O(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,Q(e)))}}(e,u);else if(a||(l=function(e,t){var i,r;return r=t,n.isBuffer(r)||r instanceof o||"string"==typeof t||void 0===t||e.objectMode||(i=new m("chunk",["string","Buffer","Uint8Array"],t)),i}(u,t)),l)b(e,l);else if(u.objectMode||t&&t.length>0)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===n.prototype||(t=function(e){return n.from(e)}(t)),r)u.endEmitted?b(e,new g):T(e,u,t,!0);else if(u.ended)b(e,new f);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!i?(t=u.decoder.write(t),u.objectMode||0!==t.length?T(e,u,t,!1):k(e,u)):T(e,u,t,!1)}else r||(u.reading=!1,k(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function T(e,t,i,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",i)):(t.length+=t.objectMode?1:i.length,r?t.buffer.unshift(i):t.buffer.push(i),t.needReadable&&O(e)),k(e,t)}Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),w.prototype.destroy=Kt.destroy,w.prototype._undestroy=Kt.undestroy,w.prototype._destroy=function(e,t){t(e)},w.prototype.push=function(e,t){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=n.from(e,t),t=""),i=!0),A(this,e,t,!1,i)},w.prototype.unshift=function(e){return A(this,e,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(e){l||(l=P({}).StringDecoder);var t=new l(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,r="";null!==i;)r+=t.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function O(e){var i=e._readableState;s("emitReadable",i.needReadable,i.emittedReadable),i.needReadable=!1,i.emittedReadable||(s("emitReadable",i.flowing),i.emittedReadable=!0,t.nextTick(Q,e))}function Q(e){var t=e._readableState;s("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,D(e)}function k(e,i){i.readingMore||(i.readingMore=!0,t.nextTick(C,e,i))}function C(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var i=t.length;if(s("maybeReadMore read 0"),e.read(0),i===t.length)break}t.readingMore=!1}function I(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function N(e){s("readable nexttick read 0"),e.read(0)}function R(e,t){s("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),D(e),t.flowing&&!t.reading&&e.read(0)}function D(e){var t=e._readableState;for(s("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){return 0===t.length?null:(t.objectMode?i=t.buffer.shift():!e||e>=t.length?(i=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):i=t.buffer.consume(e,t.decoder),i);var i}function B(e){var i=e._readableState;s("endReadable",i.endEmitted),i.endEmitted||(i.ended=!0,t.nextTick(U,i,e))}function U(e,t){if(s("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var i=t._writableState;(!i||i.autoDestroy&&i.finished)&&t.destroy()}}function F(e,t){for(var i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1}w.prototype.read=function(e){s("read",e),e=parseInt(e,10);var t=this._readableState,i=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return s("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):O(this),null;if(0===(e=S(e,t))&&t.ended)return 0===t.length&&B(this),null;var r,a=t.needReadable;return s("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&s("length less than watermark",a=!0),t.ended||t.reading?s("reading or ended",a=!1):a&&(s("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(i,t))),null===(r=e>0?j(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),i!==e&&t.ended&&B(this)),null!==r&&this.emit("data",r),r},w.prototype._read=function(e){b(this,new d("_read()"))},w.prototype.pipe=function(e,i){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,s("pipe count=%d opts=%j",n.pipesCount,i);var o=i&&!1===i.end||e===t.stdout||e===t.stderr?d:l;function l(){s("onend"),e.end()}n.endEmitted?t.nextTick(o):r.once("end",o),e.on("unpipe",(function t(i,a){s("onunpipe"),i===r&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,s("cleanup"),e.removeListener("close",m),e.removeListener("finish",f),e.removeListener("drain",u),e.removeListener("error",h),e.removeListener("unpipe",t),r.removeListener("end",l),r.removeListener("end",d),r.removeListener("data",p),c=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}));var u=function(e){return function(){var t=e._readableState;s("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,D(e))}}(r);e.on("drain",u);var c=!1;function p(t){s("ondata");var i=e.write(t);s("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==F(n.pipes,e))&&!c&&(s("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function h(t){s("onerror",t),d(),e.removeListener("error",h),0===a(e,"error")&&b(e,t)}function m(){e.removeListener("finish",f),d()}function f(){s("onfinish"),e.removeListener("close",m),d()}function d(){s("unpipe"),r.unpipe(e)}return r.on("data",p),function(e,t,i){if("function"==typeof e.prependListener)return e.prependListener("error",i);e._events&&e._events.error?Array.isArray(e._events.error)?e._events.error.unshift(i):e._events.error=[i,e._events.error]:e.on("error",i)}(e,0,h),e.once("close",m),e.once("finish",f),e.emit("pipe",r),n.flowing||(s("pipe resume"),r.resume()),e},w.prototype.unpipe=function(e){var t=this._readableState,i={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,i)),this;if(!e){var r=t.pipes,s=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<s;a++)r[a].emit("unpipe",this,{hasUnpiped:!1});return this}var n=F(t.pipes,e);return-1===n||(t.pipes.splice(n,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,i)),this},w.prototype.on=function(e,i){var r=zt.prototype.on.call(this,e,i),a=this._readableState;return"data"===e?(a.readableListening=this.listenerCount("readable")>0,!1!==a.flowing&&this.resume()):"readable"===e&&(a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.flowing=!1,a.emittedReadable=!1,s("on readable",a.length,a.reading),a.length?O(this):a.reading||t.nextTick(N,this))),r},w.prototype.addListener=w.prototype.on,w.prototype.removeListener=function(e,i){var r=zt.prototype.removeListener.call(this,e,i);return"readable"===e&&t.nextTick(I,this),r},w.prototype.removeAllListeners=function(e){var i=zt.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||t.nextTick(I,this),i},w.prototype.resume=function(){var e=this._readableState;return e.flowing||(s("resume"),e.flowing=!e.readableListening,function(e,i){i.resumeScheduled||(i.resumeScheduled=!0,t.nextTick(R,e,i))}(this,e)),e.paused=!1,this},w.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},w.prototype.wrap=function(e){var t=this,i=this._readableState,r=!1;for(var a in e.on("end",(function(){if(s("wrapped end"),i.decoder&&!i.ended){var e=i.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(a){s("wrapped data"),i.decoder&&(a=i.decoder.write(a)),i.objectMode&&null==a||(i.objectMode||a&&a.length)&&(t.push(a)||(r=!0,e.pause()))})),e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var n=0;n<y.length;n++)e.on(y[n],this.emit.bind(this,y[n]));return this._read=function(t){s("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(w.prototype[Symbol.asyncIterator]=function(){return void 0===u&&(u=x({})),u(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),w._fromList=j,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(w.from=function(e,t){return void 0===c&&(c=_({})),c(w,e,t)})}).call(this)}).call(this,ve,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})})),_=t((function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}})),x=t((function(e,t){(function(t){(function(){"use strict";var i;function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s=w({}),a=Symbol("lastResolve"),n=Symbol("lastReject"),o=Symbol("error"),l=Symbol("ended"),u=Symbol("lastPromise"),c=Symbol("handlePromise"),p=Symbol("stream");function h(e,t){return{value:e,done:t}}function m(e){var t=e[a];if(null!==t){var i=e[p].read();null!==i&&(e[u]=null,e[a]=null,e[n]=null,t(h(i,!1)))}}var f=Object.getPrototypeOf((function(){})),d=Object.setPrototypeOf((r(i={get stream(){return this[p]},next:function(){var e=this,i=this[o];if(null!==i)return Promise.reject(i);if(this[l])return Promise.resolve(h(void 0,!0));if(this[p].destroyed)return new Promise((function(i,r){t.nextTick((function(){e[o]?r(e[o]):i(h(void 0,!0))}))}));var r,s=this[u];if(s)r=new Promise(function(e,t){return function(i,r){e.then((function(){t[l]?i(h(void 0,!0)):t[c](i,r)}),r)}}(s,this));else{var a=this[p].read();if(null!==a)return Promise.resolve(h(a,!1));r=new Promise(this[c])}return this[u]=r,r}},Symbol.asyncIterator,(function(){return this})),r(i,"return",(function(){var e=this;return new Promise((function(t,i){e[p].destroy(null,(function(e){e?i(e):t(h(void 0,!0))}))}))})),i),f);e.exports=function(e){var i,f=Object.create(d,(r(i={},p,{value:e,writable:!0}),r(i,a,{value:null,writable:!0}),r(i,n,{value:null,writable:!0}),r(i,o,{value:null,writable:!0}),r(i,l,{value:e._readableState.endEmitted,writable:!0}),r(i,c,{value:function(e,t){var i=f[p].read();i?(f[u]=null,f[a]=null,f[n]=null,e(h(i,!1))):(f[a]=e,f[n]=t)},writable:!0}),i));return f[u]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=f[n];return null!==t&&(f[u]=null,f[a]=null,f[n]=null,t(e)),void(f[o]=e)}var i=f[a];null!==i&&(f[u]=null,f[a]=null,f[n]=null,i(h(void 0,!0))),f[l]=!0})),e.on("readable",function(e){t.nextTick(m,e)}.bind(null,f)),f}}).call(this)}).call(this,ve)})),w=t((function(e,t){"use strict";var i=Zt.codes.ERR_STREAM_PREMATURE_CLOSE;function r(){}e.exports=function e(t,s,a){if("function"==typeof s)return e(t,null,s);s||(s={}),a=function(e){var t=!1;return function(){if(!t){t=!0;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];e.apply(this,r)}}}(a||r);var n=s.readable||!1!==s.readable&&t.readable,o=s.writable||!1!==s.writable&&t.writable,l=function(){t.writable||c()},u=t._writableState&&t._writableState.finished,c=function(){o=!1,u=!0,n||a.call(t)},p=t._readableState&&t._readableState.endEmitted,h=function(){n=!1,p=!0,o||a.call(t)},m=function(e){a.call(t,e)},f=function(){var e;return n&&!p?(t._readableState&&t._readableState.ended||(e=new i),a.call(t,e)):o&&!u?(t._writableState&&t._writableState.ended||(e=new i),a.call(t,e)):void 0},d=function(){t.req.on("finish",c)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",c),t.on("abort",f),t.req?d():t.on("request",d)):o&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",h),t.on("finish",c),!1!==s.error&&t.on("error",m),t.on("close",f),function(){t.removeListener("complete",c),t.removeListener("abort",f),t.removeListener("request",d),t.req&&t.req.removeListener("finish",c),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",c),t.removeListener("end",h),t.removeListener("error",m),t.removeListener("close",f)}}})),E=t((function(e,t){(function(t){(function(){"use strict";var i=Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t};e.exports=l;var r=v({}),s=A({});X(l,r);for(var a=i(s.prototype),n=0;n<a.length;n++){var o=a[n];l.prototype[o]||(l.prototype[o]=s.prototype[o])}function l(e){if(!(this instanceof l))return new l(e);r.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||t.nextTick(c,this)}function c(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,ve)})),A=t((function(e,t){(function(t,i){(function(){"use strict";function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,i){var r=e.entry;for(e.entry=null;r;){var s=r.callback;t.pendingcb--,s(void 0),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var s;e.exports=w,w.WritableState=x;var a,n={deprecate:Be},o=L({}).Buffer,l=i.Uint8Array||function(){},u=si.getHighWaterMark,c=Zt.codes,p=c.ERR_INVALID_ARG_TYPE,h=c.ERR_METHOD_NOT_IMPLEMENTED,m=c.ERR_MULTIPLE_CALLBACK,f=c.ERR_STREAM_CANNOT_PIPE,d=c.ERR_STREAM_DESTROYED,g=c.ERR_STREAM_NULL_VALUES,b=c.ERR_STREAM_WRITE_AFTER_END,y=c.ERR_UNKNOWN_ENCODING,v=Kt.errorOrDestroy;function _(){}function x(e,i,a){s=s||E({}),e=e||{},"boolean"!=typeof a&&(a=i instanceof s),this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=u(this,e,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,i){var r=e._writableState,s=r.sync,a=r.writecb;if("function"!=typeof a)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),i)!function(e,i,r,s,a){--i.pendingcb,r?(t.nextTick(a,s),t.nextTick(k,e,i),e._writableState.errorEmitted=!0,v(e,s)):(a(s),e._writableState.errorEmitted=!0,v(e,s),k(e,i))}(e,r,s,i,a);else{var n=O(r)||e.destroyed;n||r.corked||r.bufferProcessing||!r.bufferedRequest||S(e,r),s?t.nextTick(T,e,r,n,a):T(e,r,n,a)}}(i,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function w(e){var t=this instanceof(s=s||E({}));if(!t&&!a.call(w,this))return new w(e);this._writableState=new x(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),zt.call(this)}function A(e,t,i,r,s,a,n){t.writelen=r,t.writecb=n,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new d("write")):i?e._writev(s,t.onwrite):e._write(s,a,t.onwrite),t.sync=!1}function T(e,t,i,r){i||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),k(e,t)}function S(e,t){t.bufferProcessing=!0;var i=t.bufferedRequest;if(e._writev&&i&&i.next){var s=t.bufferedRequestCount,a=new Array(s),n=t.corkedRequestsFree;n.entry=i;for(var o=0,l=!0;i;)a[o]=i,i.isBuf||(l=!1),i=i.next,o+=1;a.allBuffers=l,A(e,t,!0,t.length,a,"",n.finish),t.pendingcb++,t.lastBufferedRequest=null,n.next?(t.corkedRequestsFree=n.next,n.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;i;){var u=i.chunk,c=i.encoding,p=i.callback;if(A(e,t,!1,t.objectMode?1:u.length,u,c,p),i=i.next,t.bufferedRequestCount--,t.writing)break}null===i&&(t.lastBufferedRequest=null)}t.bufferedRequest=i,t.bufferProcessing=!1}function O(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function Q(e,t){e._final((function(i){t.pendingcb--,i&&v(e,i),t.prefinished=!0,e.emit("prefinish"),k(e,t)}))}function k(e,i){var r=O(i);if(r&&(function(e,i){i.prefinished||i.finalCalled||("function"!=typeof e._final||i.destroyed?(i.prefinished=!0,e.emit("prefinish")):(i.pendingcb++,i.finalCalled=!0,t.nextTick(Q,e,i)))}(e,i),0===i.pendingcb&&(i.finished=!0,e.emit("finish"),i.autoDestroy))){var s=e._readableState;(!s||s.autoDestroy&&s.endEmitted)&&e.destroy()}return r}X(w,zt),x.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(x.prototype,"buffer",{get:n.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===w&&e&&e._writableState instanceof x}})):a=function(e){return e instanceof this},w.prototype.pipe=function(){v(this,new f)},w.prototype.write=function(e,i,r){var s,a=this._writableState,n=!1,u=!a.objectMode&&(s=e,o.isBuffer(s)||s instanceof l);return u&&!o.isBuffer(e)&&(e=function(e){return o.from(e)}(e)),"function"==typeof i&&(r=i,i=null),u?i="buffer":i||(i=a.defaultEncoding),"function"!=typeof r&&(r=_),a.ending?function(e,i){var r=new b;v(e,r),t.nextTick(i,r)}(this,r):(u||function(e,i,r,s){var a;return null===r?a=new g:"string"==typeof r||i.objectMode||(a=new p("chunk",["string","Buffer"],r)),!a||(v(e,a),t.nextTick(s,a),!1)}(this,a,e,r))&&(a.pendingcb++,n=function(e,t,i,r,s,a){if(!i){var n=function(e,t,i){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=o.from(t,i)),t}(t,r,s);r!==n&&(i=!0,s="buffer",r=n)}var l=t.objectMode?1:r.length;t.length+=l;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:s,isBuf:i,callback:a,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else A(e,t,!1,l,r,s,a);return u}(this,a,u,e,i,r)),n},w.prototype.cork=function(){this._writableState.corked++},w.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||S(this,e))},w.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new y(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),w.prototype._write=function(e,t,i){i(new h("_write()"))},w.prototype._writev=null,w.prototype.end=function(e,i,r){var s=this._writableState;return"function"==typeof e?(r=e,e=null,i=null):"function"==typeof i&&(r=i,i=null),null!=e&&this.write(e,i),s.corked&&(s.corked=1,this.uncork()),s.ending||function(e,i,r){i.ending=!0,k(e,i),r&&(i.finished?t.nextTick(r):e.once("finish",r)),i.ended=!0,e.writable=!1}(this,s,r),this},Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),w.prototype.destroy=Kt.destroy,w.prototype._undestroy=Kt.undestroy,w.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,ve,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})})),T=t((function(e,t){(function(t,i){(function(){"use strict";var r;e.exports=h,h.ReadableState=p,M.EventEmitter;var s=function(e,t){return e.listeners(t).length},a=yt.Buffer,n=i.Uint8Array||function(){},o=Object.create(At);o.inherits=X;var l,u=void 0;u=ue&&ue.debuglog?ue.debuglog("stream"):function(){},o.inherits(h,bt);var c=["error","close","destroy","pause","resume"];function p(e,t){e=e||{};var i=t instanceof(r=r||O({}));this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var s=e.highWaterMark,a=e.readableHighWaterMark,n=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:i&&(a||0===a)?a:n,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Tt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(l||(l=S({}).StringDecoder),this.decoder=new l(e.encoding),this.encoding=e.encoding)}function h(e){if(r=r||O({}),!(this instanceof h))return new h(e);this._readableState=new p(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),bt.call(this)}function m(e,t,i,r,s){var o,l=e._readableState;return null===t?(l.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var i=t.decoder.end();i&&i.length&&(t.buffer.push(i),t.length+=t.objectMode?1:i.length)}t.ended=!0,g(e)}}(e,l)):(s||(o=function(e,t){var i,r;return r=t,a.isBuffer(r)||r instanceof n||"string"==typeof t||void 0===t||e.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i}(l,t)),o?e.emit("error",o):l.objectMode||t&&t.length>0?("string"==typeof t||l.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),r?l.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):f(e,l,t,!0):l.ended?e.emit("error",new Error("stream.push() after EOF")):(l.reading=!1,l.decoder&&!i?(t=l.decoder.write(t),l.objectMode||0!==t.length?f(e,l,t,!1):y(e,l)):f(e,l,t,!1))):r||(l.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(l)}function f(e,t,i,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",i),e.read(0)):(t.length+=t.objectMode?1:i.length,r?t.buffer.unshift(i):t.buffer.push(i),t.needReadable&&g(e)),y(e,t)}Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),h.prototype.destroy=Qt.destroy,h.prototype._undestroy=Qt.undestroy,h.prototype._destroy=function(e,t){this.push(null),t(e)},h.prototype.push=function(e,t){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=a.from(e,t),t=""),i=!0),m(this,e,t,!1,i)},h.prototype.unshift=function(e){return m(this,e,null,!0,!1)},h.prototype.isPaused=function(){return!1===this._readableState.flowing},h.prototype.setEncoding=function(e){return l||(l=S({}).StringDecoder),this._readableState.decoder=new l(e),this._readableState.encoding=e,this};function d(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function g(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?ft.nextTick(b,e):b(e))}function b(e){u("emit readable"),e.emit("readable"),w(e)}function y(e,t){t.readingMore||(t.readingMore=!0,ft.nextTick(v,e,t))}function v(e,t){for(var i=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(u("maybeReadMore read 0"),e.read(0),i!==t.length);)i=t.length;t.readingMore=!1}function _(e){u("readable nexttick read 0"),e.read(0)}function x(e,t){t.reading||(u("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),w(e),t.flowing&&!t.reading&&e.read(0)}function w(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function E(e,t){return 0===t.length?null:(t.objectMode?i=t.buffer.shift():!e||e>=t.length?(i=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):i=function(e,t,i){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():i?function(e,t){var i=t.head,r=1,s=i.data;for(e-=s.length;i=i.next;){var a=i.data,n=e>a.length?a.length:e;if(n===a.length?s+=a:s+=a.slice(0,e),0==(e-=n)){n===a.length?(++r,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=a.slice(n));break}++r}return t.length-=r,s}(e,t):function(e,t){var i=a.allocUnsafe(e),r=t.head,s=1;for(r.data.copy(i),e-=r.data.length;r=r.next;){var n=r.data,o=e>n.length?n.length:e;if(n.copy(i,i.length-e,0,o),0==(e-=o)){o===n.length?(++s,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=n.slice(o));break}++s}return t.length-=s,i}(e,t),r}(e,t.buffer,t.decoder),i);var i}function A(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,ft.nextTick(T,t,e))}function T(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function Q(e,t){for(var i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1}h.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,i=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?A(this):g(this),null;if(0===(e=d(e,t))&&t.ended)return 0===t.length&&A(this),null;var r,s=t.needReadable;return u("need readable",s),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",s=!0),t.ended||t.reading?u("reading or ended",s=!1):s&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=d(i,t))),null===(r=e>0?E(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),i!==e&&t.ended&&A(this)),null!==r&&this.emit("data",r),r},h.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},h.prototype.pipe=function(e,i){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,u("pipe count=%d opts=%j",a.pipesCount,i);var n=i&&!1===i.end||e===t.stdout||e===t.stderr?g:o;function o(){u("onend"),e.end()}a.endEmitted?ft.nextTick(n):r.once("end",n),e.on("unpipe",(function t(i,s){u("onunpipe"),i===r&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,u("cleanup"),e.removeListener("close",f),e.removeListener("finish",d),e.removeListener("drain",l),e.removeListener("error",m),e.removeListener("unpipe",t),r.removeListener("end",o),r.removeListener("end",g),r.removeListener("data",h),c=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}));var l=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,w(e))}}(r);e.on("drain",l);var c=!1,p=!1;function h(t){u("ondata"),p=!1,!1!==e.write(t)||p||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==Q(a.pipes,e))&&!c&&(u("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function m(t){u("onerror",t),g(),e.removeListener("error",m),0===s(e,"error")&&e.emit("error",t)}function f(){e.removeListener("finish",d),g()}function d(){u("onfinish"),e.removeListener("close",f),g()}function g(){u("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,i){if("function"==typeof e.prependListener)return e.prependListener("error",i);e._events&&e._events.error?gt(e._events.error)?e._events.error.unshift(i):e._events.error=[i,e._events.error]:e.on("error",i)}(e,0,m),e.once("close",f),e.once("finish",d),e.emit("pipe",r),a.flowing||(u("pipe resume"),r.resume()),e},h.prototype.unpipe=function(e){var t=this._readableState,i={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,i)),this;if(!e){var r=t.pipes,s=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<s;a++)r[a].emit("unpipe",this,i);return this}var n=Q(t.pipes,e);return-1===n||(t.pipes.splice(n,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,i)),this},h.prototype.on=function(e,t){var i=bt.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&g(this):ft.nextTick(_,this))}return i},h.prototype.addListener=h.prototype.on,h.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,ft.nextTick(x,e,t))}(this,e)),this},h.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this},h.prototype.wrap=function(e){var t=this,i=this._readableState,r=!1;for(var s in e.on("end",(function(){if(u("wrapped end"),i.decoder&&!i.ended){var e=i.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(s){u("wrapped data"),i.decoder&&(s=i.decoder.write(s)),i.objectMode&&null==s||(i.objectMode||s&&s.length)&&(t.push(s)||(r=!0,e.pause()))})),e)void 0===this[s]&&"function"==typeof e[s]&&(this[s]=function(t){return function(){return e[t].apply(e,arguments)}}(s));for(var a=0;a<c.length;a++)e.on(c[a],this.emit.bind(this,c[a]));return this._read=function(t){u("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(h.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),h._fromList=E}).call(this)}).call(this,ve,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})})),S=t((function(e,t){"use strict";var i=yt.Buffer,r=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=o,this.end=l,t=4;break;case"utf8":this.fillLast=n,t=4;break;case"base64":this.text=u,this.end=c,t=3;break;default:return this.write=p,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function n(e){var t=this.lastTotal-this.lastNeed,i=function(e,t,i){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==i?i:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function o(e,t){if((e.length-t)%2==0){var i=e.toString("utf16le",t);if(i){var r=i.charCodeAt(i.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,i)}return t}function u(e,t){var i=(e.length-t)%3;return 0===i?e.toString("base64",t):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-i))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,i;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<e.length?t?t+this.text(e,i):this.text(e,i):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},s.prototype.text=function(e,t){var i=function(e,t,i){var r=t.length-1;if(r<i)return 0;var s=a(t[r]);return s>=0?(s>0&&(e.lastNeed=s-1),s):--r<i||-2===s?0:(s=a(t[r]))>=0?(s>0&&(e.lastNeed=s-2),s):--r<i||-2===s?0:(s=a(t[r]))>=0?(s>0&&(2===s?s=0:e.lastNeed=s-3),s):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=i;var r=e.length-(i-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}})),O=t((function(e,t){"use strict";var i=Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t};e.exports=u;var r=Object.create(At);r.inherits=X;var s=T({}),a=Q({});r.inherits(u,s);for(var n=i(a.prototype),o=0;o<n.length;o++){var l=n[o];u.prototype[l]||(u.prototype[l]=a.prototype[l])}function u(e){if(!(this instanceof u))return new u(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",c)}function c(){this.allowHalfOpen||this._writableState.ended||ft.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),u.prototype._destroy=function(e,t){this.push(null),this.end(),ft.nextTick(t,e)}})),Q=t((function(e,t){(function(t,i,r){(function(){"use strict";function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,i){var r=e.entry;for(e.entry=null;r;){var s=r.callback;t.pendingcb--,s(void 0),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=f;var a,n=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:ft.nextTick;f.WritableState=m;var o=Object.create(At);o.inherits=X;var l,u={deprecate:Be},c=yt.Buffer,p=i.Uint8Array||function(){};function h(){}function m(e,t){a=a||O({}),e=e||{};var i=t instanceof a;this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,o=e.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(o||0===o)?o:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===e.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var i=e._writableState,r=i.sync,s=i.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(i),t)!function(e,t,i,r,s){--t.pendingcb,i?(ft.nextTick(s,r),ft.nextTick(_,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(s(r),e._writableState.errorEmitted=!0,e.emit("error",r),_(e,t))}(e,i,r,t,s);else{var a=y(i);a||i.corked||i.bufferProcessing||!i.bufferedRequest||b(e,i),r?n(g,e,i,a,s):g(e,i,a,s)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function f(e){if(a=a||O({}),!(l.call(f,this)||this instanceof a))return new f(e);this._writableState=new m(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),bt.call(this)}function d(e,t,i,r,s,a,n){t.writelen=r,t.writecb=n,t.writing=!0,t.sync=!0,i?e._writev(s,t.onwrite):e._write(s,a,t.onwrite),t.sync=!1}function g(e,t,i,r){i||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),_(e,t)}function b(e,t){t.bufferProcessing=!0;var i=t.bufferedRequest;if(e._writev&&i&&i.next){var r=t.bufferedRequestCount,a=new Array(r),n=t.corkedRequestsFree;n.entry=i;for(var o=0,l=!0;i;)a[o]=i,i.isBuf||(l=!1),i=i.next,o+=1;a.allBuffers=l,d(e,t,!0,t.length,a,"",n.finish),t.pendingcb++,t.lastBufferedRequest=null,n.next?(t.corkedRequestsFree=n.next,n.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;i;){var u=i.chunk,c=i.encoding,p=i.callback;if(d(e,t,!1,t.objectMode?1:u.length,u,c,p),i=i.next,t.bufferedRequestCount--,t.writing)break}null===i&&(t.lastBufferedRequest=null)}t.bufferedRequest=i,t.bufferProcessing=!1}function y(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function v(e,t){e._final((function(i){t.pendingcb--,i&&e.emit("error",i),t.prefinished=!0,e.emit("prefinish"),_(e,t)}))}function _(e,t){var i=y(t);return i&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,ft.nextTick(v,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),i}o.inherits(f,bt),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(m.prototype,"buffer",{get:u.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===f&&e&&e._writableState instanceof m}})):l=function(e){return e instanceof this},f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},f.prototype.write=function(e,t,i){var r,s=this._writableState,a=!1,n=!s.objectMode&&(r=e,c.isBuffer(r)||r instanceof p);return n&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(i=t,t=null),n?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof i&&(i=h),s.ended?function(e,t){var i=new Error("write after end");e.emit("error",i),ft.nextTick(t,i)}(this,i):(n||function(e,t,i,r){var s=!0,a=!1;return null===i?a=new TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),ft.nextTick(r,a),s=!1),s}(this,s,e,i))&&(s.pendingcb++,a=function(e,t,i,r,s,a){if(!i){var n=function(e,t,i){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,i)),t}(t,r,s);r!==n&&(i=!0,s="buffer",r=n)}var o=t.objectMode?1:r.length;t.length+=o;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:s,isBuf:i,callback:a,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else d(e,t,!1,o,r,s,a);return l}(this,s,n,e,t,i)),a},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||b(this,e))},f.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),f.prototype._write=function(e,t,i){i(new Error("_write() is not implemented"))},f.prototype._writev=null,f.prototype.end=function(e,t,i){var r=this._writableState;"function"==typeof e?(i=e,e=null,t=null):"function"==typeof t&&(i=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,i){t.ending=!0,_(e,t),i&&(t.finished?ft.nextTick(i):e.once("finish",i)),t.ended=!0,e.writable=!1}(this,r,i)},Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),f.prototype.destroy=Qt.destroy,f.prototype._undestroy=Qt.undestroy,f.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this)}).call(this,ve,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},k({}).setImmediate)})),k=t((function(e,t){(function(e,i){(function(){var r=ve.nextTick,s=(Function.prototype.apply,Array.prototype.slice),a={},n=0;function o(e,t){this._id=e,this._clearFn=t}o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.setImmediate="function"==typeof e?e:function(e){var i=n++,o=!(arguments.length<2)&&s.call(arguments,1);return a[i]=!0,r((function(){a[i]&&(o?e.apply(null,o):e.call(null),t.clearImmediate(i))})),i},t.clearImmediate="function"==typeof i?i:function(e){delete a[e]}}).call(this)}).call(this,k({}).setImmediate,k({}).clearImmediate)})),C=t((function(e,t){(function(t,i){(function(){"use strict";var r;e.exports=_,_.ReadableState=v,M.EventEmitter;var s,a=function(e,t){return e.listeners(t).length},n=L({}).Buffer,o=i.Uint8Array||function(){};s=ue&&ue.debuglog?ue.debuglog("stream"):function(){};var l,u,c,p=Me.getHighWaterMark,h=Re.codes,m=h.ERR_INVALID_ARG_TYPE,f=h.ERR_STREAM_PUSH_AFTER_EOF,d=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;X(_,K);var b=Ne.errorOrDestroy,y=["error","close","destroy","pause","resume"];function v(e,t,i){r=r||D({}),e=e||{},"boolean"!=typeof i&&(i=t instanceof r),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=p(this,e,"readableHighWaterMark",i),this.buffer=new ye,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(l||(l=P({}).StringDecoder),this.decoder=new l(e.encoding),this.encoding=e.encoding)}function _(e){if(r=r||D({}),!(this instanceof _))return new _(e);var t=this instanceof r;this._readableState=new v(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),K.call(this)}function x(e,t,i,r,a){s("readableAddChunk",t);var l,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(s("onEofChunk"),!t.ended){if(t.decoder){var i=t.decoder.end();i&&i.length&&(t.buffer.push(i),t.length+=t.objectMode?1:i.length)}t.ended=!0,t.sync?A(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,T(e)))}}(e,u);else if(a||(l=function(e,t){var i,r;return r=t,n.isBuffer(r)||r instanceof o||"string"==typeof t||void 0===t||e.objectMode||(i=new m("chunk",["string","Buffer","Uint8Array"],t)),i}(u,t)),l)b(e,l);else if(u.objectMode||t&&t.length>0)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===n.prototype||(t=function(e){return n.from(e)}(t)),r)u.endEmitted?b(e,new g):w(e,u,t,!0);else if(u.ended)b(e,new f);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!i?(t=u.decoder.write(t),u.objectMode||0!==t.length?w(e,u,t,!1):S(e,u)):w(e,u,t,!1)}else r||(u.reading=!1,S(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function w(e,t,i,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",i)):(t.length+=t.objectMode?1:i.length,r?t.buffer.unshift(i):t.buffer.push(i),t.needReadable&&A(e)),S(e,t)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=Ne.destroy,_.prototype._undestroy=Ne.undestroy,_.prototype._destroy=function(e,t){t(e)},_.prototype.push=function(e,t){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=n.from(e,t),t=""),i=!0),x(this,e,t,!1,i)},_.prototype.unshift=function(e){return x(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){l||(l=P({}).StringDecoder);var t=new l(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,r="";null!==i;)r+=t.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};function E(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function A(e){var i=e._readableState;s("emitReadable",i.needReadable,i.emittedReadable),i.needReadable=!1,i.emittedReadable||(s("emitReadable",i.flowing),i.emittedReadable=!0,t.nextTick(T,e))}function T(e){var t=e._readableState;s("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,R(e)}function S(e,i){i.readingMore||(i.readingMore=!0,t.nextTick(O,e,i))}function O(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var i=t.length;if(s("maybeReadMore read 0"),e.read(0),i===t.length)break}t.readingMore=!1}function Q(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function k(e){s("readable nexttick read 0"),e.read(0)}function C(e,t){s("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),R(e),t.flowing&&!t.reading&&e.read(0)}function R(e){var t=e._readableState;for(s("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){return 0===t.length?null:(t.objectMode?i=t.buffer.shift():!e||e>=t.length?(i=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):i=t.buffer.consume(e,t.decoder),i);var i}function B(e){var i=e._readableState;s("endReadable",i.endEmitted),i.endEmitted||(i.ended=!0,t.nextTick(U,i,e))}function U(e,t){if(s("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var i=t._writableState;(!i||i.autoDestroy&&i.finished)&&t.destroy()}}function F(e,t){for(var i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1}_.prototype.read=function(e){s("read",e),e=parseInt(e,10);var t=this._readableState,i=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return s("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):A(this),null;if(0===(e=E(e,t))&&t.ended)return 0===t.length&&B(this),null;var r,a=t.needReadable;return s("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&s("length less than watermark",a=!0),t.ended||t.reading?s("reading or ended",a=!1):a&&(s("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=E(i,t))),null===(r=e>0?j(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),i!==e&&t.ended&&B(this)),null!==r&&this.emit("data",r),r},_.prototype._read=function(e){b(this,new d("_read()"))},_.prototype.pipe=function(e,i){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,s("pipe count=%d opts=%j",n.pipesCount,i);var o=i&&!1===i.end||e===t.stdout||e===t.stderr?d:l;function l(){s("onend"),e.end()}n.endEmitted?t.nextTick(o):r.once("end",o),e.on("unpipe",(function t(i,a){s("onunpipe"),i===r&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,s("cleanup"),e.removeListener("close",m),e.removeListener("finish",f),e.removeListener("drain",u),e.removeListener("error",h),e.removeListener("unpipe",t),r.removeListener("end",l),r.removeListener("end",d),r.removeListener("data",p),c=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}));var u=function(e){return function(){var t=e._readableState;s("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,R(e))}}(r);e.on("drain",u);var c=!1;function p(t){s("ondata");var i=e.write(t);s("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==F(n.pipes,e))&&!c&&(s("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function h(t){s("onerror",t),d(),e.removeListener("error",h),0===a(e,"error")&&b(e,t)}function m(){e.removeListener("finish",f),d()}function f(){s("onfinish"),e.removeListener("close",m),d()}function d(){s("unpipe"),r.unpipe(e)}return r.on("data",p),function(e,t,i){if("function"==typeof e.prependListener)return e.prependListener("error",i);e._events&&e._events.error?Array.isArray(e._events.error)?e._events.error.unshift(i):e._events.error=[i,e._events.error]:e.on("error",i)}(e,0,h),e.once("close",m),e.once("finish",f),e.emit("pipe",r),n.flowing||(s("pipe resume"),r.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,i={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,i)),this;if(!e){var r=t.pipes,s=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<s;a++)r[a].emit("unpipe",this,{hasUnpiped:!1});return this}var n=F(t.pipes,e);return-1===n||(t.pipes.splice(n,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,i)),this},_.prototype.on=function(e,i){var r=K.prototype.on.call(this,e,i),a=this._readableState;return"data"===e?(a.readableListening=this.listenerCount("readable")>0,!1!==a.flowing&&this.resume()):"readable"===e&&(a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.flowing=!1,a.emittedReadable=!1,s("on readable",a.length,a.reading),a.length?A(this):a.reading||t.nextTick(k,this))),r},_.prototype.addListener=_.prototype.on,_.prototype.removeListener=function(e,i){var r=K.prototype.removeListener.call(this,e,i);return"readable"===e&&t.nextTick(Q,this),r},_.prototype.removeAllListeners=function(e){var i=K.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||t.nextTick(Q,this),i},_.prototype.resume=function(){var e=this._readableState;return e.flowing||(s("resume"),e.flowing=!e.readableListening,function(e,i){i.resumeScheduled||(i.resumeScheduled=!0,t.nextTick(C,e,i))}(this,e)),e.paused=!1,this},_.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},_.prototype.wrap=function(e){var t=this,i=this._readableState,r=!1;for(var a in e.on("end",(function(){if(s("wrapped end"),i.decoder&&!i.ended){var e=i.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(a){s("wrapped data"),i.decoder&&(a=i.decoder.write(a)),i.objectMode&&null==a||(i.objectMode||a&&a.length)&&(t.push(a)||(r=!0,e.pause()))})),e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var n=0;n<y.length;n++)e.on(y[n],this.emit.bind(this,y[n]));return this._read=function(t){s("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(_.prototype[Symbol.asyncIterator]=function(){return void 0===u&&(u=N({})),u(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),_._fromList=j,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(_.from=function(e,t){return void 0===c&&(c=I({})),c(_,e,t)})}).call(this)}).call(this,ve,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})})),I=t((function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}})),N=t((function(e,t){(function(t){(function(){"use strict";var i;function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s=R({}),a=Symbol("lastResolve"),n=Symbol("lastReject"),o=Symbol("error"),l=Symbol("ended"),u=Symbol("lastPromise"),c=Symbol("handlePromise"),p=Symbol("stream");function h(e,t){return{value:e,done:t}}function m(e){var t=e[a];if(null!==t){var i=e[p].read();null!==i&&(e[u]=null,e[a]=null,e[n]=null,t(h(i,!1)))}}var f=Object.getPrototypeOf((function(){})),d=Object.setPrototypeOf((r(i={get stream(){return this[p]},next:function(){var e=this,i=this[o];if(null!==i)return Promise.reject(i);if(this[l])return Promise.resolve(h(void 0,!0));if(this[p].destroyed)return new Promise((function(i,r){t.nextTick((function(){e[o]?r(e[o]):i(h(void 0,!0))}))}));var r,s=this[u];if(s)r=new Promise(function(e,t){return function(i,r){e.then((function(){t[l]?i(h(void 0,!0)):t[c](i,r)}),r)}}(s,this));else{var a=this[p].read();if(null!==a)return Promise.resolve(h(a,!1));r=new Promise(this[c])}return this[u]=r,r}},Symbol.asyncIterator,(function(){return this})),r(i,"return",(function(){var e=this;return new Promise((function(t,i){e[p].destroy(null,(function(e){e?i(e):t(h(void 0,!0))}))}))})),i),f);e.exports=function(e){var i,f=Object.create(d,(r(i={},p,{value:e,writable:!0}),r(i,a,{value:null,writable:!0}),r(i,n,{value:null,writable:!0}),r(i,o,{value:null,writable:!0}),r(i,l,{value:e._readableState.endEmitted,writable:!0}),r(i,c,{value:function(e,t){var i=f[p].read();i?(f[u]=null,f[a]=null,f[n]=null,e(h(i,!1))):(f[a]=e,f[n]=t)},writable:!0}),i));return f[u]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=f[n];return null!==t&&(f[u]=null,f[a]=null,f[n]=null,t(e)),void(f[o]=e)}var i=f[a];null!==i&&(f[u]=null,f[a]=null,f[n]=null,i(h(void 0,!0))),f[l]=!0})),e.on("readable",function(e){t.nextTick(m,e)}.bind(null,f)),f}}).call(this)}).call(this,ve)})),R=t((function(e,t){"use strict";var i=Re.codes.ERR_STREAM_PREMATURE_CLOSE;function r(){}e.exports=function e(t,s,a){if("function"==typeof s)return e(t,null,s);s||(s={}),a=function(e){var t=!1;return function(){if(!t){t=!0;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];e.apply(this,r)}}}(a||r);var n=s.readable||!1!==s.readable&&t.readable,o=s.writable||!1!==s.writable&&t.writable,l=function(){t.writable||c()},u=t._writableState&&t._writableState.finished,c=function(){o=!1,u=!0,n||a.call(t)},p=t._readableState&&t._readableState.endEmitted,h=function(){n=!1,p=!0,o||a.call(t)},m=function(e){a.call(t,e)},f=function(){var e;return n&&!p?(t._readableState&&t._readableState.ended||(e=new i),a.call(t,e)):o&&!u?(t._writableState&&t._writableState.ended||(e=new i),a.call(t,e)):void 0},d=function(){t.req.on("finish",c)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",c),t.on("abort",f),t.req?d():t.on("request",d)):o&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",h),t.on("finish",c),!1!==s.error&&t.on("error",m),t.on("close",f),function(){t.removeListener("complete",c),t.removeListener("abort",f),t.removeListener("request",d),t.req&&t.req.removeListener("finish",c),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",c),t.removeListener("end",h),t.removeListener("error",m),t.removeListener("close",f)}}})),P=t((function(e,t){"use strict";var i=Ue.Buffer,r=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=o,this.end=l,t=4;break;case"utf8":this.fillLast=n,t=4;break;case"base64":this.text=u,this.end=c,t=3;break;default:return this.write=p,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function n(e){var t=this.lastTotal-this.lastNeed,i=function(e,t,i){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==i?i:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function o(e,t){if((e.length-t)%2==0){var i=e.toString("utf16le",t);if(i){var r=i.charCodeAt(i.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,i)}return t}function u(e,t){var i=(e.length-t)%3;return 0===i?e.toString("base64",t):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-i))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,i;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<e.length?t?t+this.text(e,i):this.text(e,i):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},s.prototype.text=function(e,t){var i=function(e,t,i){var r=t.length-1;if(r<i)return 0;var s=a(t[r]);return s>=0?(s>0&&(e.lastNeed=s-1),s):--r<i||-2===s?0:(s=a(t[r]))>=0?(s>0&&(e.lastNeed=s-2),s):--r<i||-2===s?0:(s=a(t[r]))>=0?(s>0&&(2===s?s=0:e.lastNeed=s-3),s):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=i;var r=e.length-(i-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}})),D=t((function(e,t){(function(t){(function(){"use strict";var i=Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t};e.exports=l;var r=C({}),s=j({});X(l,r);for(var a=i(s.prototype),n=0;n<a.length;n++){var o=a[n];l.prototype[o]||(l.prototype[o]=s.prototype[o])}function l(e){if(!(this instanceof l))return new l(e);r.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||t.nextTick(c,this)}function c(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,ve)})),j=t((function(e,t){(function(t,i){(function(){"use strict";function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,i){var r=e.entry;for(e.entry=null;r;){var s=r.callback;t.pendingcb--,s(void 0),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var s;e.exports=w,w.WritableState=x;var a,n={deprecate:Be},o=L({}).Buffer,l=i.Uint8Array||function(){},u=Me.getHighWaterMark,c=Re.codes,p=c.ERR_INVALID_ARG_TYPE,h=c.ERR_METHOD_NOT_IMPLEMENTED,m=c.ERR_MULTIPLE_CALLBACK,f=c.ERR_STREAM_CANNOT_PIPE,d=c.ERR_STREAM_DESTROYED,g=c.ERR_STREAM_NULL_VALUES,b=c.ERR_STREAM_WRITE_AFTER_END,y=c.ERR_UNKNOWN_ENCODING,v=Ne.errorOrDestroy;function _(){}function x(e,i,a){s=s||D({}),e=e||{},"boolean"!=typeof a&&(a=i instanceof s),this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=u(this,e,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,i){var r=e._writableState,s=r.sync,a=r.writecb;if("function"!=typeof a)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),i)!function(e,i,r,s,a){--i.pendingcb,r?(t.nextTick(a,s),t.nextTick(Q,e,i),e._writableState.errorEmitted=!0,v(e,s)):(a(s),e._writableState.errorEmitted=!0,v(e,s),Q(e,i))}(e,r,s,i,a);else{var n=S(r)||e.destroyed;n||r.corked||r.bufferProcessing||!r.bufferedRequest||T(e,r),s?t.nextTick(A,e,r,n,a):A(e,r,n,a)}}(i,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function w(e){var t=this instanceof(s=s||D({}));if(!t&&!a.call(w,this))return new w(e);this._writableState=new x(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),K.call(this)}function E(e,t,i,r,s,a,n){t.writelen=r,t.writecb=n,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new d("write")):i?e._writev(s,t.onwrite):e._write(s,a,t.onwrite),t.sync=!1}function A(e,t,i,r){i||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),Q(e,t)}function T(e,t){t.bufferProcessing=!0;var i=t.bufferedRequest;if(e._writev&&i&&i.next){var s=t.bufferedRequestCount,a=new Array(s),n=t.corkedRequestsFree;n.entry=i;for(var o=0,l=!0;i;)a[o]=i,i.isBuf||(l=!1),i=i.next,o+=1;a.allBuffers=l,E(e,t,!0,t.length,a,"",n.finish),t.pendingcb++,t.lastBufferedRequest=null,n.next?(t.corkedRequestsFree=n.next,n.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;i;){var u=i.chunk,c=i.encoding,p=i.callback;if(E(e,t,!1,t.objectMode?1:u.length,u,c,p),i=i.next,t.bufferedRequestCount--,t.writing)break}null===i&&(t.lastBufferedRequest=null)}t.bufferedRequest=i,t.bufferProcessing=!1}function S(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function O(e,t){e._final((function(i){t.pendingcb--,i&&v(e,i),t.prefinished=!0,e.emit("prefinish"),Q(e,t)}))}function Q(e,i){var r=S(i);if(r&&(function(e,i){i.prefinished||i.finalCalled||("function"!=typeof e._final||i.destroyed?(i.prefinished=!0,e.emit("prefinish")):(i.pendingcb++,i.finalCalled=!0,t.nextTick(O,e,i)))}(e,i),0===i.pendingcb&&(i.finished=!0,e.emit("finish"),i.autoDestroy))){var s=e._readableState;(!s||s.autoDestroy&&s.endEmitted)&&e.destroy()}return r}X(w,K),x.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(x.prototype,"buffer",{get:n.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===w&&e&&e._writableState instanceof x}})):a=function(e){return e instanceof this},w.prototype.pipe=function(){v(this,new f)},w.prototype.write=function(e,i,r){var s,a=this._writableState,n=!1,u=!a.objectMode&&(s=e,o.isBuffer(s)||s instanceof l);return u&&!o.isBuffer(e)&&(e=function(e){return o.from(e)}(e)),"function"==typeof i&&(r=i,i=null),u?i="buffer":i||(i=a.defaultEncoding),"function"!=typeof r&&(r=_),a.ending?function(e,i){var r=new b;v(e,r),t.nextTick(i,r)}(this,r):(u||function(e,i,r,s){var a;return null===r?a=new g:"string"==typeof r||i.objectMode||(a=new p("chunk",["string","Buffer"],r)),!a||(v(e,a),t.nextTick(s,a),!1)}(this,a,e,r))&&(a.pendingcb++,n=function(e,t,i,r,s,a){if(!i){var n=function(e,t,i){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=o.from(t,i)),t}(t,r,s);r!==n&&(i=!0,s="buffer",r=n)}var l=t.objectMode?1:r.length;t.length+=l;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:s,isBuf:i,callback:a,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else E(e,t,!1,l,r,s,a);return u}(this,a,u,e,i,r)),n},w.prototype.cork=function(){this._writableState.corked++},w.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||T(this,e))},w.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new y(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),w.prototype._write=function(e,t,i){i(new h("_write()"))},w.prototype._writev=null,w.prototype.end=function(e,i,r){var s=this._writableState;return"function"==typeof e?(r=e,e=null,i=null):"function"==typeof i&&(r=i,i=null),null!=e&&this.write(e,i),s.corked&&(s.corked=1,this.uncork()),s.ending||function(e,i,r){i.ending=!0,Q(e,i),r&&(i.finished?t.nextTick(r):e.once("finish",r)),i.ended=!0,e.writable=!1}(this,s,r),this},Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),w.prototype.destroy=Ne.destroy,w.prototype._undestroy=Ne.undestroy,w.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,ve,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})})),L=t((function(e,t){(function(e){(function(){"use strict";t.Buffer=i,t.SlowBuffer=function(e){return+e!=e&&(e=0),i.alloc(+e)},t.INSPECT_MAX_BYTES=50;function e(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=i.prototype,t}function i(e,t,i){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return a(e)}return r(e,t,i)}function r(t,r,s){if("string"==typeof t)return function(t,r){if("string"==typeof r&&""!==r||(r="utf8"),!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var s=0|l(t,r),a=e(s),n=a.write(t,r);return n!==s&&(a=a.slice(0,n)),a}(t,r);if(ArrayBuffer.isView(t))return n(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(D(t,ArrayBuffer)||t&&D(t.buffer,ArrayBuffer))return function(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var s;return(s=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r)).__proto__=i.prototype,s}(t,r,s);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var a=t.valueOf&&t.valueOf();if(null!=a&&a!==t)return i.from(a,r,s);var u=function(t){if(i.isBuffer(t)){var r=0|o(t.length),s=e(r);return 0===s.length||t.copy(s,0,0,r),s}return void 0!==t.length?"number"!=typeof t.length||j(t.length)?e(0):n(t):"Buffer"===t.type&&Array.isArray(t.data)?n(t.data):void 0}(t);if(u)return u;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return i.from(t[Symbol.toPrimitive]("string"),r,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function a(t){return s(t),e(t<0?0:0|o(t))}function n(t){for(var i=t.length<0?0:0|o(t.length),r=e(i),s=0;s<i;s+=1)r[s]=255&t[s];return r}function o(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e}function l(e,t){if(i.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||D(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===r)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return R(e).length;default:if(a)return s?-1:N(e).length;t=(""+t).toLowerCase(),a=!0}}function u(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function c(e,t,r,s,a){if(0===e.length)return-1;if("string"==typeof r?(s=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),j(r=+r)&&(r=a?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(a)return-1;r=e.length-1}else if(r<0){if(!a)return-1;r=0}if("string"==typeof t&&(t=i.from(t,s)),i.isBuffer(t))return 0===t.length?-1:p(e,t,r,s,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):p(e,[t],r,s,a);throw new TypeError("val must be string, number or Buffer")}function p(e,t,i,r,s){var a,n=1,o=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;n=2,o/=2,l/=2,i/=2}function u(e,t){return 1===n?e[t]:e.readUInt16BE(t*n)}if(s){var c=-1;for(a=i;a<o;a++)if(u(e,a)===u(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===l)return c*n}else-1!==c&&(a-=a-c),c=-1}else for(i+l>o&&(i=o-l),a=i;a>=0;a--){for(var p=!0,h=0;h<l;h++)if(u(e,a+h)!==u(t,h)){p=!1;break}if(p)return a}return-1}function h(e,t,i,r){i=Number(i)||0;var s=e.length-i;r?(r=Number(r))>s&&(r=s):r=s;var a=t.length;r>a/2&&(r=a/2);for(var n=0;n<r;++n){var o=parseInt(t.substr(2*n,2),16);if(j(o))return n;e[i+n]=o}return n}function m(e,t,i,r){return P(N(t,e.length-i),e,i,r)}function f(e,t,i,r){return P(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,r)}function d(e,t,i,r){return f(e,t,i,r)}function g(e,t,i,r){return P(R(t),e,i,r)}function b(e,t,i,r){return P(function(e,t){for(var i,r,s,a=[],n=0;n<e.length&&!((t-=2)<0);++n)r=(i=e.charCodeAt(n))>>8,s=i%256,a.push(s),a.push(r);return a}(t,e.length-i),e,i,r)}function y(e,t,i){return 0===t&&i===e.length?Z.fromByteArray(e):Z.fromByteArray(e.slice(t,i))}function v(e,t,i){i=Math.min(e.length,i);for(var r=[],s=t;s<i;){var a,n,o,l,u=e[s],c=null,p=u>239?4:u>223?3:u>191?2:1;if(s+p<=i)switch(p){case 1:u<128&&(c=u);break;case 2:128==(192&(a=e[s+1]))&&(l=(31&u)<<6|63&a)>127&&(c=l);break;case 3:a=e[s+1],n=e[s+2],128==(192&a)&&128==(192&n)&&(l=(15&u)<<12|(63&a)<<6|63&n)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:a=e[s+1],n=e[s+2],o=e[s+3],128==(192&a)&&128==(192&n)&&128==(192&o)&&(l=(15&u)<<18|(63&a)<<12|(63&n)<<6|63&o)>65535&&l<1114112&&(c=l)}null===c?(c=65533,p=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),s+=p}return function(e){var t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);for(var i="",r=0;r<t;)i+=String.fromCharCode.apply(String,e.slice(r,r+=_));return i}(r)}t.kMaxLength=2147483647,i.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(e,t,i){return r(e,t,i)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(t,i,r){return function(t,i,r){return s(t),t<=0?e(t):void 0!==i?"string"==typeof r?e(t).fill(i,r):e(t).fill(i):e(t)}(t,i,r)},i.allocUnsafe=function(e){return a(e)},i.allocUnsafeSlow=function(e){return a(e)},i.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==i.prototype},i.compare=function(e,t){if(D(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),D(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,s=t.length,a=0,n=Math.min(r,s);a<n;++a)if(e[a]!==t[a]){r=e[a],s=t[a];break}return r<s?-1:s<r?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var s=i.allocUnsafe(t),a=0;for(r=0;r<e.length;++r){var n=e[r];if(D(n,Uint8Array)&&(n=i.from(n)),!i.isBuffer(n))throw new TypeError('"list" argument must be an Array of Buffers');n.copy(s,a),a+=n.length}return s},i.byteLength=l,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)u(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)u(this,t,t+3),u(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)u(this,t,t+7),u(this,t+1,t+6),u(this,t+2,t+5),u(this,t+3,t+4);return this},i.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?v(this,0,e):function(e,t,i){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return E(this,t,i);case"utf8":case"utf-8":return v(this,t,i);case"ascii":return x(this,t,i);case"latin1":case"binary":return w(this,t,i);case"base64":return y(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,i);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",i=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(e+=" ... "),"<Buffer "+e+">"},i.prototype.compare=function(e,t,r,s,a){if(D(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===s&&(s=0),void 0===a&&(a=this.length),t<0||r>e.length||s<0||a>this.length)throw new RangeError("out of range index");if(s>=a&&t>=r)return 0;if(s>=a)return-1;if(t>=r)return 1;if(this===e)return 0;for(var n=(a>>>=0)-(s>>>=0),o=(r>>>=0)-(t>>>=0),l=Math.min(n,o),u=this.slice(s,a),c=e.slice(t,r),p=0;p<l;++p)if(u[p]!==c[p]){n=u[p],o=c[p];break}return n<o?-1:o<n?1:0},i.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},i.prototype.indexOf=function(e,t,i){return c(this,e,t,i,!0)},i.prototype.lastIndexOf=function(e,t,i){return c(this,e,t,i,!1)},i.prototype.write=function(e,t,i,r){if(void 0===t)r="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)r=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var s=this.length-t;if((void 0===i||i>s)&&(i=s),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return h(this,e,t,i);case"utf8":case"utf-8":return m(this,e,t,i);case"ascii":return f(this,e,t,i);case"latin1":case"binary":return d(this,e,t,i);case"base64":return g(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,i);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function x(e,t,i){var r="";i=Math.min(e.length,i);for(var s=t;s<i;++s)r+=String.fromCharCode(127&e[s]);return r}function w(e,t,i){var r="";i=Math.min(e.length,i);for(var s=t;s<i;++s)r+=String.fromCharCode(e[s]);return r}function E(e,t,i){var r=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>r)&&(i=r);for(var s="",a=t;a<i;++a)s+=I(e[a]);return s}function A(e,t,i){for(var r=e.slice(t,i),s="",a=0;a<r.length;a+=2)s+=String.fromCharCode(r[a]+256*r[a+1]);return s}function T(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function S(e,t,r,s,a,n){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<n)throw new RangeError('"value" argument is out of bounds');if(r+s>e.length)throw new RangeError("Index out of range")}function O(e,t,i,r,s,a){if(i+r>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function Q(e,t,i,r,s){return t=+t,i>>>=0,s||O(e,0,i,4),le.write(e,t,i,r,23,4),i+4}function k(e,t,i,r,s){return t=+t,i>>>=0,s||O(e,0,i,8),le.write(e,t,i,r,52,8),i+8}i.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var s=this.subarray(e,t);return s.__proto__=i.prototype,s},i.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||T(e,t,this.length);for(var r=this[e],s=1,a=0;++a<t&&(s*=256);)r+=this[e+a]*s;return r},i.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||T(e,t,this.length);for(var r=this[e+--t],s=1;t>0&&(s*=256);)r+=this[e+--t]*s;return r},i.prototype.readUInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||T(e,t,this.length);for(var r=this[e],s=1,a=0;++a<t&&(s*=256);)r+=this[e+a]*s;return r>=(s*=128)&&(r-=Math.pow(2,8*t)),r},i.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||T(e,t,this.length);for(var r=t,s=1,a=this[e+--r];r>0&&(s*=256);)a+=this[e+--r]*s;return a>=(s*=128)&&(a-=Math.pow(2,8*t)),a},i.prototype.readInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){e>>>=0,t||T(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},i.prototype.readInt16BE=function(e,t){e>>>=0,t||T(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},i.prototype.readInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return e>>>=0,t||T(e,4,this.length),le.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return e>>>=0,t||T(e,4,this.length),le.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return e>>>=0,t||T(e,8,this.length),le.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return e>>>=0,t||T(e,8,this.length),le.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,i,r){e=+e,t>>>=0,i>>>=0,r||S(this,e,t,i,Math.pow(2,8*i)-1,0);var s=1,a=0;for(this[t]=255&e;++a<i&&(s*=256);)this[t+a]=e/s&255;return t+i},i.prototype.writeUIntBE=function(e,t,i,r){e=+e,t>>>=0,i>>>=0,r||S(this,e,t,i,Math.pow(2,8*i)-1,0);var s=i-1,a=1;for(this[t+s]=255&e;--s>=0&&(a*=256);)this[t+s]=e/a&255;return t+i},i.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,1,255,0),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},i.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeIntLE=function(e,t,i,r){if(e=+e,t>>>=0,!r){var s=Math.pow(2,8*i-1);S(this,e,t,i,s-1,-s)}var a=0,n=1,o=0;for(this[t]=255&e;++a<i&&(n*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/n>>0)-o&255;return t+i},i.prototype.writeIntBE=function(e,t,i,r){if(e=+e,t>>>=0,!r){var s=Math.pow(2,8*i-1);S(this,e,t,i,s-1,-s)}var a=i-1,n=1,o=0;for(this[t+a]=255&e;--a>=0&&(n*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/n>>0)-o&255;return t+i},i.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},i.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeFloatLE=function(e,t,i){return Q(this,e,t,!0,i)},i.prototype.writeFloatBE=function(e,t,i){return Q(this,e,t,!1,i)},i.prototype.writeDoubleLE=function(e,t,i){return k(this,e,t,!0,i)},i.prototype.writeDoubleBE=function(e,t,i){return k(this,e,t,!1,i)},i.prototype.copy=function(e,t,r,s){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),s||0===s||(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&s<r&&(s=r),s===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-r&&(s=e.length-t+r);var a=s-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,s);else if(this===e&&r<t&&t<s)for(var n=a-1;n>=0;--n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,s),t);return a},i.prototype.fill=function(e,t,r,s){if("string"==typeof e){if("string"==typeof t?(s=t,t=0,r=this.length):"string"==typeof r&&(s=r,r=this.length),void 0!==s&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("string"==typeof s&&!i.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(1===e.length){var a=e.charCodeAt(0);("utf8"===s&&a<128||"latin1"===s)&&(e=a)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var n;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{var o=i.isBuffer(e)?e:i.from(e,s),l=o.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=o[n%l]}return this};var C=/[^+/0-9A-Za-z-_]/g;function I(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){var i;t=t||1/0;for(var r=e.length,s=null,a=[],n=0;n<r;++n){if((i=e.charCodeAt(n))>55295&&i<57344){if(!s){if(i>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(n+1===r){(t-=3)>-1&&a.push(239,191,189);continue}s=i;continue}if(i<56320){(t-=3)>-1&&a.push(239,191,189),s=i;continue}i=65536+(s-55296<<10|i-56320)}else s&&(t-=3)>-1&&a.push(239,191,189);if(s=null,i<128){if((t-=1)<0)break;a.push(i)}else if(i<2048){if((t-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function R(e){return Z.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(C,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function P(e,t,i,r){for(var s=0;s<r&&!(s+i>=t.length||s>=e.length);++s)t[s+i]=e[s];return s}function D(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function j(e){return e!=e}}).call(this)}).call(this,L({}).Buffer)})),M={},B="object"==typeof Reflect?Reflect:null,U=B&&"function"==typeof B.apply?B.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};e=B&&"function"==typeof B.ownKeys?B.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var F=Number.isNaN||function(e){return e!=e};function G(){G.init.call(this)}(M=G).once=function(e,t){return new Promise((function(i,r){function s(){void 0!==a&&e.removeListener("error",a),i([].slice.call(arguments))}var a;"error"!==t&&(a=function(i){e.removeListener(t,s),r(i)},e.once("error",a)),e.once(t,s)}))},G.EventEmitter=G,G.prototype._events=void 0,G.prototype._eventsCount=0,G.prototype._maxListeners=void 0;var q=10;function z(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function V(e){return void 0===e._maxListeners?G.defaultMaxListeners:e._maxListeners}function H(e,t,i,r){var s,a,n,o;if(z(i),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),a=e._events),n=a[t]),void 0===n)n=a[t]=i,++e._eventsCount;else if("function"==typeof n?n=a[t]=r?[i,n]:[n,i]:r?n.unshift(i):n.push(i),(s=V(e))>0&&n.length>s&&!n.warned){n.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+n.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=n.length,o=l,console&&console.warn&&console.warn(o)}return e}function W(e,t,i){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},s=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(r);return s.listener=i,r.wrapFn=s,s}function $(e,t,i){var r=e._events;if(void 0===r)return[];var s=r[t];return void 0===s?[]:"function"==typeof s?i?[s.listener||s]:[s]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(s):J(s,s.length)}function Y(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function J(e,t){for(var i=new Array(t),r=0;r<t;++r)i[r]=e[r];return i}Object.defineProperty(G,"defaultMaxListeners",{enumerable:!0,get:function(){return q},set:function(e){if("number"!=typeof e||e<0||F(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");q=e}}),G.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},G.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||F(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},G.prototype.getMaxListeners=function(){return V(this)},G.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r="error"===e,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var n=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw n.context=a,n}var o=s[e];if(void 0===o)return!1;if("function"==typeof o)U(o,this,t);else{var l=o.length,u=J(o,l);for(i=0;i<l;++i)U(u[i],this,t)}return!0},G.prototype.addListener=function(e,t){return H(this,e,t,!1)},G.prototype.on=G.prototype.addListener,G.prototype.prependListener=function(e,t){return H(this,e,t,!0)},G.prototype.once=function(e,t){return z(t),this.on(e,W(this,e,t)),this},G.prototype.prependOnceListener=function(e,t){return z(t),this.prependListener(e,W(this,e,t)),this},G.prototype.removeListener=function(e,t){var i,r,s,a,n;if(z(t),void 0===(r=this._events))return this;if(void 0===(i=r[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(s=-1,a=i.length-1;a>=0;a--)if(i[a]===t||i[a].listener===t){n=i[a].listener,s=a;break}if(s<0)return this;0===s?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,s),1===i.length&&(r[e]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",e,n||t)}return this},G.prototype.off=G.prototype.removeListener,G.prototype.removeAllListeners=function(e){var t,i,r;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var s,a=Object.keys(i);for(r=0;r<a.length;++r)"removeListener"!==(s=a[r])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},G.prototype.listeners=function(e){return $(this,e,!0)},G.prototype.rawListeners=function(e){return $(this,e,!1)},G.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Y.call(e,t)},G.prototype.listenerCount=Y,G.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]};var X={};X="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}};for(var K=M.EventEmitter,Z={toByteArray:function(e){var t,i,r=ne(e),s=r[0],a=r[1],n=new ie(function(e,t,i){return 3*(t+i)/4-i}(0,s,a)),o=0,l=a>0?s-4:s;for(i=0;i<l;i+=4)t=te[e.charCodeAt(i)]<<18|te[e.charCodeAt(i+1)]<<12|te[e.charCodeAt(i+2)]<<6|te[e.charCodeAt(i+3)],n[o++]=t>>16&255,n[o++]=t>>8&255,n[o++]=255&t;return 2===a&&(t=te[e.charCodeAt(i)]<<2|te[e.charCodeAt(i+1)]>>4,n[o++]=255&t),1===a&&(t=te[e.charCodeAt(i)]<<10|te[e.charCodeAt(i+1)]<<4|te[e.charCodeAt(i+2)]>>2,n[o++]=t>>8&255,n[o++]=255&t),n},fromByteArray:function(e){for(var t,i=e.length,r=i%3,s=[],a=0,n=i-r;a<n;a+=16383)s.push(oe(e,a,a+16383>n?n:a+16383));return 1===r?(t=e[i-1],s.push(ee[t>>2]+ee[t<<4&63]+"==")):2===r&&(t=(e[i-2]<<8)+e[i-1],s.push(ee[t>>10]+ee[t>>4&63]+ee[t<<2&63]+"=")),s.join("")}},ee=[],te=[],ie="undefined"!=typeof Uint8Array?Uint8Array:Array,re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",se=0,ae=re.length;se<ae;++se)ee[se]=re[se],te[re.charCodeAt(se)]=se;function ne(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function oe(e,t,i){for(var r,s,a=[],n=t;n<i;n+=3)r=(e[n]<<16&16711680)+(e[n+1]<<8&65280)+(255&e[n+2]),a.push(ee[(s=r)>>18&63]+ee[s>>12&63]+ee[s>>6&63]+ee[63&s]);return a.join("")}te["-".charCodeAt(0)]=62,te["_".charCodeAt(0)]=63;var le={read:function(e,t,i,r,s){var a,n,o=8*s-r-1,l=(1<<o)-1,u=l>>1,c=-7,p=i?s-1:0,h=i?-1:1,m=e[t+p];for(p+=h,a=m&(1<<-c)-1,m>>=-c,c+=o;c>0;a=256*a+e[t+p],p+=h,c-=8);for(n=a&(1<<-c)-1,a>>=-c,c+=r;c>0;n=256*n+e[t+p],p+=h,c-=8);if(0===a)a=1-u;else{if(a===l)return n?NaN:1/0*(m?-1:1);n+=Math.pow(2,r),a-=u}return(m?-1:1)*n*Math.pow(2,a-r)},write:function(e,t,i,r,s,a){var n,o,l,u=8*a-s-1,c=(1<<u)-1,p=c>>1,h=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,m=r?0:a-1,f=r?1:-1,d=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,n=c):(n=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-n))<1&&(n--,l*=2),(t+=n+p>=1?h/l:h*Math.pow(2,1-p))*l>=2&&(n++,l/=2),n+p>=c?(o=0,n=c):n+p>=1?(o=(t*l-1)*Math.pow(2,s),n+=p):(o=t*Math.pow(2,p-1)*Math.pow(2,s),n=0));s>=8;e[i+m]=255&o,m+=f,o/=256,s-=8);for(n=n<<s|o,u+=s;u>0;e[i+m]=255&n,m+=f,n/=256,u-=8);e[i+m-f]|=128*d}},ue={};function ce(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function pe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function he(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var me,fe,de=L({}).Buffer,ge=ue.inspect,be=ge&&ge.custom||"inspect",ye=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,i;return t=e,(i=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,i=""+t.data;t=t.next;)i+=e+t.data;return i}},{key:"concat",value:function(e){if(0===this.length)return de.alloc(0);for(var t,i,r,s=de.allocUnsafe(e>>>0),a=this.head,n=0;a;)t=a.data,i=s,r=n,de.prototype.copy.call(t,i,r),n+=a.data.length,a=a.next;return s}},{key:"consume",value:function(e,t){var i;return e<this.head.data.length?(i=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):i=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,i=1,r=t.data;for(e-=r.length;t=t.next;){var s=t.data,a=e>s.length?s.length:e;if(a===s.length?r+=s:r+=s.slice(0,e),0==(e-=a)){a===s.length?(++i,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=s.slice(a));break}++i}return this.length-=i,r}},{key:"_getBuffer",value:function(e){var t=de.allocUnsafe(e),i=this.head,r=1;for(i.data.copy(t),e-=i.data.length;i=i.next;){var s=i.data,a=e>s.length?s.length:e;if(s.copy(t,t.length-e,0,a),0==(e-=a)){a===s.length?(++r,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(a));break}++r}return this.length-=r,t}},{key:be,value:function(e,t){return ge(this,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(i),!0).forEach((function(t){pe(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ce(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&he(t.prototype,i),e}(),ve={},_e=ve={};function xe(){throw new Error("setTimeout has not been defined")}function we(){throw new Error("clearTimeout has not been defined")}function Ee(e){if(me===setTimeout)return setTimeout(e,0);if((me===xe||!me)&&setTimeout)return me=setTimeout,setTimeout(e,0);try{return me(e,0)}catch(t){try{return me.call(null,e,0)}catch(t){return me.call(this,e,0)}}}!function(){try{me="function"==typeof setTimeout?setTimeout:xe}catch(e){me=xe}try{fe="function"==typeof clearTimeout?clearTimeout:we}catch(e){fe=we}}();var Ae,Te=[],Se=!1,Oe=-1;function Qe(){Se&&Ae&&(Se=!1,Ae.length?Te=Ae.concat(Te):Oe=-1,Te.length&&ke())}function ke(){if(!Se){var e=Ee(Qe);Se=!0;for(var t=Te.length;t;){for(Ae=Te,Te=[];++Oe<t;)Ae&&Ae[Oe].run();Oe=-1,t=Te.length}Ae=null,Se=!1,function(e){if(fe===clearTimeout)return clearTimeout(e);if((fe===we||!fe)&&clearTimeout)return fe=clearTimeout,clearTimeout(e);try{fe(e)}catch(t){try{return fe.call(null,e)}catch(t){return fe.call(this,e)}}}(e)}}function Ce(e,t){this.fun=e,this.array=t}function Ie(){}_e.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];Te.push(new Ce(e,t)),1!==Te.length||Se||Ee(ke)},Ce.prototype.run=function(){this.fun.apply(null,this.array)},_e.title="browser",_e.browser=!0,_e.env={},_e.argv=[],_e.version="",_e.versions={},_e.on=Ie,_e.addListener=Ie,_e.once=Ie,_e.off=Ie,_e.removeListener=Ie,_e.removeAllListeners=Ie,_e.emit=Ie,_e.prependListener=Ie,_e.prependOnceListener=Ie,_e.listeners=function(e){return[]},_e.binding=function(e){throw new Error("process.binding is not supported")},_e.cwd=function(){return"/"},_e.chdir=function(e){throw new Error("process.chdir is not supported")},_e.umask=function(){return 0};var Ne={};(function(e){(function(){"use strict";function t(e,t){r(e,t),i(e)}function i(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function r(e,t){e.emit("error",t)}Ne={destroy:function(s,a){var n=this,o=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return o||l?(a?a(s):s&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(r,this,s)):e.nextTick(r,this,s)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(s||null,(function(r){!a&&r?n._writableState?n._writableState.errorEmitted?e.nextTick(i,n):(n._writableState.errorEmitted=!0,e.nextTick(t,n,r)):e.nextTick(t,n,r):a?(e.nextTick(i,n),a(r)):e.nextTick(i,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var i=e._readableState,r=e._writableState;i&&i.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,ve);var Re={},Pe={};function De(e,t,i){i||(i=Error);var r=function(e){var i,r;function s(i,r,s){return e.call(this,function(e,i,r){return"string"==typeof t?t:t(e,i,r)}(i,r,s))||this}return r=e,(i=s).prototype=Object.create(r.prototype),i.prototype.constructor=i,i.__proto__=r,s}(i);r.prototype.name=i.name,r.prototype.code=e,Pe[e]=r}function je(e,t){if(Array.isArray(e)){var i=e.length;return e=e.map((function(e){return String(e)})),i>2?"one of ".concat(t," ").concat(e.slice(0,i-1).join(", "),", or ")+e[i-1]:2===i?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}De("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),De("ERR_INVALID_ARG_TYPE",(function(e,t,i){var r,s,a,n;if("string"==typeof t&&("not ","not "===t.substr(0,"not ".length))?(r="must not be",t=t.replace(/^not /,"")):r="must be",a=e,(void 0===n||n>a.length)&&(n=a.length)," argument"===a.substring(n-" argument".length,n))s="The ".concat(e," ").concat(r," ").concat(je(t,"type"));else{var o=function(e,t,i){return"number"!=typeof i&&(i=0),!(i+".".length>e.length)&&-1!==e.indexOf(".",i)}(e)?"property":"argument";s='The "'.concat(e,'" ').concat(o," ").concat(r," ").concat(je(t,"type"))}return s+". Received type ".concat(typeof i)}),TypeError),De("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),De("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),De("ERR_STREAM_PREMATURE_CLOSE","Premature close"),De("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),De("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),De("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),De("ERR_STREAM_WRITE_AFTER_END","write after end"),De("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),De("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),De("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Re.codes=Pe;var Le=Re.codes.ERR_INVALID_OPT_VALUE,Me={getHighWaterMark:function(e,t,i,r){var s=function(e,t,i){return null!=e.highWaterMark?e.highWaterMark:t?e[i]:null}(t,r,i);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new Le(r?i:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}},Be={};(function(e){(function(){function t(t){try{if(!e.localStorage)return!1}catch(r){return!1}var i=e.localStorage[t];return null!=i&&"true"===String(i).toLowerCase()}Be=function(e,i){if(t("noDeprecation"))return e;var r=!1;return function(){if(!r){if(t("throwDeprecation"))throw new Error(i);t("traceDeprecation")?console.trace(i):console.warn(i),r=!0}return e.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Ue={},Fe=L({}),Ge=Fe.Buffer;function qe(e,t){for(var i in e)t[i]=e[i]}function ze(e,t,i){return Ge(e,t,i)}Ge.from&&Ge.alloc&&Ge.allocUnsafe&&Ge.allocUnsafeSlow?Ue=Fe:(qe(Fe,Ue),Ue.Buffer=ze),ze.prototype=Object.create(Ge.prototype),qe(Ge,ze),ze.from=function(e,t,i){if("number"==typeof e)throw new TypeError("Argument must not be a number");return Ge(e,t,i)},ze.alloc=function(e,t,i){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=Ge(e);return void 0!==t?"string"==typeof i?r.fill(t,i):r.fill(t):r.fill(0),r},ze.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return Ge(e)},ze.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return Fe.SlowBuffer(e)};var Ve=Ze,He=Re.codes,We=He.ERR_METHOD_NOT_IMPLEMENTED,$e=He.ERR_MULTIPLE_CALLBACK,Ye=He.ERR_TRANSFORM_ALREADY_TRANSFORMING,Je=He.ERR_TRANSFORM_WITH_LENGTH_0,Xe=D({});function Ke(e,t){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(null===r)return this.emit("error",new $e);i.writechunk=null,i.writecb=null,null!=t&&this.push(t),r(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function Ze(e){if(!(this instanceof Ze))return new Ze(e);Xe.call(this,e),this._transformState={afterTransform:Ke.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",et)}function et(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?tt(this,null,null):this._flush((function(t,i){tt(e,t,i)}))}function tt(e,t,i){if(t)return e.emit("error",t);if(null!=i&&e.push(i),e._writableState.length)throw new Je;if(e._transformState.transforming)throw new Ye;return e.push(null)}X(Ze,Xe),Ze.prototype.push=function(e,t){return this._transformState.needTransform=!1,Xe.prototype.push.call(this,e,t)},Ze.prototype._transform=function(e,t,i){i(new We("_transform()"))},Ze.prototype._write=function(e,t,i){var r=this._transformState;if(r.writecb=i,r.writechunk=e,r.writeencoding=t,!r.transforming){var s=this._readableState;(r.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},Ze.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},Ze.prototype._destroy=function(e,t){Xe.prototype._destroy.call(this,e,(function(e){t(e)}))};var it,rt=st;function st(e){if(!(this instanceof st))return new st(e);Ve.call(this,e)}X(st,Ve),st.prototype._transform=function(e,t,i){i(null,e)};var at=Re.codes,nt=at.ERR_MISSING_ARGS,ot=at.ERR_STREAM_DESTROYED;function lt(e){if(e)throw e}function ut(e){e()}function ct(e,t){return e.pipe(t)}var pt=mt,ht=M.EventEmitter;function mt(){ht.call(this)}X(mt,ht),mt.Readable=C({}),mt.Writable=j({}),mt.Duplex=D({}),mt.Transform=Ve,mt.PassThrough=rt,mt.finished=R({}),mt.pipeline=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var r,s=function(e){return e.length?"function"!=typeof e[e.length-1]?lt:e.pop():lt}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new nt("streams");var a=t.map((function(e,i){var n=i<t.length-1;return function(e,t,i,r){r=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(r);var s=!1;e.on("close",(function(){s=!0})),void 0===it&&(it=R({})),it(e,{readable:t,writable:i},(function(e){if(e)return r(e);s=!0,r()}));var a=!1;return function(t){if(!s&&!a)return a=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void r(t||new ot("pipe"))}}(e,n,i>0,(function(e){r||(r=e),e&&a.forEach(ut),n||(a.forEach(ut),s(r))}))}));return t.reduce(ct)},mt.Stream=mt,mt.prototype.pipe=function(e,t){var i=this;function r(t){e.writable&&!1===e.write(t)&&i.pause&&i.pause()}function s(){i.readable&&i.resume&&i.resume()}i.on("data",r),e.on("drain",s),e._isStdio||t&&!1===t.end||(i.on("end",n),i.on("close",o));var a=!1;function n(){a||(a=!0,e.end())}function o(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(u(),0===ht.listenerCount(this,"error"))throw e}function u(){i.removeListener("data",r),e.removeListener("drain",s),i.removeListener("end",n),i.removeListener("close",o),i.removeListener("error",l),e.removeListener("error",l),i.removeListener("end",u),i.removeListener("close",u),e.removeListener("close",u)}return i.on("error",l),e.on("error",l),i.on("end",u),i.on("close",u),e.on("close",u),e.emit("pipe",i),e};var ft={};(function(e){(function(){"use strict";ft=void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?{nextTick:function(t,i,r,s){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var a,n,o=arguments.length;switch(o){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,i)}));case 3:return e.nextTick((function(){t.call(null,i,r)}));case 4:return e.nextTick((function(){t.call(null,i,r,s)}));default:for(a=new Array(o-1),n=0;n<a.length;)a[n++]=arguments[n];return e.nextTick((function(){t.apply(null,a)}))}}}:e}).call(this)}).call(this,ve);var dt={}.toString,gt=Array.isArray||function(e){return"[object Array]"==dt.call(e)},bt=M.EventEmitter,yt={},vt=L({}),_t=vt.Buffer;function xt(e,t){for(var i in e)t[i]=e[i]}function wt(e,t,i){return _t(e,t,i)}function Et(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}_t.from&&_t.alloc&&_t.allocUnsafe&&_t.allocUnsafeSlow?yt=vt:(xt(vt,yt),yt.Buffer=wt),xt(_t,wt),wt.from=function(e,t,i){if("number"==typeof e)throw new TypeError("Argument must not be a number");return _t(e,t,i)},wt.alloc=function(e,t,i){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=_t(e);return void 0!==t?"string"==typeof i?r.fill(t,i):r.fill(t):r.fill(0),r},wt.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return _t(e)},wt.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return vt.SlowBuffer(e)};var At={};(function(e){(function(){function t(e){return Object.prototype.toString.call(e)}At.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},At.isBoolean=function(e){return"boolean"==typeof e},At.isNull=function(e){return null===e},At.isNullOrUndefined=function(e){return null==e},At.isNumber=function(e){return"number"==typeof e},At.isString=function(e){return"string"==typeof e},At.isSymbol=function(e){return"symbol"==typeof e},At.isUndefined=function(e){return void 0===e},At.isRegExp=function(e){return"[object RegExp]"===t(e)},At.isObject=function(e){return"object"==typeof e&&null!==e},At.isDate=function(e){return"[object Date]"===t(e)},At.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},At.isFunction=function(e){return"function"==typeof e},At.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},At.isBuffer=e.isBuffer}).call(this)}).call(this,{isBuffer:function(e){return null!=e&&(Et(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&Et(e.slice(0,0))}(e)||!!e._isBuffer)}});var Tt={},St=yt.Buffer;function Ot(e,t){e.emit("error",t)}Tt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,i=""+t.data;t=t.next;)i+=e+t.data;return i},e.prototype.concat=function(e){if(0===this.length)return St.alloc(0);if(1===this.length)return this.head.data;for(var t,i,r=St.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=r,i=a,s.data.copy(t,i),a+=s.data.length,s=s.next;return r},e}(),ue&&ue.inspect&&ue.inspect.custom&&(Tt.prototype[ue.inspect.custom]=function(){var e=ue.inspect({length:this.length});return this.constructor.name+" "+e});var Qt={destroy:function(e,t){var i=this,r=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return r||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||ft.nextTick(Ot,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(ft.nextTick(Ot,i,e),i._writableState&&(i._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}},kt=Rt,Ct=O({}),It=Object.create(At);function Nt(e,t){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!=t&&this.push(t),r(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function Rt(e){if(!(this instanceof Rt))return new Rt(e);Ct.call(this,e),this._transformState={afterTransform:Nt.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",Pt)}function Pt(){var e=this;"function"==typeof this._flush?this._flush((function(t,i){Dt(e,t,i)})):Dt(this,null,null)}function Dt(e,t,i){if(t)return e.emit("error",t);if(null!=i&&e.push(i),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}It.inherits=X,It.inherits(Rt,Ct),Rt.prototype.push=function(e,t){return this._transformState.needTransform=!1,Ct.prototype.push.call(this,e,t)},Rt.prototype._transform=function(e,t,i){throw new Error("_transform() is not implemented")},Rt.prototype._write=function(e,t,i){var r=this._transformState;if(r.writecb=i,r.writechunk=e,r.writeencoding=t,!r.transforming){var s=this._readableState;(r.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},Rt.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},Rt.prototype._destroy=function(e,t){var i=this;Ct.prototype._destroy.call(this,e,(function(e){t(e),i.emit("close")}))};var jt=Mt,Lt=Object.create(At);function Mt(e){if(!(this instanceof Mt))return new Mt(e);kt.call(this,e)}Lt.inherits=X,Lt.inherits(Mt,kt),Mt.prototype._transform=function(e,t,i){i(null,e)};var Bt={};(Bt=Bt=T({})).Stream=Bt,Bt.Readable=Bt,Bt.Writable=Q({}),Bt.Duplex=O({}),Bt.Transform=kt,Bt.PassThrough=jt;var Ut;function Ft(e,t,i){void 0===i&&(i=t,t=e,e=null),Bt.Duplex.call(this,e),"function"!=typeof i.read&&(i=new Bt.Readable(e).wrap(i)),this._writable=t,this._readable=i,this._waiting=!1;var r=this;t.once("finish",(function(){r.end()})),this.once("finish",(function(){t.end()})),i.on("readable",(function(){r._waiting&&(r._waiting=!1,r._read())})),i.once("end",(function(){r.push(null)})),e&&void 0!==e.bubbleErrors&&!e.bubbleErrors||(t.on("error",(function(e){r.emit("error",e)})),i.on("error",(function(e){r.emit("error",e)})))}Ft.prototype=Object.create(Bt.Duplex.prototype,{constructor:{value:Ft}}),Ft.prototype._write=function(e,t,i){this._writable.write(e,t,i)},Ft.prototype._read=function(){for(var e,t=0;null!==(e=this._readable.read());)this.push(e),t++;0===t&&(this._waiting=!0)},(Ut=function(e,t,i){return new Ft(e,t,i)}).DuplexWrapper=Ft;const Gt=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(Promise.prototype,e)]);var qt={};(function(e){(function(){const{PassThrough:t,Readable:i}=pt,r={bubbleErrors:!0,objectMode:!0};qt=(...s)=>{let a,n;"function"==typeof s[s.length-1]&&(n=s.pop()),"object"!=typeof s[s.length-1]||Array.isArray(s[s.length-1])||"function"==typeof s[s.length-1].pipe||(a=s.pop()),Array.isArray(s[0])&&(s=s[0]);let o,l=s[0],u=s[s.length-1];a=Object.assign({},r,a),l?o=l.writable&&u.readable?Ut(a,l,u):1===s.length?new i(a).wrap(s[0]):l.writable?l:u.readable?u:new t(a):(o=l=u=new t(a),e.nextTick(()=>o.end()));for(const[e,t]of s.entries()){const i=s[e+1];i&&t.pipe(i),t!==o&&t.on("error",e=>o.emit("error",e))}if(n){let e=!1;const t=t=>{e||(e=!0,n(t))};o.on("error",t),u.on("finish",()=>t()),u.on("close",()=>t())}return((e,t)=>{for(const[i,r]of Gt){const s=(...e)=>Reflect.apply(r.value,t(),e);Reflect.defineProperty(e,i,{...r,value:s})}return e})(o,()=>new Promise((e,t)=>{o.on("error",t),u.on("finish",e),u.on("close",e)}))}}).call(this)}).call(this,ve);var zt=M.EventEmitter;function Vt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function Ht(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Wt(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $t=L({}).Buffer,Yt=ue.inspect,Jt=Yt&&Yt.custom||"inspect",Xt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,i;return t=e,(i=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,i=""+t.data;t=t.next;)i+=e+t.data;return i}},{key:"concat",value:function(e){if(0===this.length)return $t.alloc(0);for(var t,i,r,s=$t.allocUnsafe(e>>>0),a=this.head,n=0;a;)t=a.data,i=s,r=n,$t.prototype.copy.call(t,i,r),n+=a.data.length,a=a.next;return s}},{key:"consume",value:function(e,t){var i;return e<this.head.data.length?(i=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):i=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,i=1,r=t.data;for(e-=r.length;t=t.next;){var s=t.data,a=e>s.length?s.length:e;if(a===s.length?r+=s:r+=s.slice(0,e),0==(e-=a)){a===s.length?(++i,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=s.slice(a));break}++i}return this.length-=i,r}},{key:"_getBuffer",value:function(e){var t=$t.allocUnsafe(e),i=this.head,r=1;for(i.data.copy(t),e-=i.data.length;i=i.next;){var s=i.data,a=e>s.length?s.length:e;if(s.copy(t,t.length-e,0,a),0==(e-=a)){a===s.length?(++r,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=s.slice(a));break}++r}return this.length-=r,t}},{key:Jt,value:function(e,t){return Yt(this,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(i),!0).forEach((function(t){Ht(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Vt(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&Wt(t.prototype,i),e}(),Kt={};(function(e){(function(){"use strict";function t(e,t){r(e,t),i(e)}function i(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function r(e,t){e.emit("error",t)}Kt={destroy:function(s,a){var n=this,o=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return o||l?(a?a(s):s&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(r,this,s)):e.nextTick(r,this,s)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(s||null,(function(r){!a&&r?n._writableState?n._writableState.errorEmitted?e.nextTick(i,n):(n._writableState.errorEmitted=!0,e.nextTick(t,n,r)):e.nextTick(t,n,r):a?(e.nextTick(i,n),a(r)):e.nextTick(i,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var i=e._readableState,r=e._writableState;i&&i.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,ve);var Zt={},ei={};function ti(e,t,i){i||(i=Error);var r=function(e){var i,r;function s(i,r,s){return e.call(this,function(e,i,r){return"string"==typeof t?t:t(e,i,r)}(i,r,s))||this}return r=e,(i=s).prototype=Object.create(r.prototype),i.prototype.constructor=i,i.__proto__=r,s}(i);r.prototype.name=i.name,r.prototype.code=e,ei[e]=r}function ii(e,t){if(Array.isArray(e)){var i=e.length;return e=e.map((function(e){return String(e)})),i>2?"one of ".concat(t," ").concat(e.slice(0,i-1).join(", "),", or ")+e[i-1]:2===i?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}ti("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),ti("ERR_INVALID_ARG_TYPE",(function(e,t,i){var r,s,a,n;if("string"==typeof t&&("not ","not "===t.substr(0,"not ".length))?(r="must not be",t=t.replace(/^not /,"")):r="must be",a=e,(void 0===n||n>a.length)&&(n=a.length)," argument"===a.substring(n-" argument".length,n))s="The ".concat(e," ").concat(r," ").concat(ii(t,"type"));else{var o=function(e,t,i){return"number"!=typeof i&&(i=0),!(i+".".length>e.length)&&-1!==e.indexOf(".",i)}(e)?"property":"argument";s='The "'.concat(e,'" ').concat(o," ").concat(r," ").concat(ii(t,"type"))}return s+". Received type ".concat(typeof i)}),TypeError),ti("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),ti("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),ti("ERR_STREAM_PREMATURE_CLOSE","Premature close"),ti("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),ti("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),ti("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),ti("ERR_STREAM_WRITE_AFTER_END","write after end"),ti("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),ti("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),ti("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Zt.codes=ei;var ri=Zt.codes.ERR_INVALID_OPT_VALUE,si={getHighWaterMark:function(e,t,i,r){var s=function(e,t,i){return null!=e.highWaterMark?e.highWaterMark:t?e[i]:null}(t,r,i);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new ri(r?i:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}},ai=mi,ni=Zt.codes,oi=ni.ERR_METHOD_NOT_IMPLEMENTED,li=ni.ERR_MULTIPLE_CALLBACK,ui=ni.ERR_TRANSFORM_ALREADY_TRANSFORMING,ci=ni.ERR_TRANSFORM_WITH_LENGTH_0,pi=E({});function hi(e,t){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(null===r)return this.emit("error",new li);i.writechunk=null,i.writecb=null,null!=t&&this.push(t),r(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function mi(e){if(!(this instanceof mi))return new mi(e);pi.call(this,e),this._transformState={afterTransform:hi.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",fi)}function fi(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?di(this,null,null):this._flush((function(t,i){di(e,t,i)}))}function di(e,t,i){if(t)return e.emit("error",t);if(null!=i&&e.push(i),e._writableState.length)throw new ci;if(e._transformState.transforming)throw new ui;return e.push(null)}X(mi,pi),mi.prototype.push=function(e,t){return this._transformState.needTransform=!1,pi.prototype.push.call(this,e,t)},mi.prototype._transform=function(e,t,i){i(new oi("_transform()"))},mi.prototype._write=function(e,t,i){var r=this._transformState;if(r.writecb=i,r.writechunk=e,r.writeencoding=t,!r.transforming){var s=this._readableState;(r.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},mi.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},mi.prototype._destroy=function(e,t){pi.prototype._destroy.call(this,e,(function(e){t(e)}))};var gi,bi=yi;function yi(e){if(!(this instanceof yi))return new yi(e);ai.call(this,e)}X(yi,ai),yi.prototype._transform=function(e,t,i){i(null,e)};var vi=Zt.codes,_i=vi.ERR_MISSING_ARGS,xi=vi.ERR_STREAM_DESTROYED;function wi(e){if(e)throw e}function Ei(e){e()}function Ai(e,t){return e.pipe(t)}var Ti={};(Ti=Ti=v({})).Stream=Ti,Ti.Readable=Ti,Ti.Writable=A({}),Ti.Duplex=E({}),Ti.Transform=ai,Ti.PassThrough=bi,Ti.finished=w({}),Ti.pipeline=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var r,s=function(e){return e.length?"function"!=typeof e[e.length-1]?wi:e.pop():wi}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new _i("streams");var a=t.map((function(e,i){var n=i<t.length-1;return function(e,t,i,r){r=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(r);var s=!1;e.on("close",(function(){s=!0})),void 0===gi&&(gi=w({})),gi(e,{readable:t,writable:i},(function(e){if(e)return r(e);s=!0,r()}));var a=!1;return function(t){if(!s&&!a)return a=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void r(t||new xi("pipe"))}}(e,n,i>0,(function(e){r||(r=e),e&&a.forEach(Ei),n||(a.forEach(Ei),s(r))}))}));return t.reduce(Ai)};const{Transform:Si}=Ti,{StringDecoder:Oi}=P({}),Qi=Symbol("last"),ki=Symbol("decoder");function Ci(e,t,i){var r;if(this.overflow){if(1===(r=this[ki].write(e).split(this.matcher)).length)return i();r.shift(),this.overflow=!1}else this[Qi]+=this[ki].write(e),r=this[Qi].split(this.matcher);this[Qi]=r.pop();for(var s=0;s<r.length;s++)try{Ni(this,this.mapper(r[s]))}catch(a){return i(a)}if(this.overflow=this[Qi].length>this.maxLength,this.overflow&&!this.skipOverflow)return i(new Error("maximum buffer reached"));i()}function Ii(e){if(this[Qi]+=this[ki].end(),this[Qi])try{Ni(this,this.mapper(this[Qi]))}catch(t){return e(t)}e()}function Ni(e,t){void 0!==t&&e.push(t)}function Ri(e){return e}var Pi={};function Di(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(Pi,"__esModule",{value:!0});var ji=Di(qt),Li=Di((function(e,t,i){switch(e=e||/\r?\n/,t=t||Ri,i=i||{},arguments.length){case 1:"function"==typeof e?(t=e,e=/\r?\n/):"object"!=typeof e||e instanceof RegExp||(i=e,e=/\r?\n/);break;case 2:"function"==typeof e?(i=t,t=e,e=/\r?\n/):"object"==typeof t&&(i=t,t=Ri)}(i=Object.assign({},i)).transform=Ci,i.flush=Ii,i.readableObjectMode=!0;const r=new Si(i);return r[Qi]="",r[ki]=new Oi("utf8"),r.matcher=e,r.mapper=t,r.maxLength=i.maxLength,r.skipOverflow=i.skipOverflow,r.overflow=!1,r})),Mi=Di(e=>{if("string"!=typeof e)throw new TypeError("Expected a string, got "+typeof e);return 65279===e.charCodeAt(0)?e.slice(1):e});function Bi(){return(Bi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}var Ui=function(e,t){return void 0===t&&(t=2),e.toString().padStart(t,"0")},Fi=function(e){return new pt.Duplex(Bi({objectMode:!0,autoDestroy:!1,read:function(){}},e))};function Gi(e,t){void 0===t&&(t={format:"SRT"});var i=new Date(0,0,0,0,0,0,e),r=i.getHours(),s=i.getMinutes(),a=i.getSeconds(),n=e-(36e5*r+6e4*s+1e3*a);return Ui(r)+":"+Ui(s)+":"+Ui(a)+("WebVTT"===t.format?".":",")+Ui(n,3)}var qi=function(e){var t=0;return new pt.Transform({objectMode:!0,autoDestroy:!1,transform:function(i,r,s){s(null,e(i,t++))}})};function zi(e){var t=e.match(/^(?:(\d{1,}):)?(\d{2}):(\d{2})[,.](\d{3})$/);if(!t)throw new Error('Invalid SRT or VTT time format: "'+e+'"');return(t[1]?36e5*parseInt(t[1],10):0)+6e4*parseInt(t[2],10)+1e3*parseInt(t[3],10)+parseInt(t[4],10)}var Vi=/^((?:\d{1,}:)?\d{2}:\d{2}[,.]\d{3}) --> ((?:\d{1,}:)?\d{2}:\d{2}[,.]\d{3})(?: (.*))?$/;function Hi(e){var t=Vi.exec(e);if(!t)throw new Error("Invalid timestamp format");var i={start:zi(t[1]),end:zi(t[2])};return t[3]&&(i.settings=t[3]),i}var Wi=function(){function e(e){this.options=e,this.hasReceivedHeader=!1,this.isVTT="WebVTT"===e.format,this.index=1}var t=e.prototype;return t.format=function(e){var t="";return"header"===e.type&&this.isVTT&&(this.hasReceivedHeader=!0,t+=e.data+"\n\n"),"cue"===e.type&&(!this.hasReceivedHeader&&this.isVTT&&(this.hasReceivedHeader=!0,t+="WEBVTT\n\n"),t+=this.formatCue(e.data,this.index++,this.options)),t},t.formatCue=function(e,t,i){return[(t>1?"\n":"")+t,Gi(e.start,i)+" --\x3e "+Gi(e.end,i)+("WebVTT"===i.format&&e.settings?" "+e.settings:""),e.text,""].join("\n")},e}(),$i=function(){function e(e){this.push=e.push,this.state={expect:"header",row:0,hasContentStarted:!1,isWebVTT:!1,node:{},buffer:[]}}var t=e.prototype;return t.isIndex=function(e){return/^\d+$/.test(e.trim())},t.isTimestamp=function(e){return Vi.test(e)},t.getError=function(e,t,i){return new Error("expected "+e+" at row "+(t+1)+', but received: "'+i+'"')},t.parseLine=function(e){var t=0===this.state.row?Mi(e):e;if(!this.state.hasContentStarted){if(!t.trim())return;this.state.hasContentStarted=!0}({header:this.parseHeader,id:this.parseId,timestamp:this.parseTimestamp,text:this.parseText})[this.state.expect].call(this,t),this.state.row++},t.flush=function(){this.state.buffer.length>0&&this.pushNode()},t.parseHeader=function(e){if(!this.state.isWebVTT){if(this.state.isWebVTT=/^WEBVTT/.test(e),!this.state.isWebVTT)return void this.parseId(e);this.state.node.type="header"}this.state.buffer.push(e),e||(this.state.expect="id")},t.parseId=function(e){this.state.expect="timestamp","header"===this.state.node.type&&this.pushNode(),this.isIndex(e)||this.parseTimestamp(e)},t.parseTimestamp=function(e){if(!this.isTimestamp(e))throw this.getError("timestamp",this.state.row,e);this.state.node={type:"cue",data:Bi({},Hi(e),{text:""})},this.state.expect="text"},t.parseText=function(e){this.state.buffer.length>0&&this.isTimestamp(e)?(this.isIndex(this.state.buffer[this.state.buffer.length-1])&&this.state.buffer.pop(),this.pushNode(),this.parseTimestamp(e)):this.state.buffer.push(e)},t.pushNode=function(){if("cue"===this.state.node.type){for(;["","\n"].includes(this.state.buffer[this.state.buffer.length-1]);)this.state.buffer.pop();for(;["","\n"].includes(this.state.buffer[0]);)this.state.buffer.shift();this.state.node.data.text=this.state.buffer.join("\n")}"header"===this.state.node.type&&(this.state.node.data=this.state.buffer.join("\n").trim()),this.push(this.state.node),this.state.node={},this.state.buffer=[]},e}();Pi.RE_TIMESTAMP=Vi,Pi.filter=function(e){return Fi({write:function(t,i,r){e(t)&&this.push(t),r()}})},Pi.formatTimestamp=Gi,Pi.map=qi,Pi.parse=function(){var e=new $i({push:function(e){return r.push(e)}}),t=Fi({write:function(t,i,r){try{e.parseLine(t.toString())}catch(e){return r(e)}r()}}),i=Li();i.on("finish",(function(){e.flush(),t.push(null)}));var r=ji(i,t,{objectMode:!0});return r},Pi.parseSync=function(e){var t=[],i=new $i({push:function(e){return t.push(e)}});return e.replace(/\r\n/g,"\n").split("\n").forEach((function(e){return i.parseLine(e)})),i.flush(),t},Pi.parseTimestamp=zi,Pi.parseTimestamps=Hi,Pi.resync=function(e){return qi((function(t){return"cue"===t.type?Bi({},t,{data:Bi({},t.data,{start:t.data.start+e,end:t.data.end+e})}):t}))},Pi.stringify=function(e){var t=new Wi(e);return qi((function(e){return t.format(e)}))},Pi.stringifySync=function(e,t){var i=new Wi(t);return e.reduce((function(e,t){return e+i.format(t)}),"")};var Yi=Pi,Ji={};Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.validateOutputOptions=tr,Ji.validateOptions=function(e){if("object"!=typeof e)throw new TypeError("Options should be an object");if(e.output)tr(e.output);else{if(e.maxChainLength&&"number"!=typeof e.maxChainLength)throw new TypeError("Option maxChainLength should be a number");if(e.forceType&&"string"!=typeof e.forceType)throw new TypeError("Option forceType should be a string");if(null!=e.generateGraph&&"boolean"!=typeof e.generateGraph)throw new TypeError("Option generateGraph should be a boolean");if(null!=e.strict&&"boolean"!=typeof e.strict)throw new TypeError("Option strict should be a boolean");if(null!=e.target&&"string"!=typeof e.target)throw new TypeError("Option target should be a boolean")}return!0};const Xi=["real","string"],Ki=["json","html","string","rtf"],Zi=["csl","bibtex","bibtxt","citation-*","ris","ndjson"],er=["string","function"];function tr(e){if("object"!=typeof e)throw new TypeError("Options not an object!");const{format:t,type:i,style:r,lang:s,append:a,prepend:n}=e;if(t&&!Xi.includes(t))throw new TypeError(`Option format ("${t}") should be one of: ${Xi}`);if(i&&!Ki.includes(i))throw new TypeError(`Option type ("${i}") should be one of: ${Ki}`);if(r&&!Zi.includes(r)&&!/^citation/.test(r))throw new TypeError(`Option style ("${r}") should be one of: ${Zi}`);if(s&&"string"!=typeof s)throw new TypeError("Option lang should be a string, but is a "+typeof s);if(n&&!er.includes(typeof n))throw new TypeError("Option prepend should be a string or a function, but is a "+typeof n);if(a&&!er.includes(typeof a))throw new TypeError("Option append should be a string or a function, but is a "+typeof a);if(/^citation/.test(r)&&"json"===i)throw new Error(`Combination type/style of json/citation-* is not valid: ${i}/${r}`);return!0}var ir={};Object.defineProperty(ir,"__esModule",{value:!0}),ir.defaultOptions=ir.options=void 0,ir.defaultOptions={format:"real",type:"json",style:"csl",lang:"en-US"},ir.options=function(e,t){return(0,Ji.validateOutputOptions)(e),t&&this.save(),Object.assign(this._options,e),this};var rr={};Object.defineProperty(rr,"__esModule",{value:!0}),rr.dataTypeOf=rr.typeOf=void 0;const sr=e=>{switch(e){case void 0:return"Undefined";case null:return"Null";default:return e.constructor.name}};rr.typeOf=sr,rr.dataTypeOf=e=>{switch(typeof e){case"string":return"String";case"object":if(Array.isArray(e))return"Array";if("Object"===sr(e))return"SimpleObject";if("Null"!==sr(e))return"ComplexObject";default:return"Primitive"}};var ar={};Object.defineProperty(ar,"__esModule",{value:!0}),ar.removeGraph=ar.applyGraph=void 0,ar.applyGraph=(e,t)=>{if(e._graph){const i=t.findIndex(({type:e})=>"@else/list+object"===e);-1!==i&&t.splice(i+1,0,...e._graph.slice(0,-1))}return e._graph=t,e},ar.removeGraph=e=>(delete e._graph,e);var nr={};(function(e){(function(){"use strict";Object.defineProperty(nr,"__esModule",{value:!0}),nr.default=void 0;const t={_output(e,t,i){this._log.push(t,i),this._levels.indexOf(e)<this._levels.indexOf(this.level)||this._console.log(t,...i)},_console:null,_log:[],_levels:["http","debug","unmapped","info","warn","error","silent"],level:"silent"};for(const e of t._levels)t[e]=(i,...r)=>t._output(e,i,r);"function"==typeof console.Console?t._console=new console.Console(e.stderr):t._console=console;var i=t;nr.default=i}).call(this)}).call(this,ve);var or={};Object.defineProperty(or,"__esModule",{value:!0}),or.typeMatcher=or.treeTypeParser=or.listTypeParser=or.removeTypeParser=or.hasTypeParser=or.addTypeParser=or.type=void 0;var lr,ur=(lr=nr)&&lr.__esModule?lr:{default:lr};const cr={},pr={},hr={},mr=(e,t)=>{switch(t){case"Array":return 0===e.length||e.every(e=>"@csl/object"===dr(e))?"@csl/list+object":"@else/list+object";case"SimpleObject":case"ComplexObject":return"@csl/object";default:return"@invalid"}},fr=(e=[],t)=>{for(const i of e)if(cr[i].predicate(t))return fr(cr[i].extensions,t)||i},dr=e=>{const t=(0,rr.dataTypeOf)(e);return"Array"===t&&0===e.length?mr(e,t):fr(pr[t],e)||mr(e,t)};or.type=dr,or.addTypeParser=(e,{dataType:t,predicate:i,extends:r})=>{let s=[];e in hr&&(s=hr[e],delete hr[e],ur.default.debug("[core]",`Subclasses "${s}" finally registered to parent type "${e}"`));const a={predicate:i,extensions:s};if(cr[e]=a,r){const t=cr[r];t?t.extensions.push(e):(hr[r]||(hr[r]=[]),hr[r].push(e),ur.default.debug("[core]",`Subclass "${e}" is waiting on parent type "${r}"`))}else(pr[t]||(pr[t]=[])).push(e)},or.hasTypeParser=e=>Object.prototype.hasOwnProperty.call(cr,e),or.removeTypeParser=e=>{delete cr[e],[...Object.keys(pr).map(e=>pr[e]),...Object.keys(cr).map(e=>cr[e].extensions).filter(e=>e.length>0)].forEach(t=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)})},or.listTypeParser=()=>Object.keys(cr),or.treeTypeParser=()=>{const e=t=>({name:t,children:cr[t].extensions.map(e)});return{name:"Type tree",children:Object.keys(pr).map(t=>({name:t,children:pr[t].map(e)}))}},or.typeMatcher=/^(?:@(.+?))(?:\/(?:(.+?)\+)?(?:(.+)))?$/;var gr={};Object.defineProperty(gr,"__esModule",{value:!0}),gr.FormatParser=gr.DataParser=gr.TypeParser=void 0;class br{constructor(e){var t,i;i=["String","Array","SimpleObject","ComplexObject","Primitive"],(t="validDataTypes")in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i,this.data=e}validateDataType(){const e=this.data.dataType;if(e&&!this.validDataTypes.includes(e))throw new RangeError(`dataType was ${e}; expected one of ${this.validDataTypes}`)}validateParseType(){const e=this.data.predicate;if(e&&!(e instanceof RegExp||"function"==typeof e))throw new TypeError(`predicate was ${typeof e}; expected RegExp or function`)}validateTokenList(){const e=this.data.tokenList;if(e&&"object"!=typeof e)throw new TypeError(`tokenList was ${typeof e}; expected object or RegExp`)}validatePropertyConstraint(){const e=this.data.propertyConstraint;if(e&&"object"!=typeof e)throw new TypeError(`propertyConstraint was ${typeof e}; expected array or object`)}validateElementConstraint(){const e=this.data.elementConstraint;if(e&&"string"!=typeof e)throw new TypeError(`elementConstraint was ${typeof e}; expected string`)}validateExtends(){const e=this.data.extends;if(e&&"string"!=typeof e)throw new TypeError(`extends was ${typeof e}; expected string`)}validate(){if(null===this.data||"object"!=typeof this.data)throw new TypeError(`typeParser was ${typeof this.data}; expected object`);this.validateDataType(),this.validateParseType(),this.validateTokenList(),this.validatePropertyConstraint(),this.validateElementConstraint(),this.validateExtends()}parseTokenList(){let e=this.data.tokenList;if(!e)return[];e instanceof RegExp&&(e={token:e});const{token:t,split:i=/\s+/,trim:r=!0,every:s=!0}=e,a=s?"every":"some";return[e=>(e=>r?e.trim():e)(e).split(i)[a](e=>t.test(e))]}parsePropertyConstraint(){return[].concat(this.data.propertyConstraint||[]).map(({props:e,match:t="every",value:i})=>{switch(e=[].concat(e),t){case"every":return t=>e.every(e=>e in t&&(!i||i(t[e])));case"any":case"some":return t=>e.some(e=>e in t&&(!i||i(t[e])));case"none":return t=>!e.some(e=>e in t&&(!i||i(t[e])))}})}parseElementConstraint(){const e=this.data.elementConstraint;return e?[t=>t.every(t=>(0,or.type)(t)===e)]:[]}parsePredicate(){return this.data.predicate instanceof RegExp?[this.data.predicate.test.bind(this.data.predicate)]:this.data.predicate?[this.data.predicate]:[]}getCombinedPredicate(){const e=[...this.parsePredicate(),...this.parseTokenList(),...this.parsePropertyConstraint(),...this.parseElementConstraint()];return 0===e.length?()=>!0:1===e.length?e[0]:t=>e.every(e=>e(t))}getDataType(){return this.data.dataType?this.data.dataType:this.data.predicate instanceof RegExp||this.data.tokenList?"String":this.data.elementConstraint?"Array":"Primitive"}get dataType(){return this.getDataType()}get predicate(){return this.getCombinedPredicate()}get extends(){return this.data.extends}}gr.TypeParser=br;class yr{constructor(e,{async:t}={}){this.parser=e,this.async=t}validate(){const e=this.parser;if("function"!=typeof e)throw new TypeError(`parser was ${typeof e}; expected function`)}}gr.DataParser=yr,gr.FormatParser=class{constructor(e,t={}){this.format=e,t.parseType&&(this.typeParser=new br(t.parseType)),t.parse&&(this.dataParser=new yr(t.parse,{async:!1})),t.parseAsync&&(this.asyncDataParser=new yr(t.parseAsync,{async:!0}))}validateFormat(){const e=this.format;if(!or.typeMatcher.test(e))throw new TypeError(`format name was "${e}"; didn't match expected pattern`)}validate(){this.validateFormat(),this.typeParser&&this.typeParser.validate(),this.dataParser&&this.dataParser.validate(),this.asyncDataParser&&this.asyncDataParser.validate()}};var vr={};function _r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],r=!0,s=!1,a=void 0;try{for(var n,o=e[Symbol.iterator]();!(r=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);r=!0);}catch(l){s=!0,a=l}finally{try{r||null==o.return||o.return()}finally{if(s)throw a}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(vr,"__esModule",{value:!0}),vr.default=vr.parse=vr.types=vr.scope=void 0;const xr=e=>e.replace(/$|( )|(?!^)(?=[A-Z])/g,"\\.?$1"),wr=e=>`(?:${e.join("|")})\\b`,Er=(e,t)=>new RegExp(`(?:^| )(${e}$)`,t),Ar=wr(["mr","mrs","ms","miss","dr","herr","monsieur","hr","frau","a v m","admiraal","admiral","air cdre","air commodore","air marshal","air vice marshal","alderman","alhaji","ambassador","baron","barones","brig","brig gen","brig general","brigadier","brigadier general","brother","canon","capt","captain","cardinal","cdr","chief","cik","cmdr","coach","col","col dr","colonel","commandant","commander","commissioner","commodore","comte","comtessa","congressman","conseiller","consul","conte","contessa","corporal","councillor","count","countess","crown prince","crown princess","dame","datin","dato","datuk","datuk seri","deacon","deaconess","dean","dhr","dipl ing","doctor","dott","dott sa","dr","dr ing","dra","drs","embajador","embajadora","en","encik","eng","eur ing","exma sra","exmo sr","f o","father","first lieutient","first officer","flt lieut","flying officer","fr","frau","fraulein","fru","gen","generaal","general","governor","graaf","gravin","group captain","grp capt","h e dr","h h","h m","h r h","hajah","haji","hajim","her highness","her majesty","herr","high chief","his highness","his holiness","his majesty","hon","hr","hra","ing","ir","jonkheer","judge","justice","khun ying","kolonel","lady","lcda","lic","lieut","lieut cdr","lieut col","lieut gen","lord","m","m l","m r","madame","mademoiselle","maj gen","major","master","mevrouw","miss","mlle","mme","monsieur","monsignor","mr","mrs","ms","mstr","nti","pastor","president","prince","princess","princesse","prinses","prof","prof dr","prof sir","professor","puan","puan sri","rabbi","rear admiral","rev","rev canon","rev dr","rev mother","reverend","rva","senator","sergeant","sheikh","sheikha","sig","sig na","sig ra","sir","sister","sqn ldr","sr","sr d","sra","srta","sultan","tan sri","tan sri dato","tengku","teuku","than puying","the hon dr","the hon justice","the hon miss","the hon mr","the hon mrs","the hon ms","the hon sir","the very rev","toh puan","tun","vice admiral","viscount","viscountess","wg cdr"].map(xr)),Tr=wr(["I","II","III","IV","V","Senior","Junior","Jr","Sr","PhD","Ph\\.D","APR","RPh","PE","MD","MA","DMD","CME","BVM","CFRE","CLU","CPA","CSC","CSJ","DC","DD","DDS","DO","DVM","EdD","Esq","JD","LLD","OD","OSB","PC","Ret","RGS","RN","RNC","SHCJ","SJ","SNJM","SSMO","USA","USAF","USAFR","USAR","USCG","USMC","USMCR","USN","USNR"].map(xr)),Sr=wr(["Vere","Von","Van","De","Del","Della","Di","Da","Pietro","Vanden","Du","St.","St","La","Lo","Ter","O","O'","Mac","Fitz"]),Or=new RegExp(`^((?:${Ar} )*)(.*)$`,"i"),Qr=Er(`(?:${Tr}, )*(?:${Tr})`,"i"),kr=Er(/(?:[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1C90-\u1CBA\u1CBD-\u1CBF\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2160-\u216F\u2183\u24B6-\u24CF\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AE\uA7B0-\uA7B4\uA7B6\uA7B8\uFF21-\uFF3A]|\uD801[\uDC00-\uDC27\uDCB0-\uDCD3]|\uD803[\uDC80-\uDCB2]|\uD806[\uDCA0-\uDCBF]|\uD81B[\uDE40-\uDE5F]|\uD835[\uDC00-\uDC19\uDC34-\uDC4D\uDC68-\uDC81\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB5\uDCD0-\uDCE9\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD38\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD6C-\uDD85\uDDA0-\uDDB9\uDDD4-\uDDED\uDE08-\uDE21\uDE3C-\uDE55\uDE70-\uDE89\uDEA8-\uDEC0\uDEE2-\uDEFA\uDF1C-\uDF34\uDF56-\uDF6E\uDF90-\uDFA8\uDFCA]|\uD83A[\uDD00-\uDD21]|\uD83C[\uDD30-\uDD49\uDD50-\uDD69\uDD70-\uDD89])/.source+".*"),Cr=Er(`(?:${/(?:[a-z\xAA\xB5\xBA\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02B8\u02C0\u02C1\u02E0-\u02E4\u0345\u0371\u0373\u0377\u037A-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0560-\u0588\u10D0-\u10FA\u10FD-\u10FF\u13F8-\u13FD\u1C80-\u1C88\u1D00-\u1DBF\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u2071\u207F\u2090-\u209C\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2170-\u217F\u2184\u24D0-\u24E9\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7D\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B-\uA69D\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7AF\uA7B5\uA7B7\uA7B9\uA7F8-\uA7FA\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]|\uD801[\uDC28-\uDC4F\uDCD8-\uDCFB]|\uD803[\uDCC0-\uDCF2]|\uD806[\uDCC0-\uDCDF]|\uD81B[\uDE60-\uDE7F]|\uD835[\uDC1A-\uDC33\uDC4E-\uDC54\uDC56-\uDC67\uDC82-\uDC9B\uDCB6-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDCEA-\uDD03\uDD1E-\uDD37\uDD52-\uDD6B\uDD86-\uDD9F\uDDBA-\uDDD3\uDDEE-\uDE07\uDE22-\uDE3B\uDE56-\uDE6F\uDE8A-\uDEA5\uDEC2-\uDEDA\uDEDC-\uDEE1\uDEFC-\uDF14\uDF16-\uDF1B\uDF36-\uDF4E\uDF50-\uDF55\uDF70-\uDF88\uDF8A-\uDF8F\uDFAA-\uDFC2\uDFC4-\uDFC9\uDFCB]|\uD83A[\uDD22-\uDD43])/.source}.*|${Sr}.*|\\S*)`);vr.default=vr.parse=function(e=""){"string"!=typeof e&&(e+="");let t="",i="",r="";if(/[^.], /.test(e)){const s=e.split(", ");r=s.shift();const a=RegExp(Tr).exec(s.join(", "));t=s.splice(a&&0!==a.index?0:-1,1)[0],i=s.join(", ")}else{const s=e.split(Qr,2),a=s.shift().split(Cr,2);t=a[0],r=a[1],i=s.pop()}const s=_r(t.match(Or),3),a=s[1],n=s[2],o=i,l=_r(r.split(kr,2).reverse(),2),u=l[0],c=l[1];if(!n&&u)return u.includes(" ")?{literal:u}:{family:u};if(u){const e={"dropping-particle":a,given:n,suffix:o,"non-dropping-particle":c,family:u};return Object.keys(e).forEach(t=>{e[t]||delete e[t]}),e}return{literal:e}},vr.scope="@name",vr.types="@name";var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0}),Ir.default=void 0;const Nr=["dropping-particle","given"],Rr=["suffix"],Pr=["non-dropping-particle","family"];Ir.default=function(e,t=!1){const i=t=>t.map(t=>e[t]||"").filter(Boolean).join(" ");if(e.literal)return e.literal;if(t){const e=i(Rr)?", "+i(Rr):"",t=i(Nr)?", "+i(Nr):"";return i(Pr)+e+t}return""+i([...Nr,...Rr,...Pr])};var Dr={};Object.defineProperty(Dr,"__esModule",{value:!0}),Object.defineProperty(Dr,"parse",{enumerable:!0,get:function(){return jr.default}}),Object.defineProperty(Dr,"format",{enumerable:!0,get:function(){return Lr.default}});var jr=Mr(vr),Lr=Mr(Ir);function Mr(e){return e&&e.__esModule?e:{default:e}}var Br={};function Ur(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function Fr(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(i),!0).forEach((function(t){Gr(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ur(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Gr(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(Br,"__esModule",{value:!0}),Br.clean=void 0;const qr={author:2,"collection-editor":2,composer:2,"container-author":2,editor:2,"editorial-director":2,director:2,interviewer:2,illustrator:2,"original-author":2,"reviewed-author":2,recipient:2,translator:2,accessed:3,container:3,"event-date":3,issued:3,"original-date":3,submitted:3,categories:"object",id:["string","number"],type:"string",language:"string",journalAbbreviation:"string",shortTitle:"string",abstract:"string",annote:"string",archive:"string",archive_location:"string","archive-place":"string",authority:"string","call-number":"string","chapter-number":"string","citation-number":"string","citation-label":"string","collection-number":"string","collection-title":"string","container-title":"string","container-title-short":"string",dimensions:"string",DOI:"string",edition:["string","number"],event:"string","event-place":"string","first-reference-note-number":"string",genre:"string",ISBN:"string",ISSN:"string",issue:["string","number"],jurisdiction:"string",keyword:"string",locator:"string",medium:"string",note:"string",number:["string","number"],"number-of-pages":"string","number-of-volumes":["string","number"],"original-publisher":"string","original-publisher-place":"string","original-title":"string",page:"string","page-first":"string",PMCID:"string",PMID:"string",publisher:"string","publisher-place":"string",references:"string","reviewed-title":"string",scale:"string",section:"string",source:"string",status:"string",title:"string","title-short":"string",URL:"string",version:"string",volume:["string","number"],"year-suffix":"string"},zr=function(e,t){return"object"==typeof e&&null!==e&&(e.literal||e.given||e.family)?e:t&&"string"==typeof e?(0,Dr.parse)(e):void 0},Vr=function(e,t){return e.every(e=>"number"==typeof e)?e:!t||e.some(e=>isNaN(parseInt(e)))?void 0:e.map(e=>parseInt(e))},Hr=function(e,t,i){const r=[].concat(qr[e]);switch(qr[e]){case 1:return zr(t,i);case 2:return function(e,t){if(e instanceof Array){const i=e.map(e=>zr(e,t)).filter(Boolean);return i.length?i:void 0}}(t,i);case 3:return function(e,t){const i="date-parts";if("object"==typeof e&&null!==e){if(e[i]instanceof Array&&e[i].every(e=>e instanceof Array)){const r=e[i].map(e=>Vr(e,t)).filter(Boolean);return r.length?Fr(Fr({},e),{},{"date-parts":r}):void 0}if(e instanceof Array&&e.every(e=>e[i]instanceof Array)){const r=e.map(e=>Vr(e[i],t)).filter(Boolean);return r.length?{"date-parts":r}:void 0}return"literal"in e||"raw"in e?e:void 0}}(t,i)}if(/^_/.test(e))return t;if(i){if("string"==typeof t&&r.includes("number")&&!isNaN(+t))return parseFloat(t);if("number"==typeof t&&r.includes("string")&&!r.includes("number"))return t.toString();if(Array.isArray(t)&&t.length)return Hr(e,t[0],i)}return r.includes(typeof t)?t:void 0};Br.clean=function(e,t=!0){return e.map((function(e){const i={};for(const r in e){const s=Hr(r,e[r],t);void 0!==s&&(i[r]=s)}return i}))};var Wr={};function $r(e,t=new Set){if("object"!=typeof e||null===e||e.constructor!==Object&&e.constructor!==Array)return e;if(t.has(e))throw new TypeError("Recursively copying circular structure");let i;if(t.add(e),e.constructor===Array)i=e.map(e=>$r(e,t));else{const r={};for(const i in e)r[i]=$r(e[i],t);i=r}return t.delete(e),i}Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.deepCopy=$r,Wr.default=void 0;var Yr=$r;Wr.default=Yr;var Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});var Xr={util:!0};Jr.util=void 0;var Kr=ns(rr),Zr=ns(ar),es=ns(gr),ts=ns(Br),is=d({});Object.keys(is).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(Xr,e)||e in Jr&&Jr[e]===is[e]||Object.defineProperty(Jr,e,{enumerable:!0,get:function(){return is[e]}}))}));var rs=b({});Object.keys(rs).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(Xr,e)||e in Jr&&Jr[e]===rs[e]||Object.defineProperty(Jr,e,{enumerable:!0,get:function(){return rs[e]}}))})),Object.keys(or).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(Xr,e)||e in Jr&&Jr[e]===or[e]||Object.defineProperty(Jr,e,{enumerable:!0,get:function(){return or[e]}}))}));var ss=g({});function as(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return as=function(){return e},e}function ns(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=as();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,t&&t.set(e,i),i}Object.keys(ss).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(Xr,e)||e in Jr&&Jr[e]===ss[e]||Object.defineProperty(Jr,e,{enumerable:!0,get:function(){return ss[e]}}))}));const os=Object.assign({},Kr,Zr,es,ts);Jr.util=os;var ls={};Object.defineProperty(ls,"__esModule",{value:!0}),ls.default=void 0;ls.default=function(e,t){let i;for(;void 0===i||e.includes(i);)i=`${t}${Math.random().toString().slice(2)}`;return i};var us={};Object.defineProperty(us,"__esModule",{value:!0}),us.reset=us.setAsync=us.set=us.addAsync=us.add=void 0;var cs,ps=(cs=ls)&&cs.__esModule?cs:{default:cs};us.add=function(e,t={},i=!1){return!0!==t&&!0!==i||this.save(),this.data.push(...(0,Jr.chain)(e,t)),this.data.filter(e=>!Object.prototype.hasOwnProperty.call(e,"id")).forEach(e=>{e.id=(0,ps.default)(this.getIds(),"temp_id_")}),this},us.addAsync=async function(e,t={},i=!1){return!0!==t&&!0!==i||this.save(),this.data.push(...await(0,Jr.chainAsync)(e,t)),this.data.filter(e=>!Object.prototype.hasOwnProperty.call(e,"id")).forEach(e=>{e.id=(0,ps.default)(this.getIds(),"temp_id_")}),this},us.set=function(e,t={},i=!1){return!0!==t&&!0!==i||this.save(),this.data=[],"boolean"!=typeof t?this.add(e,t):this.add(e)},us.setAsync=async function(e,t={},i=!1){return!0!==t&&!0!==i||this.save(),this.data=[],"boolean"!=typeof t?this.addAsync(e,t):this.addAsync(e)},us.reset=function(e){return e&&this.save(),this.data=[],this._options={},this};var hs={};Object.defineProperty(hs,"__esModule",{value:!0}),hs.default=hs.getLabel=void 0;const ms=e=>{if("citation-label"in e)return e["citation-label"];let t="";return e.author&&(t+=e.author[0].family||e.author[0].literal),e.issued&&e.issued["date-parts"]&&e.issued["date-parts"][0]&&(t+=e.issued["date-parts"][0][0]),e["year-suffix"]?t+=e["year-suffix"]:e.title&&(t+=e.title.replace(/<\/?.*?>/g,"").match(/^(?:(?:the|a|an)\s+)?(\S+)/i)[1]),t};hs.getLabel=ms;var fs={label:e=>e.reduce((e,t)=>(e[t.id]=ms(t),e),{})};hs.default=fs;var ds={};Object.defineProperty(ds,"__esModule",{value:!0}),ds.sort=void 0;const gs=function(e,t,i="label"===t){let r=i?(0,hs.getLabel)(e):e[t];switch(t){case"author":case"editor":return r.map(e=>e.literal||e.family||(0,Dr.format)(e));case"accessed":case"issued":return r["date-parts"][0];case"page":return r.split("-").map(e=>parseInt(e));case"edition":case"issue":case"volume":return r=parseInt(r),isNaN(r)?-1/0:r;default:return r||-1/0}},bs=function(e,t,i,r=/^!/.test(i)){i=i.replace(/^!/,"");const s=gs(e,i),a=gs(t,i);return(r?-1:1)*(s>a?1:s<a?-1:0)};ds.sort=function(e=[],t){return t&&this.save(),this.data.sort("function"==typeof e?e:function(...e){return(t,i)=>{const r=e.slice();let s=0;for(;!s&&r.length;)s=bs(t,i,r.shift());return s}}(...e,"label")),this};var ys={};Object.defineProperty(ys,"__esModule",{value:!0}),ys.default=void 0;ys.default=class{constructor(e={}){this.data=e}set(e,t){return this.data[e]=t,this}add(...e){return this.set(...e)}delete(e){return delete this.data[e],this}remove(...e){return this.delete(...e)}get(e){return this.data[e]}has(e){return Object.prototype.hasOwnProperty.call(this.data,e)}list(){return Object.keys(this.data)}};var vs,_s={};Object.defineProperty(_s,"__esModule",{value:!0}),_s.format=_s.list=_s.has=_s.remove=_s.add=_s.register=void 0;const xs=new((vs=ys)&&vs.__esModule?vs:{default:vs}).default;_s.register=xs,_s.add=(e,t)=>{((e,t)=>{if("string"!=typeof e)throw new TypeError("Invalid output format name, expected string, got "+typeof e);if("function"!=typeof t)throw new TypeError("Invalid formatter, expected function, got "+typeof t)})(e,t),xs.set(e,t)},_s.remove=e=>{xs.remove(e)},_s.has=e=>xs.has(e),_s.list=()=>xs.list(),_s.format=(e,t,...i)=>{if(!xs.has(e))throw new Error(`Output format "${e}" unavailable`);return xs.get(e)(t,...i)};var ws,Es={};Object.defineProperty(Es,"__esModule",{value:!0}),Es.textDict=Es.htmlDict=Es.get=Es.list=Es.has=Es.remove=Es.add=Es.register=void 0;const As=new((ws=ys)&&ws.__esModule?ws:{default:ws}).default({html:{bibliographyContainer:['<div class="csl-bib-body">',"</div>"],entry:['<div class="csl-entry">',"</div>"],list:['<ul style="list-style-type:none">',"</ul>"],listItem:["<li>","</li>"]},text:{bibliographyContainer:["","\n"],entry:["","\n"],list:["\n",""],listItem:["\t","\n"]}});Es.register=As,Es.add=(e,t)=>{((e,t)=>{if("string"!=typeof e)throw new TypeError("Invalid dict name, expected string, got "+typeof e);if("object"!=typeof t)throw new TypeError("Invalid dict, expected object, got "+typeof t);for(const i in t){const e=t[i];if(!Array.isArray(e)||e.some(e=>"string"!=typeof e))throw new TypeError(`Invalid dict entry "${i}", expected array of strings`)}})(e,t),As.set(e,t)},Es.remove=e=>{As.remove(e)},Es.has=e=>As.has(e),Es.list=()=>As.list(),Es.get=e=>{if(!As.has(e))throw new Error(`Dict "${e}" unavailable`);return As.get(e)},Es.htmlDict={wr_start:'<div class="csl-bib-body">',wr_end:"</div>",en_start:'<div class="csl-entry">',en_end:"</div>",ul_start:'<ul style="list-style-type:none">',ul_end:"</ul>",li_start:"<li>",li_end:"</li>"},Es.textDict={wr_start:"",wr_end:"\n",en_start:"",en_end:"\n",ul_start:"\n",ul_end:"",li_start:"\t",li_end:"\n"};var Ts={};Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.list=Ts.remove=Ts.has=Ts.get=Ts.add=void 0;const Ss={};Ts.add=(e,t)=>{Ss[e]=t},Ts.get=e=>Ss[e],Ts.has=e=>Object.prototype.hasOwnProperty.call(Ss,e),Ts.remove=e=>{delete Ss[e]},Ts.list=()=>Object.keys(Ss);var Os={};Object.defineProperty(Os,"__esModule",{value:!0}),Os.config=Os.dict=Os.output=Os.input=Os.list=Os.has=Os.remove=Os.add=void 0;var Qs=Rs(Jr);Os.input=Qs;var ks=Rs(_s);Os.output=ks;var Cs=Rs(Es);Os.dict=Cs;var Is=Rs(Ts);function Ns(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Ns=function(){return e},e}function Rs(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=Ns();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,t&&t.set(e,i),i}Os.config=Is;const Ps={input:Qs,output:ks,dict:Cs,config:Is},Ds={};Os.add=(e,t={})=>{const i=Ds[e]={};for(const r in t){if("config"===r){i.config={[e]:t.config},Ps.config.add(e,t.config);continue}const s=i[r]={},a=t[r];for(const e in a){const t=a[e];s[e]=!0,Ps[r].add(e,t)}}},Os.remove=e=>{const t=Ds[e];for(const i in t){const e=t[i];for(const t in e)Ps[i].remove(t)}delete Ds[e]},Os.has=e=>e in Ds,Os.list=()=>Object.keys(Ds);var js={};(function(e){(function(){"use strict";var e="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;js.Buffer=i,js.INSPECT_MAX_BYTES=50;function t(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,i.prototype),t}function i(e,t,i){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return a(e)}return r(e,t,i)}function r(e,r,s){if("string"==typeof e)return function(e,r){if("string"==typeof r&&""!==r||(r="utf8"),!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var s=0|u(e,r),a=t(s),n=a.write(e,r);return n!==s&&(a=a.slice(0,n)),a}(e,r);if(ArrayBuffer.isView(e))return function(e){if(P(e,Uint8Array)){var t=new Uint8Array(e);return o(t.buffer,t.byteOffset,t.byteLength)}return n(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(P(e,ArrayBuffer)||e&&P(e.buffer,ArrayBuffer))return o(e,r,s);if("undefined"!=typeof SharedArrayBuffer&&(P(e,SharedArrayBuffer)||e&&P(e.buffer,SharedArrayBuffer)))return o(e,r,s);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var a=e.valueOf&&e.valueOf();if(null!=a&&a!==e)return i.from(a,r,s);var c=function(e){if(i.isBuffer(e)){var r=0|l(e.length),s=t(r);return 0===s.length||e.copy(s,0,0,r),s}return void 0!==e.length?"number"!=typeof e.length||D(e.length)?t(0):n(e):"Buffer"===e.type&&Array.isArray(e.data)?n(e.data):void 0}(e);if(c)return c;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return i.from(e[Symbol.toPrimitive]("string"),r,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function a(e){return s(e),t(e<0?0:0|l(e))}function n(e){for(var i=e.length<0?0:0|l(e.length),r=t(i),s=0;s<i;s+=1)r[s]=255&e[s];return r}function o(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var s;return s=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(s,i.prototype),s}function l(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e}function u(e,t){if(i.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||P(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===r)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return I(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return N(e).length;default:if(a)return s?-1:I(e).length;t=(""+t).toLowerCase(),a=!0}}function c(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function p(e,t,r,s,a){if(0===e.length)return-1;if("string"==typeof r?(s=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),D(r=+r)&&(r=a?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(a)return-1;r=e.length-1}else if(r<0){if(!a)return-1;r=0}if("string"==typeof t&&(t=i.from(t,s)),i.isBuffer(t))return 0===t.length?-1:h(e,t,r,s,a);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):h(e,[t],r,s,a);throw new TypeError("val must be string, number or Buffer")}function h(e,t,i,r,s){var a,n=1,o=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;n=2,o/=2,l/=2,i/=2}function u(e,t){return 1===n?e[t]:e.readUInt16BE(t*n)}if(s){var c=-1;for(a=i;a<o;a++)if(u(e,a)===u(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===l)return c*n}else-1!==c&&(a-=a-c),c=-1}else for(i+l>o&&(i=o-l),a=i;a>=0;a--){for(var p=!0,h=0;h<l;h++)if(u(e,a+h)!==u(t,h)){p=!1;break}if(p)return a}return-1}function m(e,t,i,r){i=Number(i)||0;var s=e.length-i;r?(r=Number(r))>s&&(r=s):r=s;var a=t.length;r>a/2&&(r=a/2);for(var n=0;n<r;++n){var o=parseInt(t.substr(2*n,2),16);if(D(o))return n;e[i+n]=o}return n}function f(e,t,i,r){return R(I(t,e.length-i),e,i,r)}function d(e,t,i,r){return R(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,r)}function g(e,t,i,r){return R(N(t),e,i,r)}function b(e,t,i,r){return R(function(e,t){for(var i,r,s,a=[],n=0;n<e.length&&!((t-=2)<0);++n)r=(i=e.charCodeAt(n))>>8,s=i%256,a.push(s),a.push(r);return a}(t,e.length-i),e,i,r)}function y(e,t,i){return 0===t&&i===e.length?Z.fromByteArray(e):Z.fromByteArray(e.slice(t,i))}function v(e,t,i){i=Math.min(e.length,i);for(var r=[],s=t;s<i;){var a,n,o,l,u=e[s],c=null,p=u>239?4:u>223?3:u>191?2:1;if(s+p<=i)switch(p){case 1:u<128&&(c=u);break;case 2:128==(192&(a=e[s+1]))&&(l=(31&u)<<6|63&a)>127&&(c=l);break;case 3:a=e[s+1],n=e[s+2],128==(192&a)&&128==(192&n)&&(l=(15&u)<<12|(63&a)<<6|63&n)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:a=e[s+1],n=e[s+2],o=e[s+3],128==(192&a)&&128==(192&n)&&128==(192&o)&&(l=(15&u)<<18|(63&a)<<12|(63&n)<<6|63&o)>65535&&l<1114112&&(c=l)}null===c?(c=65533,p=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),s+=p}return function(e){var t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);for(var i="",r=0;r<t;)i+=String.fromCharCode.apply(String,e.slice(r,r+=_));return i}(r)}i.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(i){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),i.poolSize=8192,i.from=function(e,t,i){return r(e,t,i)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(e,i,r){return function(e,i,r){return s(e),e<=0?t(e):void 0!==i?"string"==typeof r?t(e).fill(i,r):t(e).fill(i):t(e)}(e,i,r)},i.allocUnsafe=function(e){return a(e)},i.allocUnsafeSlow=function(e){return a(e)},i.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==i.prototype},i.compare=function(e,t){if(P(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),P(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,s=t.length,a=0,n=Math.min(r,s);a<n;++a)if(e[a]!==t[a]){r=e[a],s=t[a];break}return r<s?-1:s<r?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var s=i.allocUnsafe(t),a=0;for(r=0;r<e.length;++r){var n=e[r];if(P(n,Uint8Array))a+n.length>s.length?i.from(n).copy(s,a):Uint8Array.prototype.set.call(s,n,a);else{if(!i.isBuffer(n))throw new TypeError('"list" argument must be an Array of Buffers');n.copy(s,a)}a+=n.length}return s},i.byteLength=u,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)c(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)c(this,t,t+3),c(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)c(this,t,t+7),c(this,t+1,t+6),c(this,t+2,t+5),c(this,t+3,t+4);return this},i.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?v(this,0,e):function(e,t,i){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return E(this,t,i);case"utf8":case"utf-8":return v(this,t,i);case"ascii":return x(this,t,i);case"latin1":case"binary":return w(this,t,i);case"base64":return y(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,i);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",t=js.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},e&&(i.prototype[e]=i.prototype.inspect),i.prototype.compare=function(e,t,r,s,a){if(P(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===s&&(s=0),void 0===a&&(a=this.length),t<0||r>e.length||s<0||a>this.length)throw new RangeError("out of range index");if(s>=a&&t>=r)return 0;if(s>=a)return-1;if(t>=r)return 1;if(this===e)return 0;for(var n=(a>>>=0)-(s>>>=0),o=(r>>>=0)-(t>>>=0),l=Math.min(n,o),u=this.slice(s,a),c=e.slice(t,r),p=0;p<l;++p)if(u[p]!==c[p]){n=u[p],o=c[p];break}return n<o?-1:o<n?1:0},i.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},i.prototype.indexOf=function(e,t,i){return p(this,e,t,i,!0)},i.prototype.lastIndexOf=function(e,t,i){return p(this,e,t,i,!1)},i.prototype.write=function(e,t,i,r){if(void 0===t)r="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)r=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var s=this.length-t;if((void 0===i||i>s)&&(i=s),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return m(this,e,t,i);case"utf8":case"utf-8":return f(this,e,t,i);case"ascii":case"latin1":case"binary":return d(this,e,t,i);case"base64":return g(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,i);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function x(e,t,i){var r="";i=Math.min(e.length,i);for(var s=t;s<i;++s)r+=String.fromCharCode(127&e[s]);return r}function w(e,t,i){var r="";i=Math.min(e.length,i);for(var s=t;s<i;++s)r+=String.fromCharCode(e[s]);return r}function E(e,t,i){var r=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>r)&&(i=r);for(var s="",a=t;a<i;++a)s+=j[e[a]];return s}function A(e,t,i){for(var r=e.slice(t,i),s="",a=0;a<r.length-1;a+=2)s+=String.fromCharCode(r[a]+256*r[a+1]);return s}function T(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function S(e,t,r,s,a,n){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<n)throw new RangeError('"value" argument is out of bounds');if(r+s>e.length)throw new RangeError("Index out of range")}function O(e,t,i,r,s,a){if(i+r>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function Q(e,t,i,r,s){return t=+t,i>>>=0,s||O(e,0,i,4),le.write(e,t,i,r,23,4),i+4}function k(e,t,i,r,s){return t=+t,i>>>=0,s||O(e,0,i,8),le.write(e,t,i,r,52,8),i+8}i.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var s=this.subarray(e,t);return Object.setPrototypeOf(s,i.prototype),s},i.prototype.readUintLE=i.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||T(e,t,this.length);for(var r=this[e],s=1,a=0;++a<t&&(s*=256);)r+=this[e+a]*s;return r},i.prototype.readUintBE=i.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||T(e,t,this.length);for(var r=this[e+--t],s=1;t>0&&(s*=256);)r+=this[e+--t]*s;return r},i.prototype.readUint8=i.prototype.readUInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),this[e]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||T(e,t,this.length);for(var r=this[e],s=1,a=0;++a<t&&(s*=256);)r+=this[e+a]*s;return r>=(s*=128)&&(r-=Math.pow(2,8*t)),r},i.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||T(e,t,this.length);for(var r=t,s=1,a=this[e+--r];r>0&&(s*=256);)a+=this[e+--r]*s;return a>=(s*=128)&&(a-=Math.pow(2,8*t)),a},i.prototype.readInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){e>>>=0,t||T(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},i.prototype.readInt16BE=function(e,t){e>>>=0,t||T(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},i.prototype.readInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return e>>>=0,t||T(e,4,this.length),le.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return e>>>=0,t||T(e,4,this.length),le.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return e>>>=0,t||T(e,8,this.length),le.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return e>>>=0,t||T(e,8,this.length),le.read(this,e,!1,52,8)},i.prototype.writeUintLE=i.prototype.writeUIntLE=function(e,t,i,r){e=+e,t>>>=0,i>>>=0,r||S(this,e,t,i,Math.pow(2,8*i)-1,0);var s=1,a=0;for(this[t]=255&e;++a<i&&(s*=256);)this[t+a]=e/s&255;return t+i},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(e,t,i,r){e=+e,t>>>=0,i>>>=0,r||S(this,e,t,i,Math.pow(2,8*i)-1,0);var s=i-1,a=1;for(this[t+s]=255&e;--s>=0&&(a*=256);)this[t+s]=e/a&255;return t+i},i.prototype.writeUint8=i.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,1,255,0),this[t]=255&e,t+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeIntLE=function(e,t,i,r){if(e=+e,t>>>=0,!r){var s=Math.pow(2,8*i-1);S(this,e,t,i,s-1,-s)}var a=0,n=1,o=0;for(this[t]=255&e;++a<i&&(n*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/n>>0)-o&255;return t+i},i.prototype.writeIntBE=function(e,t,i,r){if(e=+e,t>>>=0,!r){var s=Math.pow(2,8*i-1);S(this,e,t,i,s-1,-s)}var a=i-1,n=1,o=0;for(this[t+a]=255&e;--a>=0&&(n*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/n>>0)-o&255;return t+i},i.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},i.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||S(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeFloatLE=function(e,t,i){return Q(this,e,t,!0,i)},i.prototype.writeFloatBE=function(e,t,i){return Q(this,e,t,!1,i)},i.prototype.writeDoubleLE=function(e,t,i){return k(this,e,t,!0,i)},i.prototype.writeDoubleBE=function(e,t,i){return k(this,e,t,!1,i)},i.prototype.copy=function(e,t,r,s){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),s||0===s||(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&s<r&&(s=r),s===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-r&&(s=e.length-t+r);var a=s-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,s):Uint8Array.prototype.set.call(e,this.subarray(r,s),t),a},i.prototype.fill=function(e,t,r,s){if("string"==typeof e){if("string"==typeof t?(s=t,t=0,r=this.length):"string"==typeof r&&(s=r,r=this.length),void 0!==s&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("string"==typeof s&&!i.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(1===e.length){var a=e.charCodeAt(0);("utf8"===s&&a<128||"latin1"===s)&&(e=a)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var n;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{var o=i.isBuffer(e)?e:i.from(e,s),l=o.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=o[n%l]}return this};var C=/[^+/0-9A-Za-z-_]/g;function I(e,t){var i;t=t||1/0;for(var r=e.length,s=null,a=[],n=0;n<r;++n){if((i=e.charCodeAt(n))>55295&&i<57344){if(!s){if(i>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(n+1===r){(t-=3)>-1&&a.push(239,191,189);continue}s=i;continue}if(i<56320){(t-=3)>-1&&a.push(239,191,189),s=i;continue}i=65536+(s-55296<<10|i-56320)}else s&&(t-=3)>-1&&a.push(239,191,189);if(s=null,i<128){if((t-=1)<0)break;a.push(i)}else if(i<2048){if((t-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function N(e){return Z.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(C,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function R(e,t,i,r){for(var s=0;s<r&&!(s+i>=t.length||s>=e.length);++s)t[s+i]=e[s];return s}function P(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function D(e){return e!=e}var j=function(){for(var e=new Array(256),t=0;t<16;++t)for(var i=16*t,r=0;r<16;++r)e[i+r]="0123456789abcdef"[t]+"0123456789abcdef"[r];return e}()}).call(this)}).call(this,L({}).Buffer);var Ls;const{Buffer:Ms}=js;function Bs(...e){const[t,i]=function(e,t){const i=[];return e instanceof Bs.Request?(i.push(e.url),i.push({method:e.method,headers:e.headers,body:e.body})):i.push(e,{}),Object.assign(i[1],t),i[1].headers=new Bs.Headers(i[1].headers||{}),i}(...e),r=new XMLHttpRequest;r.withCredentials="include"===i.credentials,r.timeout=i.timeout,r.open(i.method||"GET",t,!1);try{r.responseType="arraybuffer"}catch(a){}for(const n of i.headers)r.setRequestHeader(...n);r.send(i.body||null);let s=r.getAllResponseHeaders();return s=s&&s.split("\r\n").filter(Boolean).map(e=>e.split(": ",2)),new Bs.Response(r.response,{url:r.responseURL,status:r.status,statusText:r.statusText,headers:s,redirected:r.responseURL!==t})}const Us=Symbol("SyncFetch Internals");class Fs extends Request{constructor(e,t={},i=t.body){super(e,t),this[Us]={body:i?Ms.from(i):null}}clone(){return zs(this),new Fs(this.url,this)}}class Gs extends Response{constructor(e,t={}){super(function(e){return new ReadableStream({start(t){t.enqueue(e),t.close()}})}(e=e?Ms.from(e):null),t),this[Us]={url:t.url,redirected:t.redirected,body:e}}get url(){return this[Us].url}get redirected(){return this[Us].redirected}clone(){return zs(this),new Gs(this[Us].body,{url:this.url,headers:this.headers,status:this.status,statusText:this.statusText,redirected:this.redirected})}}class qs{constructor(e){this[Us]={body:Ms.from(e)}}static mixin(e){for(const t of Object.getOwnPropertyNames(qs.prototype)){if("constructor"===t)continue;const i=Object.getOwnPropertyDescriptor(qs.prototype,t);Object.defineProperty(e,t,{...i,enumerable:!0})}}arrayBuffer(){zs(this);const e=Vs(this);return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}blob(){zs(this);const e=this.headers&&this.headers.get("content-type");return new Blob([Vs(this)],e&&{type:e})}text(){return zs(this),Vs(this).toString()}json(){zs(this);try{return JSON.parse(Vs(this).toString())}catch(e){throw new TypeError(`invalid json response body at ${this.url} reason: ${e.message}`,"invalid-json")}}buffer(){return zs(this),Vs(this).clone()}}function zs(e){if(e.bodyUsed)throw new TypeError("body used already for: "+e.url)}function Vs(e){var t;return(t=e,"arrayBuffer",Object.getPrototypeOf(Object.getPrototypeOf(t)).arrayBuffer.bind(t))(),e[Us].body||Ms.alloc(0)}qs.mixin(Fs.prototype),qs.mixin(Gs.prototype),Bs.Headers=self.Headers,Bs.Request=Fs,Bs.Response=Gs,Ls=Bs;var Hs,Ws={exports:{}};Hs=function(e){"use strict";var t="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==t&&t,i="URLSearchParams"in t,r="Symbol"in t&&"iterator"in Symbol,s="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in t,n="ArrayBuffer"in t;if(n)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&o.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function c(e){return"string"!=typeof e&&(e=String(e)),e}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function m(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise((function(t,i){e.onload=function(){t(e.result)},e.onerror=function(){i(e.error)}}))}function d(e){var t=new FileReader,i=f(t);return t.readAsArrayBuffer(e),i}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:s&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():n&&s&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=g(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(d)}),this.text=function(){var e,t,i,r=m(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,i=f(t=new FileReader),t.readAsText(e),i;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),i=new Array(t.length),r=0;r<t.length;r++)i[r]=String.fromCharCode(t[r]);return i.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=u(e),t=c(t);var i=this.map[e];this.map[e]=i?i+", "+t:t},h.prototype.delete=function(e){delete this.map[u(e)]},h.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},h.prototype.set=function(e,t){this.map[u(e)]=c(t)},h.prototype.forEach=function(e,t){for(var i in this.map)this.map.hasOwnProperty(i)&&e.call(t,this.map[i],i,this)},h.prototype.keys=function(){var e=[];return this.forEach((function(t,i){e.push(i)})),p(e)},h.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),p(e)},h.prototype.entries=function(){var e=[];return this.forEach((function(t,i){e.push([i,t])})),p(e)},r&&(h.prototype[Symbol.iterator]=h.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(e,t){if(!(this instanceof v))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var i,r,s=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,s||null==e._bodyInit||(s=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=(r=(i=t.method||this.method||"GET").toUpperCase(),y.indexOf(r)>-1?r:i),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(s),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var a=/([?&])_=[^&]*/;a.test(this.url)?this.url=this.url.replace(a,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function _(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var i=e.split("="),r=i.shift().replace(/\+/g," "),s=i.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(s))}})),t}function x(e,t){if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},b.call(v.prototype),b.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},x.error=function(){var e=new x(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];x.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new x(null,{status:t,headers:{location:e}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(A){e.DOMException=function(e,t){this.message=e,this.name=t;var i=Error(e);this.stack=i.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function E(i,r){return new Promise((function(a,o){var l=new v(i,r);if(l.signal&&l.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function p(){u.abort()}u.onload=function(){var e,t,i={status:u.status,statusText:u.statusText,headers:(e=u.getAllResponseHeaders()||"",t=new h,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var i=e.split(":"),r=i.shift().trim();if(r){var s=i.join(":").trim();t.append(r,s)}})),t)};i.url="responseURL"in u?u.responseURL:i.headers.get("X-Request-URL");var r="response"in u?u.response:u.responseText;setTimeout((function(){a(new x(r,i))}),0)},u.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},u.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},u.onabort=function(){setTimeout((function(){o(new e.DOMException("Aborted","AbortError"))}),0)},u.open(l.method,function(e){try{return""===e&&t.location.href?t.location.href:e}catch(i){return e}}(l.url),!0),"include"===l.credentials?u.withCredentials=!0:"omit"===l.credentials&&(u.withCredentials=!1),"responseType"in u&&(s?u.responseType="blob":n&&l.headers.get("Content-Type")&&-1!==l.headers.get("Content-Type").indexOf("application/octet-stream")&&(u.responseType="arraybuffer")),!r||"object"!=typeof r.headers||r.headers instanceof h?l.headers.forEach((function(e,t){u.setRequestHeader(t,e)})):Object.getOwnPropertyNames(r.headers).forEach((function(e){u.setRequestHeader(e,c(r.headers[e]))})),l.signal&&(l.signal.addEventListener("abort",p),u.onreadystatechange=function(){4===u.readyState&&l.signal.removeEventListener("abort",p)}),u.send(void 0===l._bodyInit?null:l._bodyInit)}))}E.polyfill=!0,t.fetch||(t.fetch=E,t.Headers=h,t.Request=v,t.Response=x),e.Headers=h,e.Request=v,e.Response=x,e.fetch=E,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof Ws.exports?Hs(Ws.exports):"function"==typeof define&&define.amd?define(["exports"],Hs):Hs(this.WHATWGFetch={}),Ws=Ws.exports;self.fetch.bind(self);var $s="0.5.0-alpha.9",Ys={};(function(e){(function(){"use strict";Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.fetchFile=u,Ys.fetchFileAsync=async function(e,t){const r=o(t);return i.default.http("[core]",r.method,e,r),fetch(e,r).then(e=>l(e,r)).then(e=>e.text())},Ys.setUserAgent=function(e){a=e};var t=r(Ls),i=r(nr);function r(e){return e&&e.__esModule?e:{default:e}}const s="undefined"!=typeof location&&"undefined"!=typeof document;let a=`Citation.js/${$s} Node.js/${e.version}`;function n(e){const i={},r=e instanceof Headers||e instanceof t.default.Headers?Array.from(e):Object.entries(e);for(const[t,s]of r)i[t.toLowerCase()]=s.toString();return i}function o(e={}){const t={headers:{accept:"*/*"},method:"GET",checkContentType:e.checkContentType};if(a&&!s&&(t.headers["user-agent"]=a),e.body){t.method="POST";const i="string"!=typeof e.body;t.body=i?JSON.stringify(e.body):e.body,t.headers["content-type"]=i?"application/json":"text/plain"}return e.headers&&Object.assign(t.headers,n(e.headers)),t}function l(e,t){const{status:i,headers:r}=e;let s;if(i>=400?s=new Error("Server responded with status code "+i):!0!==t.checkContentType||function(e,t){if(!e.accept||"*/*"===e.accept||!t["content-type"])return!0;const[i,r]=t["content-type"].split(";")[0].trim().split("/");return e.accept.split(",").map(e=>e.split(";")[0].trim().split("/")).some(([e,t])=>!(e!==i&&"*"!==e||t!==r&&"*"!==t))}(t.headers,n(r))||(s=new Error("Server responded with content-type "+r.get("content-type"))),s)throw s.status=i,s.headers=r,s.body=e.body,s;return e}function u(e,r){const s=o(r);return i.default.http("[core]",s.method,e,s),l((0,t.default)(e,s),s).text()}}).call(this)}).call(this,ve);var Js={};Object.defineProperty(Js,"__esModule",{value:!0}),Js.default=void 0;class Xs{constructor(e){this.stack=e,this.index=0,this.current=this.stack[this.index]}static getPatternText(e){return`"${e instanceof RegExp?e.source:e}"`}static getMatchCallback(e){if(Array.isArray(e)){const t=e.map(Xs.getMatchCallback);return e=>t.some(t=>t(e))}return e instanceof Function?e:e instanceof RegExp?t=>e.test(t):t=>e===t}tokensLeft(){return this.stack.length-this.index}matches(e){return Xs.getMatchCallback(e)(this.current,this.index,this.stack)}matchesSequence(e){const t=this.stack.slice(this.index,this.index+e.length).join("");return"string"==typeof e?t===e:e.every((e,i)=>Xs.getMatchCallback(e)(t[i]))}consumeToken(e=/^[\s\S]$/,{inverse:t=!1,spaced:i=!0}={}){i&&this.consumeWhitespace();const r=this.current;if(!Xs.getMatchCallback(e)(r,this.index,this.stack))throw new SyntaxError(`Unexpected token at index ${this.index}: Expected ${Xs.getPatternText(e)}, got "${r}"`);return this.current=this.stack[++this.index],i&&this.consumeWhitespace(),r}consumeWhitespace(e=/^\s$/,{optional:t=!0}={}){return this.consume(e,{min:+!t})}consumeN(e){if(this.tokensLeft()<e)throw new SyntaxError("Not enough tokens left");const t=this.index;for(;e--;)this.current=this.stack[++this.index];return this.stack.slice(t,this.index).join("")}consumeSequence(e){if(this.matchesSequence(e))return this.consumeN(e.length);throw new SyntaxError(`Expected "${e}", got "${this.consumeN(e.length)}"`)}consume(e=/^[\s\S]$/,{min:t=0,max:i=1/0,inverse:r=!1,tokenMap:s,tokenFilter:a}={}){const n=this.index,o=Xs.getMatchCallback(e);for(;o(this.current,this.index,this.stack)!==r;)this.current=this.stack[++this.index];let l=this.stack.slice(n,this.index);if(l.length<t)throw new SyntaxError("Not enough "+Xs.getPatternText(e));if(l.length>i)throw new SyntaxError("Too many "+Xs.getPatternText(e));return s&&(l=l.map(s)),a&&(l=l.filter(a)),l.join("")}}var Ks=Xs;Js.default=Ks;var Zs={};Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.Grammar=void 0,Zs.Grammar=class{constructor(e,t){this.rules=e,this.state=t,this.mainRule=Object.keys(e)[0],this.log=[]}parse(e){return this.lexer=e,this.token=this.lexer.next(),this.consumeRule(this.mainRule)}matchEndOfFile(){return!this.token}matchToken(e){return this.token&&e===this.token.type}consumeToken(e,t){const i=this.token;if(!e||i&&i.type===e)return this.token=this.lexer.next(),i;if(!t){const t=i?`"${i.type}"`:"EOF",r=new SyntaxError(this.lexer.formatError(i,`expected "${e}", got ${t}`));throw r.message+=` (${this.log.join("->")})`,r}}consumeRule(e){this.log.push(e);const t=this.rules[e].call(this);return this.log.pop(),t}};var ea={};function ta(e,t){return t=t===ia.CONVERT_TO_SOURCE,e=e.map(e=>function(e,t){let i,r,s,a;if("string"==typeof e)i=r=e;else{if(!e)return null;i=t?e.target:e.source,r=t?e.source:e.target,e.convert&&(s=t?e.convert.toSource:e.convert.toTarget),e.when&&null!=(a=t?e.when.target:e.when.source)&&(a=function(e){return function(t){return"boolean"==typeof e?e:Object.keys(e).every(i=>{const r=e[i];return!0===r?i in t:!1===r?!(i in t):"function"==typeof r?r(t[i]):Array.isArray(r)?r.includes(t[i]):t[i]===r})}}(a))}return{inputProp:i=[].concat(i).filter(Boolean),outputProp:r=[].concat(r).filter(Boolean),convert:s,condition:a}}(e,t)).filter(Boolean),function(t){const i={};for(const{inputProp:r,outputProp:s,convert:a,condition:n}of e){if(0===s.length)continue;if(n&&!n(t))continue;if(0!==r.length&&r.every(e=>!(e in t)))continue;let e=r.map(e=>t[e]);if(a){const i=a.apply(t,e);e=1===s.length?[i]:i}s.forEach((t,r)=>{const s=e[r];void 0!==s&&(i[t]=s)})}return i}}Object.defineProperty(ea,"__esModule",{value:!0}),ea.Translator=void 0;class ia{constructor(e){this.convertToSource=ta(e,ia.CONVERT_TO_SOURCE),this.convertToTarget=ta(e,ia.CONVERT_TO_TARGET)}}ea.Translator=ia,ia.CONVERT_TO_SOURCE=Symbol("convert to source"),ia.CONVERT_TO_TARGET=Symbol("convert to target");var ra={};Object.defineProperty(ra,"__esModule",{value:!0}),Object.defineProperty(ra,"deepCopy",{enumerable:!0,get:function(){return sa.default}}),Object.defineProperty(ra,"fetchFile",{enumerable:!0,get:function(){return Ys.fetchFile}}),Object.defineProperty(ra,"fetchFileAsync",{enumerable:!0,get:function(){return Ys.fetchFileAsync}}),Object.defineProperty(ra,"setUserAgent",{enumerable:!0,get:function(){return Ys.setUserAgent}}),Object.defineProperty(ra,"fetchId",{enumerable:!0,get:function(){return aa.default}}),Object.defineProperty(ra,"TokenStack",{enumerable:!0,get:function(){return na.default}}),Object.defineProperty(ra,"Register",{enumerable:!0,get:function(){return oa.default}}),Object.defineProperty(ra,"Grammar",{enumerable:!0,get:function(){return Zs.Grammar}}),Object.defineProperty(ra,"Translator",{enumerable:!0,get:function(){return ea.Translator}});var sa=la(Wr),aa=la(ls),na=la(Js),oa=la(ys);function la(e){return e&&e.__esModule?e:{default:e}}var ua={};Object.defineProperty(ua,"__esModule",{value:!0}),ua.parse=void 0,ua.parse=()=>[];var ca={};Object.defineProperty(ca,"__esModule",{value:!0}),Object.defineProperty(ca,"parse",{enumerable:!0,get:function(){return ra.fetchFile}}),Object.defineProperty(ca,"parseAsync",{enumerable:!0,get:function(){return ra.fetchFileAsync}});var pa={};Object.defineProperty(pa,"__esModule",{value:!0}),pa.default=pa.parse=void 0;var ha,ma=(ha=nr)&&ha.__esModule?ha:{default:ha};const fa=[[/((?:\[|:|,)\s*)'((?:\\'|[^'])*?[^\\])?'(?=\s*(?:\]|}|,))/g,'$1"$2"'],[/((?:(?:"|]|}|\/[gmiuys]|\.|(?:\d|\.|-)*\d)\s*,|{)\s*)(?:"([^":\n]+?)"|'([^":\n]+?)'|([^":\n]+?))(\s*):/g,'$1"$2$3$4"$5:']];pa.default=pa.parse=function(e){if("string"!=typeof e)return JSON.parse(e);try{return JSON.parse(e)}catch(t){return ma.default.debug("[plugin-common]","Invalid JSON, switching to experimental parser"),fa.forEach(([t,i])=>{e=e.replace(t,i)}),JSON.parse(e)}};var da={};Object.defineProperty(da,"__esModule",{value:!0}),da.parse=function(e){return e.val()||e.text()||e.html()};var ga={};Object.defineProperty(ga,"__esModule",{value:!0}),ga.parse=function(e){return e.value||e.textContent};var ba={};Object.defineProperty(ba,"__esModule",{value:!0}),ba.formats=ba.parsers=ba.ref=void 0;var ya=Aa(ua),va=Aa(ca),_a=Aa(pa),xa=Aa(da),wa=Aa(ga);function Ea(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Ea=function(){return e},e}function Aa(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=Ea();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,t&&t.set(e,i),i}ba.ref="@else";const Ta={empty:ya,url:va,json:_a,jquery:xa,html:wa};ba.parsers=Ta;const Sa={"@empty/text":{parse:ya.parse,parseType:{dataType:"String",predicate:e=>""===e}},"@empty/whitespace+text":{parse:ya.parse,parseType:{dataType:"String",predicate:/^\s+$/}},"@empty":{parse:ya.parse,parseType:{dataType:"Primitive",predicate:e=>null==e}},"@else/json":{parse:_a.parse,parseType:{dataType:"String",predicate:/^\s*(\{[\S\s]*\}|\[[\S\s]*\])\s*$/}},"@else/url":{parse:va.parse,parseAsync:va.parseAsync,parseType:{dataType:"String",predicate:/^https?:\/\/(([\w-]+\.)*[\w-]+)(:\d+)?(\/[^?/]*)*(\?[^#]*)?(#.*)?$/i}},"@else/jquery":{parse:xa.parse,parseType:{dataType:"ComplexObject",predicate:e=>"undefined"!=typeof jQuery&&e instanceof jQuery}},"@else/html":{parse:wa.parse,parseType:{dataType:"ComplexObject",predicate:e=>"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}}};ba.formats=Sa;var Oa={};Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.getJsonWrapper=function(e){return La(e,ka.dict.get("html"))},Oa.default=void 0;var Qa,ka=Ra(Os),Ca=Ra(ra),Ia=(Qa=nr)&&Qa.__esModule?Qa:{default:Qa};function Na(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Na=function(){return e},e}function Ra(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=Na();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,t&&t.set(e,i),i}const Pa=(e,t,i)=>e+(t<i.length-1?",":""),Da=function(e,t){const i=Array.isArray(e);let r;return r=(r=i?e.map(e=>ja(e,t)):Object.keys(e).filter(t=>JSON.stringify(e[t])).map(i=>`"${i}": ${ja(e[i],t)}`)).map(Pa).map(e=>t.listItem.join(e)),r=t.list.join(r.join("")),i?`[${r}]`:`{${r}}`},ja=function(e,t){return"object"==typeof e&&null!==e?0===e.length?"[]":0===Object.keys(e).length?"{}":Da(e,t):JSON.stringify(e)},La=function(e,t){let i=e.map(e=>Da(e,t));return i=(i=i.map(Pa).map(e=>t.entry.join(e))).join(""),t.bibliographyContainer.join(`[${i}]`)};var Ma={data:(e,{type:t,format:i=t||"text"}={})=>"object"===i?Ca.deepCopy(e):"text"===i?JSON.stringify(e,null,2):(Ia.default.warn("[core]","This feature (JSON output with special formatting) is unstable. See https://github.com/larsgw/citation.js/issues/144"),La(e,ka.dict.get(i))),ndjson:e=>e.map(e=>JSON.stringify(e)).join("\n")};Oa.default=Ma;var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.default=void 0;var Ua=Ga(Oa),Fa=Ga(hs);function Ga(e){return e&&e.__esModule?e:{default:e}}var qa=Object.assign({},Ua.default,Fa.default);Ba.default=qa;var za,Va=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,t&&t.set(e,i),i}(Os),Ha=(za=Ba)&&za.__esModule?za:{default:za};Va.add(ba.ref,{input:ba.formats,output:Ha.default});var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0}),Object.defineProperty(Wa,"Cite",{enumerable:!0,get:function(){return $a.default}}),Object.defineProperty(Wa,"logger",{enumerable:!0,get:function(){return Xa.default}}),Object.defineProperty(Wa,"version",{enumerable:!0,get:function(){return $s}}),Wa.util=Wa.plugins=void 0;var $a=en(p({})),Ya=Za(Os);Wa.plugins=Ya;var Ja=Za(ra);Wa.util=Ja;var Xa=en(nr);function Ka(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Ka=function(){return e},e}function Za(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=Ka();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,t&&t.set(e,i),i}function en(e){return e&&e.__esModule?e:{default:e}}var tn,rn={exports:{}};tn=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,i="boolean"==typeof(new RegExp).sticky;function r(e){return e&&"[object RegExp]"===t.call(e)}function s(e){return e&&"object"==typeof e&&!r(e)&&!Array.isArray(e)}function a(e){return"("+e+")"}function n(e){return e.length?"(?:"+e.map((function(e){return"(?:"+e+")"})).join("|")+")":"(?!)"}function o(e){if("string"==typeof e)return"(?:"+e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+")";if(r(e)){if(e.ignoreCase)throw new Error("RegExp /i flag not allowed");if(e.global)throw new Error("RegExp /g flag is implied");if(e.sticky)throw new Error("RegExp /y flag is implied");if(e.multiline)throw new Error("RegExp /m flag is implied");return e.source}throw new Error("Not a pattern: "+e)}function l(t,i){if(s(i)||(i={match:i}),i.include)throw new Error("Matching rules cannot also include states");var a={defaultType:t,lineBreaks:!!i.error||!!i.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var n in i)e.call(i,n)&&(a[n]=i[n]);if("string"==typeof a.type&&t!==a.type)throw new Error("Type transform cannot be a string (type '"+a.type+"' for token '"+t+"')");var o=a.match;return a.match=Array.isArray(o)?o:o?[o]:[],a.match.sort((function(e,t){return r(e)&&r(t)?0:r(t)?-1:r(e)?1:t.length-e.length})),a}function u(e){return Array.isArray(e)?function(e){for(var t=[],i=0;i<e.length;i++){var r=e[i];if(r.include)for(var s=[].concat(r.include),a=0;a<s.length;a++)t.push({include:s[a]});else{if(!r.type)throw new Error("Rule has no type: "+JSON.stringify(r));t.push(l(r.type,r))}}return t}(e):function(e){for(var t=Object.getOwnPropertyNames(e),i=[],r=0;r<t.length;r++){var a=t[r],n=e[a],o=[].concat(n);if("include"!==a){var u=[];o.forEach((function(e){s(e)?(u.length&&i.push(l(a,u)),i.push(l(a,e)),u=[]):u.push(e)})),u.length&&i.push(l(a,u))}else for(var c=0;c<o.length;c++)i.push({include:o[c]})}return i}(e)}var c=l("error",{lineBreaks:!0,shouldThrow:!0});function p(e,t){for(var s=null,l=Object.create(null),u=!0,p=null,h=[],m=[],f=0;f<e.length;f++)e[f].fallback&&(u=!1);for(f=0;f<e.length;f++){var d=e[f];if(d.include)throw new Error("Inheritance is not allowed in stateless lexers");if(d.error||d.fallback){if(s)throw!d.fallback==!s.fallback?new Error("Multiple "+(d.fallback?"fallback":"error")+" rules not allowed (for token '"+d.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+d.defaultType+"')");s=d}var g=d.match.slice();if(u)for(;g.length&&"string"==typeof g[0]&&1===g[0].length;)l[g.shift().charCodeAt(0)]=d;if(d.pop||d.push||d.next){if(!t)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+d.defaultType+"')");if(d.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+d.defaultType+"')")}if(0!==g.length){u=!1,h.push(d);for(var b=0;b<g.length;b++){var y=g[b];if(r(y))if(null===p)p=y.unicode;else if(p!==y.unicode&&!1===d.fallback)throw new Error("If one rule is /u then all must be")}var v=n(g.map(o)),_=new RegExp(v);if(_.test(""))throw new Error("RegExp matches empty string: "+_);if(new RegExp("|"+v).exec("").length-1>0)throw new Error("RegExp has capture groups: "+_+"\nUse (?: \u2026 ) instead");if(!d.lineBreaks&&_.test("\n"))throw new Error("Rule should declare lineBreaks: "+_);m.push(a(v))}}var x=s&&s.fallback,w=i&&!x?"ym":"gm",E=i||x?"":"|";return!0===p&&(w+="u"),{regexp:new RegExp(n(m)+E,w),groups:h,fast:l,error:s||c}}function h(e,t,i){var r=e&&(e.push||e.next);if(r&&!i[r])throw new Error("Missing state '"+r+"' (in token '"+e.defaultType+"' of state '"+t+"')");if(e&&e.pop&&1!=+e.pop)throw new Error("pop must be 1 (in token '"+e.defaultType+"' of state '"+t+"')")}var m=function(e,t){this.startState=t,this.states=e,this.buffer="",this.stack=[],this.reset()};m.prototype.reset=function(e,t){return this.buffer=e||"",this.index=0,this.line=t?t.line:1,this.col=t?t.col:1,this.queuedToken=t?t.queuedToken:null,this.queuedThrow=t?t.queuedThrow:null,this.setState(t?t.state:this.startState),this.stack=t&&t.stack?t.stack.slice():[],this},m.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedThrow:this.queuedThrow}},m.prototype.setState=function(e){if(e&&this.state!==e){this.state=e;var t=this.states[e];this.groups=t.groups,this.error=t.error,this.re=t.regexp,this.fast=t.fast}},m.prototype.popState=function(){this.setState(this.stack.pop())},m.prototype.pushState=function(e){this.stack.push(this.state),this.setState(e)};var f=i?function(e,t){return e.exec(t)}:function(e,t){var i=e.exec(t);return 0===i[0].length?null:i};function d(){return this.value}if(m.prototype._getGroup=function(e){for(var t=this.groups.length,i=0;i<t;i++)if(void 0!==e[i+1])return this.groups[i];throw new Error("Cannot find token type for matched text")},m.prototype.next=function(){var e=this.index;if(this.queuedGroup){var t=this._token(this.queuedGroup,this.queuedText,e);return this.queuedGroup=null,this.queuedText="",t}var i=this.buffer;if(e!==i.length){if(n=this.fast[i.charCodeAt(e)])return this._token(n,i.charAt(e),e);var r=this.re;r.lastIndex=e;var s=f(r,i),a=this.error;if(null==s)return this._token(a,i.slice(e,i.length),e);var n=this._getGroup(s),o=s[0];return a.fallback&&s.index!==e?(this.queuedGroup=n,this.queuedText=o,this._token(a,i.slice(e,s.index),e)):this._token(n,o,e)}},m.prototype._token=function(e,t,i){var r=0;if(e.lineBreaks){var s=/\n/g,a=1;if("\n"===t)r=1;else for(;s.exec(t);)r++,a=s.lastIndex}var n={type:"function"==typeof e.type&&e.type(t)||e.defaultType,value:"function"==typeof e.value?e.value(t):t,text:t,toString:d,offset:i,lineBreaks:r,line:this.line,col:this.col},o=t.length;if(this.index+=o,this.line+=r,0!==r?this.col=o-a+1:this.col+=o,e.shouldThrow)throw new Error(this.formatError(n,"invalid syntax"));return e.pop?this.popState():e.push?this.pushState(e.push):e.next&&this.setState(e.next),n},"undefined"!=typeof Symbol&&Symbol.iterator){var g=function(e){this.lexer=e};g.prototype.next=function(){var e=this.lexer.next();return{value:e,done:!e}},g.prototype[Symbol.iterator]=function(){return this},m.prototype[Symbol.iterator]=function(){return new g(this)}}return m.prototype.formatError=function(e,t){if(null==e){var i=this.buffer.slice(this.index);e={text:i,offset:this.index,lineBreaks:-1===i.indexOf("\n")?0:1,line:this.line,col:this.col}}var r=Math.max(0,e.offset-e.col+1),s=e.lineBreaks?e.text.indexOf("\n"):e.text.length,a=this.buffer.substring(r,e.offset+s);return t+=" at line "+e.line+" col "+e.col+":\n\n",(t+="  "+a+"\n")+"  "+Array(e.col).join(" ")+"^"},m.prototype.clone=function(){return new m(this.states,this.state)},m.prototype.has=function(e){return!0},{compile:function(e){var t=p(u(e));return new m({start:t},"start")},states:function(e,t){var i=e.$all?u(e.$all):[];delete e.$all;var r=Object.getOwnPropertyNames(e);t||(t=r[0]);for(var s=Object.create(null),a=0;a<r.length;a++)s[v=r[a]]=u(e[v]).concat(i);for(a=0;a<r.length;a++)for(var n=s[v=r[a]],o=Object.create(null),l=0;l<n.length;l++){var c=n[l];if(c.include){var f=[l,1];if(c.include!==v&&!o[c.include]){o[c.include]=!0;var d=s[c.include];if(!d)throw new Error("Cannot include nonexistent state '"+c.include+"' (in state '"+v+"')");for(var g=0;g<d.length;g++){var b=d[g];-1===n.indexOf(b)&&f.push(b)}}n.splice.apply(n,f),l--}}var y=Object.create(null);for(a=0;a<r.length;a++){var v;y[v=r[a]]=p(s[v],!0)}for(a=0;a<r.length;a++){var _=r[a],x=y[_],w=x.groups;for(l=0;l<w.length;l++)h(w[l],_,y);var E=Object.getOwnPropertyNames(x.fast);for(l=0;l<E.length;l++)h(x.fast[E[l]],_,y)}return new m(y,t)},error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:function(e){for(var t=Object.create(null),i=Object.create(null),r=Object.getOwnPropertyNames(e),s=0;s<r.length;s++){var a=r[s],n=e[a];(Array.isArray(n)?n:[n]).forEach((function(e){if((i[e.length]=i[e.length]||[]).push(e),"string"!=typeof e)throw new Error("keyword must be string (in keyword '"+a+"')");t[e]=a}))}function o(e){return JSON.stringify(e)}var l="";for(var u in l+="switch (value.length) {\n",i){var c=i[u];l+="case "+u+":\n",l+="switch (value) {\n",c.forEach((function(e){var i=t[e];l+="case "+o(e)+": return "+o(i)+"\n"})),l+="}\n"}return l+="}\n",Function("value",l)}}},"function"==typeof define&&define.amd?define([],tn):rn.exports?rn.exports=tn():this.moo=tn(),rn=rn.exports;var sn={};Object.defineProperty(sn,"__esModule",{value:!0}),sn.mathScripts=sn.ligatures=sn.ligaturePattern=sn.commands=sn.diacritics=sn.defaultStrings=void 0,sn.defaultStrings={jan:"01",feb:"02",mar:"03",apr:"04",may:"05",jun:"06",jul:"07",aug:"08",sep:"09",oct:"10",nov:"11",dec:"12",acmcs:"ACM Computing Surveys",acta:"Acta Informatica",cacm:"Communications of the ACM",ibmjrd:"IBM Journal of Research and Development",ibmsj:"IBM Systems Journal",ieeese:"IEEE Transactions on Software Engineering",ieeetc:"IEEE Transactions on Computers",ieeetcad:"IEEE Transactions on Computer-Aided Design of Integrated Circuits",ipl:"Information Processing Letters",jacm:"Journal of the ACM",jcss:"Journal of Computer and System Sciences",scp:"Science of Computer Programming",sicomp:"SIAM Journal on Computing",tocs:"ACM Transactions on Computer Systems",tods:"ACM Transactions on Database Systems",tog:"ACM Transactions on Graphics",toms:"ACM Transactions on Mathematical Software",toois:"ACM Transactions on Office Information Systems",toplas:"ACM Transactions on Programming Languages and Systems",tcs:"Theoretical Computer Science"},sn.diacritics={"`":"\u0300","'":"\u0301","^":"\u0302","~":"\u0303","=":"\u0304",'"':"\u0308",c:"\u0327",b:"\u0331",u:"\u0306",v:"\u030c",".":"\u0307",d:"\u0323",r:"\u030a",H:"\u030b",k:"\u0328"},sn.commands={_:"_","{":"{","}":"}","c\\ ":"\xb8",href:"",url:"",AE:"\xc6",ae:"\xe6",DH:"\xd0",dh:"\xf0",i:"\u0131",j:"\u0237",NG:"\u014a",ng:"\u014b",O:"\xd8",o:"\xf8",OE:"\u0152",oe:"\u0153",ss:"\xdf",TH:"\xde",th:"\xfe",copyright:"\xa9",guillemotleft:"\xab",guillemotright:"\xbb",guilsinglleft:"\u2039",guilsinglright:"\u203a",quotedblbase:"\u201e",quotesinglbase:"\u201a",textacutedbl:"\u02dd",textasciiacute:"\xb4",textasciicircum:"\u02c6",textasciidieresis:"\xa8",textasciimacron:"\xaf",textasciitilde:"\u223c",textbackslash:"\\",textbardbl:"\u2016",textbrokenbar:"\xa6",textbullet:"\u2022",textcelsius:"\u2103",textcent:"\xa2",textcircledP:"\u2117",textcopyright:"\xa9",textdagger:"\u2020",textdaggerdbl:"\u2021",textdegree:"\xb0",textdiv:"\xf7",textellipsis:"\u2026",textemdash:"\u2014",textendash:"\u2013",textestimated:"\u212e",texteuro:"\u20ac",textexclamdown:"\xa1",textfractionsolidus:"\u2044",textlnot:"\xac",textmu:"\xb5",textnumero:"\u2116",textohm:"\u2126",textonehalf:"\xbd",textonequarter:"\xbc",textonesuperior:"\xb9",textordfeminine:"\xaa",textordmasculine:"\xba",textparagraph:"\xb6",textperiodcentered:"\xb7",textperthousand:"\u2030",textpm:"\xb1",textquestiondown:"\xbf",textquotedblleft:"\u201c",textquotedblright:"\u201d",textquoteleft:"\u2018",textquoteright:"\u2019",textregistered:"\xae",textsection:"\xa7",textservicemark:"\u2120",textsterling:"\xa3",textthreequarters:"\xbe",textthreesuperior:"\xb3",texttimes:"\xd7",texttrademark:"\u2122",texttwosuperior:"\xb2",textunderscore:"\u2017",textyen:"\xa5",Gamma:"\u0393",Delta:"\u0394",Theta:"\u0398",Lambda:"\u039b",Xi:"\u039e",Pi:"\u03a0",Sigma:"\u03a3",Phi:"\u03a6",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",varepsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",pi:"\u03c0",rho:"\u03c1",varsigma:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",varphi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",vartheta:"\u03d1",Upsilon:"\u03d2",phi:"\u03d5",varpi:"\u03d6",varrho:"\u03f1",epsilon:"\u03f5"},sn.ligaturePattern=/---?|'''?|```?|!!|\?!|!\?|\bTEL\b|~/g,sn.ligatures={"---":"\u2014","--":"\u2013","'''":"\u2034","'":"\u201d","```":"\u2037","``":"\u201c","!!":"\u203c","?!":"\u2048","!?":"\u2049",TEL:"\u2121","~":"\xa0"},sn.mathScripts={"^":{0:"\u2070",1:"\xb9",2:"\xb2",3:"\xb3",4:"\u2074",5:"\u2075",6:"\u2076",7:"\u2077",8:"\u2078",9:"\u2079","+":"\u207a","-":"\u207b","=":"\u207c","(":"\u207d",")":"\u207e",i:"\u2071",n:"\u207f"},_:{0:"\u2080",1:"\u2081",2:"\u2082",3:"\u2083",4:"\u2084",5:"\u2085",6:"\u2086",7:"\u2087",8:"\u2088",9:"\u2089","+":"\u208a","-":"\u208b","=":"\u208c","(":"\u208d",")":"\u208e",a:"\u2090",e:"\u2091",o:"\u2092",x:"\u2093","\u0259":"\u2094",h:"\u2095",k:"\u2096",l:"\u2097",m:"\u2098",n:"\u2099",s:"\u209a",p:"\u209b",t:"\u209c"}};var an={};Object.defineProperty(an,"__esModule",{value:!0}),an.parse=yn,an.default=an.bibtexGrammar=void 0;var nn,on=(nn=rn)&&nn.__esModule?nn:{default:nn},ln=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,t&&t.set(e,i),i}(sn);function un(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function cn(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?un(Object(i),!0).forEach((function(t){pn(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):un(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function pn(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const hn=/[a-zA-Z][a-zA-Z0-9_-]*/,mn={comment:/%.*/,whitespace:{match:/\s+/,lineBreaks:!0}},fn={command:/\\(?:[a-z]+|.) */,lbrace:{match:"{",push:"bracedLiteral"},mathShift:{match:"$",push:"mathLiteral"},whitespace:{match:/\s+/,lineBreaks:!0}},dn=on.default.states({main:{junk:{match:/@[cC][oO][mM][mM][eE][nN][tT].+|[^@]+/,lineBreaks:!0},at:{match:"@",push:"entry"}},entry:cn(cn({},mn),{},{otherEntryType:{match:/[sS][tT][rR][iI][nN][gG]|[pP][rR][eE][aA][mM][bB][lL][eE]/,next:"otherEntryContents"},dataEntryType:{match:hn,next:"dataEntryContents"}}),otherEntryContents:cn(cn({},mn),{},{lbrace:{match:/[{(]/,next:"fields"}}),dataEntryContents:cn(cn({},mn),{},{lbrace:{match:/[{(]/,next:"dataEntryContents"},label:/[^,\s]+/,comma:{match:",",next:"fields"}}),fields:cn(cn({},mn),{},{identifier:hn,number:/-?\d+/,hash:"#",equals:"=",comma:",",quote:{match:'"',push:"quotedLiteral"},lbrace:{match:"{",push:"bracedLiteral"},rbrace:{match:/[})]/,pop:!0}}),quotedLiteral:cn(cn({},fn),{},{quote:{match:'"',pop:!0},text:/[^{$"\s\\]+/}),bracedLiteral:cn(cn({},fn),{},{rbrace:{match:"}",pop:!0},text:/[^{$}\s\\]+/}),mathLiteral:cn(cn({},fn),{},{mathShift:{match:"$",pop:!0},script:/[\^_]/,text:/[^{$}\s\\^_]+/})}),gn={"(":")","{":"}"},bn=new Wa.util.Grammar({Main(){const e=[];for(;;){for(;this.matchToken("junk");)this.consumeToken("junk");if(this.matchEndOfFile())break;e.push(this.consumeRule("Entry"))}return e.filter(Boolean)},_(){let e;for(;e!==this.token;)e=this.token,this.consumeToken("whitespace",!0),this.consumeToken("comment",!0)},Entry(){this.consumeToken("at"),this.consumeRule("_");const e=(this.matchToken("otherEntryType")?this.consumeToken("otherEntryType"):this.consumeToken("dataEntryType")).value.toLowerCase();this.consumeRule("_");const t=this.consumeToken("lbrace").value;let i;if(this.consumeRule("_"),"string"===e){const[e,t]=this.consumeRule("Field");this.state.strings[e]=t}else if("preamble"===e)this.consumeRule("Expression");else{const t=this.consumeToken("label").value;this.consumeRule("_"),this.consumeToken("comma"),this.consumeRule("_"),i={type:e,label:t,properties:this.consumeRule("EntryBody")}}this.consumeRule("_");const r=this.consumeToken("rbrace");return r!==gn[t]&&Wa.logger.warn("[plugin-bibtex]",`entry started with "${t}", but ends with "${r}"`),i},EntryBody(){const e={};for(;this.matchToken("identifier");){const[t,i]=this.consumeRule("Field");if(e[t]=i,this.consumeRule("_"),!this.consumeToken("comma",!0))break;this.consumeRule("_")}return e},Field(){const e=this.consumeToken("identifier");return this.consumeRule("_"),this.consumeToken("equals"),this.consumeRule("_"),[e,this.consumeRule("Expression")]},Expression(){let e=this.consumeRule("ExpressionPart");for(this.consumeRule("_");this.matchToken("hash");)this.consumeToken("hash"),this.consumeRule("_"),e+=this.consumeRule("ExpressionPart").toString(),this.consumeRule("_");return e},ExpressionPart(){return this.matchToken("identifier")?this.state.strings[this.consumeToken("identifier").value]||"":this.matchToken("number")?this.consumeToken("number").value:this.matchToken("quote")?this.consumeRule("QuoteString"):this.matchToken("lbrace")?this.consumeRule("BracketString"):void 0},QuoteString(){let e="";for(this.consumeToken("quote");!this.matchToken("quote");)e+=this.consumeRule("Text");return this.consumeToken("quote"),e},BracketString(){let e="";for(this.consumeToken("lbrace");!this.matchToken("rbrace");)e+=this.consumeRule("Text");return this.consumeToken("rbrace"),e},BracketText(){let e="";for(this.consumeToken("lbrace");this.matchToken("command");)e+=this.consumeRule("Command");if(!this.matchToken("rbrace")){do{e+=this.consumeRule("Text")}while(!this.matchToken("rbrace"));e=`{${e}}`}return this.consumeToken("rbrace"),e},MathString(){let e="";for(this.consumeToken("mathShift");!this.matchToken("mathShift");)if(this.matchToken("script")){const t=this.consumeToken("script").value,i=this.consumeRule("Text").replace(/^{|}$/g,"");e+=ln.mathScripts[t][i[0]]+i.slice(1)}else e+=this.consumeRule("Text");return this.consumeToken("mathShift"),e},Text(){let e;return this.matchToken("lbrace")?e=this.consumeRule("BracketText"):this.matchToken("mathShift")?e=this.consumeRule("MathString"):this.matchToken("whitespace")?(this.consumeToken("whitespace"),e=" "):e=this.matchToken("command")?this.consumeRule("Command"):this.consumeToken("text").value.replace(ln.ligaturePattern,e=>ln.ligatures[e]),e.normalize()},Command(){const e=this.consumeToken("command").value.slice(1).trim();if(e in ln.commands)return ln.commands[e];if(e in ln.diacritics&&!this.matchEndOfFile()){if(this.matchToken("text")){const t=this.consumeToken("text").value;return t[0]+ln.diacritics[e]+t.slice(1)}return this.consumeRule("Text").replace(/^{|}$/g,"")+ln.diacritics[e]}return/^\W$/.test(e)?e:"\\"+e}},{strings:Object.assign({},ln.defaultStrings)});function yn(e){return bn.parse(dn.reset(e))}an.bibtexGrammar=bn;var vn=yn;an.default=vn;var _n={};function xn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],r=!0,s=!1,a=void 0;try{for(var n,o=e[Symbol.iterator]();!(r=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);r=!0);}catch(l){s=!0,a=l}finally{try{r||null==o.return||o.return()}finally{if(s)throw a}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(_n,"__esModule",{value:!0}),_n.default=void 0;const wn={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},En=e=>wn[e.toLowerCase().slice(0,3)];_n.default=function(e){let t=function(e){let t=new Date(e);return"number"!=typeof e||isNaN(t.valueOf())?null:[t.getFullYear(),t.getMonth()+1,t.getDate()]}(e)||function(e){const t=/^(\d{4}|[-+]\d{6,})-(\d{2})(?:-(\d{2}))?/;if("string"!=typeof e||!t.test(e))return null;let i=xn(e.match(t),4),r=i[1],s=i[2],a=i[3];return+s?+a?[r,s,a]:[r,s]:[r]}(e)||function(e){const t=/^(?:[a-z]{3},\s*)?(\d{1,2}) ([a-z]{3}) (\d{4,})/i;if("string"!=typeof e||!t.test(e))return null;let i=xn(e.match(t),4),r=i[1],s=i[2],a=i[3];return(s=En(s))?[a,s,r]:null}(e)||function(e){const t=/^(\d{1,2})\/(\d{1,2})\/(\d{2}(?:\d{2})?)/;if("string"!=typeof e||!t.test(e))return null;let i=xn(e.match(t),4),r=i[1],s=i[2],a=i[3];return new Date(a,r,s).getMonth()===parseInt(r)?[a,r,s]:null}(e)||function(e){const t=/^(\d{1,2})[ .\-/](\d{1,2}|[a-z]{3,10})[ .\-/](-?\d+)/i,i=/^(-?\d+)[ .\-/](\d{1,2}|[a-z]{3,10})[ .\-/](\d{1,2})/i;let r,s,a;if("string"!=typeof e)return null;if(t.test(e)){var n=xn(e.match(t),4);a=n[1],s=n[2],r=n[3]}else{if(!i.test(e))return null;var o=xn(e.match(i),4);r=o[1],s=o[2],a=o[3]}if(En(s))s=En(s);else if(isNaN(s))return null;return[r,s,a]}(e)||function(e){const t=/^([a-z]{3,10}|-?\d+)[^\w-]+([a-z]{3,10}|-?\d+)$/i;if("string"==typeof e&&t.test(e)){let i,r=e.match(t).slice(1,3);if(En(r[1]))i=En(r.pop());else if(En(r[0]))i=En(r.shift());else{if(r.some(isNaN)||r.every(e=>+e<0))return null;i=+r[0]<0||+r[0]>+r[1]&&+r[1]>0?r.pop():r.shift()}return[r.pop(),i]}return null}(e)||("string"==typeof(i=e)&&/^-?\d+$/.test(i)?[i]:null);var i;return t?{"date-parts":[t=t.map(e=>parseInt(e))]}:{raw:e}};var An={};function Tn(e,t,i){if(e.length>=t)return e;for(;e.length<t;)e=i+e;return e.slice(-t)}Object.defineProperty(An,"__esModule",{value:!0}),An.default=void 0;An.default=function(e,t="-"){if(!e["date-parts"])return e.raw;let i=e["date-parts"][0].map(e=>e.toString());switch(i.length){case 3:i[2]=Tn(i[2],2,"0");case 2:i[1]=Tn(i[1],2,"0");case 1:i[0]=Tn(i[0],4,"0")}return i.join(t)};var Sn={};Object.defineProperty(Sn,"__esModule",{value:!0}),Object.defineProperty(Sn,"parse",{enumerable:!0,get:function(){return On.default}}),Object.defineProperty(Sn,"format",{enumerable:!0,get:function(){return Qn.default}});var On=kn(_n),Qn=kn(An);function kn(e){return e&&e.__esModule?e:{default:e}}var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.default=Cn.parse=void 0;const In=[/jan(uary)?\.?/i,/feb(ruary)?\.?/i,/mar(ch)?\.?/i,/apr(il)?\.?/i,/may\.?/i,/jun(e)?\.?/i,/jul(y)?\.?/i,/aug(ust)?\.?/i,/sep(tember)?\.?/i,/oct(ober)?\.?/i,/nov(ember)?\.?/i,/dec(ember)?\.?/i],Nn=function(e){return/{|}/.test(e)?{literal:e.replace(/[{}]/g,"")}:(0,Dr.parse)(e)},Rn={textit:"i",textbf:"b",textsc:"sc",textsuperscript:"sup",textsubscript:"sub"},Pn={address:"publisher-place",author:!0,booktitle:"container-title",chapter:"chapter-number",doi:"DOI",date:"issued",edition:!0,editor:!0,type:"genre",howpublished:"publisher",institution:"publisher",isbn:"ISBN",issn:"ISSN",issue:"issue",journal:"container-title",language:!0,location:"publisher-place",note:!0,number:"issue",numpages:"number-of-pages",pages:"page",pmid:"PMID",pmcid:"PMCID",publisher:!0,school:"publisher",series:"collection-title",title:!0,url:"URL",volume:!0,year:"issued:date-parts.0.0",month:"issued:date-parts.0.1",day:"issued:date-parts.0.2",crossref:!1,keywords:!1};Cn.default=Cn.parse=function(e,t){if(null==Pn[e])return void Wa.logger.unmapped("[plugin-bibtex]","property",e);if(!1===Pn[e])return;const i=!0===Pn[e]?e:Pn[e];return[i,((e,t)=>{switch(i){case"author":case"editor":return function(e){const t=[];return(e=e.replace(/%/g,"%0").replace(/{.*?}/g,e=>`%[${t.push(e)-1}]`)).split(" and ").map(e=>e.replace(/%\[(\d+)\]/g,(e,i)=>t[+i]).replace(/%0/g,"%")).map(Nn)}(t);case"issued":return function(e){return/{|}/.test(e)?{literal:e.replace(/[{}]/g,"")}:/[\u2014\u2013]/.test(e)?{"date-parts":e.split(/[\u2014\u2013]/).map(e=>(0,Sn.parse)(e)["date-parts"][0])}:(0,Sn.parse)(e)}(t);case"edition":return t;case"issued:date-parts.0.1":return parseFloat(t)?t:In.findIndex(e=>e.test(t))+1;case"page":return t.replace(/[\u2014\u2013]/,"-");case"title":return function(e){let t=e.split(/((?:\\[a-z]+)?{|})/);const i=[];let r="{"===e[0]&&"}"===e[e.length-1];return t=t.map((e,s)=>{if(s%2==0)return e;if("\\"===e[0]){const t=Rn[e.slice(1,-1)];return t?(i.push(`</${t}>`),`<${t}>`):(i.push(""),"")}return"{"===e?(i.push("</span>"),'<span class="nocase">'):"}"===e?(1===i.length&&s!==t.length-2&&(r=!1),i.pop()):void 0}),r&&(t.splice(0,2),t.splice(-2,2)),t.join("")}(t);default:return t.replace(/[{}]/g,"")}})(0,t)]};var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.default=Dn.parse=void 0;const jn={article:"article-journal",book:"book",booklet:"book",proceedings:"book",manual:!1,mastersthesis:"thesis",misc:!1,inbook:"chapter",incollection:"chapter",conference:"paper-conference",inproceedings:"paper-conference",online:"website",patent:"patent",phdthesis:"thesis",techreport:"report",unpublished:"manuscript"};Dn.default=Dn.parse=function(e){return null==jn[e]?(Wa.logger.unmapped("[plugin-bibtex]","publication type",e),"book"):!1===jn[e]?"book":jn[e]};var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.default=Ln.parse=void 0;var Mn=Un(Cn),Bn=Un(Dn);function Un(e){return e&&e.__esModule?e:{default:e}}Ln.default=Ln.parse=function(e){return[].concat(e).map(e=>{const t={},i=[];for(const r in e.properties){const s=e.properties[r],[a,n]=(0,Mn.default)(r,s)||[];a&&(/^[^:\s]+?:[^.\s]+(\.[^.\s]+)*$/.test(a)?i.push([a,n]):t[a]=n)}return t.type=(0,Bn.default)(e.type),t.id=t["citation-label"]=e.label,/\d(\D+)$/.test(e.label)&&(t["year-suffix"]=e.label.match(/\d(\D+)$/)[1]),i.forEach(([e,i])=>{const r=e.split(/:|\./g);let s=t;for(;r.length>0;){const e=r.shift();s=s[e]||(s[e]=r.length?isNaN(+r[0])?{}:[]:i)}}),t})};var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.textEntry=Fn.text=Fn.parse=void 0;const Gn=/\n\s*(?=\[)/g,qn=/^\[(.+?)\]\s*(?:\n([\s\S]+))?$/,zn=/((?=.)\s)*\n\s*/g,Vn=/:(.*)/,Hn=e=>{const[,t,i]=e.match(qn)||[];if(t&&i){const e={type:"book",label:t,properties:{}};return i.trim().split(zn).filter(e=>e).forEach(t=>{let[i,r]=t.split(Vn);r&&(i=i.trim(),r=r.trim(),"type"===i?e.type=r:e.properties[i]=r)}),e}return{}};Fn.textEntry=Hn,Fn.text=Fn.parse=e=>e.trim().split(Gn).map(Hn);var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.formats=Wn.parsers=Wn.ref=void 0;var $n=eo(an),Yn=eo(Ln),Jn=eo(Cn),Xn=eo(Dn),Kn=eo(Fn);function Zn(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Zn=function(){return e},e}function eo(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=Zn();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,t&&t.set(e,i),i}Wn.ref="@bibtex";const to={text:$n,json:Yn,prop:Jn,type:Xn,bibtxt:Kn};Wn.parsers=to;const io={"@bibtex/text":{parse:$n.parse,parseType:{dataType:"String",predicate:/@\s{0,5}[A-Za-z]{1,13}\s{0,5}\{\s{0,5}[^@{}"=,\\\s]{0,100}\s{0,5},[\s\S]*\}/}},"@bibtxt/text":{parse:Kn.parse,parseType:{dataType:"String",predicate:/^\s*(\[(?!\s*[{[]).*?\]\s*(\n\s*[^[]((?!:)\S)+\s*:\s*.+?\s*)*\s*)+$/}},"@bibtex/object":{parse:Yn.parse,parseType:{dataType:"SimpleObject",propertyConstraint:{props:["type","label","properties"]}}},"@bibtex/prop":{parse:Jn.parse},"@bibtex/type":{parse:Xn.parse}};Wn.formats=io;var ro={};Object.defineProperty(ro,"__esModule",{value:!0}),ro.default=void 0;const so={article:"article","article-journal":"article","article-magazine":"article","article-newspaper":"article",book:"book",chapter:"incollection",graphic:"misc",interview:"misc",manuscript:"unpublished",motion_picture:"misc","paper-conference":"inproceedings",patent:"patent",personal_communication:"misc",report:"techreport",thesis:"phdthesis",webpage:"misc"};ro.default=function(e){return e in so?so[e]:(Wa.logger.unmapped("[plugin-bibtex]","publication type",e),"misc")};var ao={};Object.defineProperty(ao,"__esModule",{value:!0}),ao.default=void 0;const no=["the","a","an"],oo=e=>e?e.replace(/<\/?.*?>/g,"").split(/[\u0020-\u002F\u003A-\u0040\u005B-\u005E\u0060\u007B-\u007F]+/).find(e=>e.length&&!no.includes(e.toLowerCase())):"";ao.default=function(e={},t={}){const{generateLabel:i=!0}=t;if(e["citation-label"])return e["citation-label"];if(!i)return e.id;let r="";return e.author&&(r+=oo(e.author[0].family||e.author[0].literal)),e.issued&&e.issued["date-parts"]&&e.issued["date-parts"][0]&&(r+=e.issued["date-parts"][0][0]),e["year-suffix"]?r+=e["year-suffix"]:e.title&&(r+=oo(e.title)),r||e.id};var lo={};Object.defineProperty(lo,"__esModule",{value:!0}),lo.default=void 0;var uo=po(ro),co=po(ao);function po(e){return e&&e.__esModule?e:{default:e}}function ho(e){return e.map(e=>(0,Dr.format)(e,!0)).join(" and ")}lo.default=function(e,t){const i={label:(0,co.default)(e,t),type:(0,uo.default)(e.type)},r={},s={"collection-title":"series","container-title":["chapter","inproceedings"].includes(e.type)?"booktitle":"journal",edition:"edition",event:"organization",DOI:"doi",ISBN:"isbn",ISSN:"issn",issue:"number",language:"language",note:"note","number-of-pages":"numpages",PMID:"pmid",PMCID:"pmcid",publisher:"publisher","publisher-place":"address",title:"title",URL:"url",volume:"volume"};for(const a in s)null!=e[a]&&(r[s[a]]=e[a]+"");if(e.author&&(r.author=ho(e.author)),e.editor&&(r.editor=ho(e.editor)),!e.note&&e.accessed&&(r.note=`[Online; accessed ${(0,Sn.format)(e.accessed)}]`),e.page&&(r.pages=e.page.replace("-","--")),e.issued&&e.issued["date-parts"]){const t=e.issued["date-parts"][0];t.length>0&&(r.date=(0,Sn.format)(e.issued),r.year=t[0].toString()),t.length>1&&(r.month=t[1].toString()),t.length>2&&(r.day=t[2].toString())}return i.properties=r,i};var mo={};Object.defineProperty(mo,"__esModule",{value:!0}),mo.default=mo.getBibtex=void 0;var fo,go=(fo=lo)&&fo.__esModule?fo:{default:fo};const bo={"|":"{\\textbar}","<":"{\\textless}",">":"{\\textgreater}","~":"{\\textasciitilde}","^":"{\\textasciicircum}","\\":"{\\textbackslash}","{":"\\{\\vphantom{\\}}","}":"\\vphantom{\\{}\\}"};function yo(e){return e.replace(/[|<>~^\\{}]/g,e=>bo[e])}const vo={i:"\\textit{",b:"\\textbf{",sc:"\\textsc{",sup:"\\textsuperscript{",sub:"\\textsubscript{",'span style="font-variant:small-caps;"':"\\textsc{",'span class="nocase"':"{"},_o=["title"];const xo=function(e,t,i){const r=e.map(e=>function(e,t,i){let{type:r,label:s,properties:a}=(0,go.default)(e,i);return a=Object.keys(a).map(e=>function(e,t,i){return t=_o.includes(e)?function(e){const t=[];let i=e.split(/<(\/?(?:i|b|sc|sup|sub|span)|span .*?)>/g);return(i=i.map((e,i)=>i%2==0?yo(e):e in vo?(t.push("/"+e.split(" ")[0]),vo[e]):e===t[t.length-1]?(t.pop(),"}"):"")).join("")}(t):yo(t),i.listItem.join(`${e} = {${t}},`)}(e,a[e],t)).join(""),t.entry.join(`@${r}{${s},${t.list.join(a)}}`)}(e,t,i)).join("");return t.bibliographyContainer.join(r)};mo.getBibtex=xo;mo.default=function(e,t){const i=Wa.plugins.dict.get(t?"html":"text");return xo(e,i)};var wo={};Object.defineProperty(wo,"__esModule",{value:!0}),wo.default=wo.getBibtxt=void 0;var Eo,Ao=(Eo=lo)&&Eo.__esModule?Eo:{default:Eo};const To=function(e,t,i){const r=e.map(e=>{const r=(0,Ao.default)(e,i);r.properties.type=r.type;const s=Object.keys(r.properties).map(e=>t.listItem.join(`${e}: ${r.properties[e]}`)).join("");return t.entry.join(`[${r.label}]${t.list.join(s)}`)}).join("\n");return t.bibliographyContainer.join(r)};wo.getBibtxt=To;wo.default=function(e,t){const i=Wa.plugins.dict.get(t?"html":"text");return To(e,i)};var So={};Object.defineProperty(So,"__esModule",{value:!0}),So.default=void 0;var Oo,Qo=(Oo=lo)&&Oo.__esModule?Oo:{default:Oo};const ko=function(e){return function(t,i={}){const{type:r,format:s=r||"text"}=i;return"object"===s?t.map(Qo.default):Wa.plugins.dict.has(s)?e(t,Wa.plugins.dict.get(s),i):""}};var Co={bibtex:ko(mo.getBibtex),bibtxt:ko(wo.getBibtxt)};So.default=Co;var Io,No=(Io=So)&&Io.__esModule?Io:{default:Io};Wa.plugins.add(Wn.ref,{input:Wn.formats,output:No.default});var Ro={};Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.locales=void 0;var Po,Do=(Po={"en-US":'<?xml version="1.0" encoding="utf-8"?><locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="en-US"><info><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2015-10-10T23:31:02+00:00</updated></info><style-options punctuation-in-quote="true"/><date form="text"><date-part name="month" suffix=" "/><date-part name="day" suffix=", "/><date-part name="year"/></date><date form="numeric"><date-part name="month" form="numeric-leading-zeros" suffix="/"/><date-part name="day" form="numeric-leading-zeros" suffix="/"/><date-part name="year"/></date><terms><term name="accessed">accessed</term><term name="and">and</term><term name="and others">and others</term><term name="anonymous">anonymous</term><term name="anonymous" form="short">anon.</term><term name="at">at</term><term name="available at">available at</term><term name="by">by</term><term name="circa">circa</term><term name="circa" form="short">c.</term><term name="cited">cited</term><term name="edition"><single>edition</single><multiple>editions</multiple></term><term name="edition" form="short">ed.</term><term name="et-al">et al.</term><term name="forthcoming">forthcoming</term><term name="from">from</term><term name="ibid">ibid.</term><term name="in">in</term><term name="in press">in press</term><term name="internet">internet</term><term name="interview">interview</term><term name="letter">letter</term><term name="no date">no date</term><term name="no date" form="short">n.d.</term><term name="online">online</term><term name="presented at">presented at the</term><term name="reference"><single>reference</single><multiple>references</multiple></term><term name="reference" form="short"><single>ref.</single><multiple>refs.</multiple></term><term name="retrieved">retrieved</term><term name="scale">scale</term><term name="version">version</term><term name="ad">AD</term><term name="bc">BC</term><term name="open-quote">\u201c</term><term name="close-quote">\u201d</term><term name="open-inner-quote">\u2018</term><term name="close-inner-quote">\u2019</term><term name="page-range-delimiter">\u2013</term><term name="ordinal">th</term><term name="ordinal-01">st</term><term name="ordinal-02">nd</term><term name="ordinal-03">rd</term><term name="ordinal-11">th</term><term name="ordinal-12">th</term><term name="ordinal-13">th</term><term name="long-ordinal-01">first</term><term name="long-ordinal-02">second</term><term name="long-ordinal-03">third</term><term name="long-ordinal-04">fourth</term><term name="long-ordinal-05">fifth</term><term name="long-ordinal-06">sixth</term><term name="long-ordinal-07">seventh</term><term name="long-ordinal-08">eighth</term><term name="long-ordinal-09">ninth</term><term name="long-ordinal-10">tenth</term><term name="book"><single>book</single><multiple>books</multiple></term><term name="chapter"><single>chapter</single><multiple>chapters</multiple></term><term name="column"><single>column</single><multiple>columns</multiple></term><term name="figure"><single>figure</single><multiple>figures</multiple></term><term name="folio"><single>folio</single><multiple>folios</multiple></term><term name="issue"><single>number</single><multiple>numbers</multiple></term><term name="line"><single>line</single><multiple>lines</multiple></term><term name="note"><single>note</single><multiple>notes</multiple></term><term name="opus"><single>opus</single><multiple>opera</multiple></term><term name="page"><single>page</single><multiple>pages</multiple></term><term name="number-of-pages"><single>page</single><multiple>pages</multiple></term><term name="paragraph"><single>paragraph</single><multiple>paragraphs</multiple></term><term name="part"><single>part</single><multiple>parts</multiple></term><term name="section"><single>section</single><multiple>sections</multiple></term><term name="sub verbo"><single>sub verbo</single><multiple>sub verbis</multiple></term><term name="verse"><single>verse</single><multiple>verses</multiple>\n</term><term name="volume"><single>volume</single><multiple>volumes</multiple></term><term name="book" form="short"><single>bk.</single><multiple>bks.</multiple></term><term name="chapter" form="short"><single>chap.</single><multiple>chaps.</multiple></term><term name="column" form="short"><single>col.</single><multiple>cols.</multiple></term><term name="figure" form="short"><single>fig.</single><multiple>figs.</multiple></term><term name="folio" form="short"><single>fol.</single><multiple>fols.</multiple></term><term name="issue" form="short"><single>no.</single><multiple>nos.</multiple></term><term name="line" form="short"><single>l.</single><multiple>ll.</multiple></term><term name="note" form="short"><single>n.</single><multiple>nn.</multiple></term><term name="opus" form="short"><single>op.</single><multiple>opp.</multiple></term><term name="page" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="number-of-pages" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="paragraph" form="short"><single>para.</single><multiple>paras.</multiple></term><term name="part" form="short"><single>pt.</single><multiple>pts.</multiple></term><term name="section" form="short"><single>sec.</single><multiple>secs.</multiple></term><term name="sub verbo" form="short"><single>s.v.</single><multiple>s.vv.</multiple></term><term name="verse" form="short"><single>v.</single><multiple>vv.</multiple></term><term name="volume" form="short"><single>vol.</single><multiple>vols.</multiple></term><term name="paragraph" form="symbol"><single>\xb6</single><multiple>\xb6\xb6</multiple></term><term name="section" form="symbol"><single>\xa7</single><multiple>\xa7\xa7</multiple></term><term name="director"><single>director</single><multiple>directors</multiple></term><term name="editor"><single>editor</single><multiple>editors</multiple></term><term name="editorial-director"><single>editor</single><multiple>editors</multiple></term><term name="illustrator"><single>illustrator</single><multiple>illustrators</multiple></term><term name="translator"><single>translator</single><multiple>translators</multiple></term><term name="editortranslator"><single>editor &amp; translator</single><multiple>editors &amp; translators</multiple></term><term name="director" form="short"><single>dir.</single><multiple>dirs.</multiple></term><term name="editor" form="short"><single>ed.</single><multiple>eds.</multiple></term><term name="editorial-director" form="short"><single>ed.</single><multiple>eds.</multiple></term><term name="illustrator" form="short"><single>ill.</single><multiple>ills.</multiple></term><term name="translator" form="short"><single>tran.</single><multiple>trans.</multiple></term><term name="editortranslator" form="short"><single>ed. &amp; tran.</single><multiple>eds. &amp; trans.</multiple></term><term name="container-author" form="verb">by</term><term name="director" form="verb">directed by</term><term name="editor" form="verb">edited by</term><term name="editorial-director" form="verb">edited by</term><term name="illustrator" form="verb">illustrated by</term><term name="interviewer" form="verb">interview by</term><term name="recipient" form="verb">to</term><term name="reviewed-author" form="verb">by</term><term name="translator" form="verb">translated by</term><term name="editortranslator" form="verb">edited &amp; translated by</term><term name="director" form="verb-short">dir. by</term><term name="editor" form="verb-short">ed. by</term><term name="editorial-director" form="verb-short">ed. by</term><term name="illustrator" form="verb-short">illus. by</term><term name="translator" form="verb-short">trans. by</term><term name="editortranslator" form="verb-short">ed. &amp; trans. by</term><term name="month-01">January</term><term name="month-02">February</term><term name="month-03">March</term><term name="month-04">April</term><term name="month-05">May</term><term name="month-06">June</term><term name="month-07">July</term><term name="month-08">August</term><term name="month-09">September</term>\n<term name="month-10">October</term><term name="month-11">November</term><term name="month-12">December</term><term name="month-01" form="short">Jan.</term><term name="month-02" form="short">Feb.</term><term name="month-03" form="short">Mar.</term><term name="month-04" form="short">Apr.</term><term name="month-05" form="short">May</term><term name="month-06" form="short">Jun.</term><term name="month-07" form="short">Jul.</term><term name="month-08" form="short">Aug.</term><term name="month-09" form="short">Sep.</term><term name="month-10" form="short">Oct.</term><term name="month-11" form="short">Nov.</term><term name="month-12" form="short">Dec.</term><term name="season-01">Spring</term><term name="season-02">Summer</term><term name="season-03">Autumn</term><term name="season-04">Winter</term></terms></locale>',"nl-NL":'<?xml version="1.0" encoding="utf-8"?><locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="nl-NL"><info><translator><name>Rintze Zelle</name><uri>http://twitter.com/rintzezelle</uri></translator><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2012-07-04T23:31:02+00:00</updated></info><style-options punctuation-in-quote="false"/><date form="text"><date-part name="day" suffix=" "/><date-part name="month" suffix=" "/><date-part name="year"/></date><date form="numeric"><date-part name="day" suffix="-" range-delimiter="/"/><date-part name="month" form="numeric" suffix="-" range-delimiter="/"/><date-part name="year"/></date><terms><term name="accessed">geraadpleegd</term><term name="and">en</term><term name="and others">en anderen</term><term name="anonymous">anoniem</term><term name="anonymous" form="short">anon.</term><term name="at">bij</term><term name="available at">beschikbaar op</term><term name="by">door</term><term name="circa">circa</term><term name="circa" form="short">c.</term><term name="cited">geciteerd</term><term name="edition"><single>editie</single><multiple>edities</multiple></term><term name="edition" form="short">ed.</term><term name="et-al">e.a.</term><term name="forthcoming">in voorbereiding</term><term name="from">van</term><term name="ibid">ibid.</term><term name="in">in</term><term name="in press">in druk</term><term name="internet">internet</term><term name="interview">interview</term><term name="letter">brief</term><term name="no date">zonder datum</term><term name="no date" form="short">z.d.</term><term name="online">online</term><term name="presented at">gepresenteerd bij</term><term name="reference"><single>referentie</single><multiple>referenties</multiple></term><term name="reference" form="short"><single>ref.</single><multiple>refs.</multiple></term><term name="retrieved">geraadpleegd</term><term name="scale">schaal</term><term name="version">versie</term><term name="ad">AD</term><term name="bc">BC</term><term name="open-quote">\u201c</term><term name="close-quote">\u201d</term><term name="open-inner-quote">\u2018</term><term name="close-inner-quote">\u2019</term><term name="page-range-delimiter">\u2013</term><term name="ordinal">ste</term><term name="ordinal-00" match="whole-number">de</term><term name="ordinal-02" match="last-two-digits">de</term><term name="ordinal-03" match="last-two-digits">de</term><term name="ordinal-04" match="last-two-digits">de</term><term name="ordinal-05" match="last-two-digits">de</term><term name="ordinal-06" match="last-two-digits">de</term><term name="ordinal-07" match="last-two-digits">de</term><term name="ordinal-09" match="last-two-digits">de</term><term name="ordinal-10">de</term><term name="ordinal-11">de</term><term name="ordinal-12">de</term><term name="ordinal-13">de</term><term name="ordinal-14">de</term><term name="ordinal-15">de</term><term name="ordinal-16">de</term><term name="ordinal-17">de</term><term name="ordinal-18">de</term><term name="ordinal-19">de</term><term name="long-ordinal-01">eerste</term><term name="long-ordinal-02">tweede</term><term name="long-ordinal-03">derde</term><term name="long-ordinal-04">vierde</term><term name="long-ordinal-05">vijfde</term><term name="long-ordinal-06">zesde</term><term name="long-ordinal-07">zevende</term><term name="long-ordinal-08">achtste</term><term name="long-ordinal-09">negende</term><term name="long-ordinal-10">tiende</term><term name="book"><single>boek</single><multiple>boeken</multiple></term><term name="chapter"><single>hoofdstuk</single><multiple>hoofdstukken</multiple></term><term name="column"><single>column</single><multiple>columns</multiple></term><term name="figure"><single>figuur</single><multiple>figuren</multiple></term><term name="folio"><single>folio</single><multiple>folio\'s</multiple></term><term name="issue"><single>nummer</single><multiple>nummers</multiple></term><term name="line"><single>regel</single><multiple>regels</multiple>\n</term><term name="note"><single>aantekening</single><multiple>aantekeningen</multiple></term><term name="opus"><single>opus</single><multiple>opera</multiple></term><term name="page"><single>pagina</single><multiple>pagina\'s</multiple></term><term name="number-of-pages"><single>pagina</single><multiple>pagina\'s</multiple></term><term name="paragraph"><single>paragraaf</single><multiple>paragrafen</multiple></term><term name="part"><single>deel</single><multiple>delen</multiple></term><term name="section"><single>sectie</single><multiple>secties</multiple></term><term name="sub verbo"><single>sub verbo</single><multiple>sub verbis</multiple></term><term name="verse"><single>vers</single><multiple>versen</multiple></term><term name="volume"><single>volume</single><multiple>volumes</multiple></term><term name="book" form="short">bk.</term><term name="chapter" form="short">hfdst.</term><term name="column" form="short">col.</term><term name="figure" form="short">fig.</term><term name="folio" form="short">f.</term><term name="issue" form="short">nr.</term><term name="line" form="short">l.</term><term name="note" form="short">n.</term><term name="opus" form="short">op.</term><term name="page" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="number-of-pages" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="paragraph" form="short">par.</term><term name="part" form="short">deel</term><term name="section" form="short">sec.</term><term name="sub verbo" form="short"><single>s.v.</single><multiple>s.vv.</multiple></term><term name="verse" form="short"><single>v.</single><multiple>vv.</multiple></term><term name="volume" form="short"><single>vol.</single><multiple>vols.</multiple></term><term name="paragraph" form="symbol"><single>\xb6</single><multiple>\xb6\xb6</multiple></term><term name="section" form="symbol"><single>\xa7</single><multiple>\xa7\xa7</multiple></term><term name="director"><single>regisseur</single><multiple>regisseurs</multiple></term><term name="editor"><single>redacteur</single><multiple>redacteuren</multiple></term><term name="editorial-director"><single>redacteur</single><multiple>redacteuren</multiple></term><term name="illustrator"><single>illustrator</single><multiple>illustrators</multiple></term><term name="translator"><single>vertaler</single><multiple>vertalers</multiple></term><term name="editortranslator"><single>redacteur &amp; vertaler</single><multiple>redacteuren &amp; vertalers</multiple></term><term name="director" form="short"><single>reg.</single><multiple>reg.</multiple></term><term name="editor" form="short"><single>red.</single><multiple>red.</multiple></term><term name="editorial-director" form="short"><single>red.</single><multiple>red.</multiple></term><term name="illustrator" form="short"><single>ill.</single><multiple>ill.</multiple></term><term name="translator" form="short"><single>vert.</single><multiple>vert.</multiple></term><term name="editortranslator" form="short"><single>red. &amp; vert.</single><multiple>red. &amp; vert.</multiple></term><term name="container-author" form="verb">door</term><term name="director" form="verb">geregisseerd door</term><term name="editor" form="verb">bewerkt door</term><term name="editorial-director" form="verb">bewerkt door</term><term name="illustrator" form="verb">ge\xefllustreerd door</term><term name="interviewer" form="verb">ge\xefnterviewd door</term><term name="recipient" form="verb">ontvangen door</term><term name="reviewed-author" form="verb">door</term><term name="translator" form="verb">vertaald door</term><term name="editortranslator" form="verb">bewerkt &amp; vertaald door</term><term name="director" form="verb-short">geregisseerd door</term><term name="editor" form="verb-short">bewerkt door</term><term name="editorial-director" form="verb-short">bewerkt door</term><term name="illustrator" form="verb-short">ge\xefllustreerd door</term><term name="translator" form="verb-short">vertaald door</term><term name="editortranslator" form="verb-short">bewerkt &amp; vertaald door</term>\n<term name="month-01">januari</term><term name="month-02">februari</term><term name="month-03">maart</term><term name="month-04">april</term><term name="month-05">mei</term><term name="month-06">juni</term><term name="month-07">juli</term><term name="month-08">augustus</term><term name="month-09">september</term><term name="month-10">oktober</term><term name="month-11">november</term><term name="month-12">december</term><term name="month-01" form="short">jan.</term><term name="month-02" form="short">feb.</term><term name="month-03" form="short">mrt.</term><term name="month-04" form="short">apr.</term><term name="month-05" form="short">mei</term><term name="month-06" form="short">jun.</term><term name="month-07" form="short">jul.</term><term name="month-08" form="short">aug.</term><term name="month-09" form="short">sep.</term><term name="month-10" form="short">okt.</term><term name="month-11" form="short">nov.</term><term name="month-12" form="short">dec.</term><term name="season-01">lente</term><term name="season-02">zomer</term><term name="season-03">herst</term><term name="season-04">winter</term></terms></locale>',"fr-FR":'<?xml version="1.0" encoding="utf-8"?><locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="fr-FR"><info><translator><name>Gr\xe9goire Colly</name></translator><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2012-07-04T23:31:02+00:00</updated></info><style-options punctuation-in-quote="false" limit-day-ordinals-to-day-1="true"/><date form="text"><date-part name="day" suffix=" "/><date-part name="month" suffix=" "/><date-part name="year"/></date><date form="numeric"><date-part name="day" form="numeric-leading-zeros" suffix="/"/><date-part name="month" form="numeric-leading-zeros" suffix="/"/><date-part name="year"/></date><terms><term name="accessed">consult\xe9 le</term><term name="and">et</term><term name="and others">et autres</term><term name="anonymous">anonyme</term><term name="anonymous" form="short">anon.</term><term name="at">sur</term><term name="available at">disponible sur</term><term name="by">par</term><term name="circa">vers</term><term name="circa" form="short">v.</term><term name="cited">cit\xe9</term><term name="edition" gender="feminine"><single>\xe9dition</single><multiple>\xe9ditions</multiple></term><term name="edition" form="short">\xe9d.</term><term name="et-al">et al.</term><term name="forthcoming">\xe0 para\xeetre</term><term name="from">\xe0 l\'adresse</term><term name="ibid">ibid.</term><term name="in">in</term><term name="in press">sous presse</term><term name="internet">Internet</term><term name="interview">entretien</term><term name="letter">lettre</term><term name="no date">sans date</term><term name="no date" form="short">s.&#160;d.</term><term name="online">en ligne</term><term name="presented at">pr\xe9sent\xe9 \xe0</term><term name="reference"><single>r\xe9f\xe9rence</single><multiple>r\xe9f\xe9rences</multiple></term><term name="reference" form="short"><single>r\xe9f.</single><multiple>r\xe9f.</multiple></term><term name="retrieved">consult\xe9</term><term name="scale">\xe9chelle</term><term name="version">version</term><term name="ad">apr. J.-C.</term><term name="bc">av. J.-C.</term><term name="open-quote">\xab&#160;</term><term name="close-quote">&#160;\xbb</term><term name="open-inner-quote">\u201c</term><term name="close-inner-quote">\u201d</term><term name="page-range-delimiter">&#8209;</term><term name="ordinal">\u1d49</term><term name="ordinal-01" gender-form="feminine" match="whole-number">\u02b3\u1d49</term><term name="ordinal-01" gender-form="masculine" match="whole-number">\u1d49\u02b3</term><term name="long-ordinal-01">premier</term><term name="long-ordinal-02">deuxi\xe8me</term><term name="long-ordinal-03">troisi\xe8me</term><term name="long-ordinal-04">quatri\xe8me</term><term name="long-ordinal-05">cinqui\xe8me</term><term name="long-ordinal-06">sixi\xe8me</term><term name="long-ordinal-07">septi\xe8me</term><term name="long-ordinal-08">huiti\xe8me</term><term name="long-ordinal-09">neuvi\xe8me</term><term name="long-ordinal-10">dixi\xe8me</term><term name="book"><single>livre</single><multiple>livres</multiple></term><term name="chapter"><single>chapitre</single><multiple>chapitres</multiple></term><term name="column"><single>colonne</single><multiple>colonnes</multiple></term><term name="figure"><single>figure</single><multiple>figures</multiple></term><term name="folio"><single>folio</single><multiple>folios</multiple></term><term name="issue" gender="masculine"><single>num\xe9ro</single><multiple>num\xe9ros</multiple></term><term name="line"><single>ligne</single><multiple>lignes</multiple></term><term name="note"><single>note</single><multiple>notes</multiple></term><term name="opus"><single>opus</single><multiple>opus</multiple></term><term name="page"><single>page</single><multiple>pages</multiple></term><term name="number-of-pages"><single>page</single><multiple>pages</multiple></term><term name="paragraph"><single>paragraphe</single><multiple>paragraphes</multiple></term><term name="part"><single>partie</single><multiple>parties</multiple></term><term name="section"><single>section</single><multiple>sections</multiple>\n</term><term name="sub verbo"><single>sub verbo</single><multiple>sub verbis</multiple></term><term name="verse"><single>verset</single><multiple>versets</multiple></term><term name="volume" gender="masculine"><single>volume</single><multiple>volumes</multiple></term><term name="book" form="short">liv.</term><term name="chapter" form="short">chap.</term><term name="column" form="short">col.</term><term name="figure" form="short">fig.</term><term name="folio" form="short"><single>f\u1d52</single><multiple>f\u1d52\u02e2</multiple></term><term name="issue" form="short"><single>n\u1d52</single><multiple>n\u1d52\u02e2</multiple></term><term name="line" form="short">l.</term><term name="note" form="short">n.</term><term name="opus" form="short">op.</term><term name="page" form="short"><single>p.</single><multiple>p.</multiple></term><term name="number-of-pages" form="short"><single>p.</single><multiple>p.</multiple></term><term name="paragraph" form="short">paragr.</term><term name="part" form="short">part.</term><term name="section" form="short">sect.</term><term name="sub verbo" form="short"><single>s.&#160;v.</single><multiple>s.&#160;vv.</multiple></term><term name="verse" form="short"><single>v.</single><multiple>v.</multiple></term><term name="volume" form="short"><single>vol.</single><multiple>vol.</multiple></term><term name="paragraph" form="symbol"><single>\xa7</single><multiple>\xa7</multiple></term><term name="section" form="symbol"><single>\xa7</single><multiple>\xa7</multiple></term><term name="director"><single>r\xe9alisateur</single><multiple>r\xe9alisateurs</multiple></term><term name="editor"><single>\xe9diteur</single><multiple>\xe9diteurs</multiple></term><term name="editorial-director"><single>directeur</single><multiple>directeurs</multiple></term><term name="illustrator"><single>illustrateur</single><multiple>illustrateurs</multiple></term><term name="translator"><single>traducteur</single><multiple>traducteurs</multiple></term><term name="editortranslator"><single>\xe9diteur et traducteur</single><multiple>\xe9diteurs et traducteurs</multiple></term><term name="director" form="short"><single>r\xe9al.</single><multiple>r\xe9al.</multiple></term><term name="editor" form="short"><single>\xe9d.</single><multiple>\xe9d.</multiple></term><term name="editorial-director" form="short"><single>dir.</single><multiple>dir.</multiple></term><term name="illustrator" form="short"><single>ill.</single><multiple>ill.</multiple></term><term name="translator" form="short"><single>trad.</single><multiple>trad.</multiple></term><term name="editortranslator" form="short"><single>\xe9d. et trad.</single><multiple>\xe9d. et trad.</multiple></term><term name="container-author" form="verb">par</term><term name="director" form="verb">r\xe9alis\xe9 par</term><term name="editor" form="verb">\xe9dit\xe9 par</term><term name="editorial-director" form="verb">sous la direction de</term><term name="illustrator" form="verb">illustr\xe9 par</term><term name="interviewer" form="verb">entretien r\xe9alis\xe9 par</term><term name="recipient" form="verb">\xe0</term><term name="reviewed-author" form="verb">par</term><term name="translator" form="verb">traduit par</term><term name="editortranslator" form="verb">\xe9dit\xe9 et traduit par</term><term name="director" form="verb-short">r\xe9al. par</term><term name="editor" form="verb-short">\xe9d. par</term><term name="editorial-director" form="verb-short">ss la dir. de</term><term name="illustrator" form="verb-short">ill. par</term><term name="translator" form="verb-short">trad. par</term><term name="editortranslator" form="verb-short">\xe9d. et trad. par</term><term name="month-01" gender="masculine">janvier</term><term name="month-02" gender="masculine">f\xe9vrier</term><term name="month-03" gender="masculine">mars</term><term name="month-04" gender="masculine">avril</term><term name="month-05" gender="masculine">mai</term><term name="month-06" gender="masculine">juin</term><term name="month-07" gender="masculine">juillet</term><term name="month-08" gender="masculine">ao\xfbt</term><term name="month-09" gender="masculine">septembre</term><term name="month-10" gender="masculine">\noctobre</term><term name="month-11" gender="masculine">novembre</term><term name="month-12" gender="masculine">d\xe9cembre</term><term name="month-01" form="short">janv.</term><term name="month-02" form="short">f\xe9vr.</term><term name="month-03" form="short">mars</term><term name="month-04" form="short">avr.</term><term name="month-05" form="short">mai</term><term name="month-06" form="short">juin</term><term name="month-07" form="short">juill.</term><term name="month-08" form="short">ao\xfbt</term><term name="month-09" form="short">sept.</term><term name="month-10" form="short">oct.</term><term name="month-11" form="short">nov.</term><term name="month-12" form="short">d\xe9c.</term><term name="season-01">printemps</term><term name="season-02">\xe9t\xe9</term><term name="season-03">automne</term><term name="season-04">hiver</term></terms></locale>',"de-DE":'<?xml version="1.0" encoding="utf-8"?><locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="de-DE"><info><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2012-07-04T23:31:02+00:00</updated></info><style-options punctuation-in-quote="false"/><date form="text"><date-part name="day" form="ordinal" suffix=" "/><date-part name="month" suffix=" "/><date-part name="year"/></date><date form="numeric"><date-part name="day" form="numeric-leading-zeros" suffix="."/><date-part name="month" form="numeric-leading-zeros" suffix="."/><date-part name="year"/></date><terms><term name="accessed">zugegriffen</term><term name="and">und</term><term name="and others">und andere</term><term name="anonymous">ohne Autor</term><term name="anonymous" form="short">o.&#160;A.</term><term name="at">auf</term><term name="available at">verf\xfcgbar unter</term><term name="by">von</term><term name="circa">circa</term><term name="circa" form="short">ca.</term><term name="cited">zitiert</term><term name="edition"><single>Auflage</single><multiple>Auflagen</multiple></term><term name="edition" form="short">Aufl.</term><term name="et-al">u.&#160;a.</term><term name="forthcoming">i.&#160;E.</term><term name="from">von</term><term name="ibid">ebd.</term><term name="in">in</term><term name="in press">im Druck</term><term name="internet">Internet</term><term name="interview">Interview</term><term name="letter">Brief</term><term name="no date">ohne Datum</term><term name="no date" form="short">o.&#160;J.</term><term name="online">online</term><term name="presented at">gehalten auf der</term><term name="reference"><single>Referenz</single><multiple>Referenzen</multiple></term><term name="reference" form="short"><single>Ref.</single><multiple>Ref.</multiple></term><term name="retrieved">abgerufen</term><term name="scale">Ma\xdfstab</term><term name="version">Version</term><term name="ad">n.&#160;Chr.</term><term name="bc">v.&#160;Chr.</term><term name="open-quote">\u201e</term><term name="close-quote">\u201c</term><term name="open-inner-quote">\u201a</term><term name="close-inner-quote">\u2018</term><term name="page-range-delimiter">\u2013</term><term name="ordinal">.</term><term name="long-ordinal-01">erster</term><term name="long-ordinal-02">zweiter</term><term name="long-ordinal-03">dritter</term><term name="long-ordinal-04">vierter</term><term name="long-ordinal-05">f\xfcnfter</term><term name="long-ordinal-06">sechster</term><term name="long-ordinal-07">siebter</term><term name="long-ordinal-08">achter</term><term name="long-ordinal-09">neunter</term><term name="long-ordinal-10">zehnter</term><term name="book"><single>Buch</single><multiple>B\xfccher</multiple></term><term name="chapter"><single>Kapitel</single><multiple>Kapitel</multiple></term><term name="column"><single>Spalte</single><multiple>Spalten</multiple></term><term name="figure"><single>Abbildung</single><multiple>Abbildungen</multiple></term><term name="folio"><single>Blatt</single><multiple>Bl\xe4tter</multiple></term><term name="issue"><single>Nummer</single><multiple>Nummern</multiple></term><term name="line"><single>Zeile</single><multiple>Zeilen</multiple></term><term name="note"><single>Note</single><multiple>Noten</multiple></term><term name="opus"><single>Opus</single><multiple>Opera</multiple></term><term name="page"><single>Seite</single><multiple>Seiten</multiple></term><term name="number-of-pages"><single>Seite</single><multiple>Seiten</multiple></term><term name="paragraph"><single>Absatz</single><multiple>Abs\xe4tze</multiple></term><term name="part"><single>Teil</single><multiple>Teile</multiple></term><term name="section"><single>Abschnitt</single><multiple>Abschnitte</multiple></term><term name="sub verbo"><single>sub verbo</single><multiple>sub verbis</multiple></term><term name="verse"><single>Vers</single><multiple>Verse</multiple></term><term name="volume"><single>Band</single><multiple>B\xe4nde</multiple></term><term name="book" form="short">B.</term>\n<term name="chapter" form="short">Kap.</term><term name="column" form="short">Sp.</term><term name="figure" form="short">Abb.</term><term name="folio" form="short">Fol.</term><term name="issue" form="short">Nr.</term><term name="line" form="short">Z.</term><term name="note" form="short">N.</term><term name="opus" form="short">op.</term><term name="page" form="short"><single>S.</single><multiple>S.</multiple></term><term name="number-of-pages" form="short"><single>S.</single><multiple>S.</multiple></term><term name="paragraph" form="short">Abs.</term><term name="part" form="short">Teil</term><term name="section" form="short">Abschn.</term><term name="sub verbo" form="short"><single>s.&#160;v.</single><multiple>s.&#160;vv.</multiple></term><term name="verse" form="short"><single>V.</single><multiple>V.</multiple></term><term name="volume" form="short"><single>Bd.</single><multiple>Bde.</multiple></term><term name="paragraph" form="symbol"><single>\xb6</single><multiple>\xb6\xb6</multiple></term><term name="section" form="symbol"><single>\xa7</single><multiple>\xa7\xa7</multiple></term><term name="director"><single>Regisseur</single><multiple>Regisseure</multiple></term><term name="editor"><single>Herausgeber</single><multiple>Herausgeber</multiple></term><term name="collection-editor"><single>Reihenherausgeber</single><multiple>Reihenherausgeber</multiple></term><term name="editorial-director"><single>Herausgeber</single><multiple>Herausgeber</multiple></term><term name="illustrator"><single>Illustrator</single><multiple>Illustratoren</multiple></term><term name="translator"><single>\xdcbersetzer</single><multiple>\xdcbersetzer</multiple></term><term name="editortranslator"><single>Herausgeber&#160;&amp; \xdcbersetzer</single><multiple>Herausgeber&#160;&amp; \xdcbersetzer</multiple></term><term name="director" form="short"><single>Reg.</single><multiple>Reg.</multiple></term><term name="editor" form="short"><single>Hrsg.</single><multiple>Hrsg.</multiple></term><term name="collection-editor" form="short"><single>Hrsg.</single><multiple>Hrsg.</multiple></term><term name="editorial-director" form="short"><single>Hrsg.</single><multiple>Hrsg.</multiple></term><term name="illustrator" form="short"><single>Ill.</single><multiple>Ill.</multiple></term><term name="translator" form="short"><single>\xdcbers.</single><multiple>\xdcbers.</multiple></term><term name="editortranslator" form="short"><single>Hrsg.&#160;&amp; \xdcbers.</single><multiple>Hrsg.&#160;&amp; \xdcbers</multiple></term><term name="container-author" form="verb">von</term><term name="director" form="verb">Regie von</term><term name="editor" form="verb">herausgegeben von</term><term name="collection-editor" form="verb">herausgegeben von</term><term name="editorial-director" form="verb">herausgegeben von</term><term name="illustrator" form="verb">illustriert von</term><term name="interviewer" form="verb">interviewt von</term><term name="recipient" form="verb">an</term><term name="reviewed-author" form="verb">von</term><term name="translator" form="verb">\xfcbersetzt von</term><term name="editortranslator" form="verb">herausgegeben und \xfcbersetzt von</term><term name="director" form="verb-short">Reg.</term><term name="editor" form="verb-short">hg. von</term><term name="collection-editor" form="verb-short">hg. von</term><term name="editorial-director" form="verb-short">hg. von</term><term name="illustrator" form="verb-short">illus. von</term><term name="translator" form="verb-short">\xfcbers. von</term><term name="editortranslator" form="verb-short">hg.&#160;&amp; \xfcbers. von</term><term name="month-01">Januar</term><term name="month-02">Februar</term><term name="month-03">M\xe4rz</term><term name="month-04">April</term><term name="month-05">Mai</term><term name="month-06">Juni</term><term name="month-07">Juli</term><term name="month-08">August</term><term name="month-09">September</term><term name="month-10">Oktober</term><term name="month-11">November</term><term name="month-12">Dezember</term><term name="month-01" form="short">Jan.</term><term name="month-02" form="short">Feb.</term>\n<term name="month-03" form="short">M\xe4rz</term><term name="month-04" form="short">Apr.</term><term name="month-05" form="short">Mai</term><term name="month-06" form="short">Juni</term><term name="month-07" form="short">Juli</term><term name="month-08" form="short">Aug.</term><term name="month-09" form="short">Sep.</term><term name="month-10" form="short">Okt.</term><term name="month-11" form="short">Nov.</term><term name="month-12" form="short">Dez.</term><term name="season-01">Fr\xfchjahr</term><term name="season-02">Sommer</term><term name="season-03">Herbst</term><term name="season-04">Winter</term></terms></locale>',"es-ES":'<?xml version="1.0" encoding="utf-8"?><locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="es-ES"><info><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2012-07-04T23:31:02+00:00</updated></info><style-options punctuation-in-quote="false"/><date form="text"><date-part name="day" suffix=" de "/><date-part name="month" suffix=" de "/><date-part name="year"/></date><date form="numeric"><date-part name="day" form="numeric-leading-zeros" suffix="/"/><date-part name="month" form="numeric-leading-zeros" suffix="/"/><date-part name="year"/></date><terms><term name="accessed">accedido</term><term name="and">y</term><term name="and others">y otros</term><term name="anonymous">an\xf3nimo</term><term name="anonymous" form="short">an\xf3n.</term><term name="at">en</term><term name="available at">disponible en</term><term name="by">de</term><term name="circa">circa</term><term name="circa" form="short">c.</term><term name="cited">citado</term><term name="edition"><single>edici\xf3n</single><multiple>ediciones</multiple></term><term name="edition" form="short">ed.</term><term name="et-al">et&#160;al.</term><term name="forthcoming">previsto</term><term name="from">a partir de</term><term name="ibid">ibid.</term><term name="in">en</term><term name="in press">en imprenta</term><term name="internet">internet</term><term name="interview">entrevista</term><term name="letter">carta</term><term name="no date">sin fecha</term><term name="no date" form="short">s.&#160;f.</term><term name="online">en l\xednea</term><term name="presented at">presentado en</term><term name="reference"><single>referencia</single><multiple>referencias</multiple></term><term name="reference" form="short"><single>ref.</single><multiple>refs.</multiple></term><term name="retrieved">recuperado</term><term name="scale">escala</term><term name="version">versi\xf3n</term><term name="ad">d.&#160;C.</term><term name="bc">a.&#160;C.</term><term name="open-quote">\xab</term><term name="close-quote">\xbb</term><term name="open-inner-quote">\u201c</term><term name="close-inner-quote">\u201d</term><term name="page-range-delimiter">-</term><term name="ordinal">.\xaa</term><term name="long-ordinal-01">primera</term><term name="long-ordinal-02">segunda</term><term name="long-ordinal-03">tercera</term><term name="long-ordinal-04">cuarta</term><term name="long-ordinal-05">quinta</term><term name="long-ordinal-06">sexta</term><term name="long-ordinal-07">s\xe9ptima</term><term name="long-ordinal-08">octava</term><term name="long-ordinal-09">novena</term><term name="long-ordinal-10">d\xe9cima</term><term name="book"><single>libro</single><multiple>libros</multiple></term><term name="chapter"><single>cap\xedtulo</single><multiple>cap\xedtulos</multiple></term><term name="column"><single>columna</single><multiple>columnas</multiple></term><term name="figure"><single>figura</single><multiple>figuras</multiple></term><term name="folio"><single>folio</single><multiple>folios</multiple></term><term name="issue"><single>n\xfamero</single><multiple>n\xfameros</multiple></term><term name="line"><single>l\xednea</single><multiple>l\xedneas</multiple></term><term name="note"><single>nota</single><multiple>notas</multiple></term><term name="opus"><single>opus</single><multiple>opera</multiple></term><term name="page"><single>p\xe1gina</single><multiple>p\xe1ginas</multiple></term><term name="number-of-pages"><single>p\xe1gina</single><multiple>p\xe1ginas</multiple></term><term name="paragraph"><single>p\xe1rrafo</single><multiple>p\xe1rrafos</multiple></term><term name="part"><single>parte</single><multiple>partes</multiple></term><term name="section"><single>secci\xf3n</single><multiple>secciones</multiple></term><term name="sub verbo"><single>sub voce</single><multiple>sub vocibus</multiple></term><term name="verse"><single>verso</single><multiple>versos</multiple></term><term name="volume"><single>volumen</single><multiple>vol\xfamenes</multiple></term><term name="book" form="short">lib.</term>\n<term name="chapter" form="short">cap.</term><term name="column" form="short">col.</term><term name="figure" form="short">fig.</term><term name="folio" form="short">f.</term><term name="issue" form="short">n.\xba</term><term name="line" form="short">l.</term><term name="note" form="short">n.</term><term name="opus" form="short">op.</term><term name="page" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="number-of-pages" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="paragraph" form="short">p\xe1rr.</term><term name="part" form="short">pt.</term><term name="section" form="short">sec.</term><term name="sub verbo" form="short"><single>s.&#160;v.</single><multiple>s.&#160;vv.</multiple></term><term name="verse" form="short"><single>v.</single><multiple>vv.</multiple></term><term name="volume" form="short"><single>vol.</single><multiple>vols.</multiple></term><term name="paragraph" form="symbol"><single>\xa7</single><multiple>\xa7</multiple></term><term name="section" form="symbol"><single>\xa7</single><multiple>\xa7</multiple></term><term name="director"><single>director</single><multiple>directores</multiple></term><term name="editor"><single>editor</single><multiple>editores</multiple></term><term name="editorial-director"><single>editor</single><multiple>editores</multiple></term><term name="illustrator"><single>ilustrador</single><multiple>ilustradores</multiple></term><term name="translator"><single>traductor</single><multiple>traductores</multiple></term><term name="editortranslator"><single>editor y traductor</single><multiple>editores y traductores</multiple></term><term name="director" form="short"><single>dir.</single><multiple>dirs.</multiple></term><term name="editor" form="short"><single>ed.</single><multiple>eds.</multiple></term><term name="editorial-director" form="short"><single>ed.</single><multiple>eds.</multiple></term><term name="illustrator" form="short"><single>ilust.</single><multiple>ilusts.</multiple></term><term name="translator" form="short"><single>trad.</single><multiple>trads.</multiple></term><term name="editortranslator" form="short"><single>ed. y trad.</single><multiple>eds. y trads.</multiple></term><term name="container-author" form="verb">de</term><term name="director" form="verb">dirigido por</term><term name="editor" form="verb">editado por</term><term name="editorial-director" form="verb">editado por</term><term name="illustrator" form="verb">ilustrado por</term><term name="interviewer" form="verb">entrevistado por</term><term name="recipient" form="verb">a</term><term name="reviewed-author" form="verb">por</term><term name="translator" form="verb">traducido por</term><term name="editortranslator" form="verb">editado y traducido por</term><term name="director" form="verb-short">dir.</term><term name="editor" form="verb-short">ed.</term><term name="editorial-director" form="verb-short">ed.</term><term name="illustrator" form="verb-short">ilust.</term><term name="translator" form="verb-short">trad.</term><term name="editortranslator" form="verb-short">ed. y trad.</term><term name="month-01">enero</term><term name="month-02">febrero</term><term name="month-03">marzo</term><term name="month-04">abril</term><term name="month-05">mayo</term><term name="month-06">junio</term><term name="month-07">julio</term><term name="month-08">agosto</term><term name="month-09">septiembre</term><term name="month-10">octubre</term><term name="month-11">noviembre</term><term name="month-12">diciembre</term><term name="month-01" form="short">ene.</term><term name="month-02" form="short">feb.</term><term name="month-03" form="short">mar.</term><term name="month-04" form="short">abr.</term><term name="month-05" form="short">may</term><term name="month-06" form="short">jun.</term><term name="month-07" form="short">jul.</term><term name="month-08" form="short">ago.</term><term name="month-09" form="short">sep.</term><term name="month-10" form="short">oct.</term><term name="month-11" form="short">nov.</term><term name="month-12" form="short">\ndic.</term><term name="season-01">primavera</term><term name="season-02">verano</term><term name="season-03">oto\xf1o</term><term name="season-04">invierno</term></terms></locale>'})&&Po.__esModule?Po:{default:Po};const jo=new Wa.util.Register(Do.default);Ro.locales=jo;var Lo={};Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.templates=void 0;var Mo,Bo=(Mo={apa:'<?xml version="1.0" encoding="utf-8"?><style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0" demote-non-dropping-particle="never" page-range-format="expanded"><info><title>American Psychological Association 7th edition</title><title-short>APA</title-short><id>http://www.zotero.org/styles/apa</id><link href="http://www.zotero.org/styles/apa" rel="self"/><link href="http://www.zotero.org/styles/apa-6th-edition" rel="template"/><link href="https://apastyle.apa.org/style-grammar-guidelines/references/examples" rel="documentation"/><author><name>Brenton M. Wiernik</name><email>zotero@wiernik.org</email></author><category citation-format="author-date"/><category field="psychology"/><category field="generic-base"/><updated>2019-12-04T13:09:49+00:00</updated><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights></info><locale xml:lang="en"><terms><term name="editortranslator" form="short"><single>ed. &amp; trans.</single><multiple>eds. &amp; trans.</multiple></term><term name="translator" form="short">trans.</term><term name="interviewer" form="short"><single>interviewer</single><multiple>interviewers</multiple></term><term name="collection-editor" form="short"><single>ed.</single><multiple>eds.</multiple></term><term name="circa" form="short">ca.</term><term name="bc"> B.C.E.</term><term name="ad"> C.E.</term><term name="letter">personal communication</term><term name="letter" form="short">letter</term><term name="issue" form="long"><single>issue</single><multiple>issues</multiple></term></terms></locale><locale xml:lang="af"><terms><term name="letter">persoonlike kommunikasie</term><term name="letter" form="short">brief</term></terms></locale><locale xml:lang="ar"><terms><term name="letter">\u0627\u062a\u0635\u0627\u0644 \u0634\u062e\u0635\u064a</term><term name="letter" form="short">\u062e\u0637\u0627\u0628</term></terms></locale><locale xml:lang="da"><terms><term name="et-al">et al.</term><term name="letter">personlig kommunikation</term><term name="letter" form="short">brev</term></terms></locale><locale xml:lang="de"><terms><term name="et-al">et al.</term><term name="letter">pers\xf6nliche Kommunikation</term><term name="letter" form="short">Brief</term></terms></locale><locale xml:lang="es"><terms><term name="from">de</term><term name="letter">comunicaci\xf3n personal</term><term name="letter" form="short">carta</term></terms></locale><locale xml:lang="fr"><terms><term name="letter">communication personnelle</term><term name="letter" form="short">lettre</term><term name="editor" form="short"><single>\xe9d.</single><multiple>\xe9ds.</multiple></term></terms></locale><locale xml:lang="nb"><terms><term name="et-al">et al.</term><term name="letter">personlig kommunikasjon</term><term name="letter" form="short">brev</term></terms></locale><locale xml:lang="nl"><terms><term name="et-al">et al.</term><term name="letter">persoonlijke communicatie</term><term name="letter" form="short">brief</term></terms></locale><locale xml:lang="nn"><terms><term name="et-al">et al.</term><term name="letter">personlig kommunikasjon</term><term name="letter" form="short">brev</term></terms></locale><locale xml:lang="ru"><terms><term name="letter">\u043b\u0438\u0447\u043d\u0430\u044f \u043f\u0435\u0440\u0435\u043f\u0438\u0441\u043a\u0430</term><term name="letter" form="short">\u043f\u0438\u0441\u044c\u043c\u043e</term></terms></locale><locale xml:lang="tr"><terms><term name="letter">ki\u015fisel ileti\u015fim</term><term name="letter" form="short">mektup</term></terms></locale><macro name="author-bib"><names variable="composer" delimiter=", "><name name-as-sort-order="all" and="symbol" sort-separator=", " initialize-with=". " delimiter=", " delimiter-precedes-last="always"/><substitute><names variable="author"/><names variable="illustrator"/><names variable="director"><name name-as-sort-order="all" and="symbol" sort-separator=", " initialize-with=". " delimiter=", " delimiter-precedes-last="always"/><label form="long" prefix=" (" suffix=")" text-case="title"/></names><choose><if variable="container-title"><choose><if type="book entry entry-dictionary entry-encyclopedia" match="any"><choose><if variable="title"><group delimiter=" "><text macro="title"/><text macro="parenthetical"/></group></if><else><text macro="title-and-descriptions"/></else></choose></if></choose></if></choose><names variable="editor" delimiter=", "><name name-as-sort-order="all" and="symbol" sort-separator=", " initialize-with=". " delimiter=", " delimiter-precedes-last="always"/><label form="short" prefix=" (" suffix=")" text-case="title"/></names><names variable="editorial-director"><name name-as-sort-order="all" and="symbol" sort-separator=", " initialize-with=". " delimiter=", " delimiter-precedes-last="always"/><label form="short" prefix=" (" suffix=")" text-case="title"/></names><names variable="collection-editor"><name name-as-sort-order="all" and="symbol" sort-separator=", " initialize-with=". " delimiter=", " delimiter-precedes-last="always"/><label form="short" prefix=" (" suffix=")" text-case="title"/></names><choose><if variable="title"><group delimiter=" "><text macro="title"/><text macro="parenthetical"/></group></if><else><text macro="title-and-descriptions"/></else></choose></substitute></names></macro><macro name="author-intext"><choose><if type="bill legal_case legislation treaty" match="any"><text macro="title-intext"/></if><else-if type="interview personal_communication"><choose><if variable="archive container-title DOI publisher URL" match="none"><group delimiter=", "><names variable="author"><name and="symbol" delimiter=", " initialize-with=". "/><substitute><text macro="title-intext"/></substitute></names><text term="letter"/></group></if><else><names variable="author" delimiter=", "><name form="short" and="symbol" delimiter=", " initialize-with=". "/><substitute><text macro="title-intext"/></substitute></names></else></choose></else-if><else><names variable="composer" delimiter=", "><name form="short" and="symbol" delimiter=", " initialize-with=". "/><substitute><names variable="author"/><names variable="illustrator"/><names variable="director"/><choose><if variable="container-title"><choose><if type="book entry entry-dictionary entry-encyclopedia" match="any"><text macro="title-intext"/></if></choose></if></choose><names variable="editor"/><names variable="editorial-director"/><text macro="title-intext"/></substitute></names></else></choose></macro><macro name="date-bib"><group delimiter=" " prefix="(" suffix=")"><choose><if is-uncertain-date="issued"><text term="circa" form="short"/></if></choose><group><choose><if variable="issued"><date variable="issued"><date-part name="year"/></date><text variable="year-suffix"/><choose><if type="article-magazine article-newspaper broadcast interview motion_picture pamphlet personal_communication post post-weblog song speech webpage" match="any"><date variable="issued"><date-part prefix=", " name="month"/><date-part prefix=" " name="day"/></date></if><else-if type="paper-conference"><choose><if variable="collection-editor editor editorial-director issue page volume" match="none"><date variable="issued"><date-part prefix=", " name="month"/><date-part prefix=" " name="day"/></date></if></choose></else-if></choose></if><else-if variable="status"><group><text variable="status" text-case="lowercase"/><text variable="year-suffix" prefix="-"/></group></else-if><else><group><text term="no date" form="short"/><text variable="year-suffix" prefix="-"/></group></else></choose></group></group></macro><macro name="date-sort-group"><choose><if variable="issued"><text value="1"/></if><else-if variable="status"><text value="2"/></else-if><else><text value="0"/></else></choose></macro><macro name="date-sort-date"><choose><if type="article-magazine article-newspaper broadcast interview pamphlet personal_communication post post-weblog speech treaty webpage" match="any"><date variable="issued" form="numeric"/></if><else-if type="paper-conference"><choose><if variable="collection-editor editor editorial-director issue page volume" match="none"><date variable="issued" form="numeric"/></if></choose></else-if><else><date variable="issued" form="numeric"/></else></choose></macro><macro name="date-intext"><choose><if variable="issued"><group delimiter="/"><group delimiter=" "><choose><if is-uncertain-date="original-date"><text term="circa" form="short"/></if></choose><date variable="original-date"><date-part name="year"/></date></group><group delimiter=" "><choose><if is-uncertain-date="issued"><text term="circa" form="short"/></if></choose><group><choose><if type="interview personal_communication"><choose><if variable="archive container-title DOI publisher URL" match="none"><date variable="issued" form="text"/></if><else><date variable="issued"><date-part name="year"/></date></else></choose></if><else><date variable="issued"><date-part name="year"/></date></else></choose><text variable="year-suffix"/></group></group></group></if><else-if variable="status"><text variable="status" text-case="lowercase"/><text variable="year-suffix" prefix="-"/></else-if><else><text term="no date" form="short"/><text variable="year-suffix" prefix="-"/></else></choose></macro><macro name="title-and-descriptions"><choose><if variable="title"><group delimiter=" "><text macro="title"/><text macro="parenthetical"/><text macro="bracketed"/></group></if><else><group delimiter=" "><text macro="bracketed"/><text macro="parenthetical"/></group></else></choose></macro><macro name="title"><choose><if type="post webpage" match="any"><text variable="title" font-style="italic"/></if><else-if variable="container-title" match="any"><text variable="title"/></else-if><else><choose><if type="article-journal article-magazine article-newspaper post-weblog review review-book"><text variable="title" font-style="italic"/></if><else-if type="paper-conference"><choose><if variable="collection-editor editor editorial-director" match="any"><group delimiter=": " font-style="italic"><text variable="title"/><choose><if is-numeric="volume" match="none"><group delimiter=" "><label variable="volume" form="short" text-case="capitalize-first"/><text variable="volume"/></group></if></choose></group></if><else><text variable="title" font-style="italic"/></else></choose></else-if><else><group delimiter=": " font-style="italic"><text variable="title"/><choose><if is-numeric="volume" match="none"><group delimiter=" "><label variable="volume" form="short" text-case="capitalize-first"/><text variable="volume"/></group></if></choose></group></else></choose></else></choose></macro><macro name="title-intext"><choose><if variable="title" match="none"><text macro="bracketed-intext" prefix="[" suffix="]"/></if><else-if type="bill"><choose><if variable="number container-title" match="none"><text variable="title" form="short" font-style="italic" text-case="title"/></if><else-if variable="title"><text variable="title" form="short" text-case="title"/></else-if><else><group delimiter=" "><text variable="genre"/><group delimiter=" "><choose><if variable="chapter-number container-title" match="none"><text term="issue" form="short"/></if></choose><text variable="number"/></group></group></else></choose></else-if><else-if type="legal_case" match="any"><text variable="title" font-style="italic"/></else-if><else-if type="legislation treaty" match="any"><text variable="title" form="short" text-case="title"/></else-if><else-if type="post webpage" match="any"><text variable="title" form="short" font-style="italic" text-case="title"/></else-if><else-if variable="container-title" match="any"><text variable="title" form="short" quotes="true" text-case="title"/></else-if><else><text variable="title" form="short" font-style="italic" text-case="title"/></else></choose></macro><macro name="parenthetical"><group prefix="(" suffix=")"><choose><if type="patent"><group delimiter=" "><text variable="authority" form="short"/><choose><if variable="genre"><text variable="genre" text-case="capitalize-first"/></if><else><text value="patent" text-case="capitalize-first"/></else></choose><group delimiter=" "><text term="issue" form="short" text-case="capitalize-first"/><text variable="number"/></group></group></if><else-if type="post webpage"><group delimiter="; "><text macro="secondary-contributors"/><text macro="database-location"/><text macro="number"/><text macro="locators-booklike"/></group></else-if><else-if variable="container-title"><group delimiter="; "><text macro="secondary-contributors"/><choose><if type="broadcast graphic map motion_picture song" match="any"><text macro="number"/></if></choose></group></else-if><else><group delimiter="; "><text macro="secondary-contributors"/><text macro="database-location"/><text macro="number"/><text macro="locators-booklike"/></group></else></choose></group></macro><macro name="parenthetical-container"><choose><if variable="container-title" match="any"><group prefix="(" suffix=")"><group delimiter="; "><text macro="database-location"/><choose><if type="broadcast graphic map motion_picture song" match="none"><text macro="number"/></if></choose><text macro="locators-booklike"/></group></group></if></choose></macro><macro name="bracketed"><group prefix="[" suffix="]"><choose><if variable="reviewed-author reviewed-title" type="review review-book" match="any"><group delimiter="; "><group delimiter=", "><group delimiter=" "><choose><if variable="number" match="none"><choose><if variable="genre"><text variable="genre" text-case="capitalize-first"/></if><else-if variable="medium"><text variable="medium" text-case="capitalize-first"/></else-if><else><text value="Review of"/></else></choose></if><else><choose><if variable="medium"><text variable="medium" text-case="capitalize-first"/></if><else><text value="Review of"/></else></choose></else></choose><text macro="reviewed-title"/></group><names variable="reviewed-author"><label form="verb-short" suffix=" "/><name and="symbol" initialize-with=". " delimiter=", "/></names></group><choose><if variable="genre" match="any"><choose><if variable="number" match="none"><text variable="medium" text-case="capitalize-first"/></if></choose></if></choose></group></if><else-if type="thesis"><group delimiter="; "><choose><if variable="number" match="none"><group delimiter=", "><text variable="genre" text-case="capitalize-first"/><choose><if variable="archive DOI URL" match="any"><text variable="publisher"/></if></choose></group></if></choose><text variable="medium" text-case="capitalize-first"/></group></else-if><else-if variable="interviewer" type="interview" match="any"><choose><if variable="title"><text macro="format"/></if><else-if variable="genre"><group delimiter="; "><group delimiter=" "><text variable="genre" text-case="capitalize-first"/><group delimiter=" "><text term="author" form="verb"/><names variable="interviewer"><name and="symbol" initialize-with=". " delimiter=", "/></names></group></group></group></else-if><else-if variable="interviewer"><group delimiter="; "><names variable="interviewer"><label form="verb" suffix=" " text-case="capitalize-first"/><name and="symbol" initialize-with=". " delimiter=", "/></names><text variable="medium" text-case="capitalize-first"/></group></else-if><else><text macro="format"/></else></choose></else-if><else-if type="personal_communication"><choose><if variable="recipient"><group delimiter="; "><group delimiter=" "><choose><if variable="number" match="none"><choose><if variable="genre"><text variable="genre" text-case="capitalize-first"/></if><else-if variable="medium"><text variable="medium" text-case="capitalize-first"/></else-if><else><text term="letter" form="short" text-case="capitalize-first"/></else></choose></if><else><choose><if variable="medium"><text variable="medium" text-case="capitalize-first"/></if><else><text term="letter" form="short" text-case="capitalize-first"/></else></choose></else></choose><names variable="recipient" delimiter=", "><label form="verb" suffix=" "/><name and="symbol" delimiter=", "/></names></group><choose><if variable="genre" match="any"><choose><if variable="number" match="none"><text variable="medium" text-case="capitalize-first"/></if></choose></if></choose></group></if><else><text macro="format"/></else></choose></else-if><else-if variable="composer" type="song" match="all"><group delimiter="; "><choose><if variable="number" match="none"><group delimiter=" "><choose><if variable="genre"><text variable="genre" text-case="capitalize-first"/><names variable="author" prefix="recorded by "><name and="symbol" initialize-with=". " delimiter=", "/></names></if><else-if variable="medium"><text variable="medium" text-case="capitalize-first"/><names variable="author" prefix="recorded by "><name and="symbol" initialize-with=". " delimiter=", "/></names></else-if><else><names variable="author" prefix="Recorded by "><name and="symbol" initialize-with=". " delimiter=", "/></names></else></choose></group></if><else><group delimiter=" "><choose><if variable="medium"><text variable="medium" text-case="capitalize-first"/><names variable="author" prefix="recorded by "><name and="symbol" initialize-with=". " delimiter=", "/></names></if><else><names variable="author" prefix="Recorded by "><name and="symbol" initialize-with=". " delimiter=", "/></names></else></choose></group></else></choose><choose><if variable="genre" match="any"><choose><if variable="number" match="none"><text variable="medium" text-case="capitalize-first"/></if></choose></if></choose></group></else-if><else-if variable="container-title" match="none"><text macro="format"/></else-if><else><choose><if type="paper-conference speech" match="any"><choose><if variable="collection-editor editor editorial-director issue page volume" match="any"><text macro="format"/></if></choose></if><else-if type="book"><choose><if variable="version" match="none"><text macro="format"/></if></choose></else-if><else-if type="report" match="none"><text macro="format"/></else-if></choose></else></choose></group></macro><macro name="bracketed-intext"><group prefix="[" suffix="]"><choose><if variable="reviewed-author reviewed-title" type="review review-book" match="any"><text macro="reviewed-title-intext" prefix="Review of "/></if><else-if variable="interviewer" type="interview" match="any"><names variable="interviewer"><label form="verb" suffix=" " text-case="capitalize-first"/><name and="symbol" initialize-with=". " delimiter=", "/><substitute><text macro="format-intext"/></substitute></names></else-if><else-if type="personal_communication"><choose><if variable="recipient"><group delimiter=" "><choose><if variable="number" match="none"><text variable="genre" text-case="capitalize-first"/></if><else><text term="letter" form="short" text-case="capitalize-first"/></else></choose><names variable="recipient" delimiter=", "><label form="verb" suffix=" "/><name and="symbol" delimiter=", "/></names></group></if><else><text macro="format-intext"/></else></choose></else-if><else><text macro="format-intext"/></else></choose></group></macro><macro name="bracketed-container"><group prefix="[" suffix="]"><choose><if type="paper-conference speech" match="any"><choose><if variable="collection-editor editor editorial-director issue page volume" match="none"><text macro="format"/></if></choose></if><else-if type="book" variable="version" match="all"><text macro="format"/></else-if><else-if type="report"><text macro="format"/></else-if></choose></group></macro><macro name="secondary-contributors"><choose><if type="article-journal article-magazine article-newspaper post-weblog review review-book" match="any"><text macro="secondary-contributors-periodical"/></if><else-if type="paper-conference"><choose><if variable="collection-editor editor editorial-director" match="any"><text macro="secondary-contributors-booklike"/></if><else><text macro="secondary-contributors-periodical"/></else></choose></else-if><else><text macro="secondary-contributors-booklike"/></else></choose></macro><macro name="secondary-contributors-periodical"><group delimiter="; "><choose><if variable="title"><names variable="interviewer" delimiter="; "><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=", " text-case="title"/></names></if></choose><names variable="translator" delimiter="; "><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=", " text-case="title"/></names></group></macro><macro name="secondary-contributors-booklike"><group delimiter="; "><choose><if variable="title"><names variable="interviewer"><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=", " text-case="title"/></names></if></choose><choose><if type="post webpage" match="none"><choose><if variable="container-title" match="none"><group delimiter="; "><names variable="container-author"><label form="verb-short" suffix=" " text-case="title"/><name and="symbol" initialize-with=". " delimiter=", "/></names><names variable="editor translator" delimiter="; "><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=", " text-case="title"/></names></group></if></choose></if><else><group delimiter="; "><names variable="container-author"><label form="verb-short" suffix=" " text-case="title"/><name and="symbol" initialize-with=". " delimiter=", "/></names><names variable="editor translator" delimiter="; "><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=", " text-case="title"/></names></group></else></choose></group></macro><macro name="database-location"><choose><if variable="archive-place" match="none"><text variable="archive_location"/></if></choose></macro><macro name="number"><choose><if variable="number"><group delimiter=", "><group delimiter=" "><text variable="genre" text-case="title"/><choose><if is-numeric="number"><text term="issue" form="short" text-case="capitalize-first"/><text variable="number"/></if><else><text variable="number"/></else></choose></group><choose><if type="thesis"><choose><if variable="archive DOI URL" match="any"><text variable="publisher"/></if></choose></if></choose></group></if></choose></macro><macro name="locators-booklike"><choose><if type="article-journal article-magazine article-newspaper broadcast interview patent post post-weblog review review-book speech webpage" match="any"/><else-if type="paper-conference"><choose><if variable="collection-editor editor editorial-director" match="any"><group delimiter=", "><text macro="version"/><text macro="edition"/><text macro="volume-booklike"/></group></if></choose></else-if><else><group delimiter=", "><text macro="version"/><text macro="edition"/><text macro="volume-booklike"/></group></else></choose></macro><macro name="version"><choose><if is-numeric="version"><group delimiter=" "><text term="version" text-case="capitalize-first"/><text variable="version"/></group></if><else><text variable="version"/></else></choose></macro><macro name="edition"><choose><if is-numeric="edition"><group delimiter=" "><number variable="edition" form="ordinal"/><label variable="edition" form="short"/></group></if><else><text variable="edition"/></else></choose></macro><macro name="volume-booklike"><group delimiter=", "><choose><if type="report"><group delimiter=" "><text variable="collection-title" text-case="title"/><text variable="collection-number"/></group></if></choose><choose><if variable="volume" match="any"><choose><if is-numeric="volume" match="none"/><else><group delimiter=" "><label variable="volume" form="short" text-case="capitalize-first"/><number variable="volume" form="numeric"/></group></else></choose></if><else><group><text term="volume" form="short" text-case="capitalize-first" suffix=" "/><text term="page-range-delimiter" prefix="1"/><number variable="number-of-volumes" form="numeric"/></group></else></choose><group delimiter=" "><label variable="issue" text-case="capitalize-first"/><text variable="issue"/></group><group delimiter=" "><label variable="page" form="short" suffix=" "/><text variable="page"/></group></group></macro><macro name="reviewed-title"><choose><if variable="reviewed-title"><text variable="reviewed-title" font-style="italic"/></if><else><text variable="title" font-style="italic"/></else></choose></macro><macro name="reviewed-title-intext"><choose><if variable="reviewed-title"><text variable="reviewed-title" form="short" font-style="italic" text-case="title"/></if><else><text variable="title" form="short" font-style="italic" text-case="title"/></else></choose></macro><macro name="format"><choose><if variable="genre medium" match="any"><group delimiter="; "><choose><if variable="number" match="none"><text variable="genre" text-case="capitalize-first"/></if></choose><text variable="medium" text-case="capitalize-first"/></group></if><else-if type="dataset"><text value="Data set"/></else-if><else-if type="book" variable="version" match="all"><text value="Computer software"/></else-if><else-if type="interview personal_communication" match="any"><choose><if variable="archive container-title DOI publisher URL" match="none"><text term="letter" text-case="capitalize-first"/></if><else-if type="interview"><text term="interview" text-case="capitalize-first"/></else-if></choose></else-if><else-if type="map"><text value="Map"/></else-if></choose></macro><macro name="format-intext"><choose><if variable="genre" match="any"><text variable="genre" text-case="capitalize-first"/></if><else-if variable="medium"><text variable="medium" text-case="capitalize-first"/></else-if><else-if type="dataset"><text value="Data set"/></else-if><else-if type="book" variable="version" match="all"><text value="Computer software"/></else-if><else-if type="interview personal_communication" match="any"><choose><if variable="archive container-title DOI publisher URL" match="none"><text term="letter" text-case="capitalize-first"/></if><else-if type="interview"><text term="interview" text-case="capitalize-first"/></else-if></choose></else-if><else-if type="map"><text value="Map"/></else-if></choose></macro><macro name="container"><choose><if type="article-journal article-magazine article-newspaper post-weblog review review-book" match="any"><text macro="container-periodical"/></if><else-if type="paper-conference"><choose><if variable="editor editorial-director collection-editor container-author" match="any"><text macro="container-booklike"/></if><else><text macro="container-periodical"/></else></choose></else-if><else-if type="post webpage" match="none"><text macro="container-booklike"/></else-if></choose></macro><macro name="container-periodical"><group delimiter=". "><group delimiter=", "><text variable="container-title" font-style="italic" text-case="title"/><choose><if variable="volume"><group><text variable="volume" font-style="italic"/><text variable="issue" prefix="(" suffix=")"/></group></if><else><text variable="issue" font-style="italic"/></else></choose><choose><if variable="page"><text variable="page"/></if><else><text variable="number" prefix="Article "/></else></choose></group><choose><if variable="issued"><choose><if variable="issue page volume" match="none"><text variable="status" text-case="capitalize-first"/></if></choose></if></choose></group></macro><macro name="container-booklike"><choose><if variable="container-title" match="any"><group delimiter=" "><text term="in" text-case="capitalize-first"/><group delimiter=", "><names variable="editor translator" delimiter=", &amp; "><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" text-case="title" prefix=" (" suffix=")"/><substitute><names variable="editorial-director"/><names variable="collection-editor"/><names variable="container-author"/></substitute></names><group delimiter=": " font-style="italic"><text variable="container-title"/><choose><if is-numeric="volume" match="none"><group delimiter=" "><label variable="volume" form="short" text-case="capitalize-first"/><text variable="volume"/></group></if></choose></group></group><text macro="parenthetical-container"/><text macro="bracketed-container"/></group></if></choose></macro><macro name="publisher"><group delimiter="; "><choose><if type="thesis"><choose><if variable="archive DOI URL" match="none"><text variable="publisher"/></if></choose></if><else-if type="post webpage"><group delimiter="; "><text variable="container-title" text-case="title"/><text variable="publisher"/></group></else-if><else-if type="paper-conference"><choose><if variable="collection-editor editor editorial-director" match="any"><text variable="publisher"/></if></choose></else-if><else-if type="article-journal article-magazine article-newspaper post-weblog" match="none"><text variable="publisher"/></else-if></choose><group delimiter=", "><choose><if variable="archive-place"><text variable="archive_location"/></if></choose><text variable="archive"/><text variable="archive-place"/></group></group></macro><macro name="access"><choose><if variable="DOI" match="any"><text variable="DOI" prefix="https://doi.org/"/></if><else-if variable="URL"><group delimiter=" "><choose><if variable="issued status" match="none"><group delimiter=" "><text term="retrieved" text-case="capitalize-first"/><date variable="accessed" form="text" suffix=","/><text term="from"/></group></if></choose><text variable="URL"/></group></else-if></choose></macro><macro name="event"><choose><if variable="event"><choose><if variable="collection-editor editor editorial-director issue page volume" match="none"><group delimiter=", "><text variable="event"/><text variable="event-place"/></group></if></choose></if></choose></macro><macro name="publication-history"><choose><if type="patent" match="none"><group prefix="(" suffix=")"><choose><if variable="references"><text variable="references"/></if><else><group delimiter=" "><text value="Original work published"/><choose><if is-uncertain-date="original-date"><text term="circa" form="short"/></if></choose><date variable="original-date"><date-part name="year"/></date></group></else></choose></group></if><else><text variable="references" prefix="(" suffix=")"/></else></choose></macro><macro name="legal-cites"><choose><if type="legal_case"><group delimiter=". "><group delimiter=", "><text variable="title"/><group delimiter=" "><text macro="container-legal"/><text macro="date-legal"/></group><text variable="references"/></group><text macro="access"/></group></if><else-if type="bill"><group delimiter=". "><group delimiter=", "><choose><if variable="number container-title" match="none"><text variable="title" font-style="italic"/></if><else><text variable="title"/></else></choose><group delimiter=" "><text macro="container-legal"/><text macro="date-legal"/><choose><if variable="number container-title" match="none"><names variable="author" prefix="(testimony of " suffix=")"><name and="symbol" delimiter=", "/></names></if><else><text variable="status" prefix="(" suffix=")"/></else></choose></group><text variable="references"/></group><text macro="access"/></group></else-if><else-if type="legislation"><group delimiter=". "><group delimiter=", "><text variable="title"/><group delimiter=" "><text macro="container-legal"/><text macro="date-legal"/><text variable="status" prefix="(" suffix=")"/></group><text variable="references"/></group><text macro="access"/></group></else-if><else-if type="treaty"><group delimiter=", "><text variable="title" text-case="title"/><names variable="author"><name initialize-with="." form="short" delimiter="-"/></names><text macro="date-legal"/><text macro="container-legal"/><text macro="access"/></group></else-if></choose></macro><macro name="date-legal"><choose><if type="legal_case"><group prefix="(" suffix=")" delimiter=" "><text variable="authority"/><choose><if variable="container-title" match="any"><date variable="issued" form="numeric" date-parts="year"/></if><else><date variable="issued" form="text"/></else></choose></group></if><else-if type="bill legislation" match="any"><group prefix="(" suffix=")" delimiter=" "><group delimiter=" "><date variable="original-date"><date-part name="year"/></date><text term="and" form="symbol"/></group><date variable="issued"><date-part name="year"/></date></group></else-if><else-if type="treaty"><date variable="issued" form="text"/></else-if></choose></macro><macro name="container-legal"><choose><if type="legal_case"><group delimiter=" "><choose><if variable="container-title"><group delimiter=" "><text variable="volume"/><text variable="container-title"/><group delimiter=" "><text term="section" form="symbol"/><text variable="section"/></group><choose><if variable="page page-first" match="any"><text variable="page-first"/></if><else><text value="___"/></else></choose></group></if><else><group delimiter=" "><choose><if is-numeric="number"><text term="issue" form="short" text-case="capitalize-first"/></if></choose><text variable="number"/></group></else></choose></group></if><else-if type="bill"><group delimiter=", "><group delimiter=" "><text variable="genre"/><group delimiter=" "><choose><if variable="chapter-number container-title" match="none"><text term="issue" form="short"/></if></choose><text variable="number"/></group></group><text variable="authority"/><text variable="chapter-number"/><group delimiter=" "><text variable="volume"/><text variable="container-title"/><text variable="page-first"/></group></group></else-if><else-if type="legislation"><choose><if variable="number"><group delimiter=", "><text variable="number" prefix="Pub. L. No. "/><group delimiter=" "><text variable="volume"/><text variable="container-title"/><text variable="page-first"/></group></group></if><else><group delimiter=" "><text variable="volume"/><text variable="container-title"/><choose><if variable="section"><group delimiter=" "><text term="section" form="symbol"/><text variable="section"/></group></if><else><text variable="page-first"/></else></choose></group></else></choose></else-if><else-if type="treaty"><group delimiter=" "><number variable="volume"/><text variable="container-title"/><choose><if variable="page page-first" match="any"><text variable="page-first"/></if><else><group delimiter=" "><text term="issue" form="short" text-case="capitalize-first"/><text variable="number"/></group></else></choose></group></else-if></choose></macro><macro name="citation-locator"><group delimiter=" "><choose><if locator="chapter"><label variable="locator" text-case="capitalize-first"/></if><else><label variable="locator" form="short"/></else></choose><text variable="locator"/></group></macro><citation et-al-min="3" et-al-use-first="1" disambiguate-add-year-suffix="true" disambiguate-add-names="true" disambiguate-add-givenname="true" collapse="year" givenname-disambiguation-rule="primary-name"><sort><key macro="author-bib" names-min="3" names-use-first="1"/><key macro="date-sort-group"/><key macro="date-sort-date" sort="ascending"/><key variable="status"/></sort><layout prefix="(" suffix=")" delimiter="; "><group delimiter=", "><text macro="author-intext"/><text macro="date-intext"/><text macro="citation-locator"/></group></layout></citation><bibliography hanging-indent="true" et-al-min="21" et-al-use-first="19" et-al-use-last="true" entry-spacing="0" line-spacing="2"><sort><key macro="author-bib"/><key macro="date-sort-group"/><key macro="date-sort-date" sort="ascending"/><key variable="status"/><key macro="title"/></sort><layout><choose><if type="bill legal_case legislation treaty" match="any"><choose><if variable="DOI URL" match="any"><text macro="legal-cites"/></if><else><text macro="legal-cites" suffix="."/></else></choose></if><else><group delimiter=" "><group delimiter=". " suffix="."><text macro="author-bib"/><text macro="date-bib"/><text macro="title-and-descriptions"/><text macro="container"/><text macro="event"/><text macro="publisher"/></group><text macro="access"/><text macro="publication-history"/></group></else></choose></layout></bibliography></style>',vancouver:'<?xml version="1.0" encoding="utf-8"?><style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0" demote-non-dropping-particle="sort-only" page-range-format="minimal"><info><title>Vancouver</title><id>http://www.zotero.org/styles/vancouver</id><link href="http://www.zotero.org/styles/vancouver" rel="self"/><link href="http://www.nlm.nih.gov/bsd/uniform_requirements.html" rel="documentation"/><author><name>Michael Berkowitz</name><email>mberkowi@gmu.edu</email></author><contributor><name>Sean Takats</name><email>stakats@gmu.edu</email></contributor><contributor><name>Sebastian Karcher</name></contributor><category citation-format="numeric"/><category field="medicine"/><summary>Vancouver style as outlined by International Committee of Medical Journal Editors Uniform Requirements for Manuscripts Submitted to Biomedical Journals: Sample References</summary><updated>2014-09-06T16:03:01+00:00</updated><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights></info><locale xml:lang="en"><date form="text" delimiter=" "><date-part name="year"/><date-part name="month" form="short" strip-periods="true"/><date-part name="day"/></date><terms><term name="collection-editor" form="long"><single>editor</single><multiple>editors</multiple></term><term name="presented at">presented at</term><term name="available at">available from</term><term name="section" form="short">sect.</term></terms></locale><locale xml:lang="fr"><date form="text" delimiter=" "><date-part name="day"/><date-part name="month" form="short" strip-periods="true"/><date-part name="year"/></date></locale><macro name="author"><names variable="author"><name sort-separator=" " initialize-with="" name-as-sort-order="all" delimiter=", " delimiter-precedes-last="always"/><label form="long" prefix=", "/><substitute><names variable="editor"/></substitute></names></macro><macro name="editor"><names variable="editor" suffix="."><name sort-separator=" " initialize-with="" name-as-sort-order="all" delimiter=", " delimiter-precedes-last="always"/><label form="long" prefix=", "/></names></macro><macro name="chapter-marker"><choose><if type="chapter paper-conference entry-dictionary entry-encyclopedia" match="any"><text term="in" text-case="capitalize-first"/></if></choose></macro><macro name="publisher"><choose><if type="article-journal article-magazine article-newspaper" match="none"><group delimiter=": " suffix=";"><choose><if type="thesis"><text variable="publisher-place" prefix="[" suffix="]"/></if><else-if type="speech"/><else><text variable="publisher-place"/></else></choose><text variable="publisher"/></group></if></choose></macro><macro name="access"><choose><if variable="URL"><group delimiter=": "><text term="available at" text-case="capitalize-first"/><text variable="URL"/></group></if></choose></macro><macro name="accessed-date"><choose><if variable="URL"><group prefix="[" suffix="]" delimiter=" "><text term="cited" text-case="lowercase"/><date variable="accessed" form="text"/></group></if></choose></macro><macro name="container-title"><choose><if type="article-journal article-magazine chapter paper-conference article-newspaper review review-book entry-dictionary entry-encyclopedia" match="any"><group suffix="." delimiter=" "><choose><if type="article-journal review review-book" match="any"><text variable="container-title" form="short" strip-periods="true"/></if><else><text variable="container-title" strip-periods="true"/></else></choose><choose><if variable="URL"><text term="internet" prefix="[" suffix="]" text-case="capitalize-first"/></if></choose></group><text macro="edition" prefix=" "/></if><else-if type="bill legislation" match="any"><group delimiter=", "><group delimiter=". "><text variable="container-title"/><group delimiter=" "><text term="section" form="short" text-case="capitalize-first"/><text variable="section"/></group></group><text variable="number"/></group></else-if><else-if type="speech">\n<group delimiter=": " suffix=";"><group delimiter=" "><text variable="genre" text-case="capitalize-first"/><text term="presented at"/></group><text variable="event"/></group></else-if><else><group delimiter=", " suffix="."><choose><if variable="collection-title" match="none"><group delimiter=" "><label variable="volume" form="short" text-case="capitalize-first"/><text variable="volume"/></group></if></choose><text variable="container-title"/></group></else></choose></macro><macro name="title"><text variable="title"/><choose><if type="article-journal article-magazine chapter paper-conference article-newspaper review review-book entry-dictionary entry-encyclopedia" match="none"><choose><if variable="URL"><text term="internet" prefix=" [" suffix="]" text-case="capitalize-first"/></if></choose><text macro="edition" prefix=". "/></if></choose><choose><if type="thesis"><text variable="genre" prefix=" [" suffix="]"/></if></choose></macro><macro name="edition"><choose><if is-numeric="edition"><group delimiter=" "><number variable="edition" form="ordinal"/><text term="edition" form="short"/></group></if><else><text variable="edition" suffix="."/></else></choose></macro><macro name="date"><choose><if type="article-journal article-magazine article-newspaper review review-book" match="any"><group suffix=";" delimiter=" "><date variable="issued" form="text"/><text macro="accessed-date"/></group></if><else-if type="bill legislation" match="any"><group delimiter=", "><date variable="issued" delimiter=" "><date-part name="month" form="short" strip-periods="true"/><date-part name="day"/></date><date variable="issued"><date-part name="year"/></date></group></else-if><else-if type="report"><date variable="issued" delimiter=" "><date-part name="year"/><date-part name="month" form="short" strip-periods="true"/></date><text macro="accessed-date" prefix=" "/></else-if><else-if type="patent"><group suffix="."><group delimiter=", "><text variable="number"/><date variable="issued"><date-part name="year"/></date></group><text macro="accessed-date" prefix=" "/></group></else-if><else-if type="speech"><group delimiter="; "><group delimiter=" "><date variable="issued" delimiter=" "><date-part name="year"/><date-part name="month" form="short" strip-periods="true"/><date-part name="day"/></date><text macro="accessed-date"/></group><text variable="event-place"/></group></else-if><else><group suffix="."><date variable="issued"><date-part name="year"/></date><text macro="accessed-date" prefix=" "/></group></else></choose></macro><macro name="pages"><choose><if type="article-journal article-magazine article-newspaper review review-book" match="any"><text variable="page" prefix=":"/></if><else-if type="book" match="any"><text variable="number-of-pages" prefix=" "/><choose><if is-numeric="number-of-pages"><label variable="number-of-pages" form="short" prefix=" " plural="never"/></if></choose></else-if><else><group prefix=" " delimiter=" "><label variable="page" form="short" plural="never"/><text variable="page"/></group></else></choose></macro><macro name="journal-location"><choose><if type="article-journal article-magazine review review-book" match="any"><text variable="volume"/><text variable="issue" prefix="(" suffix=")"/></if></choose></macro><macro name="collection-details"><choose><if type="article-journal article-magazine article-newspaper review review-book" match="none"><choose><if variable="collection-title"><group delimiter=" " prefix="(" suffix=")"><names variable="collection-editor" suffix="."><name sort-separator=" " initialize-with="" name-as-sort-order="all" delimiter=", " delimiter-precedes-last="always"/><label form="long" prefix=", "/></names><group delimiter="; "><text variable="collection-title"/><group delimiter=" "><label variable="volume" form="short"/><text variable="volume"/></group></group></group></if></choose></if></choose></macro><macro name="report-details"><choose><if type="report"><text variable="number" prefix="Report No.: "/></if></choose></macro><citation collapse="citation-number">\n<sort><key variable="citation-number"/></sort><layout prefix="(" suffix=")" delimiter=","><text variable="citation-number"/></layout></citation><bibliography et-al-min="7" et-al-use-first="6" second-field-align="flush"><layout><text variable="citation-number" suffix=". "/><group delimiter=". " suffix=". "><text macro="author"/><text macro="title"/></group><group delimiter=" " suffix=". "><group delimiter=": "><text macro="chapter-marker"/><group delimiter=" "><text macro="editor"/><text macro="container-title"/></group></group><text macro="publisher"/><group><text macro="date"/><text macro="journal-location"/><text macro="pages"/></group></group><text macro="collection-details" suffix=". "/><text macro="report-details" suffix=". "/><text macro="access"/></layout></bibliography></style>',harvard1:'<?xml version="1.0" encoding="utf-8"?><style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0" demote-non-dropping-particle="sort-only"><info><title>Harvard Reference format 1 (author-date)</title><id>http://www.zotero.org/styles/harvard1</id><link href="http://www.zotero.org/styles/harvard1" rel="self"/><link href="http://libweb.anglia.ac.uk/referencing/harvard.htm" rel="documentation"/><author><name>Julian Onions</name><email>julian.onions@gmail.com</email></author><category citation-format="author-date"/><category field="generic-base"/><summary>The Harvard author-date style</summary><updated>2012-09-27T22:06:38+00:00</updated><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights></info><macro name="editor"><names variable="editor" delimiter=", "><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=", " text-case="lowercase"/></names></macro><macro name="anon"><text term="anonymous" form="short" text-case="capitalize-first" strip-periods="true"/></macro><macro name="author"><names variable="author"><name name-as-sort-order="all" and="symbol" sort-separator=", " initialize-with="." delimiter-precedes-last="never" delimiter=", "/><label form="short" prefix=" " text-case="lowercase"/><substitute><names variable="editor"/><text macro="anon"/></substitute></names></macro><macro name="author-short"><names variable="author"><name form="short" and="symbol" delimiter=", " delimiter-precedes-last="never" initialize-with=". "/><substitute><names variable="editor"/><names variable="translator"/><text macro="anon"/></substitute></names></macro><macro name="access"><choose><if variable="URL"><text value="Available at:" suffix=" "/><text variable="URL"/><group prefix=" [" suffix="]"><text term="accessed" text-case="capitalize-first" suffix=" "/><date variable="accessed"><date-part name="month" suffix=" "/><date-part name="day" suffix=", "/><date-part name="year"/></date></group></if></choose></macro><macro name="title"><choose><if type="bill book graphic legal_case legislation motion_picture report song thesis" match="any"><text variable="title" font-style="italic"/></if><else><text variable="title"/></else></choose></macro><macro name="publisher"><group delimiter=": "><text variable="publisher-place"/><text variable="publisher"/></group></macro><macro name="year-date"><choose><if variable="issued"><date variable="issued"><date-part name="year"/></date></if><else><text term="no date" form="short"/></else></choose></macro><macro name="edition"><choose><if is-numeric="edition"><group delimiter=" "><number variable="edition" form="ordinal"/><text term="edition" form="short"/></group></if><else><text variable="edition" suffix="."/></else></choose></macro><macro name="pages"><group><label variable="page" form="short" suffix=" "/><text variable="page"/></group></macro><citation et-al-min="3" et-al-use-first="1" disambiguate-add-year-suffix="true" disambiguate-add-names="true" disambiguate-add-givenname="true"><layout prefix="(" suffix=")" delimiter="; "><group delimiter=", "><group delimiter=" "><text macro="author-short"/><text macro="year-date"/></group><group><label variable="locator" form="short"/><text variable="locator"/></group></group></layout></citation><bibliography hanging-indent="true" et-al-min="4" et-al-use-first="1"><sort><key macro="author"/><key variable="title"/></sort><layout><text macro="author" suffix=","/><date variable="issued" prefix=" " suffix="."><date-part name="year"/></date><choose><if type="bill book graphic legal_case legislation motion_picture report song" match="any"><group prefix=" " delimiter=" " suffix=","><text macro="title"/><text macro="edition"/><text macro="editor"/></group><text prefix=" " suffix="." macro="publisher"/></if><else-if type="chapter paper-conference" match="any"><text macro="title" prefix=" " suffix="."/><group prefix=" " delimiter=" "><text term="in" text-case="capitalize-first"/>\n<text macro="editor"/><text variable="container-title" font-style="italic" suffix="."/><text variable="collection-title" suffix="."/><text variable="event" suffix="."/><group suffix="." delimiter=", "><text macro="publisher" prefix=" "/><text macro="pages"/></group></group></else-if><else-if type="thesis"><group prefix=" " suffix="." delimiter=". "><text macro="title"/><text variable="genre"/><text macro="publisher"/></group></else-if><else><group suffix="."><text macro="title" prefix=" "/><text macro="editor" prefix=" "/></group><group prefix=" " suffix="."><text variable="container-title" font-style="italic"/><group prefix=", "><text variable="volume"/><text variable="issue" prefix="(" suffix=")"/></group><group prefix=", "><label variable="page" form="short"/><text variable="page"/></group></group></else></choose><text prefix=" " macro="access" suffix="."/></layout></bibliography></style>'})&&Mo.__esModule?Mo:{default:Mo};const Uo=new Wa.util.Register(Bo.default);Lo.templates=Uo;var Fo,Go,qo,zo,Vo,Ho,Wo,$o,Yo,Jo,Xo,Ko={PROCESSOR_VERSION:"1.4.48",error:function(e){throw"undefined"==typeof Error?new Error("citeproc-js error: "+e):"citeproc-js error: "+e},debug:function(e){"undefined"==typeof console?dump("CSL: "+e+"\n"):console.log("citeproc-js warning: "+e)},toLocaleUpperCase(e){var t=this.tmp.lang_array;try{e=e.toLocaleUpperCase(t)}catch(i){e=e.toUpperCase()}return e},toLocaleLowerCase(e){var t=this.tmp.lang_array;try{e=e.toLocaleLowerCase(t)}catch(i){e=e.toLowerCase()}return e},LOCATOR_LABELS_REGEXP:new RegExp("^((vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\\.)\\s+(.*)"),STATUTE_SUBDIV_PLAIN_REGEX:/(?:(?:^| )(?:vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\. *)/,STATUTE_SUBDIV_PLAIN_REGEX_FRONT:/(?:^\s*[.,;]*\s*(?:vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\. *)/,STATUTE_SUBDIV_STRINGS:{"vrs.":"verse","sv.":"sub-verbo","subpara.":"subparagraph","op.":"opus","subch.":"subchapter","add.":"addendum","amend.":"amendment","annot.":"annotation","app.":"appendix","art.":"article","bibliog.":"bibliography","bk.":"book","ch.":"chapter","cl.":"clause","col.":"column","cmt.":"comment","dec.":"decision","dept.":"department","div.":"division","ex.":"example","fig.":"figure","fld.":"field","fol.":"folio","n.":"note","hypo.":"hypothetical","illus.":"illustration","intro.":"introduction","l.":"line","no.":"issue","p.":"page","pp.":"page","para.":"paragraph","pt.":"part","pmbl.":"preamble","princ.":"principle","pub.":"publication","r.":"rule","rn.":"randnummer","sched.":"schedule","sec.":"section","ser.":"series,","subdiv.":"subdivision","subsec.":"subsection","supp.":"supplement","tbl.":"table","tit.":"title","vol.":"volume"},STATUTE_SUBDIV_STRINGS_REVERSE:{verse:"vrs.","sub-verbo":"sv.","sub verbo":"sv.",subparagraph:"subpara.",opus:"op.",subchapter:"subch.",addendum:"add.",amendment:"amend.",annotation:"annot.",appendix:"app.",article:"art.",bibliography:"bibliog.",book:"bk.",chapter:"ch.",clause:"cl.",column:"col.",comment:"cmt.",decision:"dec.",department:"dept.",division:"div.",example:"ex.",figure:"fig.",field:"fld.",folio:"fol.",note:"n.",hypothetical:"hypo.",illustration:"illus.",introduction:"intro.",line:"l.",issue:"no.",page:"p.",paragraph:"para.",part:"pt.",preamble:"pmbl.",principle:"princ.",publication:"pub.",rule:"r.",randnummer:"rn.",schedule:"sched.",section:"sec.","series,":"ser.",subdivision:"subdiv.",subsection:"subsec.",supplement:"supp.",table:"tbl.",title:"tit.",volume:"vol."},LOCATOR_LABELS_MAP:{vrs:"verse",sv:"sub-verbo",subpara:"subparagraph",op:"opus",subch:"subchapter",add:"addendum",amend:"amendment",annot:"annotation",app:"appendix",art:"article",bibliog:"bibliography",bk:"book",ch:"chapter",cl:"clause",col:"column",cmt:"comment",dec:"decision",dept:"department",div:"division",ex:"example",fig:"figure",fld:"field",fol:"folio",n:"note",hypo:"hypothetical",illus:"illustration",intro:"introduction",l:"line",no:"issue",p:"page",pp:"page",para:"paragraph",pt:"part",pmbl:"preamble",princ:"principle",pub:"publication",r:"rule",rn:"randnummer",sched:"schedule",sec:"section",ser:"series,",subdiv:"subdivision",subsec:"subsection",supp:"supplement",tbl:"table",tit:"title",vol:"volume"},MODULE_MACROS:{"juris-pretitle":!0,"juris-title":!0,"juris-pretitle-short":!0,"juris-title-short":!0,"juris-main":!0,"juris-main-short":!0,"juris-tail":!0,"juris-tail-short":!0,"juris-locator":!0},MODULE_TYPES:{legal_case:!0,legislation:!0,bill:!0,hearing:!0,gazette:!0,report:!0,regulation:!0,standard:!0,patent:!0,locator:!0},checkNestedBrace:function(e){"note"===e.opt.xclass?(this.depth=0,this.update=function(e){for(var t=(e=e||"").split(/([\(\)])/),i=1,r=t.length;i<r;i+=2)"("===t[i]?(1==this.depth%2&&(t[i]="["),this.depth+=1):")"===t[i]&&(0==this.depth%2&&(t[i]="]"),this.depth-=1);return t.join("")}):this.update=function(e){return e}},MULTI_FIELDS:["event","publisher","publisher-place","event-place","title","container-title","collection-title","authority","genre","title-short","medium","country","jurisdiction","archive","archive-place"],LangPrefsMap:{title:"titles","title-short":"titles",event:"titles",genre:"titles",medium:"titles","container-title":"journals","collection-title":"titles",archive:"journals",publisher:"publishers",authority:"publishers","publisher-place":"places","event-place":"places","archive-place":"places",jurisdiction:"places",number:"places",edition:"places",issue:"places",volume:"places"},AbbreviationSegments:function(){this["container-title"]={},this["collection-title"]={},this["institution-entire"]={},this["institution-part"]={},this.nickname={},this.number={},this.title={},this.place={},this.hereinafter={},this.classic={},this["container-phrase"]={},this["title-phrase"]={}},getAbbrevsDomain:function(e,t,i){var r=null;if(e.opt.availableAbbrevDomains&&t&&"default"!==t){var s=e.locale[e.opt.lang].opts["jurisdiction-preference"],a=null;if(e.locale[i]&&(a=e.locale[i].opts["jurisdiction-preference"]),a)for(var n=a.length-1;n>-1;n--)if(e.opt.availableAbbrevDomains[t].indexOf(a[n])>-1){r=a[n];break}if(!r&&s)for(n=s.length-1;n>-1;n--)if(e.opt.availableAbbrevDomains[t].indexOf(s[n])>-1){r=s[n];break}}return r},FIELD_CATEGORY_REMAP:{title:"title","container-title":"container-title","collection-title":"collection-title",country:"place",number:"number",place:"place",archive:"container-title","title-short":"title",genre:"title",event:"title",medium:"title","archive-place":"place","publisher-place":"place","event-place":"place",jurisdiction:"place","language-name":"place","language-name-original":"place","call-number":"number","chapter-number":"number","collection-number":"number",edition:"number",page:"number",issue:"number",locator:"number","locator-extra":"number","number-of-pages":"number","number-of-volumes":"number",volume:"number","citation-number":"number",publisher:"institution-part"},parseLocator:function(e){if(this.opt.development_extensions.locator_date_and_revision&&e.locator){e.locator=""+e.locator;var t=e.locator.indexOf("|");if(t>-1){var i=e.locator;e.locator=i.slice(0,t);var r=(i=i.slice(t+1)).match(/^([0-9]{4}-[0-9]{2}-[0-9]{2}).*/);r&&(e["locator-date"]=this.fun.dateparser.parseDateToObject(r[1]),i=i.slice(r[1].length)),e["locator-extra"]=i.replace(/^\s+/,"").replace(/\s+$/,"")}}return e.locator&&(e.locator=(""+e.locator).replace(/\s+$/,"")),e},normalizeLocaleStr:function(e){if(e){var t=e.split("-");return t[0]=t[0].toLowerCase(),t[1]&&(t[1]=t[1].toUpperCase()),t.join("-")}},parseNoteFieldHacks:function(e,t,i){if("string"==typeof e.note){for(var r=[],s=e.note.split("\n"),a=0,n=s.length;a<n;a++){r=[];var o=(m=s[a]).match(Ko.NOTE_FIELDS_REGEXP);if(o){for(var l=m.split(Ko.NOTE_FIELDS_REGEXP),u=0,c=l.length-1;u<c;u++)r.push(l[u]),r.push(o[u]);for(r.push(l[l.length-1]),u=1,c=r.length;u<c&&(!r[u-1].trim()||!(a>0||u>1)||r[u-1].match(Ko.NOTE_FIELD_REGEXP));u+=2)r[u]="\n"+r[u].slice(2,-1).trim()+"\n";s[a]=r.join("")}}var p=0,h={};for(a=0,n=(s=s.join("\n").split("\n")).length;a<n;a++){var m,f=(m=s[a]).match(Ko.NOTE_FIELD_REGEXP);if(m.trim()){if(!f){if(0===a)continue;p=a;break}var d=f[1],g=f[2].replace(/^\s+/,"").replace(/\s+$/,"");if("type"===d)e.type=g,s[a]="";else if(Ko.DATE_VARIABLES.indexOf(d.replace(/^alt-/,""))>-1)e[d]&&!i||(e[d]=Ko.DateParser.parseDateToArray(g),(!t||t[d]&&this.isDateString(g))&&(s[a]=""));else if(!e[d]){if(Ko.NAME_VARIABLES.indexOf(d.replace(/^alt-/,""))>-1){h[d]||(h[d]=[]);var b=g.split(/\s*\|\|\s*/);if(1===b.length)h[d].push({literal:b[0]});else if(2===b.length){var y={family:b[0],given:b[1]};Ko.parseParticles(y),h[d].push(y)}}else e[d]=g;t&&!t[d]||(s[a]="")}}}for(var d in h)e[d]=h[d];if(t)for(s[p].trim()&&(s[p]="\n"+s[p]),a=p-1;a>-1;a--)s[a].trim()||(s=s.slice(0,a).concat(s.slice(a+1)));e.note=s.join("\n").trim()}},checkPrefixSpaceAppend:function(e,t){t||(t="");var i="",r=t.replace(/<[^>]+>/g,"").replace(/["'\u201d\u2019\u00bb\u202f\u00a0 ]+$/g,""),s=r.slice(-1);return(r.match(Ko.ENDSWITH_ROMANESQUE_REGEXP)||Ko.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(s)>-1||s.match(/[\)\],0-9]/))&&(i=" "),(t+i).replace(/\s+/g," ")},checkIgnorePredecessor:function(e,t){var i=t.replace(/<[^>]+>/g,"").replace(/["'\u201d\u2019\u00bb\u202f\u00a0 ]+$/g,"").slice(-1);return Ko.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(i)>-1&&t.trim().indexOf(" ")>-1&&(e.tmp.term_predecessor=!1,!0)},checkSuffixSpacePrepend:function(e,t){return t?((t.match(Ko.STARTSWITH_ROMANESQUE_REGEXP)||["[","("].indexOf(t.slice(0,1))>-1)&&(t=" "+t),t):""},GENDERS:["masculine","feminine"],ERROR_NO_RENDERED_FORM:1,PREVIEW:"Just for laughs.",ASSUME_ALL_ITEMS_REGISTERED:2,START:0,END:1,SINGLETON:2,SEEN:6,SUCCESSOR:3,SUCCESSOR_OF_SUCCESSOR:4,SUPPRESS:5,SINGULAR:0,PLURAL:1,LITERAL:!0,BEFORE:1,AFTER:2,DESCENDING:1,ASCENDING:2,PRIMARY:1,SECONDARY:2,POSITION_FIRST:0,POSITION_SUBSEQUENT:1,POSITION_IBID:2,POSITION_IBID_WITH_LOCATOR:3,POSITION_CONTAINER_SUBSEQUENT:4,POSITION_MAP:{0:0,4:1,1:2,2:3,3:4},POSITION_TEST_VARS:["position","first-reference-note-number","near-note"],AREAS:["citation","citation_sort","bibliography","bibliography_sort","intext"],CITE_FIELDS:["first-reference-note-number","first-container-reference-note-number","locator","locator-extra"],SWAPPING_PUNCTUATION:[".","!","?",":",","],TERMINAL_PUNCTUATION:[":",".",";","!","?"," "],NONE:0,NUMERIC:1,POSITION:2,TRIGRAPH:3,DATE_PARTS:["year","month","day"],DATE_PARTS_ALL:["year","month","day","season"],DATE_PARTS_INTERNAL:["year","month","day","year_end","month_end","day_end"],NAME_PARTS:["non-dropping-particle","family","given","dropping-particle","suffix","literal"],DISAMBIGUATE_OPTIONS:["disambiguate-add-names","disambiguate-add-givenname","disambiguate-add-year-suffix"],GIVENNAME_DISAMBIGUATION_RULES:["all-names","all-names-with-initials","primary-name","primary-name-with-initials","by-cite"],NAME_ATTRIBUTES:["and","delimiter-precedes-last","delimiter-precedes-et-al","initialize-with","initialize","name-as-sort-order","sort-separator","et-al-min","et-al-use-first","et-al-subsequent-min","et-al-subsequent-use-first","form","prefix","suffix","delimiter"],LOOSE:0,STRICT:1,TOLERANT:2,PREFIX_PUNCTUATION:/[.;:]\s*$/,SUFFIX_PUNCTUATION:/^\s*[.;:,\(\)]/,NUMBER_REGEXP:/(?:^\d+|\d+$)/,NAME_INITIAL_REGEXP:/^([A-Z\u0e01-\u0e5b\u00c0-\u017f\u0400-\u042f\u0590-\u05d4\u05d6-\u05ff\u0600-\u06ff\u0370\u0372\u0376\u0386\u0388-\u03ab\u03e2\u03e4\u03e6\u03e8\u03ea\u03ec\u03ee\u03f4\u03f7\u03fd-\u03ff])([a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0400-\u052f\u0600-\u06ff\u0370-\u03ff\u1f00-\u1fff]*|)(\.)*/,ROMANESQUE_REGEXP:/[-0-9a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/,ROMANESQUE_NOT_REGEXP:/[^a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/g,STARTSWITH_ROMANESQUE_REGEXP:/^[&a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/,ENDSWITH_ROMANESQUE_REGEXP:/[.;:&a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]$/,ALL_ROMANESQUE_REGEXP:/^[a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]+$/,VIETNAMESE_SPECIALS:/[\u00c0-\u00c3\u00c8-\u00ca\u00cc\u00cd\u00d2-\u00d5\u00d9\u00da\u00dd\u00e0-\u00e3\u00e8-\u00ea\u00ec\u00ed\u00f2-\u00f5\u00f9\u00fa\u00fd\u0101\u0103\u0110\u0111\u0128\u0129\u0168\u0169\u01a0\u01a1\u01af\u01b0\u1ea0-\u1ef9]/,VIETNAMESE_NAMES:/^(?:(?:[.AaBbCcDdEeGgHhIiKkLlMmNnOoPpQqRrSsTtUuVvXxYy \u00c0-\u00c3\u00c8-\u00ca\u00cc\u00cd\u00d2-\u00d5\u00d9\u00da\u00dd\u00e0-\u00e3\u00e8-\u00ea\u00ec\u00ed\u00f2-\u00f5\u00f9\u00fa\u00fd\u0101\u0103\u0110\u0111\u0128\u0129\u0168\u0169\u01a0\u01a1\u01af\u01b0\u1ea0-\u1ef9]{2,6})(\s+|$))+$/,NOTE_FIELDS_REGEXP:/\{:(?:[\-_a-z]+|[A-Z]+):[^\}]+\}/g,NOTE_FIELD_REGEXP:/^([\-_a-z]+|[A-Z]+):\s*([^\}]+)$/,PARTICLE_GIVEN_REGEXP:/^([^ ]+(?:\u02bb |\u2019 | |\' ) *)(.+)$/,PARTICLE_FAMILY_REGEXP:/^([^ ]+(?:\-|\u02bb|\u2019| |\') *)(.+)$/,DISPLAY_CLASSES:["block","left-margin","right-inline","indent"],NAME_VARIABLES:["author","collection-editor","composer","container-author","director","editor","editorial-director","illustrator","interviewer","original-author","recipient","reviewed-author","translator","commenter"],CREATORS:["author","collection-editor","composer","container-author","director","editor","editorial-director","illustrator","interviewer","original-author","recipient","reviewed-author","translator","commenter"],NUMERIC_VARIABLES:["call-number","chapter-number","collection-number","division","edition","page","issue","locator","locator-extra","number","number-of-pages","number-of-volumes","version","volume","supplement","citation-number"],DATE_VARIABLES:["locator-date","issued","event-date","accessed","original-date","publication-date","available-date","submitted","alt-issued","alt-event"],VARIABLES_WITH_SHORT_FORM:["title","container-title"],TITLE_FIELD_SPLITS:function(e){for(var t=["title","short","main","sub","subjoin"],i={},r=0,s=t.length;r<s;r++)i[t[r]]=e+"title"+("title"===t[r]?"":"-"+t[r]);return i},demoteNoiseWords:function(e,t,i){var r=e.locale[e.opt.lang].opts["leading-noise-words"];if(t&&i){(t=t.split(/\s+/)).reverse();for(var s=[],a=t.length-1;a>-1&&r.indexOf(t[a].toLowerCase())>-1;a+=-1)s.push(t.pop());t.reverse();var n=t.join(" "),o=s.join(" ");"drop"!==i&&o?"demote"===i&&(t=[n,o].join(", ")):t=n}return t},extractTitleAndSubtitle:function(e,t){var i=t?"\u202f":"",r=[""];this.opt.development_extensions.split_container_title&&r.push("container-");for(var s=0,a=r.length;s<a;s++){var n=r[s],o=Ko.TITLE_FIELD_SPLITS(n),l=[!1];if(e.multi)for(var u in e.multi._keys[o.short])l.push(u);for(var c=0,p=l.length;c<p;c++){var h={};(u=l[c])?(e.multi._keys[o.title]&&(h[o.title]=e.multi._keys[o.title][u]),e.multi._keys[o.short]&&(h[o.short]=e.multi._keys[o.short][u])):(h[o.title]=e[o.title],h[o.short]=e[o.short]),h[o.main]=h[o.title],h[o.sub]=!1;var m=h[o.short];if(h[o.title]){if(m&&m.toLowerCase()===h[o.title].toLowerCase())h[o.main]=h[o.title],h[o.subjoin]="",h[o.sub]="";else if(m){var f=h[o.title].slice(m.replace(/[\?\!]+$/,"").length),d=h[o.title].replace(f.replace(/^[\?\!]+/,""),"").trim();(y=Ko.TITLE_SPLIT_REGEXP.matchfirst.exec(f))&&d.toLowerCase()===m.toLowerCase()?(h[o.main]=d,h[o.subjoin]=y[1].replace(/[\?\!]+(\s*)$/,"$1"),h[o.sub]=f.replace(Ko.TITLE_SPLIT_REGEXP.matchfirst,""),this.opt.development_extensions.force_short_title_casing_alignment&&(h[o.short]=h[o.main])):3==(g=Ko.TITLE_SPLIT(h[o.title])).length?(h[o.main]=g[0],h[o.subjoin]=g[1],h[o.sub]=g[2]):(h[o.main]=h[o.title],h[o.subjoin]="",h[o.sub]="")}else{var g;if(3==(g=Ko.TITLE_SPLIT(h[o.title])).length){if(h[o.main]=g[0],h[o.subjoin]=g[1],h[o.sub]=g[2],this.opt.development_extensions.implicit_short_title&&"legal_case"!==e.type&&!e[o.short]&&!h[o.main].match(/^[\-\.[0-9]+$/)){var b=h[o.subjoin].trim();-1===["?","!"].indexOf(b)&&(b=""),h[o.short]=h[o.main]+b}}else h[o.main]=h[o.title],h[o.subjoin]="",h[o.sub]=""}if(h[o.subjoin]&&h[o.subjoin].match(/([\?\!])/)){var y=h[o.subjoin].match(/(\s*)$/);h[o.main]=h[o.main]+i+h[o.subjoin].trim(),h[o.subjoin]=y[1]}}if(h[o.subjoin]&&(h[o.subjoin].indexOf(":")>-1&&(h[o.subjoin]=i+": "),(h[o.subjoin].indexOf("-")>-1||h[o.subjoin].indexOf("\u2014")>-1)&&(h[o.subjoin]="\u2014")),u)for(var v in h)e.multi._keys[v]||(e.multi._keys[v]={}),e.multi._keys[v][u]=h[v];else for(var v in h)e[v]=h[v]}}},titlecaseSentenceOrNormal:function(e,t,i,r,s){var a=Ko.TITLE_FIELD_SPLITS(i),n={};if(r&&t.multi?(t.multi._keys[a.title]&&(n[a.title]=t.multi._keys[a.title][r]),t.multi._keys[a.main]&&(n[a.main]=t.multi._keys[a.main][r]),t.multi._keys[a.sub]&&(n[a.sub]=t.multi._keys[a.sub][r]),t.multi._keys[a.subjoin]&&(n[a.subjoin]=t.multi._keys[a.subjoin][r])):(n[a.title]=t[a.title],n[a.main]=t[a.main],n[a.sub]=t[a.sub],n[a.subjoin]=t[a.subjoin]),n[a.main]&&n[a.sub]){var o=n[a.main],l=n[a.subjoin],u=n[a.sub];return s?(o=Ko.Output.Formatters.sentence(e,o),u=Ko.Output.Formatters.sentence(e,u)):e.opt.development_extensions.uppercase_subtitles&&(u=Ko.Output.Formatters["capitalize-first"](e,u)),[o,l,u].join("")}if(n[a.title]){if(s)return Ko.Output.Formatters.sentence(e,n[a.title]);if(e.opt.development_extensions.uppercase_subtitles){for(var c=Ko.TITLE_SPLIT(n[a.title]),p=0,h=c.length;p<h;p+=2)c[p]=Ko.Output.Formatters["capitalize-first"](e,c[p]);for(p=1,h=c.length-1;p<h;p+=2){var m=c[p].match(/([:\?\!] )/);if(m){var f="fr"===e.opt["default-locale"][0].slice(0,2).toLowerCase()?"\u202f":"";c[p]=f+m[1]}(c[p].indexOf("-")>-1||c[p].indexOf("\u2014")>-1)&&(c[p]="\u2014")}return n[a.title]=c.join(""),n[a.title]}return n[a.title]}return""},getSafeEscape:function(e){if(["bibliography","citation"].indexOf(e.tmp.area)>-1){var t=[];return e.opt.development_extensions.thin_non_breaking_space_html_hack&&"html"===e.opt.mode&&t.push((function(e){return e.replace(/\u202f/g,'<span style="white-space:nowrap">&thinsp;</span>')})),t.length?function(i){for(var r=0,s=t.length;r<s;r+=1)i=t[r](i);return Ko.Output.Formats[e.opt.mode].text_escape(i)}:Ko.Output.Formats[e.opt.mode].text_escape}return function(e){return e}},SKIP_WORDS:["about","above","across","afore","after","against","al","along","alongside","amid","amidst","among","amongst","anenst","apropos","apud","around","as","aside","astride","at","athwart","atop","barring","before","behind","below","beneath","beside","besides","between","beyond","but","by","circa","despite","down","during","et","except","for","forenenst","from","given","in","inside","into","lest","like","modulo","near","next","notwithstanding","of","off","on","onto","out","over","per","plus","pro","qua","sans","since","than","through"," thru","throughout","thruout","till","to","toward","towards","under","underneath","until","unto","up","upon","versus","vs.","v.","vs","v","via","vis-\xe0-vis","with","within","without","according to","ahead of","apart from","as for","as of","as per","as regards","aside from","back to","because of","close to","due to","except for","far from","inside of","instead of","near to","next to","on to","out from","out of","outside of","prior to","pursuant to","rather than","regardless of","such as","that of","up to","where as","or","yet","so","for","and","nor","a","an","the","de","d'","von","van","c","ca"],FORMAT_KEY_SEQUENCE:["@strip-periods","@font-style","@font-variant","@font-weight","@text-decoration","@vertical-align","@quotes"],INSTITUTION_KEYS:["font-style","font-variant","font-weight","text-decoration","text-case"],SUFFIX_CHARS:"a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z",ROMAN_NUMERALS:[["","i","ii","iii","iv","v","vi","vii","viii","ix"],["","x","xx","xxx","xl","l","lx","lxx","lxxx","xc"],["","c","cc","ccc","cd","d","dc","dcc","dccc","cm"],["","m","mm","mmm","mmmm","mmmmm"]],LANGS:{"af-ZA":"Afrikaans",ar:"Arabic","bg-BG":"Bulgarian","ca-AD":"Catalan","cs-CZ":"Czech","da-DK":"Danish","de-AT":"Austrian","de-CH":"German (CH)","de-DE":"German (DE)","el-GR":"Greek","en-GB":"English (GB)","en-US":"English (US)","es-ES":"Spanish","et-EE":"Estonian",eu:"European","fa-IR":"Persian","fi-FI":"Finnish","fr-CA":"French (CA)","fr-FR":"French (FR)","he-IL":"Hebrew","hr-HR":"Croatian","hu-HU":"Hungarian","is-IS":"Icelandic","it-IT":"Italian","ja-JP":"Japanese","km-KH":"Khmer","ko-KR":"Korean","lt-LT":"Lithuanian","lv-LV":"Latvian","mn-MN":"Mongolian","nb-NO":"Norwegian (Bokm\xe5l)","nl-NL":"Dutch","nn-NO":"Norwegian (Nynorsk)","pl-PL":"Polish","pt-BR":"Portuguese (BR)","pt-PT":"Portuguese (PT)","ro-RO":"Romanian","ru-RU":"Russian","sk-SK":"Slovak","sl-SI":"Slovenian","sr-RS":"Serbian","sv-SE":"Swedish","th-TH":"Thai","tr-TR":"Turkish","uk-UA":"Ukrainian","vi-VN":"Vietnamese","zh-CN":"Chinese (CN)","zh-TW":"Chinese (TW)"},LANG_BASES:{af:"af_ZA",ar:"ar",bg:"bg_BG",ca:"ca_AD",cs:"cs_CZ",da:"da_DK",de:"de_DE",el:"el_GR",en:"en_US",es:"es_ES",et:"et_EE",eu:"eu",fa:"fa_IR",fi:"fi_FI",fr:"fr_FR",he:"he_IL",hr:"hr-HR",hu:"hu_HU",is:"is_IS",it:"it_IT",ja:"ja_JP",km:"km_KH",ko:"ko_KR",lt:"lt_LT",lv:"lv-LV",mn:"mn_MN",nb:"nb_NO",nl:"nl_NL",nn:"nn-NO",pl:"pl_PL",pt:"pt_PT",ro:"ro_RO",ru:"ru_RU",sk:"sk_SK",sl:"sl_SI",sr:"sr_RS",sv:"sv_SE",th:"th_TH",tr:"tr_TR",uk:"uk_UA",vi:"vi_VN",zh:"zh_CN"},SUPERSCRIPTS:{"\xaa":"a","\xb2":"2","\xb3":"3","\xb9":"1","\xba":"o","\u02b0":"h","\u02b1":"\u0266","\u02b2":"j","\u02b3":"r","\u02b4":"\u0279","\u02b5":"\u027b","\u02b6":"\u0281","\u02b7":"w","\u02b8":"y","\u02e0":"\u0263","\u02e1":"l","\u02e2":"s","\u02e3":"x","\u02e4":"\u0295","\u1d2c":"A","\u1d2d":"\xc6","\u1d2e":"B","\u1d30":"D","\u1d31":"E","\u1d32":"\u018e","\u1d33":"G","\u1d34":"H","\u1d35":"I","\u1d36":"J","\u1d37":"K","\u1d38":"L","\u1d39":"M","\u1d3a":"N","\u1d3c":"O","\u1d3d":"\u0222","\u1d3e":"P","\u1d3f":"R","\u1d40":"T","\u1d41":"U","\u1d42":"W","\u1d43":"a","\u1d44":"\u0250","\u1d45":"\u0251","\u1d46":"\u1d02","\u1d47":"b","\u1d48":"d","\u1d49":"e","\u1d4a":"\u0259","\u1d4b":"\u025b","\u1d4c":"\u025c","\u1d4d":"g","\u1d4f":"k","\u1d50":"m","\u1d51":"\u014b","\u1d52":"o","\u1d53":"\u0254","\u1d54":"\u1d16","\u1d55":"\u1d17","\u1d56":"p","\u1d57":"t","\u1d58":"u","\u1d59":"\u1d1d","\u1d5a":"\u026f","\u1d5b":"v","\u1d5c":"\u1d25","\u1d5d":"\u03b2","\u1d5e":"\u03b3","\u1d5f":"\u03b4","\u1d60":"\u03c6","\u1d61":"\u03c7","\u2070":"0","\u2071":"i","\u2074":"4","\u2075":"5","\u2076":"6","\u2077":"7","\u2078":"8","\u2079":"9","\u207a":"+","\u207b":"\u2212","\u207c":"=","\u207d":"(","\u207e":")","\u207f":"n","\u2120":"SM","\u2122":"TM","\u3192":"\u4e00","\u3193":"\u4e8c","\u3194":"\u4e09","\u3195":"\u56db","\u3196":"\u4e0a","\u3197":"\u4e2d","\u3198":"\u4e0b","\u3199":"\u7532","\u319a":"\u4e59","\u319b":"\u4e19","\u319c":"\u4e01","\u319d":"\u5929","\u319e":"\u5730","\u319f":"\u4eba","\u02c0":"\u0294","\u02c1":"\u0295","\u06e5":"\u0648","\u06e6":"\u064a"},SUPERSCRIPTS_REGEXP:new RegExp("[\xaa\xb2\xb3\xb9\xba\u02b0\u02b1\u02b2\u02b3\u02b4\u02b5\u02b6\u02b7\u02b8\u02e0\u02e1\u02e2\u02e3\u02e4\u1d2c\u1d2d\u1d2e\u1d30\u1d31\u1d32\u1d33\u1d34\u1d35\u1d36\u1d37\u1d38\u1d39\u1d3a\u1d3c\u1d3d\u1d3e\u1d3f\u1d40\u1d41\u1d42\u1d43\u1d44\u1d45\u1d46\u1d47\u1d48\u1d49\u1d4a\u1d4b\u1d4c\u1d4d\u1d4f\u1d50\u1d51\u1d52\u1d53\u1d54\u1d55\u1d56\u1d57\u1d58\u1d59\u1d5a\u1d5b\u1d5c\u1d5d\u1d5e\u1d5f\u1d60\u1d61\u2070\u2071\u2074\u2075\u2076\u2077\u2078\u2079\u207a\u207b\u207c\u207d\u207e\u207f\u2120\u2122\u3192\u3193\u3194\u3195\u3196\u3197\u3198\u3199\u319a\u319b\u319c\u319d\u319e\u319f\u02c0\u02c1\u06e5\u06e6]","g"),UPDATE_GROUP_CONTEXT_CONDITION:function(e,t,i,r,s){if(e.opt.use_context_condition){var a=e.tmp.group_context.tip;a.condition?(a.condition.termtxt||(a.condition.termtxt=t,a.condition.valueTerm=i),a.value_seen||"comma-safe-numbers-only"!==a.condition.test||s&&(a.value_seen=!0,s.match(/^[0-9]/)||(e.tmp.just_did_number=!1))):r&&r.decorations.filter(e=>"@vertical-align"===e[0]).length>0||r&&r.strings.suffix?e.tmp.just_did_number=!1:t&&(t.match(/[0-9]$/)?e.tmp.just_did_number=!0:e.tmp.just_did_number=!1)}},EVALUATE_GROUP_CONDITION:function(e,t){if(e.opt.use_context_condition){var i,r="comma-safe-numbers-only"===t.condition.test;if("empty-label"===t.condition.test)i=!t.condition.termtxt;else if("empty-label-no-decor"===t.condition.test)i=!t.condition.termtxt||t.condition.termtxt.indexOf("%s")>-1;else if(["comma-safe","comma-safe-numbers-only"].indexOf(t.condition.test)>-1){var s=t.condition.termtxt,a=!1;t.condition.termtxt&&(a=t.condition.termtxt.slice(0,1).match(Ko.ALL_ROMANESQUE_REGEXP)),i=e.tmp.just_did_number?t.condition.valueTerm?!r:!s||(a?!r:["always","after-number"].indexOf(e.opt.require_comma_on_symbol)>-1):!t.condition.valueTerm&&!!s&&(a?!r:"always"===e.opt.require_comma_on_symbol)}if(i)var n=!1;else n=!0;return t.condition.not&&(n=!n),n}},SYS_OPTIONS:["prioritize_disambiguate_condition","csl_reverse_lookup_support","main_title_from_short_title","uppercase_subtitles","force_short_title_casing_alignment","implicit_short_title","split_container_title"],TITLE_SPLIT_REGEXP:(Go=["\\.\\s+","\\!\\s+","\\?\\s+","\\s*::*\\s+","\\s*\u2014\\s*","\\s+\\-\\s+","\\s*\\-\\-\\-*\\s*"],{match:new RegExp("("+Go.join("|")+")","g"),matchfirst:new RegExp("^("+Go.join("|")+")"),split:new RegExp("(?:"+Go.join("|")+")")}),TITLE_SPLIT:function(e){if(!e)return e;for(var t=e.match(Ko.TITLE_SPLIT_REGEXP.match),i=e.split(Ko.TITLE_SPLIT_REGEXP.split),r=i.length-2;r>-1;r--)i[r]=i[r].trim(),i[r]&&i[r].slice(-1).toLowerCase()!==i[r].slice(-1)?(i[r]=i[r]+t[r]+i[r+1],i=i.slice(0,r+1).concat(i.slice(r+2))):i=i.slice(0,r+1).concat([t[r]]).concat(i.slice(r+1));return i},GET_COURT_CLASS:function(e,t,i){var r="",s=null,a=t.jurisdiction?t.jurisdiction.split(":")[0]:null,n="court_condition_classes";return i&&(n="court_key_classes"),a&&t.authority&&("string"==typeof t.authority?s=t.authority:t.authority[0]&&t.authority[0].literal&&(s=t.authority[0].literal)),s&&(this.lang&&e.locale[this.lang].opts[n]&&e.locale[this.lang].opts[n][a]&&e.locale[this.lang].opts[n][a][s]?r=e.locale[this.lang].opts[n][a][s]:e.locale[e.opt["default-locale"][0]].opts[n]&&e.locale[e.opt["default-locale"][0]].opts[n][a]&&e.locale[e.opt["default-locale"][0]].opts[n][a][s]&&(r=e.locale[e.opt["default-locale"][0]].opts[n][a][s])),r},SET_COURT_CLASSES:function(e,t,i,r){for(var s=i.getNodesByName(r,"court-class"),a=0,n=i.numberofnodes(s);a<n;a+=1){var o=s[a],l=i.attributes(o),u=l["@name"],c=l["@country"],p=l["@courts"],h="court_key_classes";if(e.registry&&(h="court_condition_classes"),u&&c&&p){p=p.trim().split(/\s+/),e.locale[t].opts[h]||(e.locale[t].opts[h]={}),e.locale[t].opts[h][c]||(e.locale[t].opts[h][c]={});for(var m=0,f=p.length;m<f;m++)e.locale[t].opts[h][c][p[m]]=u}}},INIT_JURISDICTION_MACROS:function(e,t,i,r){if(!e.sys.retrieveStyleModule||!Ko.MODULE_MACROS[r]||!t.jurisdiction)return!1;var s=e.getJurisdictionList(t.jurisdiction);if(!e.opt.jurisdictions_seen[s[0]]){var a=e.retrieveAllStyleModules(s);for(var n in a){var o=e.loadStyleModule(n,a[n]);o&&(a[o]||(Object.assign(a,e.retrieveAllStyleModules([o])),e.loadStyleModule(o,a[o],!0)))}}e.opt.parallel.enable&&(e.parallel||(e.parallel=new Ko.Parallel(e)));for(var l=0,u=s.length;l<u;l++)if(n=s[l],i&&e.juris[n]&&!i["best-jurisdiction"]&&e.juris[n].types.locator&&(i["best-jurisdiction"]=n),e.juris[n]&&e.juris[n].types[t.type])return t["best-jurisdiction"]=n,!0;return!1},XmlJSON:function(e){this.dataObj=e,this.institution={name:"institution",attrs:{"institution-parts":"long",delimiter:", "},children:[{name:"institution-part",attrs:{name:"long"},children:[]}]}}};Ko.XmlJSON.prototype.clean=function(e){return e},Ko.XmlJSON.prototype.getStyleId=function(e,t){var i="id";t&&(i="title");for(var r="",s=e.children,a=0,n=s.length;a<n;a++)if("info"===s[a].name)for(var o=s[a].children,l=0,u=o.length;l<u;l++)o[l].name===i&&(r=o[l].children[0]);return r},Ko.XmlJSON.prototype.children=function(e){return!(!e||!e.children.length)&&e.children.slice()},Ko.XmlJSON.prototype.nodename=function(e){return e?e.name:null},Ko.XmlJSON.prototype.attributes=function(e){var t={};for(var i in e.attrs)t["@"+i]=e.attrs[i];return t},Ko.XmlJSON.prototype.content=function(e){var t="";if(!e||!e.children)return t;for(var i=0,r=e.children.length;i<r;i+=1)"string"==typeof e.children[i]&&(t+=e.children[i]);return t},Ko.XmlJSON.prototype.namespace={},Ko.XmlJSON.prototype.numberofnodes=function(e){return e&&"number"==typeof e.length?e.length:0},Ko.XmlJSON.prototype.getAttributeValue=function(e,t,i){var r="";return i&&(t=i+":"+t),e&&e.attrs&&(r=e.attrs[t]?e.attrs[t]:""),r},Ko.XmlJSON.prototype.getNodeValue=function(e,t){var i="";if(t)for(var r=0,s=e.children.length;r<s;r+=1)e.children[r].name===t&&(i=e.children[r].children.length?e.children[r]:"");else e&&(i=e);return i&&i.children&&1==i.children.length&&"string"==typeof i.children[0]&&(i=i.children[0]),i},Ko.XmlJSON.prototype.setAttributeOnNodeIdentifiedByNameAttribute=function(e,t,i,r,s){"@"===r.slice(0,1)&&(r=r.slice(1));for(var a=0,n=e.children.length;a<n;a+=1)e.children[a].name===t&&e.children[a].attrs.name===i&&(e.children[a].attrs[r]=s)},Ko.XmlJSON.prototype.deleteNodeByNameAttribute=function(e,t){var i,r;for(i=0,r=e.children.length;i<r;i+=1)e.children[i]&&"string"!=typeof e.children[i]&&e.children[i].attrs.name==t&&(e.children=e.children.slice(0,i).concat(e.children.slice(i+1)))},Ko.XmlJSON.prototype.deleteAttribute=function(e,t){void 0!==e.attrs[t]&&e.attrs.pop(t)},Ko.XmlJSON.prototype.setAttribute=function(e,t,i){return e.attrs[t]=i,!1},Ko.XmlJSON.prototype.nodeCopy=function(e,t){if(t||(t={}),"object"==typeof t&&void 0===t.length)for(var i in e)"string"==typeof e[i]?t[i]=e[i]:"object"==typeof e[i]&&(void 0===e[i].length?t[i]=this.nodeCopy(e[i],{}):t[i]=this.nodeCopy(e[i],[]));else for(var r=0,s=e.length;r<s;r+=1)"string"==typeof e[r]?t[r]=e[r]:t[r]=this.nodeCopy(e[r],{});return t},Ko.XmlJSON.prototype.getNodesByName=function(e,t,i,r){if(r||(r=[]),!e||!e.children)return r;t===e.name&&(i?i===e.attrs.name&&r.push(e):r.push(e));for(var s=0,a=e.children.length;s<a;s+=1)"object"==typeof e.children[s]&&this.getNodesByName(e.children[s],t,i,r);return r},Ko.XmlJSON.prototype.nodeNameIs=function(e,t){return void 0!==e&&t==e.name},Ko.XmlJSON.prototype.makeXml=function(e){return"string"==typeof e&&(e="<"===e.slice(0,1)?this.jsonStringWalker.walkToObject(e):JSON.parse(e)),e},Ko.XmlJSON.prototype.insertChildNodeAfter=function(e,t,i,r){for(var s=0,a=e.children.length;s<a;s+=1)if(t===e.children[s]){e.children=e.children.slice(0,s).concat([r]).concat(e.children.slice(s+1));break}return e},Ko.XmlJSON.prototype.insertPublisherAndPlace=function(e){if("group"===e.name){for(var t=!0,i=["publisher","publisher-place"],r=0,s=e.children.length;r<s;r+=1){var a=i.indexOf(e.children[r].attrs.variable);if(!("text"===e.children[r].name&&a>-1)||e.children[r].attrs.prefix||e.children[r].attrs.suffix){t=!1;break}i=i.slice(0,a).concat(i.slice(a+1))}t&&!i.length&&(e.attrs["has-publisher-and-publisher-place"]=!0)}for(r=0,s=e.children.length;r<s;r+=1)"object"==typeof e.children[r]&&this.insertPublisherAndPlace(e.children[r])},Ko.XmlJSON.prototype.isChildOfSubstitute=function(e){if(e.length>0){var t=e.slice();return"substitute"===t.pop()||this.isChildOfSubstitute(t)}return!1},Ko.XmlJSON.prototype.addMissingNameNodes=function(e,t){if(t||(t=[]),"names"===e.name&&!this.isChildOfSubstitute(t)){for(var i=!0,r=0,s=e.children.length;r<s;r++)if("name"===e.children[r].name){i=!1;break}i&&(e.children=[{name:"name",attrs:{},children:[]}].concat(e.children))}for(t.push(e.name),r=0,s=e.children.length;r<s;r+=1)"object"==typeof e.children[r]&&this.addMissingNameNodes(e.children[r],t);t.pop()},Ko.XmlJSON.prototype.addInstitutionNodes=function(e){if("names"===e.name){for(var t={},i=-1,r=0,s=e.children.length;r<s;r+=1){if("name"==e.children[r].name){for(var a in e.children[r].attrs)t[a]=e.children[r].attrs[a];t.delimiter=e.children[r].attrs.delimiter,t.and=e.children[r].attrs.and,i=r;for(var n=0,o=e.children[r].children.length;n<o;n+=1)if("family"===e.children[r].children[n].attrs.name)for(var a in e.children[r].children[n].attrs)t[a]=e.children[r].children[n].attrs[a]}if("institution"==e.children[r].name){i=-1;break}}if(i>-1){var l=this.nodeCopy(this.institution);for(r=0,s=Ko.INSTITUTION_KEYS.length;r<s;r+=1){var u=Ko.INSTITUTION_KEYS[r];void 0!==t[u]&&(l.children[0].attrs[u]=t[u]),t.delimiter&&(l.attrs.delimiter=t.delimiter),t.and&&(l.attrs.and=t.and)}e.children=e.children.slice(0,i+1).concat([l]).concat(e.children.slice(i+1))}}for(r=0,s=e.children.length;r<s;r+=1)"string"!=typeof e.children[r]&&this.addInstitutionNodes(e.children[r])},Ko.XmlJSON.prototype.flagDateMacros=function(e){for(var t=0,i=e.children.length;t<i;t+=1)"macro"===e.children[t].name&&this.inspectDateMacros(e.children[t])&&(e.children[t].attrs["macro-has-date"]="true")},Ko.XmlJSON.prototype.inspectDateMacros=function(e){if(!e||!e.children)return!1;if("date"===e.name)return!0;for(var t=0,i=e.children.length;t<i;t+=1)if(this.inspectDateMacros(e.children[t]))return!0;return!1},Ko.stripXmlProcessingInstruction=function(e){return e?e=(e=(e=(e=e.replace(/^<\?[^?]+\?>/,"")).replace(/<!--[^>]+-->/g,"")).replace(/^\s+/g,"")).replace(/\s+$/g,""):e},Ko.parseXml=function(e){var t,i,r={children:[]},s=[r.children];function a(e){return e.split("&amp;").join("&").split("&quot;").join('"').split("&gt;").join(">").split("&lt;").join("<").replace(/&#([0-9]{1,6});/gi,(function(e,t){var i=parseInt(t,10);return String.fromCharCode(i)})).replace(/&#x([a-f0-9]{1,6});/gi,(function(e,t){var i=parseInt(t,16);return String.fromCharCode(i)}))}function n(e,t){var i=RegExp("^.*[\t ]+"+t+"=(\"(?:[^\"]*)\"|'(?:[^']*)').*$"),r=e.match(i);return r?r[1].slice(1,-1):null}function o(e){var t=RegExp("^<([^\t />]+)"),i=e.match(t);return i?i[1]:null}function l(e){var t={};t.name=o(e),t.attrs={};var i=function(e){var t=e.match(/([^\'\"=\x09 ]+)=(?:\"[^\"]*\"|\'[^\']*\')/g);if(t)for(var i=0,r=t.length;i<r;i++)t[i]=t[i].replace(/=.*/,"");return t}(e);if(i)for(var r=0,s=i.length;r<s;r++){var l={name:i[r],value:n(e,i[r])};t.attrs[l.name]=a(l.value)}return t.children=[],t}function u(e){return a(e.match(/^.*>([^<]*)<.*$/)[1])}function c(e){s.slice(-1)[0].push(e)}for(var p=function(e){for(var t=(e=e.split(/(?:\r\n|\n|\r)/).join(" ").replace(/>[\x09 ]+</g,"><").replace(/<\!--.*?-->/g,"")).split("><"),i=null,r=0,s=t.length;r<s;r++)r>0&&(t[r]="<"+t[r]),r<t.length-1&&(t[r]=t[r]+">"),"number"!=typeof i&&("<style "!==t[r].slice(0,7)&&"<locale "!=t[r].slice(0,8)||(i=r));for(r=(t=t.slice(i)).length-2;r>-1;r--)if(-1===t[r].slice(1).indexOf("<")){var a=t[r].slice(0,5);"/>"!==t[r].slice(-2)&&("<term"===a?"</term"===t[r+1].slice(0,6)&&(t[r]=t[r]+t[r+1],t=t.slice(0,r+1).concat(t.slice(r+2))):["<sing","<mult"].indexOf(a)>-1&&"/>"!==t[r].slice(-2)&&"<"===t[r+1].slice(0,1)&&(t[r]=t[r]+t[r+1],t=t.slice(0,r+1).concat(t.slice(r+2))))}return t}(e),h=0,m=p.length;h<m;h++)t=p[h],i=void 0,t.slice(1).indexOf("<")>-1?((i=l(t.slice(0,t.indexOf(">")+1))).children=[u(t)],c(i)):"/>"===t.slice(-2)?(i=l(t),"term"===o(t)&&i.children.push(""),c(i)):"</"===t.slice(0,2)?s.pop():(c(i=l(t)),function(e){s.push(e.children)}(i));return r.children[0]},Ko.XmlDOM=function(e){this.dataObj=e,"undefined"==typeof DOMParser?(DOMParser=function(){},DOMParser.prototype.parseFromString=function(e,t){var i;return"undefined"!=typeof ActiveXObject?((i=new ActiveXObject("MSXML.DomDocument")).async=!1,i.loadXML(e),i):"undefined"!=typeof XMLHttpRequest?(t||(t="text/xml"),(i=new XMLHttpRequest).open("GET","data:"+t+";charset=utf-8,"+encodeURIComponent(e),!1),i.overrideMimeType&&i.overrideMimeType(t),i.send(null),i.responseXML):"undefined"!=typeof marknote?(new marknote.Parser).parse(e):void 0},this.hasAttributes=function(e){return!(!e.attributes||!e.attributes.length)}):this.hasAttributes=function(e){return!(!e.attributes||!e.attributes.length)},this.importNode=function(e,t){return void 0===e.importNode?this._importNode(e,t,!0):e.importNode(t,!0)},this._importNode=function(e,t,i){switch(t.nodeType){case 1:var r=e.createElement(t.nodeName);if(t.attributes&&t.attributes.length>0)for(var s=0,a=t.attributes.length;s<a;)r.setAttribute(t.attributes[s].nodeName,t.getAttribute(t.attributes[s++].nodeName));if(i&&t.childNodes&&t.childNodes.length>0)for(s=0,a=t.childNodes.length;s<a;)r.appendChild(this._importNode(e,t.childNodes[s++],i));return r}},this.parser=new DOMParser;var t=this.parser.parseFromString('<docco><institution institution-parts="long" delimiter=", " substitute-use-first="1" use-last="1"><institution-part name="long"/></institution></docco>',"text/xml"),i=t.getElementsByTagName("institution");this.institution=i.item(0);var r=t.getElementsByTagName("institution-part");this.institutionpart=r.item(0),this.ns="http://purl.org/net/xbiblio/csl"},Ko.XmlDOM.prototype.clean=function(e){return(e=(e=(e=(e=e.replace(/<\?[^?]+\?>/g,"")).replace(/<![^>]+>/g,"")).replace(/^\s+/,"")).replace(/\s+$/,"")).replace(/^\n*/,"")},Ko.XmlDOM.prototype.getStyleId=function(e,t){var i="",r="id";t&&(r="title");var s=e.getElementsByTagName(r);return s&&s.length&&(s=s.item(0)),s&&(i=s.textContent),i||(i=s.innerText),i||(i=s.innerHTML),i},Ko.XmlDOM.prototype.children=function(e){var t,i,r,s;if(e){for(s=[],i=0,r=(t=e.childNodes).length;i<r;i+=1)"#text"!=t[i].nodeName&&s.push(t[i]);return s}return[]},Ko.XmlDOM.prototype.nodename=function(e){return e.nodeName},Ko.XmlDOM.prototype.attributes=function(e){var t,i,r,s,a;if(t=new Object,e&&this.hasAttributes(e))for(s=0,a=(i=e.attributes).length;s<a;s+=1)t["@"+(r=i[s]).name]=r.value;return t},Ko.XmlDOM.prototype.content=function(e){return void 0!==e.textContent?e.textContent:void 0!==e.innerText?e.innerText:e.txt},Ko.XmlDOM.prototype.namespace={xml:"http://www.w3.org/XML/1998/namespace"},Ko.XmlDOM.prototype.numberofnodes=function(e){return e?e.length:0},Ko.XmlDOM.prototype.getAttributeName=function(e){return e.name},Ko.XmlDOM.prototype.getAttributeValue=function(e,t,i){var r="";return i&&(t=i+":"+t),e&&this.hasAttributes(e)&&e.getAttribute(t)&&(r=e.getAttribute(t)),r},Ko.XmlDOM.prototype.getNodeValue=function(e,t){var i=null;if(t){var r=e.getElementsByTagName(t);r.length>0&&(i=void 0!==r[0].textContent?r[0].textContent:void 0!==r[0].innerText?r[0].innerText:r[0].text)}return null===i&&e&&e.childNodes&&(0==e.childNodes.length||1==e.childNodes.length&&"#text"==e.firstChild.nodeName)&&(i=void 0!==e.textContent?e.textContent:void 0!==e.innerText?e.innerText:e.text),null===i&&(i=e),i},Ko.XmlDOM.prototype.setAttributeOnNodeIdentifiedByNameAttribute=function(e,t,i,r,s){var a,n,o,l;for("@"===r.slice(0,1)&&(r=r.slice(1)),a=0,n=(o=e.getElementsByTagName(t)).length;a<n;a+=1)(l=o[a]).getAttribute("name")==i&&l.setAttribute(r,s)},Ko.XmlDOM.prototype.deleteNodeByNameAttribute=function(e,t){var i,r,s,a;for(i=0,r=(a=e.childNodes).length;i<r;i+=1)(s=a[i])&&s.nodeType!=s.TEXT_NODE&&this.hasAttributes(s)&&s.getAttribute("name")==t&&e.removeChild(a[i])},Ko.XmlDOM.prototype.deleteAttribute=function(e,t){e.removeAttribute(t)},Ko.XmlDOM.prototype.setAttribute=function(e,t,i){return e.ownerDocument||(e=e.firstChild),["function","unknown"].indexOf(typeof e.setAttribute)>-1&&e.setAttribute(t,i),!1},Ko.XmlDOM.prototype.nodeCopy=function(e){return e.cloneNode(!0)},Ko.XmlDOM.prototype.getNodesByName=function(e,t,i){var r,s,a,n,o;for(r=[],n=0,o=(s=e.getElementsByTagName(t)).length;n<o;n+=1)a=s.item(n),(!i||this.hasAttributes(a)&&a.getAttribute("name")==i)&&r.push(a);return r},Ko.XmlDOM.prototype.nodeNameIs=function(e,t){return t==e.nodeName},Ko.XmlDOM.prototype.makeXml=function(e){return e||(e="<docco><bogus/></docco>"),e=e.replace(/\s*<\?[^>]*\?>\s*\n*/g,""),this.parser.parseFromString(e,"application/xml").firstChild},Ko.XmlDOM.prototype.insertChildNodeAfter=function(e,t,i,r){var s;return s=this.importNode(t.ownerDocument,r),e.replaceChild(s,t),e},Ko.XmlDOM.prototype.insertPublisherAndPlace=function(e){for(var t=e.getElementsByTagName("group"),i=0,r=t.length;i<r;i+=1){for(var s=t.item(i),a=[],n=0,o=s.childNodes.length;n<o;n+=1)1!==s.childNodes.item(n).nodeType&&a.push(n);if(s.childNodes.length-a.length==2){var l=[];for(n=0,o=2;n<o;n+=1)if(!(a.indexOf(n)>-1)){for(var u=s.childNodes.item(n),c=[],p=0,h=u.childNodes.length;p<h;p+=1)1!==u.childNodes.item(p).nodeType&&c.push(p);if(u.childNodes.length-c.length==0&&(l.push(u.getAttribute("variable")),u.getAttribute("suffix")||u.getAttribute("prefix"))){l=[];break}}l.indexOf("publisher")>-1&&l.indexOf("publisher-place")>-1&&s.setAttribute("has-publisher-and-publisher-place",!0)}}},Ko.XmlDOM.prototype.isChildOfSubstitute=function(e){return!!e.parentNode&&("substitute"===e.parentNode.tagName.toLowerCase()||this.isChildOfSubstitute(e.parentNode))},Ko.XmlDOM.prototype.addMissingNameNodes=function(e){for(var t=e.getElementsByTagName("names"),i=0,r=t.length;i<r;i+=1){var s=t.item(i),a=s.getElementsByTagName("name");if(!(a&&0!==a.length||this.isChildOfSubstitute(s))){var n=s.ownerDocument.createElement("name");s.appendChild(n)}}},Ko.XmlDOM.prototype.addInstitutionNodes=function(e){var t,i,r,s,a,n,o,l;for(o=0,l=(t=e.getElementsByTagName("names")).length;o<l;o+=1)if(0!=(a=(i=t.item(o)).getElementsByTagName("name")).length&&0==i.getElementsByTagName("institution").length){s=(r=this.importNode(e.ownerDocument,this.institution)).getElementsByTagName("institution-part").item(0),n=a.item(0),i.insertBefore(r,n.nextSibling);for(var u=0,c=Ko.INSTITUTION_KEYS.length;u<c;u+=1){var p=Ko.INSTITUTION_KEYS[u];(d=n.getAttribute(p))&&s.setAttribute(p,d)}var h=n.getElementsByTagName("name-part");for(u=0,c=h.length;u<c;u+=1)if("family"===h[u].getAttribute("name"))for(var m=0,f=Ko.INSTITUTION_KEYS.length;m<f;m+=1){var d;p=Ko.INSTITUTION_KEYS[m],(d=h[u].getAttribute(p))&&s.setAttribute(p,d)}}},Ko.XmlDOM.prototype.flagDateMacros=function(e){var t,i,r,s=e.getElementsByTagName("macro");for(t=0,i=s.length;t<i;t+=1)(r=s.item(t)).getElementsByTagName("date").length&&r.setAttribute("macro-has-date","true")},Ko.setupXml=function(e){var t={},i=null;return void 0!==e?"string"==typeof e?(t="<"===(e=e.replace("^\ufeff","").replace(/^\s+/,"")).slice(0,1)?Ko.parseXml(e):JSON.parse(e),i=new Ko.XmlJSON(t)):i=void 0!==e.getAttribute?new Ko.XmlDOM(e):void 0!==e.toXMLString?new Ko.XmlE4X(e):new Ko.XmlJSON(e):Ko.error("unable to parse XML input"),i||Ko.error("citeproc-js error: unable to parse CSL style or locale object"),i},Ko.getSortCompare=function(e){if(Ko.stringCompare)return Ko.stringCompare;var t,i=this,r={sensitivity:"base",ignorePunctuation:!0,numeric:!0};e||(e="en-US");var s=function(e){return e.replace(/^[\[\]\'\"]*/g,"")},a=!!(t=function(t,s){return Ko.toLocaleLowerCase.call(i,t).localeCompare(Ko.toLocaleLowerCase.call(i,s),e,r)})("[x","x")&&function(e,i){return t(s(e),s(i))};return function(e,i){return a?a(e,i):t(e,i)}},Ko.ambigConfigDiff=function(e,t){var i,r,s,a;if(e.names.length!==t.names.length)return 1;for(i=0,r=e.names.length;i<r;i+=1){if(e.names[i]!==t.names[i])return 1;for(s=0,a=e.givens[i];s<a;s+=1)if(e.givens[i][s]!==t.givens[i][s])return 1}return e.disambiguate!=t.disambiguate||e.year_suffix!==t.year_suffix?1:0},Ko.cloneAmbigConfig=function(e,t){var i,r,s,a,n,o={names:[],givens:[],year_suffix:!1,disambiguate:!1};for(i=0,r=e.names.length;i<r;i+=1)n=e.names[i],o.names[i]=n;for(i=0,r=e.givens.length;i<r;i+=1){for(n=[],s=0,a=e.givens[i].length;s<a;s+=1)n.push(e.givens[i][s]);o.givens.push(n)}return t?(o.year_suffix=t.year_suffix,o.disambiguate=t.disambiguate):(o.year_suffix=e.year_suffix,o.disambiguate=e.disambiguate),o},Ko.getAmbigConfig=function(){var e;return(e=this.tmp.disambig_request)||(e=this.tmp.disambig_settings),Ko.cloneAmbigConfig(e)},Ko.getMaxVals=function(){return this.tmp.names_max.mystack.slice()},Ko.getMinVal=function(){return this.tmp["et-al-min"]},Ko.tokenExec=function(e,t,i){var r,s;r=e.next,s=!1,e.test&&(r=function(t){return t?(this.tmp.jump.replace("succeed"),e.succeed):(this.tmp.jump.replace("fail"),e.fail)}.call(this,e.test(t,i)));for(var a=0,n=e.execs.length;a<n;a++)(s=e.execs[a].call(e,this,t,i))&&(r=s);return r},Ko.expandMacro=function(e,t){var i,r,s;i=e.postponed_macro;var a=e.strings.sort_direction;e=new Ko.Token("group",Ko.START);var n=!1,o=!1;(r=this.cslXml.getNodesByName(this.cslXml.dataObj,"macro",i)).length&&(o=this.cslXml.getAttributeValue(r[0],"cslid"),n=this.cslXml.getAttributeValue(r[0],"macro-has-date")),n&&(i=i+"@"+this.build.current_default_locale,c=function(e){e.tmp.extension&&(e.tmp["doing-macro-with-date"]=!0)},e.execs.push(c)),this.build.macro_stack.indexOf(i)>-1?Ko.error('CSL processor error: call to macro "'+i+'" would cause an infinite loop'):this.build.macro_stack.push(i),e.cslid=o,Ko.MODULE_MACROS[i]&&(e.juris=i,this.opt.update_mode=Ko.POSITION),Ko.Node.group.build.call(e,this,t,!0),this.cslXml.getNodeValue(r)||Ko.error('CSL style error: undefined macro "'+i+'"');var l,u=Ko.getMacroTarget.call(this,i);if(u&&(Ko.buildMacro.call(this,u,r),Ko.configureMacro.call(this,u)),!this.build.extension){var c=(l=i,function(e,t,i){for(var r=0;r<e.macros[l].length;)r=Ko.tokenExec.call(e,e.macros[l][r],t,i)}),p=new Ko.Token("text",Ko.SINGLETON);p.execs.push(c),t.push(p)}(s=new Ko.Token("group",Ko.END)).strings.sort_direction=a,n&&(c=function(e){e.tmp.extension&&(e.tmp["doing-macro-with-date"]=!1)},s.execs.push(c)),e.juris&&(s.juris=i),Ko.Node.group.build.call(s,this,t,!0),this.build.macro_stack.pop()},Ko.getMacroTarget=function(e){var t=!1;return this.build.extension?t=this[this.build.root+this.build.extension].tokens:this.macros[e]||(t=[],this.macros[e]=t),t},Ko.buildMacro=function(e,t){Ko.makeBuilder(this,e)(void 0===t.length?t:t[0])},Ko.configureMacro=function(e){this.build.extension||this.configureTokenList(e)},Ko.XmlToToken=function(e,t,i,r){var s,a,n,o,l,u;if(s=e.cslXml.nodename(this),!e.build.skip||e.build.skip===s)if(s){if(Ko.Node[e.cslXml.nodename(this)]||Ko.error('Undefined node name "'+s+'".'),n=e.cslXml.attributes(this),o=Ko.setDecorations.call(this,e,n),l=new Ko.Token(s,t),t!==Ko.END||"if"===s||"else-if"===s||"layout"===s){for(var c in n)if(n.hasOwnProperty(c)){if(t===Ko.END&&"@language"!==c&&"@locale"!==c)continue;if(n.hasOwnProperty(c))if(Ko.Attributes[c])try{Ko.Attributes[c].call(l,e,""+n[c])}catch(p){Ko.error(c+" attribute: "+p)}else Ko.debug('warning: undefined attribute "'+c+'" in style')}l.decorations=o,Ko.DATE_VARIABLES.indexOf(n["@variable"])>-1&&r.push(l.variables)}else t===Ko.END&&n["@variable"]&&(l.hasVariable=!0,Ko.DATE_VARIABLES.indexOf(n["@variable"])>-1&&(l.variables=r.pop()));u=i||e[e.build.area].tokens,Ko.Node[s].build.call(l,e,u,!0)}else(a=e.cslXml.content(this))&&(e.build.text=a)},Ko.DateParser=function(){for(var e=[["\u660e\u6cbb",1867],["\u5927\u6b63",1911],["\u662d\u548c",1925],["\u5e73\u6210",1988]],t={},i=0,r=e.length;i<r;i++){var s=e[i][0],a=e[i][1];t[s]=a}var n=[],o={};for(i=0,r=e.length;i<r;i++){var l=e[i];a=l[0],n.push(a),o[l[0]]=l[1]}var u=n.join("|"),c=new RegExp("(?:"+u+")(?:[0-9]+)"),p=new RegExp("(?:"+u+")(?:[0-9]+)","g"),h=/(\u6708|\u5E74)/g,m=/\u65E5/g,f=/\u301c/g,d="([?0-9]{4}(?:%%NUMD%%[?0-9]{1,2}){0,2}(?![0-9])|(?:[?0-9]{1,2}%%NUMD%%){0,2}[?0-9]{4}(?![0-9])|[?0-9]{1,3}|[%%DATED%%]|[?~]|[^-/~?0-9]+)",g=new RegExp(d.replace(/%%NUMD%%/g,"-").replace(/%%DATED%%/g,"-")),b=new RegExp(d.replace(/%%NUMD%%/g,"-").replace(/%%DATED%%/g,"/")),y=new RegExp(d.replace(/%%NUMD%%/g,"/").replace(/%%DATED%%/g,"-"));this.monthStrings="january february march april may june july august september october november december spring summer fall winter spring summer".split(" "),this.setOrderDayMonth=function(){this.monthGuess=1,this.dayGuess=0},this.setOrderMonthDay=function(){this.monthGuess=0,this.dayGuess=1},this.resetDateParserMonths=function(){this.monthSets=[];for(var e=0,t=this.monthStrings.length;e<t;e++)this.monthSets.push([this.monthStrings[e]]);for(this.monthAbbrevs=[],e=0,t=this.monthSets.length;e<t;e++){this.monthAbbrevs.push([]);for(var i=0,r=this.monthSets[e].length;i<r;i++)this.monthAbbrevs[e].push(this.monthSets[e][0].slice(0,3))}for(this.monthRexes=[],e=0,t=this.monthAbbrevs.length;e<t;e++)this.monthRexes.push(new RegExp("(?:"+this.monthAbbrevs[e].join("|")+")"))},this.addDateParserMonths=function(e){if("string"==typeof e&&(e=e.split(/\s+/)),12===e.length||16===e.length){for(var t=0,i=e.length;t<i;t++){for(var r=null,s=!1,a=3,n={},o=0,l=this.monthAbbrevs.length;o<l;o++){if(n[o]={},o===t){for(var u=0,c=this.monthAbbrevs[t].length;u<c;u++)if(this.monthAbbrevs[t][u]===e[t].slice(0,this.monthAbbrevs[t][u].length)){s=!0;break}}else for(u=0,c=this.monthAbbrevs[o].length;u<c;u++)if(r=this.monthAbbrevs[o][u].length,this.monthAbbrevs[o][u]===e[t].slice(0,r)){for(;this.monthSets[o][u].slice(0,r)===e[t].slice(0,r);){if(r>e[t].length||r>this.monthSets[o][u].length){Ko.debug("unable to disambiguate month string in date parser: "+e[t]);break}r+=1}a=r,n[o][u]=r}for(var p in n)for(var h in n[p])r=n[p][h],p=parseInt(p,10),h=parseInt(h,10),this.monthAbbrevs[p][h]=this.monthSets[p][h].slice(0,r)}s||(this.monthSets[t].push(e[t]),this.monthAbbrevs[t].push(e[t].slice(0,a)))}for(this.monthRexes=[],this.monthRexStrs=[],t=0,i=this.monthAbbrevs.length;t<i;t++)this.monthRexes.push(new RegExp("^(?:"+this.monthAbbrevs[t].join("|")+")")),this.monthRexStrs.push("^(?:"+this.monthAbbrevs[t].join("|")+")");if(18===this.monthAbbrevs.length)for(t=12,i=14;t<i;t++)this.monthRexes[t+4]=new RegExp("^(?:"+this.monthAbbrevs[t].join("|")+")"),this.monthRexStrs[t+4]="^(?:"+this.monthAbbrevs[t].join("|")+")"}else Ko.debug("month [+season] list of "+e.length+", expected 12 or 16. Ignoring.")},this.convertDateObjectToArray=function(e){e["date-parts"]=[],e["date-parts"].push([]);for(var t,i=0,r=0,s=3;r<s&&e[t=["year","month","day"][r]];r++)i+=1,e["date-parts"][0].push(e[t]),delete e[t];for(e["date-parts"].push([]),r=0,s=i;r<s&&e[t=["year_end","month_end","day_end"][r]];r++)e["date-parts"][1].push(e[t]),delete e[t];return e["date-parts"][0].length!==e["date-parts"][1].length&&e["date-parts"].pop(),e},this.convertDateObjectToString=function(e){for(var t=[],i=0;i<3&&e[Ko.DATE_PARTS_ALL[i]];i+=1)t.push(e[Ko.DATE_PARTS_ALL[i]]);return t.join("-")},this._parseNumericDate=function(e,t,i,r){i||(i="");for(var s=r.split(t),a=0,n=s.length;a<n;a++)if(4===s[a].length){e["year"+i]=s[a].replace(/^0*/,""),s=a?s.slice(0,a):s.slice(1);break}for(a=0,n=s.length;a<n;a++)s[a]=parseInt(s[a],10);if(1===s.length||2===s.length&&!s[1])(o=s[0])&&(e["month"+i]=""+s[0]);else if(2===s.length)if(s[this.monthGuess]>12){var o=s[this.dayGuess],l=s[this.monthGuess];o&&(e["month"+i]=""+o,l&&(e["day"+i]=""+l))}else o=s[this.monthGuess],l=s[this.dayGuess],o&&(e["month"+i]=""+o,l&&(e["day"+i]=""+l))},this.parseDateToObject=function(e){var t,i=e,r=-1,s=-1,a=!1;if(e){if("-"===(e=e.replace(/^(.*[0-9])T[0-9].*/,"$1")).slice(0,1)&&(a=!0,e=e.slice(1)),e.match(/^[0-9]{1,3}$/))for(;e.length<4;)e="0"+e;if(O=(e=(e=""+e).replace(/\s*[0-9]{2}:[0-9]{2}(?::[0-9]+)/,"")).match(h)){var n=(e=(e=(e=(e=(e=(e=e.replace(/\s+/g,"")).replace(m,"")).replace(h,"-")).replace(f,"/")).replace(/\-\//g,"/")).replace(/-$/g,"")).split(c);t=[];var l=e.match(p);if(l){for(var u=[],d=0,v=l.length;d<v;d++)u=u.concat(l[d].match(/([^0-9]+)([0-9]+)/).slice(1));for(d=0,v=n.length;d<v;d++)if(t.push(n[d]),d!==v-1){var _=2*d;t.push(u[_]),t.push(u[_+1])}}else t=n;for(d=1,v=t.length;d<v;d+=3)t[d+1]=o[t[d]]+parseInt(t[d+1],10),t[d]="";r=(e=(e=(e=(e=t.join("")).replace(/\s*-\s*$/,"").replace(/\s*-\s*\//,"/")).replace(/\.\s*$/,"")).replace(/\.(?! )/,"")).indexOf("/"),s=e.indexOf("-")}}var x,w,E="",A="",T={};if('"'===(e=e.replace(/([A-Za-z])\./g,"$1")).slice(0,1)&&'"'===e.slice(-1))return T.literal=e.slice(1,-1),T;r>-1&&s>-1?e.split("/").length>3?(x="-",w="/",t=(e=e.replace(/\_/g,"-")).split(y)):(x="/",w="-",t=(e=e.replace(/\_/g,"/")).split(b)):(x="-",w="-",t=(e=(e=e.replace(/\//g,"-")).replace(/\_/g,"-")).split(g));var S=[];for(d=0,v=t.length;d<v;d++){var O;(O=t[d].match(/^\s*([\-\/]|[^\-\/\~\?0-9]+|[\-~?0-9]+)\s*$/))&&S.push(O[1])}var Q=S.indexOf(x),k=[],C=!1;Q>-1?(k.push([0,Q]),k.push([Q+1,S.length]),C=!0):k.push([0,S.length]);var I="";for(d=0,v=k.length;d<v;d++){var N=k[d],R=S.slice(N[0],N[1]);e:for(var P=0,D=R.length;P<D;P++){var j=R[P];if(j.indexOf(w)>-1)this._parseNumericDate(T,w,I,j);else if(j.match(/[0-9]{4}/))T["year"+I]=j.replace(/^0*/,"");else{("~"===j||"?"===j||"c"===j||j.match(/^cir/))&&(T.circa=!0);for(var L=0,M=this.monthRexes.length;L<M;L++)if(j.toLocaleLowerCase().match(this.monthRexes[L])){T["month"+I]=""+(parseInt(L,10)+1);continue e}j.match(/^[0-9]+$/)&&(E=j),j.toLocaleLowerCase().match(/^bc/)&&E?(T["year"+I]=""+-1*E,E=""):j.toLocaleLowerCase().match(/^ad/)&&E?(T["year"+I]=""+E,E=""):!j.toLocaleLowerCase().match(/(?:mic|tri|hil|eas)/)||T["season"+I]||(A=j)}}E&&(T["day"+I]=E,E=""),A&&!T["season"+I]&&(T["season"+I]=A.trim(),A=""),I="_end"}if(C)for(P=0,D=Ko.DATE_PARTS_ALL.length;P<D;P++){var B=Ko.DATE_PARTS_ALL[P];T[B]&&!T[B+"_end"]?T[B+"_end"]=T[B]:!T[B]&&T[B+"_end"]&&(T[B]=T[B+"_end"])}(!T.year||T.year&&T.day&&!T.month)&&(T={literal:i});var U=["year","month","day","year_end","month_end","day_end"];for(d=0,v=U.length;d<v;d++){var F=U[d];"string"==typeof T[F]&&T[F].match(/^[0-9]+$/)&&(T[F]=parseInt(T[F],10))}return a&&Object.keys(T).indexOf("year")>-1&&(T.year=-1*T.year),T},this.parseDateToArray=function(e){return this.convertDateObjectToArray(this.parseDateToObject(e))},this.parseDateToString=function(e){return this.convertDateObjectToString(this.parseDateToObject(e))},this.parse=function(e){return this.parseDateToObject(e)},this.setOrderMonthDay(),this.resetDateParserMonths()},Ko.DateParser=new Ko.DateParser,Ko.Engine=function(e,t,i,r){var s,a;for(var n in this.processor_version=Ko.PROCESSOR_VERSION,this.csl_version="1.0",this.sys=e,"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},writable:!0,configurable:!0}),e.variableWrapper&&(Ko.VARIABLE_WRAPPER_PREPUNCT_REX=new RegExp("^(["+[" "].concat(Ko.SWAPPING_PUNCTUATION).join("")+"]*)(.*)")),Ko.retrieveStyleModule&&(this.sys.retrieveStyleModule=Ko.retrieveStyleModule),Ko.getAbbreviation&&(this.sys.getAbbreviation=Ko.getAbbreviation),this.sys.stringCompare&&(Ko.stringCompare=this.sys.stringCompare),this.sys.AbbreviationSegments=Ko.AbbreviationSegments,this.transform=new Ko.Transform(this),this.setParseNames=function(e){this.opt["parse-names"]=e},this.opt=new Ko.Engine.Opt,this.tmp=new Ko.Engine.Tmp,this.build=new Ko.Engine.Build,this.fun=new Ko.Engine.Fun(this),this.configure=new Ko.Engine.Configure,this.citation_sort=new Ko.Engine.CitationSort,this.bibliography_sort=new Ko.Engine.BibliographySort,this.citation=new Ko.Engine.Citation(this),this.bibliography=new Ko.Engine.Bibliography,this.intext=new Ko.Engine.InText,this.output=new Ko.Output.Queue(this),this.dateput=new Ko.Output.Queue(this),this.cslXml=Ko.setupXml(t),Ko.SYS_OPTIONS){var o=Ko.SYS_OPTIONS[n];"boolean"==typeof this.sys[o]&&(this.opt.development_extensions[o]=this.sys[o])}(this.opt.development_extensions.uppercase_subtitles||this.opt.development_extensions.implicit_short_title)&&(this.opt.development_extensions.main_title_from_short_title=!0),this.opt.development_extensions.csl_reverse_lookup_support&&(this.build.cslNodeId=0,this.setCslNodeIds=function(e,t){var i=this.cslXml.children(e);this.cslXml.setAttribute(e,"cslid",this.build.cslNodeId),this.opt.nodenames.push(t),this.build.cslNodeId+=1;for(var r=0,s=this.cslXml.numberofnodes(i);r<s;r+=1)(t=this.cslXml.nodename(i[r]))&&this.setCslNodeIds(i[r],t)},this.setCslNodeIds(this.cslXml.dataObj,"style")),this.cslXml.addMissingNameNodes(this.cslXml.dataObj),this.cslXml.addInstitutionNodes(this.cslXml.dataObj),this.cslXml.insertPublisherAndPlace(this.cslXml.dataObj),this.cslXml.flagDateMacros(this.cslXml.dataObj),void 0===this.cslXml.attributes(this.cslXml.dataObj)["@sort-separator"]&&this.cslXml.setAttribute(this.cslXml.dataObj,"sort-separator",", "),this.opt["initialize-with-hyphen"]=!0,this.setStyleAttributes(),this.opt.xclass=this.cslXml.getAttributeValue(this.cslXml.dataObj,"class"),this.opt.class=this.opt.xclass,this.opt.styleID=this.cslXml.getStyleId(this.cslXml.dataObj),this.opt.styleName=this.cslXml.getStyleId(this.cslXml.dataObj,!0),"1.1m"===this.opt.version.slice(0,4)&&(this.opt.development_extensions.consolidate_legal_items=!0,this.opt.development_extensions.consolidate_container_items=!0,this.opt.development_extensions.main_title_from_short_title=!0,this.opt.development_extensions.expect_and_symbol_form=!0,this.opt.development_extensions.require_explicit_legal_case_title_short=!0,this.opt.development_extensions.force_jurisdiction=!0,this.opt.development_extensions.force_title_abbrev_fallback=!0),i&&(i=i.replace("_","-"),i=Ko.normalizeLocaleStr(i)),this.opt["default-locale"][0]&&(this.opt["default-locale"][0]=this.opt["default-locale"][0].replace("_","-"),this.opt["default-locale"][0]=Ko.normalizeLocaleStr(this.opt["default-locale"][0])),i&&r&&(this.opt["default-locale"]=[i]),i&&!r&&this.opt["default-locale"][0]&&(i=this.opt["default-locale"][0]),0===this.opt["default-locale"].length&&(i||(i="en-US"),this.opt["default-locale"].push("en-US")),i||(i=this.opt["default-locale"][0]),s=Ko.localeResolve(i),this.opt.lang=s.best,this.opt["default-locale"][0]=s.best,this.locale={},this.opt["default-locale-sort"]||(this.opt["default-locale-sort"]=this.opt["default-locale"][0]),"dale|".localeCompare("daleb",this.opt["default-locale-sort"])>-1?this.opt.sort_sep="@":this.opt.sort_sep="|",this.localeConfigure(s),this.locale[this.opt.lang].opts["skip-words-regexp"]=(a=(a=this.locale[this.opt.lang].opts["skip-words"]).slice(),new RegExp("(?:(?:[?!:]*\\s+|-|^)(?:"+a.join("|")+")(?=[!?:]*\\s+|-|$))","g")),this.output.adjust=new Ko.Output.Queue.adjust(this.getOpt("punctuation-in-quote")),this.registry=new Ko.Registry(this),this.macros={},this.build.area="citation";var l=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area);this.buildTokenLists(l,this[this.build.area].tokens),this.build.area="bibliography",l=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area),this.buildTokenLists(l,this[this.build.area].tokens),this.build.area="intext",l=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area),this.buildTokenLists(l,this[this.build.area].tokens),this.opt.parallel.enable&&(this.parallel=new Ko.Parallel(this)),this.juris={},this.configureTokenLists(),this.disambiguate=new Ko.Disambiguation(this),this.splice_delimiter=!1,this.fun.dateparser=Ko.DateParser,this.fun.flipflopper=new Ko.Util.FlipFlopper(this),this.setCloseQuotesArray(),this.fun.ordinalizer.init(this),this.fun.long_ordinalizer.init(this),this.fun.page_mangler=Ko.Util.PageRangeMangler.getFunction(this,"page"),this.fun.year_mangler=Ko.Util.PageRangeMangler.getFunction(this,"year"),this.setOutputFormat("html")},Ko.Engine.prototype.setCloseQuotesArray=function(){var e;(e=[]).push(this.getTerm("close-quote")),e.push(this.getTerm("close-inner-quote")),e.push('"'),e.push("'"),this.opt.close_quotes_array=e},Ko.makeBuilder=function(e,t){var i=[],r=[];function s(s){r.push(s),Ko.XmlToToken.call(s,e,Ko.START,t,i)}function a(){var s=r.pop();Ko.XmlToToken.call(s,e,Ko.END,t,i)}function n(r){Ko.XmlToToken.call(r,e,Ko.SINGLETON,t,i)}return function t(i,r,o){o||(o=[]),i||(i=[]),void 0===i.length&&(i=[i]);for(var l=0;l<i.length;l++){var u=i[l];null!==e.cslXml.nodename(u)&&(r&&"date"===e.cslXml.nodename(u)&&(Ko.Util.fixDateNode.call(e,r,l,u),u=e.cslXml.children(r)[l]),e.cslXml.numberofnodes(e.cslXml.children(u))?(s(u),t(e.cslXml.children(u),u,o),a()):n(u))}}},Ko.Engine.prototype.buildTokenLists=function(e,t){this.cslXml.getNodeValue(e)&&Ko.makeBuilder(this,t)(void 0===e.length?e:e[0])},Ko.Engine.prototype.setStyleAttributes=function(){var e,t,i={};for(t in i.name=this.cslXml.nodename(this.cslXml.dataObj),e=this.cslXml.attributes(this.cslXml.dataObj))e.hasOwnProperty(t)&&Ko.Attributes[t].call(i,this,e[t])},Ko.Engine.prototype.getTerm=function(e,t,i,r,s,a){var n;e&&e.match(/[A-Z]/)&&e===e.toUpperCase()&&(Ko.debug("Warning: term key is in uppercase form: "+e),e=e.toLowerCase()),n=a?this.opt["default-locale"][0]:this.opt.lang;var o=Ko.Engine.getField(Ko.LOOSE,this.locale[n].terms,e,t,i,r);return o||"range-delimiter"!==e||(o="\u2013"),void 0===o&&(s===Ko.STRICT?Ko.error('Error in getTerm: term "'+e+'" does not exist.'):s===Ko.TOLERANT&&(o="")),o&&(this.tmp.cite_renders_content=!0),o},Ko.Engine.prototype.getDate=function(e,t){var i;return i=t?this.opt["default-locale"]:this.opt.lang,!!this.locale[i].dates[e]&&this.locale[i].dates[e]},Ko.Engine.prototype.getOpt=function(e){return void 0!==this.locale[this.opt.lang].opts[e]&&this.locale[this.opt.lang].opts[e]},Ko.Engine.prototype.getVariable=function(e,t,i,r){return Ko.Engine.getField(Ko.LOOSE,e,t,i,r)},Ko.Engine.prototype.getDateNum=function(e,t){return void 0===e?0:e[t]},Ko.Engine.getField=function(e,t,i,r,s,a){var n,o,l,u,c,p;if(n="",void 0===t[i]){if(e!==Ko.STRICT)return;Ko.error('Error in getField: term "'+i+'" does not exist.')}for(p=a&&t[i][a]?t[i][a]:t[i],o=[],"symbol"===r?o=["symbol","short"]:"verb-short"===r?o=["verb-short","verb"]:"long"!==r&&(o=[r]),c=(o=o.concat(["long"])).length,u=0;u<c;u+=1)if(l=o[u],"string"==typeof p||"number"==typeof p)n=p;else if(void 0!==p[l]){n="string"==typeof p[l]||"number"==typeof p[l]?p[l]:"number"==typeof s?p[l][s]:p[l][0];break}return n},Ko.Engine.prototype.configureTokenLists=function(){var e,t;for(t=Ko.AREAS.length,e=0;e<t;e+=1){var i=this[Ko.AREAS[e]].tokens;this.configureTokenList(i)}return this.version=Ko.version,this.state},Ko.Engine.prototype.configureTokenList=function(e){var t,i,r,s,a,n;for(t=["year","month","day"],s=e.length-1;s>-1;s+=-1){if("date"===(i=e[s]).name&&Ko.END===i.tokentype&&(r=[]),"date-part"===i.name&&i.strings.name)for(n=t.length,a=0;a<n;a+=1)t[a]===i.strings.name&&r.push(i.strings.name);"date"===i.name&&Ko.START===i.tokentype&&(r.reverse(),i.dateparts=r),i.next=s+1,i.name&&Ko.Node[i.name].configure&&Ko.Node[i.name].configure.call(i,this,s)}},Ko.Engine.prototype.refetchItems=function(e){for(var t=[],i=0,r=e.length;i<r;i+=1)t.push(this.refetchItem(""+e[i]));return t},Ko.ITERATION=0,Ko.Engine.prototype.retrieveItem=function(e){var t,i;if(this.tmp.loadedItemIDs[e])return this.registry.refhash[e];if(this.tmp.loadedItemIDs[e]=!0,this.opt.development_extensions.normalize_lang_keys_to_lowercase&&"boolean"==typeof this.opt.development_extensions.normalize_lang_keys_to_lowercase){for(var r=0,s=this.opt["default-locale"].length;r<s;r+=1)this.opt["default-locale"][r]=this.opt["default-locale"][r].toLowerCase();for(r=0,s=this.opt["locale-translit"].length;r<s;r+=1)this.opt["locale-translit"][r]=this.opt["locale-translit"][r].toLowerCase();for(r=0,s=this.opt["locale-translat"].length;r<s;r+=1)this.opt["locale-translat"][r]=this.opt["locale-translat"][r].toLowerCase();this.opt.development_extensions.normalize_lang_keys_to_lowercase=100}if(Ko.ITERATION+=1,t=JSON.parse(JSON.stringify(this.sys.retrieveItem(""+e))),this.opt.development_extensions.normalize_lang_keys_to_lowercase){if(t.multi){if(t.multi._keys)for(var a in t.multi._keys)for(var n in t.multi._keys[a])n!==n.toLowerCase()&&(t.multi._keys[a][n.toLowerCase()]=t.multi._keys[a][n],delete t.multi._keys[a][n]);if(t.multi.main)for(var a in t.multi.main)t.multi.main[a]=t.multi.main[a].toLowerCase()}for(r=0,s=Ko.NAME_VARIABLES.length;r>s;r+=1){var o=Ko.NAME_VARIABLES[r];if(t[o]&&t[o].multi)for(var l=0,u=t[o].length;l<u;l+=1){var c=t[o][l];if(c.multi){if(c.multi._key)for(var n in c.multi._key)n!==n.toLowerCase()&&(c.multi._key[n.toLowerCase()]=c.multi._key[n],delete c.multi._key[n]);c.multi.main&&(c.multi.main=c.multi.main.toLowerCase())}}}}for(var n in t.language&&t.language.match(/[><]/)&&("<"===(i=t.language.match(/(.*?)([<>])(.*)/))[2]?(t["language-name"]=i[1],t["language-name-original"]=i[3]):(t["language-name"]=i[3],t["language-name-original"]=i[1]),this.opt.multi_layout?t["language-name-original"]&&(t.language=t["language-name-original"]):t["language-name"]&&(t.language=t["language-name"])),t.page&&(t["page-first"]=t.page,"\\"!==(i=(""+t.page).split(/\s*(?:&|, |-|\u2013)\s*/))[0].slice(-1)&&(t["page-first"]=i[0])),this.opt.development_extensions.field_hack&&t.note&&Ko.parseNoteFieldHacks(t,!1,this.opt.development_extensions.allow_field_hack_date_override),t)if(Ko.DATE_VARIABLES.indexOf(n.replace(/^alt-/,""))>-1){var p=t[n];p&&(this.opt.development_extensions.raw_date_parsing&&(!p.raw||p["date-parts"]&&0!==p["date-parts"].length||(p=this.fun.dateparser.parseDateToObject(p.raw))),t[n]=this.dateParseArray(p))}if(this.opt.development_extensions.consolidate_legal_items&&t.type&&["bill","gazette","legislation","regulation","treaty"].indexOf(t.type)>-1){var h=[];for(r=0,s=(d=["type","title","jurisdiction","genre","volume","container-title"]).length;r<s;r+=1)t[f=d[r]]&&h.push(t[f]);for(r=0,s=(d=["original-date","issued"]).length;r<s;r+=1)if(t[f=d[r]]&&t[f].year){var m=t[f].year;h.push(m);break}t.legislation_id=h.join("::")}if(this.bibliography.opt.track_container_items&&this.bibliography.opt.track_container_items.indexOf(t.type)>-1){var f,d,g=[];for(r=0,s=(d=["type","container-title","publisher","edition"]).length;r<s;r+=1)t[f=d[r]]&&g.push(t[f]);t.container_id=g.join("::")}if(this.opt.development_extensions.force_jurisdiction&&"string"==typeof t.authority&&(t.authority=[{literal:t.authority,multi:{_key:{}}}],t.multi&&t.multi._keys&&t.multi._keys.authority))for(var n in t.authority[0].multi._key={},t.multi._keys.authority)t.authority[0].multi._key[n]={literal:t.multi._keys.authority[n]};if(t["title-short"]||(t["title-short"]=t.shortTitle),this.opt.development_extensions.main_title_from_short_title){var b="fr"===this.opt["default-locale"][0].slice(0,2).toLowerCase();Ko.extractTitleAndSubtitle.call(this,t,b)}var y,v=["bill","legal_case","legislation","gazette","regulation"].indexOf(t.type)>-1;if(this.opt.development_extensions.force_jurisdiction&&v&&(t.jurisdiction||(t.jurisdiction="us")),!v&&t.title&&this.sys.getAbbreviation){t.jurisdiction,y=this.sys.normalizeAbbrevsKey?this.sys.normalizeAbbrevsKey("title",t.title):t.title;var _=this.transform.loadAbbreviation(t.jurisdiction,"title",y,t.language);this.transform.abbrevs[_].title&&this.transform.abbrevs[_].title[y]&&(t["title-short"]=this.transform.abbrevs[_].title[y])}if(t["container-title-short"]||(t["container-title-short"]=t.journalAbbreviation),t["container-title"]&&this.sys.getAbbreviation&&(y=this.sys.normalizeAbbrevsKey?this.sys.normalizeAbbrevsKey(t["container-title"]):t["container-title"],_=this.transform.loadAbbreviation(t.jurisdiction,"container-title",y,t.language),this.transform.abbrevs[_]["container-title"]&&this.transform.abbrevs[_]["container-title"][y]&&(t["container-title-short"]=this.transform.abbrevs[_]["container-title"][y])),t.jurisdiction&&(t.country=t.jurisdiction.split(":")[0]),this.registry.refhash[e]){if(JSON.stringify(this.registry.refhash[e])!=JSON.stringify(t)){for(var n in this.registry.refhash[e])delete this.registry.refhash[e][n];this.tmp.taintedItemIDs[t.id]=!0,Object.assign(this.registry.refhash[e],t)}}else this.registry.refhash[e]=t;return this.registry.refhash[e]},Ko.Engine.prototype.refetchItem=function(e){return this.registry.refhash[e]},Ko.Engine.prototype.setOpt=function(e,t,i){"style"===e.name||"cslstyle"===e.name?(this.opt.inheritedAttributes[t]=i,this.citation.opt.inheritedAttributes[t]=i,this.bibliography.opt.inheritedAttributes[t]=i):["citation","bibliography"].indexOf(e.name)>-1?this[e.name].opt.inheritedAttributes[t]=i:e.strings[t]=i},Ko.Engine.prototype.inheritOpt=function(e,t,i,r){if(void 0!==e.strings[t])return e.strings[t];var s=this[this.tmp.root].opt.inheritedAttributes[i||t];return void 0!==s?s:r},Ko.Engine.prototype.remapSectionVariable=function(e){for(var t=0,i=e.length;t<i;t+=1){var r=e[t][0],s=e[t][1];if(["bill","gazette","legislation","regulation","treaty"].indexOf(r.type)>-1){s.locator&&(s.locator=s.locator.trim(),(n=s.locator.match(Ko.STATUTE_SUBDIV_PLAIN_REGEX_FRONT))||(s.label?s.locator=Ko.STATUTE_SUBDIV_STRINGS_REVERSE[s.label]+" "+s.locator:s.locator="p. "+s.locator));var a=null;if(r.section&&(r.section=r.section.trim(),(n=r.section.match(Ko.STATUTE_SUBDIV_PLAIN_REGEX_FRONT))?a=n[0].trim():(r.section="sec. "+r.section,a="sec.")),r.section)if(s.locator){var n,o=" ";(n=s.locator.match(/^([^ ]*)\s*(.*)/))?("p."===n[1]&&"p."!==a&&(s.locator=n[2]),["[","(",".",",",";",":","?"].indexOf(s.locator.slice(0,1))>-1&&(o="")):o="",s.locator=r.section+o+s.locator}else s.locator=r.section;s.label=""}}},Ko.Engine.prototype.setNumberLabels=function(e){if(e.number&&["bill","gazette","legislation","regulation","treaty"].indexOf(e.type)>-1&&this.opt.development_extensions.consolidate_legal_items&&!this.tmp.shadow_numbers.number){this.tmp.shadow_numbers.number={},this.tmp.shadow_numbers.number.values=[],this.tmp.shadow_numbers.number.plural=0,this.tmp.shadow_numbers.number.numeric=!1,this.tmp.shadow_numbers.number.label=!1;var t=""+e.number,i=(t=t.split("\\").join("")).split(/\s+/)[0],r=Ko.STATUTE_SUBDIV_STRINGS[i];if(r){var s=t.split(Ko.STATUTE_SUBDIV_PLAIN_REGEX);if(s.length>1){for(var a=[],n=1,o=s.length;n<o;n+=1)a.push(s[n].replace(/\s*$/,"").replace(/^\s*/,""));t=a.join(" ")}else t=s[0];this.tmp.shadow_numbers.number.label=r,this.tmp.shadow_numbers.number.values.push(["Blob",t,!1]),this.tmp.shadow_numbers.number.numeric=!1}else this.tmp.shadow_numbers.number.values.push(["Blob",t,!1]),this.tmp.shadow_numbers.number.numeric=!0}},Ko.substituteOne=function(e){return function(t,i){return i?e.replace("%%STRING%%",i):""}},Ko.substituteTwo=function(e){return function(t){var i=e.replace("%%PARAM%%",t);return function(e,t){return t?i.replace("%%STRING%%",t):""}}},Ko.Mode=function(e){var t,i,r,s,a,n;for(r in t={},i=Ko.Output.Formats[e])"@"===r.slice(0,1)?(s=!1,a=i[r],n=r.split("/"),"string"==typeof a&&a.indexOf("%%STRING%%")>-1?s=a.indexOf("%%PARAM%%")>-1?Ko.substituteTwo(a):Ko.substituteOne(a):"boolean"!=typeof a||a?"function"==typeof a?s=a:Ko.error("Bad "+e+" config entry for "+r+": "+a):s=Ko.Output.Formatters.passthrough,1===n.length?t[n[0]]=s:2===n.length&&(t[n[0]]||(t[n[0]]={}),t[n[0]][n[1]]=s)):t[r]=i[r];return t},Ko.setDecorations=function(e,t){var i,r;for(r in i=[],Ko.FORMAT_KEY_SEQUENCE){var s;t[s=Ko.FORMAT_KEY_SEQUENCE[r]]&&(i.push([s,t[s]]),delete t[s])}return i},Ko.Doppeler=function(e,t){var i=new RegExp("("+e+")","g"),r=new RegExp(e,"g");this.split=function(e){t&&(e=t(e));var s=e.match(i);if(!s)return{tags:[],strings:[e]};for(var a=e.split(r),n=s.length-1;n>-1;n--)"number"==typeof s[n]&&(s[n]=""),"'"===s[n]&&a[n+1].length>0&&(a[n+1]=s[n]+a[n+1],s[n]="");return{tags:s,strings:a,origStrings:a.slice()}},this.join=function(e){for(var t=e.strings.slice(-1),i=e.tags.length-1;i>-1;i--)t.push(e.tags[i]),t.push(e.strings[i]);return t.reverse(),t.join("")}},Ko.Engine.prototype.normalDecorIsOrphan=function(e,t){if("normal"===t[1]){for(var i,r=!1,s=(i="citation"===this.tmp.area?[this.citation.opt.layout_decorations].concat(e.alldecor):e.alldecor).length-1;s>-1;s+=-1)for(var a=i[s].length-1;a>-1;a+=-1)i[s][a][0]===t[0]&&"normal"!==i[s][a][1]&&(r=!0);if(!r)return!0}return!1},Ko.Engine.prototype.getCitationLabel=function(e){var t="",i=this.getTrigraphParams(),r=i[0],s=this.getTerm("reference","short",0);void 0===s&&(s="reference"),s=(s=s.replace(".","")).slice(0,1).toUpperCase()+s.slice(1);for(var a=0,n=Ko.NAME_VARIABLES.length;a<n;a+=1){var o=Ko.NAME_VARIABLES[a];if(e[o]){var l=e[o];r=l.length>i.length?i[i.length-1]:i[l.length-1];for(var u=0,c=l.length;u<c&&u!==r.authors.length;u+=1){var p=this.nameOutput.getName(l[u],"locale-translit",!0).name;p&&p.family?s=(s=p.family).replace(/^([ \'\u2019a-z]+\s+)/,""):p&&p.literal&&(s=p.literal);var h=s.toLowerCase().match(/^(a\s+|the\s+|an\s+)/);if(h&&(s=s.slice(h[1].length)),!(s=s.replace(Ko.ROMANESQUE_NOT_REGEXP,"")))break;(s=s.slice(0,r.authors[u])).length>1?s=s.slice(0,1).toUpperCase()+s.slice(1).toLowerCase():1===s.length&&(s=s.toUpperCase()),t+=s}break}}if(!t&&e.title){var m=this.locale[this.opt.lang].opts["skip-words"],f=e.title.split(/\s+/);for(a=f.length-1;a>-1;a--)m.indexOf(f[a])>-1&&(f=f.slice(0,a).concat(f.slice(a+1)));var d=f.join("");(d=d.slice(0,i[0].authors[0])).length>1?d=d.slice(0,1).toUpperCase()+d.slice(1).toLowerCase():1===d.length&&(d=d.toUpperCase()),t=d}var g="0000";return e.issued&&e.issued.year&&(g=""+e.issued.year),t+g.slice(-1*r.year)},Ko.Engine.prototype.getTrigraphParams=function(){var e=[],t=this.opt.trigraph.split(":");this.opt.trigraph&&"A"===this.opt.trigraph.slice(0,1)||Ko.error("Bad trigraph definition: "+this.opt.trigraph);for(var i=0,r=t.length;i<r;i+=1){for(var s=t[i],a={authors:[],year:0},n=0,o=s.length;n<o;n+=1)switch(s.slice(n,n+1)){case"A":a.authors.push(1);break;case"a":a.authors[a.authors.length-1]+=1;break;case"0":a.year+=1;break;default:Ko.error("Invalid character in trigraph definition: "+this.opt.trigraph)}e.push(a)}return e},Ko.Engine.prototype.setOutputFormat=function(e){this.opt.mode=e,this.fun.decorate=Ko.Mode(e),this.output[e]||(this.output[e]={},this.output[e].tmp={})},Ko.Engine.prototype.getSortFunc=function(){return function(e,t){return e=e.split("-"),t=t.split("-"),e.length<t.length?1:e.length>t.length?-1:(e=e.slice(-1)[0],t=t.slice(-1)[0],e.length<t.length?1:e.length>t.length?-1:0)}},Ko.Engine.prototype.setLangTagsForCslSort=function(e){var t,i;if(e)for(this.opt["locale-sort"]=[],t=0,i=e.length;t<i;t+=1)this.opt["locale-sort"].push(e[t]);this.opt["locale-sort"].sort(this.getSortFunc())},Ko.Engine.prototype.setLangTagsForCslTransliteration=function(e){var t,i;if(this.opt["locale-translit"]=[],e)for(t=0,i=e.length;t<i;t+=1)this.opt["locale-translit"].push(e[t]);this.opt["locale-translit"].sort(this.getSortFunc())},Ko.Engine.prototype.setLangTagsForCslTranslation=function(e){var t,i;if(this.opt["locale-translat"]=[],e)for(t=0,i=e.length;t<i;t+=1)this.opt["locale-translat"].push(e[t]);this.opt["locale-translat"].sort(this.getSortFunc())},Ko.Engine.prototype.setLangPrefsForCites=function(e,t){var i=this.opt["cite-lang-prefs"];t||(t=function(e){return e.toLowerCase()});for(var r=["Persons","Institutions","Titles","Journals","Publishers","Places"],s=0,a=r.length;s<a;s+=1){var n=t(r[s]),o=r[s].toLowerCase();if(e[n]){for(var l=[];e[n].length>1;)l.push(e[n].pop());var u={orig:1,translit:2,translat:3};for(2===l.length&&u[l[0]]<u[l[1]]&&l.reverse();l.length;)e[n].push(l.pop());for(var c=i[o];c.length;)c.pop();for(var p=0,h=e[n].length;p<h;p+=1)c.push(e[n][p])}}},Ko.Engine.prototype.setLangPrefsForCiteAffixes=function(e){if(e&&48===e.length){for(var t,i=this.opt.citeAffixes,r=0,s=["persons","institutions","titles","journals","publishers","places"],a=["translit","orig","translit","translat"],n=0,o=s.length;n<o;n+=1)for(var l=0,u=a.length;l<u;l+=1)t="",r%8==4&&(i[s[n]]["locale-"+a[l]].prefix||i[s[n]]["locale-"+a[l]].suffix)||(t=e[r]?e[r]:"",i[s[n]]["locale-"+a[l]].prefix=t,t=e[r]?e[r+1]:"",i[s[n]]["locale-"+a[l]].suffix=t),r+=2;this.opt.citeAffixes=i}},Ko.Engine.prototype.setAutoVietnameseNamesOption=function(e){this.opt["auto-vietnamese-names"]=!!e},Ko.Engine.prototype.setAbbreviations=function(e){this.sys.setAbbreviations&&this.sys.setAbbreviations(e)},Ko.Engine.prototype.setSuppressTrailingPunctuation=function(e){this.citation.opt.suppressTrailingPunctuation=!!e},Ko.Output={},Ko.Output.Queue=function(e){this.levelname=["top"],this.state=e,this.queue=[],this.empty=new Ko.Token("empty");var t={};t.empty=this.empty,this.formats=new Ko.Stack(t),this.current=new Ko.Stack(this.queue)},Ko.Output.Queue.prototype.pop=function(){var e=this.current.value();return e.length?e.pop():e.blobs.pop()},Ko.Output.Queue.prototype.getToken=function(e){return this.formats.value()[e]},Ko.Output.Queue.prototype.mergeTokenStrings=function(e,t){var i,r,s;if(s=i=this.formats.value()[e],r=this.formats.value()[t]){i||((i=new Ko.Token(e,Ko.SINGLETON)).decorations=[]),s=new Ko.Token(e,Ko.SINGLETON);var a="";for(var a in i.strings)i.strings.hasOwnProperty(a)&&(s.strings[a]=i.strings[a]);for(var a in r.strings)r.strings.hasOwnProperty(a)&&(s.strings[a]=r.strings[a]);s.decorations=i.decorations.concat(r.decorations)}return s},Ko.Output.Queue.prototype.addToken=function(e,t,i){var r,s;if(r=new Ko.Token("output"),"string"==typeof i&&(i=this.formats.value()[i]),i&&i.strings){for(s in i.strings)i.strings.hasOwnProperty(s)&&(r.strings[s]=i.strings[s]);r.decorations=i.decorations}"string"==typeof t&&(r.strings.delimiter=t),this.formats.value()[e]=r},Ko.Output.Queue.prototype.pushFormats=function(e){e||(e={}),e.empty=this.empty,this.formats.push(e)},Ko.Output.Queue.prototype.popFormats=function(){this.formats.pop()},Ko.Output.Queue.prototype.startTag=function(e,t){var i={};this.state.tmp["doing-macro-with-date"]&&this.state.tmp.extension&&(t=this.empty,e="empty"),i[e]=t,this.pushFormats(i),this.openLevel(e)},Ko.Output.Queue.prototype.endTag=function(e){this.closeLevel(e),this.popFormats()},Ko.Output.Queue.prototype.openLevel=function(e){var t,i;"object"==typeof e?t=new Ko.Blob(void 0,e):void 0===e?t=new Ko.Blob(void 0,this.formats.value().empty,"empty"):(this.formats.value()&&this.formats.value()[e]||Ko.error('CSL processor error: call to nonexistent format token "'+e+'"'),t=new Ko.Blob(void 0,this.formats.value()[e],e)),i=this.current.value(),!this.state.tmp.just_looking&&this.checkNestedBrace&&(t.strings.prefix=this.checkNestedBrace.update(t.strings.prefix)),i.push(t),this.current.push(t)},Ko.Output.Queue.prototype.closeLevel=function(e){e&&e!==this.current.value().levelname&&Ko.error("Level mismatch error:  wanted "+e+" but found "+this.current.value().levelname);var t=this.current.pop();!this.state.tmp.just_looking&&this.checkNestedBrace&&(t.strings.suffix=this.checkNestedBrace.update(t.strings.suffix))},Ko.Output.Queue.prototype.append=function(e,t,i,r,s){var a,n,o,l=!0;if(i&&(r=!0),this.state.tmp["doing-macro-with-date"]&&!i){if("macro-with-date"!==t)return!1;"macro-with-date"===t&&(t="empty")}if(void 0===e)return!1;if("number"==typeof e&&(e=""+e),!i&&this.state.tmp.element_trace&&"suppress-me"===this.state.tmp.element_trace.value())return!1;if(n=!1,t?"literal"===t?(a=!0,l=!1):a="string"==typeof t?this.formats.value()[t]:t:a=this.formats.value().empty,a||Ko.error("CSL processor error: unknown format token name: "+t),a.strings&&void 0===a.strings.delimiter&&(a.strings.delimiter=""),"string"==typeof e&&e.length&&(e=e.replace(/ ([:;?!\u00bb])/g,"\u202f$1").replace(/\u00ab /g,"\xab\u202f"),this.last_char_rendered=e.slice(-1),e=e.replace(/\s+'/g," '"),i||(e=e.replace(/^'/g," '")),r?i&&(this.state.tmp.term_predecessor_name=!0):(this.state.tmp.term_predecessor=!0,this.state.tmp.in_cite_predecessor=!0)),n=new Ko.Blob(e,a),void 0===(o=this.current.value())&&0===this.current.mystack.length&&(this.current.mystack.push([]),o=this.current.value()),"string"==typeof n.blobs&&(r?i&&(this.state.tmp.term_predecessor_name=!0):(this.state.tmp.term_predecessor=!0,this.state.tmp.in_cite_predecessor=!0)),"string"==typeof e){if("string"==typeof n.blobs&&" "!==n.blobs.slice(0,1)){for(var u="",c=n.blobs;Ko.TERMINAL_PUNCTUATION.indexOf(c.slice(0,1))>-1;)u+=c.slice(0,1),c=c.slice(1);c&&u&&(n.strings.prefix=n.strings.prefix+u,n.blobs=c)}n.strings["text-case"]&&(n.blobs=Ko.Output.Formatters[n.strings["text-case"]](this.state,e)),this.state.tmp.strip_periods&&!s&&(n.blobs=n.blobs.replace(/\.([^a-z]|$)/g,"$1"));for(var p=n.decorations.length-1;p>-1;p+=-1)"@quotes"===n.decorations[p][0]&&"false"!==n.decorations[p][1]&&(n.punctuation_in_quote=this.state.getOpt("punctuation-in-quote")),n.blobs.match(Ko.ROMANESQUE_REGEXP)||"@font-style"===n.decorations[p][0]&&(n.decorations=n.decorations.slice(0,p).concat(n.decorations.slice(p+1)));o.push(n),this.state.fun.flipflopper.processTags(n)}else l?o.push(n):o.push(e);return!0},Ko.Output.Queue.prototype.string=function(e,t,i){var r,s=Ko.getSafeEscape(this.state),a=t.slice(),n=[];if(0===a.length)return n;var o,l,u,c,p="";i?p=i.strings.delimiter:(e.tmp.count_offset_characters=!1,e.tmp.offset_characters=0),i&&i.new_locale&&(i.old_locale=e.opt.lang,e.opt.lang=i.new_locale);for(var h=0,m=a.length;h<m;h+=1){if((o=a[h]).strings.first_blob&&(e.tmp.count_offset_characters=o.strings.first_blob),"string"==typeof o.blobs){if("number"==typeof o.num)n.push(o);else if(o.blobs){o.particle&&(o.blobs=o.particle+o.blobs,o.particle="");var f=(r=s(o.blobs)).length;if(!e.tmp.suppress_decorations)for(b=0,y=o.decorations.length;b<y;b+=1)"@showid"!==(c=o.decorations[b])[0]&&(e.normalDecorIsOrphan(o,c)||(r=e.fun.decorate[c[0]][c[1]].call(o,e,r,c[2])));if(r&&r.length){if(r=s(o.strings.prefix)+r+s(o.strings.suffix),e.opt.development_extensions.csl_reverse_lookup_support&&!e.tmp.suppress_decorations)for(b=0,y=o.decorations.length;b<y;b+=1)"@showid"===(c=o.decorations[b])[0]&&(r=e.fun.decorate[c[0]][c[1]].call(o,e,r,c[2]));n.push(r),e.tmp.count_offset_characters&&(e.tmp.offset_characters+=f+o.strings.suffix.length+o.strings.prefix.length)}}}else if(o.blobs.length){var d=e.output.string(e,o.blobs,o);if(i&&"string"!==d&&d.length>1&&o.strings.delimiter)for(var g=!1,b=0,y=d.length;b<y;b++)"string"!=typeof d[b]?g=!0:g&&(d[b]=o.strings.delimiter+d[b]);n=n.concat(d)}o.strings.first_blob&&e.registry.registry[o.strings.first_blob]&&(e.registry.registry[o.strings.first_blob].offset=e.tmp.offset_characters,e.tmp.count_offset_characters=!1)}for(h=0,m=n.length-1;h<m;h+=1)"number"!=typeof n[h].num||"number"!=typeof n[h+1].num||n[h+1].UGLY_DELIMITER_SUPPRESS_HACK||(n[h].strings.suffix=n[h].strings.suffix+(p||""),n[h+1].successor_prefix="",n[h+1].UGLY_DELIMITER_SUPPRESS_HACK=!0);var v=0;for(h=0,m=n.length;h<m;h+=1)"string"==typeof n[h]&&(v=parseInt(h,10)+1,h<n.length-1&&"object"==typeof n[h+1]&&(p&&!n[h+1].UGLY_DELIMITER_SUPPRESS_HACK&&(n[h]+=s(p)),n[h+1].UGLY_DELIMITER_SUPPRESS_HACK=!0));if(i&&(i.decorations.length||i.strings.suffix))v=n.length;else if(i&&i.strings.prefix)for(h=0,m=n.length;h<m;h++)if(void 0!==n[h].num){v=h,0===h&&(n[h].strings.prefix=i.strings.prefix+n[h].strings.prefix);break}var _=e.output.renderBlobs(n.slice(0,v),p,!1,i);if(_&&i&&(i.decorations.length||i.strings.suffix||i.strings.prefix)){if(!e.tmp.suppress_decorations)for(h=0,m=i.decorations.length;h<m;h+=1)c=i.decorations[h],["@cite","@bibliography","@display","@showid"].indexOf(c[0])>-1||e.normalDecorIsOrphan(o,c)||c[0]&&"string"==typeof _&&(_=e.fun.decorate[c[0]][c[1]].call(i,e,_,c[2]));if(r=_,l=i.strings.suffix,r&&r.length&&(r=s(u=i.strings.prefix)+r+s(l),e.tmp.count_offset_characters&&(e.tmp.offset_characters+=u.length+l.length)),_=r,!e.tmp.suppress_decorations)for(h=0,m=i.decorations.length;h<m;h+=1)c=i.decorations[h],-1!==["@cite","@bibliography","@display","@showid"].indexOf(c[0])&&"string"==typeof _&&(_=e.fun.decorate[c[0]][c[1]].call(i,e,_,c[2]))}var x=n.slice(v,n.length);return!x.length&&_?n=[_]:x.length&&!_?n=x:_&&x.length&&(n=[_].concat(x)),void 0===i?(this.queue=[],this.current.mystack=[],this.current.mystack.push(this.queue),e.tmp.suppress_decorations&&(n=e.output.renderBlobs(n,void 0,!1))):"boolean"==typeof i&&(n=e.output.renderBlobs(n,void 0,!0)),i&&i.new_locale&&(e.opt.lang=i.old_locale),n},Ko.Output.Queue.prototype.clearlevel=function(){var e,t,i;for(i=(e=this.current.value()).blobs.length,t=0;t<i;t+=1)e.blobs.pop()},Ko.Output.Queue.prototype.renderBlobs=function(e,t,i,r){var s,a,n,o,l,u,c,p,h,m,f;if(f=Ko.getSafeEscape(this.state),t||(t=""),s=this.state,a="",n="",u=e.length,"citation"===this.state.tmp.area&&!this.state.tmp.just_looking&&1===u&&"object"==typeof e[0]&&r)return e[0].strings.prefix=r.strings.prefix+e[0].strings.prefix,e[0].strings.suffix=e[0].strings.suffix+r.strings.suffix,e[0].decorations=e[0].decorations.concat(r.decorations),e[0].params=r.params,e[0];var d=!0;for(l=0;l<u;l+=1)e[l].checkNext?(e[l].checkNext(e[l+1],d),d=!1):d=!e[l+1]||!e[l+1].splice_prefix;var g=!0;for(l=e.length-1;l>0;l+=-1)e[l].checkLast?g&&e[l].checkLast(e[l-1])&&(g=!1):g=!0;for(u=e.length,l=0;l<u;l+=1)if(a&&(n=t),"string"==typeof(o=e[l]))a+=f(n),a+=o,s.tmp.count_offset_characters&&(s.tmp.offset_characters+=n.length);else if(i)a=a?[a,o]:[o];else if(o.status!==Ko.SUPPRESS){var b=(h=o.particle?o.particle+o.num:o.formatter.format(o.num,o.gender)).replace(/<[^>]*>/g,"").length;this.append(h,"empty",!0);var y=this.pop(),v=s.tmp.count_offset_characters;if(h=this.string(s,[y],!1),s.tmp.count_offset_characters=v,o.strings["text-case"]&&(h=Ko.Output.Formatters[o.strings["text-case"]](this.state,h)),h&&this.state.tmp.strip_periods&&(h=h.replace(/\.([^a-z]|$)/g,"$1")),!s.tmp.suppress_decorations)for(p=o.decorations.length,c=0;c<p;c+=1)m=o.decorations[c],s.normalDecorIsOrphan(o,m)||(h=s.fun.decorate[m[0]][m[1]].call(o,s,h,m[2]));h=f(o.strings.prefix)+h+f(o.strings.suffix);var _="";o.status===Ko.END?_=f(o.range_prefix):o.status===Ko.SUCCESSOR?_=f(o.successor_prefix):o.status===Ko.START?_=l>0&&!o.suppress_splice_prefix?f(o.splice_prefix):"":o.status===Ko.SEEN&&(_=f(o.splice_prefix)),a+=_,a+=h,s.tmp.count_offset_characters&&(s.tmp.offset_characters+=_.length+o.strings.prefix.length+b+o.strings.suffix.length)}return a},Ko.Output.Queue.purgeEmptyBlobs=function(e){if("object"==typeof e&&"object"==typeof e.blobs&&e.blobs.length)for(var t=e.blobs.length-1;t>-1;t--){Ko.Output.Queue.purgeEmptyBlobs(e.blobs[t]);var i=e.blobs[t];if(!i||!i.blobs||!i.blobs.length){for(var r=[];e.blobs.length-1>t;)r.push(e.blobs.pop());for(e.blobs.pop();r.length;)e.blobs.push(r.pop())}}},Ko.Output.Queue.adjust=function(e){var t={";":!0,":":!0},i={".":!0,"!":!0,"?":!0},r={"!":{".":"!","?":"!?",":":"!",",":"!,",";":"!;"},"?":{"!":"?!",".":"?",":":"?",",":"?,",";":"?;"},".":{"!":".!","?":".?",":":".:",",":".,",";":".;"},":":{"!":"!","?":"?",".":":",",":":,",";":":;"},",":{"!":",!","?":",?",":":",:",".":",.",";":",;"},";":{"!":"!","?":"?",":":";",",":";,",".":";"}},s={},a={},n={},o={};for(var l in r)n[l]=!0,o[l]=!0,t[l]||(s[l]=!0),i[l]||(a[l]=!0);o[" "]=!0,o["\xa0"]=!0;var u={};for(var l in r)for(var c in r[l])u[c]||(u[c]={}),u[c][l]=r[l][c];function p(e){return"number"==typeof e.num||e.blobs&&1===e.blobs.length&&"number"==typeof e.blobs[0].num}function h(e){return"number"==typeof e.num||!(!e.blobs||"object"!=typeof e.blobs)&&(!!h(e.blobs[e.blobs.length-1])||void 0)}function m(e,t){var i=!1,r=["@font-style","@font-variant","@font-weight","@text-decoration","@vertical-align"];if(t&&r.push("@quotes"),e.decorations)for(var s=0,a=e.decorations.length;s<a;s++)if(r.indexOf(e.decorations[s][0])>-1){i=!0;break}return i}function f(e){if(e.decorations)for(var t=0,i=e.decorations.length;t<i;t++)if("@quotes"===e.decorations[t][0]&&"false"!==e.decorations[t][1])return!0;return"object"==typeof e.blobs&&f(e.blobs[e.blobs.length-1])}function d(e,t){var i=t.strings.suffix.slice(-1);i||"string"!=typeof t.blobs||(i=t.blobs.slice(-1));var r=u[e][i];return!(!r||1!==r.length)||"object"==typeof t.blobs&&!!d(e,t.blobs[t.blobs.length-1])}function g(e,t){if(!n[t])return!1;if("string"==typeof e.blobs)return e.blobs.slice(-1)===t;var i=e.blobs[e.blobs.length-1];return!!i&&(i.strings.suffix.slice(-1)?i.strings.suffix.slice(-1)==t:g(i,t))}function b(e,t,i,s,a){var n="blobs"===t?e:e.strings,o="blobs"===s?i:i.strings,l=n[t].slice(-1),c=o[s].slice(0,1);function p(){o[s]=o[s].slice(1)}function h(){n[t]=n[t].slice(0,-1)}function m(e){o[s]=e+o[s]}function f(e){n[t]+=e}var d=a?function(){return r[l]}:function(){return u[c]},g=a?function(){var e=r[l][c];"string"==typeof e?(h(),p(),m(e)):(m(l),h())}:function(){var e=u[c][l];"string"==typeof e?(h(),p(),f(e)):(f(c),p())};l===c?(a?h:p)():d()&&g()}function y(e){var t=e.strings.suffix.slice(0,1);if("string"==typeof e.blobs)for(;s[t];)b(e,"blobs",e,"suffix"),t=e.strings.suffix.slice(0,1);else for(;s[t];)b(e.blobs[e.blobs.length-1],"suffix",e,"suffix"),t=e.strings.suffix.slice(0,1)}function v(e){if("string"==typeof e.blobs)for(var t=e.blobs.slice(-1);a[t];)b(e,"blobs",e,"suffix",!0),t=e.blobs.slice(-1);else for(t=e.blobs[e.blobs.length-1].strings.suffix.slice(-1);a[t];)b(e.blobs[e.blobs.length-1],"suffix",e,"suffix",!0),t=e.blobs[e.blobs.length-1].strings.suffix.slice(-1)}this.upward=function(e){if(e.blobs&&"string"==typeof e.blobs)n[e.strings.suffix.slice(0,1)]&&e.strings.suffix.slice(0,1)===e.blobs.slice(-1)&&(e.strings.suffix=e.strings.suffix.slice(1));else if("object"==typeof e&&"object"==typeof e.blobs&&e.blobs.length)for(var t=m(e,!0),i=e.blobs.length-1;i>-1;i--){this.upward(e.blobs[i]);var r=e.strings,s=e.blobs[i].strings;if(0===i){" "===r.prefix.slice(-1)&&" "===s.prefix.slice(0,1)&&(s.prefix=s.prefix.slice(1));var a=s.prefix.slice(0,1);t||!o[a]||r.prefix||(r.prefix+=a,s.prefix=s.prefix.slice(1))}i===e.blobs.length-1&&(a=s.suffix.slice(-1),!t&&[" "].indexOf(a)>-1&&(r.suffix.slice(0,1)!==a&&(r.suffix=a+r.suffix),s.suffix=s.suffix.slice(0,-1))),r.delimiter&&i>0&&o[r.delimiter.slice(-1)]&&r.delimiter.slice(-1)===s.prefix.slice(0,1)&&(s.prefix=s.prefix.slice(1))}},this.leftward=function(e){if("object"==typeof e&&"object"==typeof e.blobs&&e.blobs.length)for(var t=e.blobs.length-1;t>-1;t--)if(this.leftward(e.blobs[t]),t<e.blobs.length-1&&!e.strings.delimiter){var i=e.blobs[t],r=i.strings.suffix.slice(-1),s=e.blobs[t+1],a=s.strings.prefix.slice(0,1),o="number"==typeof r||"number"==typeof a;if(!m(i)&&!m(s)&&!o&&n[a]&&!o){var l=a===i.strings.suffix.slice(-1),u=!i.strings.suffix&&"string"==typeof i.blobs&&i.blobs.slice(-1)===a;l||u?s.strings.prefix=s.strings.prefix.slice(1):b(i,"suffix",s,"prefix")}}},this.downward=function(t){if(t.blobs&&"string"==typeof t.blobs)n[t.strings.suffix.slice(0,1)]&&t.strings.suffix.slice(0,1)===t.blobs.slice(-1)&&(t.strings.suffix=t.strings.suffix.slice(1));else if("object"==typeof t&&"object"==typeof t.blobs&&t.blobs.length){for(var i=t.strings,r=0,s=t.blobs.length;r<s&&!p(t.blobs[r]);r++);if(i.delimiter&&n[i.delimiter.slice(0,1)]){var a=i.delimiter.slice(0,1);for(r=t.blobs.length-2;r>-1;r--)(u=t.blobs[r].strings).suffix.slice(-1)!==a&&(u.suffix+=a);i.delimiter=i.delimiter.slice(1)}for(r=t.blobs.length-1;r>-1;r--){var l=t.blobs[r],u=t.blobs[r].strings,c=m(l,!0),y=p(l);if(r===t.blobs.length-1){var v=i.suffix.slice(0,1),_=!1;n[v]&&!(_=d(v,l))&&e&&(_=f(l)),_&&n[v]&&(h(l)||("string"==typeof l.blobs?b(l,"blobs",t,"suffix"):b(l,"suffix",t,"suffix"),"."===i.suffix.slice(0,1)&&(u.suffix+=i.suffix.slice(0,1),i.suffix=i.suffix.slice(1)))),"\xa0"===u.suffix.slice(-1)&&" "===i.suffix.slice(0,1)&&(i.suffix=i.suffix.slice(1)),o[u.suffix.slice(0,1)]&&("string"==typeof l.blobs&&l.blobs.slice(-1)===u.suffix.slice(0,1)&&(u.suffix=u.suffix.slice(1)),u.suffix.slice(-1)===i.suffix.slice(0,1)&&(i.suffix=i.suffix.slice(0,-1))),g(t,t.strings.suffix.slice(0,1))&&(t.strings.suffix=t.strings.suffix.slice(1))}else if(i.delimiter)o[i.delimiter.slice(0,1)]&&i.delimiter.slice(0,1)===u.suffix.slice(-1)&&(t.blobs[r].strings.suffix=t.blobs[r].strings.suffix.slice(0,-1));else{var x=t.blobs[r+1].strings;p(l)||c||!o[u.suffix.slice(-1)]||u.suffix.slice(-1)!==x.prefix.slice(0,1)||(x.prefix=x.prefix.slice(1))}y||c||!n[u.suffix.slice(0,1)]||"string"!=typeof l.blobs||b(l,"blobs",l,"suffix"),this.downward(t.blobs[r])}}},this.fix=function(t){if("object"==typeof t&&"object"==typeof t.blobs&&t.blobs.length){for(var i,r=0,s=t.blobs.length;r<s;r++){for(var a=t.blobs[r],n=!1,o=0,l=a.decorations.length;o<l;o++){var u=a.decorations[o];"@quotes"===u[0]&&"false"!==u[1]&&(n=!0)}n&&(e?y(a):v(a)),i=this.fix(t.blobs[r]),a.blobs&&"string"==typeof a.blobs&&(i=a.blobs.slice(-1))}return i}}},Ko.Engine.Opt=function(){this.parallel={enable:!1},this.has_disambiguate=!1,this.mode="html",this.dates={},this.jurisdictions_seen={},this.suppressedJurisdictions={},this.inheritedAttributes={},this["locale-sort"]=[],this["locale-translit"]=[],this["locale-translat"]=[],this.citeAffixes={persons:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},institutions:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},titles:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},journals:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},publishers:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},places:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}}},this["default-locale"]=[],this.update_mode=Ko.NONE,this.bib_mode=Ko.NONE,this.sort_citations=!1,this["et-al-min"]=0,this["et-al-use-first"]=1,this["et-al-use-last"]=!1,this["et-al-subsequent-min"]=!1,this["et-al-subsequent-use-first"]=!1,this["demote-non-dropping-particle"]="display-and-sort",this["parse-names"]=!0,this.citation_number_slug=!1,this.trigraph="Aaaa00:AaAa00:AaAA00:AAAA00",this.nodenames=[],this.gender={},this["cite-lang-prefs"]={persons:["orig"],institutions:["orig"],titles:["orig"],journals:["orig"],publishers:["orig"],places:["orig"],number:["orig"]},this.has_layout_locale=!1,this.disable_duplicate_year_suppression=[],this.use_context_condition=!1,this.jurisdiction_fallbacks={},this.development_extensions={},this.development_extensions.field_hack=!0,this.development_extensions.allow_field_hack_date_override=!0,this.development_extensions.locator_date_and_revision=!0,this.development_extensions.locator_label_parse=!0,this.development_extensions.raw_date_parsing=!0,this.development_extensions.clean_up_csl_flaws=!0,this.development_extensions.consolidate_legal_items=!1,this.development_extensions.csl_reverse_lookup_support=!1,this.development_extensions.wrap_url_and_doi=!1,this.development_extensions.thin_non_breaking_space_html_hack=!1,this.development_extensions.apply_citation_wrapper=!1,this.development_extensions.main_title_from_short_title=!1,this.development_extensions.uppercase_subtitles=!1,this.development_extensions.normalize_lang_keys_to_lowercase=!1,this.development_extensions.strict_text_case_locales=!1,this.development_extensions.expect_and_symbol_form=!1,this.development_extensions.require_explicit_legal_case_title_short=!1,this.development_extensions.spoof_institutional_affiliations=!1,this.development_extensions.force_jurisdiction=!1,this.development_extensions.parse_names=!0,this.development_extensions.hanging_indent_legacy_number=!1,this.development_extensions.throw_on_empty=!1,this.development_extensions.strict_inputs=!0,this.development_extensions.prioritize_disambiguate_condition=!1,this.development_extensions.force_short_title_casing_alignment=!0,this.development_extensions.implicit_short_title=!1,this.development_extensions.force_title_abbrev_fallback=!1,this.development_extensions.split_container_title=!1,this.development_extensions.legacy_institution_name_ordering=!1},Ko.Engine.Tmp=function(){this.names_max=new Ko.Stack,this.names_base=new Ko.Stack,this.givens_base=new Ko.Stack,this.value=[],this.namepart_decorations={},this.namepart_type=!1,this.area="citation",this.root="citation",this.extension="",this.can_substitute=new Ko.Stack(0,Ko.LITERAL),this.element_rendered_ok=!1,this.element_trace=new Ko.Stack("style"),this.nameset_counter=0,this.group_context=new Ko.Stack({term_intended:!1,variable_attempt:!1,variable_success:!1,output_tip:void 0,label_form:void 0,parallel_first:void 0,parallel_last:void 0,parallel_delimiter_override:void 0,condition:!1,force_suppress:!1,done_vars:[]}),this.term_predecessor=!1,this.in_cite_predecessor=!1,this.jump=new Ko.Stack(0,Ko.LITERAL),this.decorations=new Ko.Stack,this.tokenstore_stack=new Ko.Stack,this.last_suffix_used="",this.last_names_used=[],this.last_years_used=[],this.years_used=[],this.names_used=[],this.taintedItemIDs={},this.taintedCitationIDs={},this.initialize_with=new Ko.Stack,this.disambig_request=!1,this["name-as-sort-order"]=!1,this.suppress_decorations=!1,this.disambig_settings=new Ko.AmbigConfig,this.bib_sort_keys=[],this.prefix=new Ko.Stack("",Ko.LITERAL),this.suffix=new Ko.Stack("",Ko.LITERAL),this.delimiter=new Ko.Stack("",Ko.LITERAL),this.cite_locales=[],this.cite_affixes={citation:!1,bibliography:!1,citation_sort:!1,bibliography_sort:!1},this.strip_periods=0,this.shadow_numbers={},this.authority_stop_last=0,this.loadedItemIDs={},this.condition_counter=0,this.condition_lang_val_arr=[],this.condition_lang_counter_arr=[]},Ko.Engine.Fun=function(e){this.match=new Ko.Util.Match,this.suffixator=new Ko.Util.Suffixator(Ko.SUFFIX_CHARS),this.romanizer=new Ko.Util.Romanizer,this.ordinalizer=new Ko.Util.Ordinalizer(e),this.long_ordinalizer=new Ko.Util.LongOrdinalizer},Ko.Engine.Build=function(){this["alternate-term"]=!1,this.in_bibliography=!1,this.in_style=!1,this.skip=!1,this.postponed_macro=!1,this.layout_flag=!1,this.name=!1,this.names_variables=[[]],this.name_label=[{}],this.form=!1,this.term=!1,this.macro={},this.macro_stack=[],this.text=!1,this.lang=!1,this.area="citation",this.root="citation",this.extension="",this.substitute_level=new Ko.Stack(0,Ko.LITERAL),this.names_level=0,this.render_nesting_level=0,this.render_seen=!1,this.bibliography_key_pos=0},Ko.Engine.Configure=function(){this.tests=[],this.fail=[],this.succeed=[]},Ko.Engine.Citation=function(e){this.opt={inheritedAttributes:{}},this.tokens=[],this.srt=new Ko.Registry.Comparifier(e,"citation_sort"),this.opt.collapse=[],this.opt["disambiguate-add-names"]=!1,this.opt["disambiguate-add-givenname"]=!1,this.opt["disambiguate-add-year-suffix"]=!1,this.opt["givenname-disambiguation-rule"]="by-cite",this.opt["near-note-distance"]=5,this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="citation"},Ko.Engine.Bibliography=function(){this.opt={inheritedAttributes:{}},this.tokens=[],this.opt.collapse=[],this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt["line-spacing"]=1,this.opt["entry-spacing"]=1,this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="bibliography"},Ko.Engine.BibliographySort=function(){this.tokens=[],this.opt={},this.opt.sort_directions=[],this.opt.topdecor=[],this.opt.citation_number_sort_direction=Ko.ASCENDING,this.opt.citation_number_secondary=!1,this.tmp={},this.keys=[],this.root="bibliography"},Ko.Engine.CitationSort=function(){this.tokens=[],this.opt={},this.opt.sort_directions=[],this.keys=[],this.opt.topdecor=[],this.root="citation"},Ko.Engine.InText=function(){this.opt={inheritedAttributes:{}},this.tokens=[],this.opt.collapse=[],this.opt["disambiguate-add-names"]=!1,this.opt["disambiguate-add-givenname"]=!1,this.opt["disambiguate-add-year-suffix"]=!1,this.opt["givenname-disambiguation-rule"]="by-cite",this.opt["near-note-distance"]=5,this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="intext"},Ko.Engine.prototype.previewCitationCluster=function(e,t,i,r){var s=this.opt.mode;this.setOutputFormat(r),e.citationID&&delete e.citationID;var a=this.processCitationCluster(e,t,i,Ko.PREVIEW);return this.setOutputFormat(s),a[1]},Ko.Engine.prototype.appendCitationCluster=function(e){for(var t=[],i=this.registry.citationreg.citationByIndex.length,r=0;r<i;r+=1){var s=this.registry.citationreg.citationByIndex[r];t.push([""+s.citationID,s.properties.noteIndex])}return this.processCitationCluster(e,t,[])[1]},Ko.Engine.prototype.processCitationCluster=function(e,t,i,r){var s,a,n,o,l,u,c,p,h,m,f,d,g,b,y,v,_;if(this.debug=!1,this.tmp.loadedItemIDs={},this.tmp.citation_errors=[],this.registry.return_data={bibchange:!1},this.setCitationId(e),r===Ko.PREVIEW){this.debug&&Ko.debug("****** start state save *********"),y=this.registry.citationreg.citationByIndex.slice(),v=this.registry.reflist.slice();for(var x=t.concat(i),w={},E=[],A=0,T=x.length;A<T;A+=1)for(o=0,l=(s=this.registry.citationreg.citationById[x[A][0]]).citationItems.length;o<l;o+=1)w[s.citationItems[o].id]=!0,E.push(""+s.citationItems[o].id);for(o=0,l=e.citationItems.length;o<l;o+=1)w[e.citationItems[o].id]=!0,E.push(""+e.citationItems[o].id);for(_={},A=0,T=v.length;A<T;A+=1)if(!w[v[A].id]){var S=this.registry.registry[v[A].id].ambig,O=this.registry.ambigcites[S];if(O)for(o=0,l=O.length;o<l;o+=1)_[O[o]]=Ko.cloneAmbigConfig(this.registry.registry[O[o]].disambig)}this.debug&&Ko.debug("****** end state save *********")}this.tmp.taintedCitationIDs={};var Q=[],k={};for(A=0,T=e.citationItems.length;A<T;A+=1){for(var C in f={},e.citationItems[A])f[C]=e.citationItems[A][C];var I;if((m=this.retrieveItem(""+f.id)).id&&this.transform.loadAbbreviation("default","hereinafter",m.id,m.language),f=Ko.parseLocator.call(this,f),this.opt.development_extensions.consolidate_legal_items&&this.remapSectionVariable([[m,f]]),this.opt.development_extensions.locator_label_parse&&f.locator&&-1===["bill","gazette","legislation","regulation","treaty"].indexOf(m.type)&&(!f.label||"page"===f.label)&&(I=Ko.LOCATOR_LABELS_REGEXP.exec(f.locator))){var N=Ko.LOCATOR_LABELS_MAP[I[2]];this.getTerm(N)&&(f.label=N,f.locator=I[3])}var R=[m,f];Q.push(R),e.citationItems[A].item=m}e.sortedItems=Q;var P,D=[],j={};for(A=0,T=t.length;A<T;A+=1)a=t[A],this.opt.development_extensions.strict_inputs&&(j[a[0]]&&Ko.error("Previously referenced citationID "+a[0]+" encountered in citationsPre"),a[1]&&(P>a[1]&&Ko.debug("Note index sequence is not sane at citationsPre["+A+"]"),P=a[1])),this.registry.citationreg.citationById[a[0]].properties.noteIndex=a[1],D.push(this.registry.citationreg.citationById[a[0]]),j[a[0]]=this.registry.citationreg.citationById[a[0]];for(e.properties||(e.properties={noteIndex:0}),this.opt.development_extensions.strict_inputs&&(j[e.citationID]&&Ko.error("Citation with previously referenced citationID "+e.citationID),e.properties.noteIndex&&(P>e.properties.noteIndex&&Ko.debug("Note index sequence is not sane for citation "+e.citationID),P=e.properties.noteIndex)),D.push(e),j[e.citationID]=e,A=0,T=i.length;A<T;A+=1)n=i[A],this.opt.development_extensions.strict_inputs&&(j[n[0]]&&Ko.error("Previously referenced citationID "+n[0]+" encountered in citationsPost"),n[1]&&(P>n[1]&&Ko.debug("Note index sequence is not sane at postCitation["+A+"]"),P=n[1])),this.registry.citationreg.citationById[n[0]].properties.noteIndex=n[1],D.push(this.registry.citationreg.citationById[n[0]]),j[n[0]]=this.registry.citationreg.citationById[n[0]];this.registry.citationreg.citationByIndex=D,this.registry.citationreg.citationById=j,this.registry.citationreg.citationsByItemId={},this.opt.update_mode===Ko.POSITION&&(g=[],d=[],b={});var L,M=[];for(A=0,T=D.length;A<T;A+=1){for(D[A].properties.index=A,o=0,l=D[A].sortedItems.length;o<l;o+=1)f=D[A].sortedItems[o],this.registry.citationreg.citationsByItemId[f[1].id]||(this.registry.citationreg.citationsByItemId[f[1].id]=[],M.push(""+f[1].id)),-1===this.registry.citationreg.citationsByItemId[f[1].id].indexOf(D[A])&&this.registry.citationreg.citationsByItemId[f[1].id].push(D[A]);this.opt.update_mode===Ko.POSITION&&(D[A].properties.noteIndex?d.push(D[A]):(D[A].properties.noteIndex=0,g.push(D[A])))}if(r!==Ko.ASSUME_ALL_ITEMS_REGISTERED&&(this.debug&&Ko.debug("****** start update items *********"),this.updateItems(M,null,null,!0),this.debug&&Ko.debug("****** endo update items *********")),!this.opt.citation_number_sort&&Q&&Q.length>1&&this.citation_sort.tokens.length>0){for(A=0,T=Q.length;A<T;A+=1)Q[A][1].sortkeys=Ko.getSortKeys.call(this,Q[A][0],"citation_sort");if(this.opt.grouped_sort&&!e.properties.unsorted){for(A=0,T=Q.length;A<T;A+=1){var B=Q[A][1].sortkeys;this.tmp.authorstring_request=!0;var U=this.registry.registry[Q[A][0].id].disambig;this.tmp.authorstring_request=!0,Ko.getAmbiguousCite.call(this,Q[A][0],U);var F=this.registry.authorstrings[Q[A][0].id];this.tmp.authorstring_request=!1,Q[A][1].sortkeys=[F].concat(B)}Q.sort(this.citation.srt.compareCompositeKeys);var G=!1,q=!1,z=!1;for(A=0,T=Q.length;A<T;A+=1)Q[A][1].sortkeys[0]!==G&&(z=Q[A][1].sortkeys[0],q=Q[A][1].sortkeys[1]),Q[A][1].sortkeys[0]=""+q+A,G=z}e.properties.unsorted||Q.sort(this.citation.srt.compareCompositeKeys)}if(this.opt.parallel.enable&&this.parallel.StartCitation(e.sortedItems),this.opt.update_mode===Ko.POSITION)for(A=0;A<2;A+=1){var V={},H={},W={};for(o=0,l=(L=[g,d][A]).length;o<l;o+=1){var $=L[o];for(L[o].properties.noteIndex||(L[o].properties.noteIndex=0),L[o].properties.noteIndex=parseInt(L[o].properties.noteIndex,10),o>0&&L[o-1].properties.noteIndex>L[o].properties.noteIndex&&(b={},V={},H={},W={}),u=0,c=$.sortedItems.length;u<c;u+=1)$.sortedItems[u][1].parallel&&"first"!==$.sortedItems[u][1].parallel||(b[$.properties.noteIndex]?b[$.properties.noteIndex]+=1:b[$.properties.noteIndex]=1);for(u=0,c=L[o].sortedItems.length;u<c;u+=1){var Y,J,X=(f=L[o].sortedItems[u])[0].id,K=f[0].legislation_id?f[0].legislation_id:f[0].id,Z=f[0].legislation_id?f[0].legislation_id:f[0].container_id?f[0].container_id:f[0].id,ee=f[1]["locator-extra"],te=f[1].locator,ie=f[1].label;if(u>0)if($.sortedItems[u-1][0].legislation_id)Y=$.sortedItems[u-1][0].legislation_id;else{Y=$.sortedItems[u-1][1].id,J=$.sortedItems[u-1][1]["locator-extra"];for(var re=u-2;re>-1;re--)"first"===$.sortedItems[re][1].parallel&&(Y=$.sortedItems[re][1].id,J=$.sortedItems[re][1]["locator-extra"])}if(r!==Ko.PREVIEW||$.citationID==e.citationID){var se,ae,ne={};if(ne.position=f[1].position,ne["first-reference-note-number"]=f[1]["first-reference-note-number"],ne["first-container-reference-note-number"]=f[1]["first-container-reference-note-number"],ne["near-note"]=f[1]["near-note"],f[1]["first-reference-note-number"]=0,f[1]["first-container-reference-note-number"]=0,f[1]["near-note"]=!1,this.registry.citationreg.citationsByItemId[X]&&"note"===this.opt.xclass&&this.opt.has_disambiguate){var oe=this.registry.registry[f[0].id]["citation-count"],le=this.registry.citationreg.citationsByItemId[X].length;if(this.registry.registry[f[0].id]["citation-count"]=this.registry.citationreg.citationsByItemId[X].length,"number"==typeof oe){if(oe<2!=le<2){re=0;for(var ue=this.registry.citationreg.citationsByItemId[X].length;re<ue;re++)k[this.registry.registry[f[0].id].ambig]=!0,this.tmp.taintedCitationIDs[this.registry.citationreg.citationsByItemId[X][re].citationID]=!0}}else for(re=0,ue=this.registry.citationreg.citationsByItemId[X].length;re<ue;re++)k[this.registry.registry[f[0].id].ambig]=!0,this.tmp.taintedCitationIDs[this.registry.citationreg.citationsByItemId[X][re].citationID]=!0}if(void 0===H[Z]&&"author-only"!==$.properties.mode)V[K]=$.properties.noteIndex,H[Z]=$.properties.noteIndex,W[Z]=$.properties.noteIndex,f[1].position=Ko.POSITION_FIRST;else{var ce=!1,pe=!1,he=null;o>0&&(he=L[o-1]);var me,fe,de,ge,be=L[o];if(o>0){var ye=1;"author-only"===he.properties.mode&&o>1&&(ye=2);var ve=o-ye;L[ve].sortedItems.length&&(se=L[ve].sortedItems.slice(-1)[0][1].id,ae=L[o-ye].sortedItems.slice(-1)[0][1]["locator-extra"]),he.sortedItems.length&&he.sortedItems[0].slice(-1)[0].legislation_id&&(se=he.sortedItems[0].slice(-1)[0].legislation_id)}if(o>0&&0===u&&he.properties.noteIndex!==be.properties.noteIndex){var _e=!1,xe=he.sortedItems[0][0].id;if(he.sortedItems[0][0].legislation_id&&(xe=he.sortedItems[0][0].legislation_id),xe==K&&he.properties.noteIndex>=be.properties.noteIndex-1){var we=he.sortedItems[0][1]["locator-extra"],Ee=be.sortedItems[0][1]["locator-extra"];1!==b[he.properties.noteIndex]&&0!==he.properties.noteIndex||we!==Ee||(_e=!0)}_e?ce=!0:pe=!0}else u>0&&Y==K&&J==ee||0===u&&o>0&&he.properties.noteIndex==be.properties.noteIndex&&he.sortedItems.length&&se==K&&ae==ee?ce=!0:pe=!0;ce&&((me=u>0?$.sortedItems[u-1][1]:L[o-1].sortedItems[0][1]).locator?(de=me.label?me.label:"",fe=""+me.locator+de):fe=me.locator,ge=te?""+te+(ie||""):te),ce&&fe&&!ge&&(ce=!1,pe=!0),ce&&(!fe&&ge?f[1].position=Ko.POSITION_IBID_WITH_LOCATOR:fe||ge?fe&&ge===fe?f[1].position=Ko.POSITION_IBID:fe&&ge&&ge!==fe?f[1].position=Ko.POSITION_IBID_WITH_LOCATOR:(ce=!1,pe=!0):f[1].position=Ko.POSITION_IBID),pe&&(f[1].position=Ko.POSITION_CONTAINER_SUBSEQUENT,V[K]&&(f[1].position=Ko.POSITION_SUBSEQUENT),V[K]||(V[K]=$.properties.noteIndex)),(pe||ce)&&("author-only"===$.properties.mode&&(f[1].position=Ko.POSITION_FIRST),W[Z]!=$.properties.noteIndex&&(f[1]["first-container-reference-note-number"]=W[Z],this.registry.registry[f[0].id]&&(this.registry.registry[f[0].id]["first-container-reference-note-number"]=W[Z])),V[K]!=$.properties.noteIndex&&(f[1]["first-reference-note-number"]=V[K],this.registry.registry[f[0].id]&&(this.registry.registry[f[0].id]["first-reference-note-number"]=V[K])))}if($.properties.noteIndex){var Ae=parseInt($.properties.noteIndex,10)-parseInt(H[Z],10);f[1].position!==Ko.POSITION_FIRST&&Ae<=this.citation.opt["near-note-distance"]&&(f[1]["near-note"]=!0),H[Z]=$.properties.noteIndex}if($.citationID!=e.citationID)for(p=0,h=Ko.POSITION_TEST_VARS.length;p<h;p+=1){var Te=Ko.POSITION_TEST_VARS[p];f[1][Te]!==ne[Te]&&(this.registry.registry[f[0].id]&&"first-reference-note-number"===Te&&(k[this.registry.registry[f[0].id].ambig]=!0,this.tmp.taintedItemIDs[f[0].id]=!0),this.tmp.taintedCitationIDs[$.citationID]=!0)}this.sys.variableWrapper&&(f[1].index=$.properties.index,f[1].noteIndex=$.properties.noteIndex)}else void 0===V[f[1].id]?(V[K]=$.properties.noteIndex,H[Z]=$.properties.noteIndex):H[Z]=$.properties.noteIndex}}}if(this.opt.citation_number_sort&&Q&&Q.length>1&&this.citation_sort.tokens.length>0&&!e.properties.unsorted){for(A=0,T=Q.length;A<T;A+=1)Q[A][1].sortkeys=Ko.getSortKeys.call(this,Q[A][0],"citation_sort");Q.sort(this.citation.srt.compareCompositeKeys)}for(var C in this.tmp.taintedItemIDs)if(this.tmp.taintedItemIDs.hasOwnProperty(C)&&(L=this.registry.citationreg.citationsByItemId[C]))for(A=0,T=L.length;A<T;A+=1)this.tmp.taintedCitationIDs[L[A].citationID]=!0;var Se=[];if(r===Ko.PREVIEW){this.debug&&Ko.debug("****** start run processor *********");try{Se=this.process_CitationCluster.call(this,e.sortedItems,e)}catch(Ie){Ko.error("Error running CSL processor for preview: "+Ie)}for(this.debug&&(Ko.debug("****** end run processor *********"),Ko.debug("****** start state restore *********")),this.registry.citationreg.citationByIndex=y,this.registry.citationreg.citationById={},A=0,T=y.length;A<T;A+=1)this.registry.citationreg.citationById[y[A].citationID]=y[A];this.debug&&Ko.debug("****** start final update *********");var Oe=[];for(A=0,T=v.length;A<T;A+=1)Oe.push(""+v[A].id);for(var C in this.updateItems(Oe,null,null,!0),this.debug&&Ko.debug("****** end final update *********"),_)_.hasOwnProperty(C)&&(this.registry.registry[C].disambig=_[C]);this.debug&&Ko.debug("****** end state restore *********")}else{for(var Qe in k)this.disambiguate.run(Qe,e);var ke;for(var C in this.tmp.taintedCitationIDs)if(C!=e.citationID){var Ce=this.registry.citationreg.citationById[C];if(!Ce.properties.unsorted){for(A=0,T=Ce.sortedItems.length;A<T;A+=1)Ce.sortedItems[A][1].sortkeys=Ko.getSortKeys.call(this,Ce.sortedItems[A][0],"citation_sort");Ce.sortedItems.sort(this.citation.srt.compareCompositeKeys)}this.tmp.citation_pos=Ce.properties.index,this.tmp.citation_note_index=Ce.properties.noteIndex,this.tmp.citation_id=""+Ce.citationID,(ke=[]).push(Ce.properties.index),ke.push(this.process_CitationCluster.call(this,Ce.sortedItems,Ce)),ke.push(Ce.citationID),Se.push(ke)}this.tmp.taintedItemIDs={},this.tmp.taintedCitationIDs={},this.tmp.citation_pos=e.properties.index,this.tmp.citation_note_index=e.properties.noteIndex,this.tmp.citation_id=""+e.citationID,(ke=[]).push(t.length),ke.push(this.process_CitationCluster.call(this,Q,e)),ke.push(e.citationID),Se.push(ke),Se.sort((function(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:0}))}return this.registry.return_data.citation_errors=this.tmp.citation_errors.slice(),[this.registry.return_data,Se]},Ko.Engine.prototype.process_CitationCluster=function(e,t){var i="";if(t&&t.properties&&"composite"===t.properties.mode){t.properties.mode="author-only";var r=Ko.getCitationCluster.call(this,e,t);t.properties.mode="suppress-author";var s="";t.properties.infix&&(this.output.append(t.properties.infix),"object"==typeof(s=this.output.string(this,this.output.queue))&&(s=s.join("")));var a=Ko.getCitationCluster.call(this,e,t);t.properties.mode="composite",r&&s&&Ko.SWAPPING_PUNCTUATION.concat(["\u2019","'"]).indexOf(s[0])>-1&&(r+=s,s=!1),i=[r,s,a].filter((function(e){return e})).join(" ")}else i=Ko.getCitationCluster.call(this,e,t);return i},Ko.Engine.prototype.makeCitationCluster=function(e){var t,i,r,s,a,n;for(t=[],s=e.length,r=0;r<s;r+=1){for(var o in a={},e[r])a[o]=e[r][o];if(n=this.retrieveItem(""+a.id),this.opt.development_extensions.locator_label_parse&&a.locator&&-1===["bill","gazette","legislation","regulation","treaty"].indexOf(n.type)&&(!a.label||"page"===a.label)){var l=Ko.LOCATOR_LABELS_REGEXP.exec(a.locator);if(l){var u=Ko.LOCATOR_LABELS_MAP[l[2]];this.getTerm(u)&&(a.label=u,a.locator=l[3])}}a.locator&&(a.locator=(""+a.locator).replace(/\s+$/,"")),i=[n,a],t.push(i)}if(this.opt.development_extensions.consolidate_legal_items&&this.remapSectionVariable(t),t&&t.length>1&&this.citation_sort.tokens.length>0){for(s=t.length,r=0;r<s;r+=1)t[r][1].sortkeys=Ko.getSortKeys.call(this,t[r][0],"citation_sort");t.sort(this.citation.srt.compareCompositeKeys)}return this.tmp.citation_errors=[],Ko.getCitationCluster.call(this,t)},Ko.getAmbiguousCite=function(e,t,i,r){var s=this.tmp.group_context.tip,a={term_intended:s.term_intended,variable_attempt:s.variable_attempt,variable_success:s.variable_success,output_tip:s.output_tip,label_form:s.label_form,non_parallel:s.non_parallel,parallel_last:s.parallel_last,parallel_first:s.parallel_first,parallel_last_override:s.parallel_last_override,parallel_delimiter_override:s.parallel_delimiter_override,parallel_delimiter_override_on_suppress:s.parallel_delimiter_override_on_suppress,condition:s.condition,force_suppress:s.force_suppress,done_vars:s.done_vars.slice()};this.tmp.disambig_request=t||!1;var n={position:Ko.POSITION_SUBSEQUENT,"near-note":!0};r&&(n.locator=r.locator,n.label=r.label),this.registry.registry[e.id]&&this.registry.citationreg.citationsByItemId&&this.registry.citationreg.citationsByItemId[e.id]&&this.registry.citationreg.citationsByItemId[e.id].length&&i&&"by-cite"===this.citation.opt["givenname-disambiguation-rule"]&&(n["first-reference-note-number"]=this.registry.registry[e.id]["first-reference-note-number"]),this.tmp.area="citation",this.tmp.root="citation";var o=this.tmp.suppress_decorations;this.tmp.suppress_decorations=!0,this.tmp.just_looking=!0,Ko.getCite.call(this,e,n,null,!1);for(var l=0,u=this.output.queue.length;l<u;l+=1)Ko.Output.Queue.purgeEmptyBlobs(this.output.queue[l]);if(this.opt.development_extensions.clean_up_csl_flaws)for(var c=0,p=this.output.queue.length;c<p;c+=1)this.output.adjust.upward(this.output.queue[c]),this.output.adjust.leftward(this.output.queue[c]),this.output.adjust.downward(this.output.queue[c]),this.output.adjust.fix(this.output.queue[c]);var h=this.output.string(this,this.output.queue);return this.tmp.just_looking=!1,this.tmp.suppress_decorations=o,this.tmp.group_context.replace(a),h},Ko.getSpliceDelimiter=function(e,t,i){if(void 0!==this.citation.opt["after-collapse-delimiter"])e||t&&!this.tmp.have_collapsed?this.tmp.splice_delimiter=this.citation.opt["after-collapse-delimiter"]:t||this.tmp.have_collapsed||"year-suffix"===this.citation.opt.collapse?this.tmp.splice_delimiter=this.citation.opt.layout_delimiter:this.tmp.splice_delimiter=this.citation.opt["after-collapse-delimiter"];else if(this.tmp.use_cite_group_delimiter)this.tmp.splice_delimiter=this.citation.opt.cite_group_delimiter;else if(this.tmp.have_collapsed&&"in-text"===this.opt.xclass&&this.opt.update_mode!==Ko.NUMERIC)this.tmp.splice_delimiter=", ";else if(this.tmp.cite_locales[i-1]){var r=this.tmp.cite_affixes[this.tmp.area][this.tmp.cite_locales[i-1]];r&&r.delimiter&&(this.tmp.splice_delimiter=r.delimiter)}else this.tmp.splice_delimiter||(this.tmp.splice_delimiter="");return this.tmp.splice_delimiter},Ko.getCitationCluster=function(e,t){var i,r,s,a,n,o,l,u,c,p,h,m,f,d,g,b,y,v,_,x,w,E="";this.output.checkNestedBrace=new Ko.checkNestedBrace(this),t&&(_=t.citationID,x="author-only"===t.properties.mode&&!!t.properties.mode,"note"!==this.opt.xclass&&(w="suppress-author"===t.properties.mode&&!!t.properties.mode),t.properties.prefix&&(E=Ko.checkPrefixSpaceAppend(this,t.properties.prefix))),e=e||[],this.tmp.last_primary_names_string=!1,y=Ko.getSafeEscape(this),this.tmp.area="citation",this.tmp.root="citation",i="",r=[],this.tmp.last_suffix_used="",this.tmp.last_names_used=[],this.tmp.last_years_used=[],this.tmp.backref_index=[],this.tmp.cite_locales=[],this.tmp.just_looking||(this.tmp.abbrev_trimmer={QUASHES:{}});var A=this.output.checkNestedBrace.update(this.citation.opt.layout_prefix+E),T=!1;if(this.citation.opt.suppressTrailingPunctuation&&(T=!0),_&&this.registry.citationreg.citationById[_].properties["suppress-trailing-punctuation"]&&(T=!0),"note"===this.opt.xclass){for(var S=[],O=!1,Q=!1,k=[],C=0,I=e.length;C<I;C+=1){var N=e[C][0].type,R=e[C][0].title,P=e[C][1].position,D=e[C][0].id;R&&"legal_case"===N&&D!==Q&&P&&(R===O&&0!==S.length||(k=[],S.push(k)),k.push(e[C][1])),O=R,Q=D}for(C=0,I=S.length;C<I;C+=1)if(!((k=S[C]).length<2)){var j=k.slice(-1)[0].locator;if(j)for(var L=0,M=k.length-1;L<M;L+=1)k[L].locator&&(j=!1);j&&(k[0].locator=j,delete k.slice(-1)[0].locator,k[0].label=k.slice(-1)[0].label,k.slice(-1)[0].label&&delete k.slice(-1)[0].label)}}for(s=[],a=e.length,e[0]&&e[0][1]&&(x?(delete e[0][1]["suppress-author"],e[0][1]["author-only"]=!0):w&&(delete e[0][1]["author-only"],e[0][1]["suppress-author"]=!0)),this.opt.parallel.enable&&this.parallel.StartCitation(e),n=0;n<a;n+=1){this.tmp.cite_index=n,m=e[n][0],o=e[n][1],o=Ko.parseLocator.call(this,o),l=this.tmp.have_collapsed;var B=!1;if(n>0&&e[n-1][1]&&(B=!!e[n-1][1].locator),u={},this.tmp.shadow_numbers={},!this.tmp.just_looking&&this.opt.hasPlaceholderTerm){var U=this.output;this.output=new Ko.Output.Queue(this),this.output.adjust=new Ko.Output.Queue.adjust,Ko.getAmbiguousCite.call(this,m,null,!1,o),this.output=U}if(this.tmp.in_cite_predecessor=!1,n>0?Ko.getCite.call(this,m,o,""+e[n-1][0].id,!0):(this.tmp.term_predecessor=!1,Ko.getCite.call(this,m,o,null,!0)),this.tmp.cite_renders_content||(v={citationID:""+this.tmp.citation_id,index:this.tmp.citation_pos,noteIndex:this.tmp.citation_note_index,itemID:""+m.id,citationItems_pos:n,error_code:Ko.ERROR_NO_RENDERED_FORM},this.tmp.citation_errors.push(v)),u.splice_delimiter=Ko.getSpliceDelimiter.call(this,B,l,n),o&&o["author-only"]&&(this.tmp.suppress_decorations=!0),n>0){var F=(b=e[n-1][1]).suffix&&[";",".",","].indexOf(b.suffix.slice(-1))>-1,G=!b.suffix&&o.prefix&&[";",".",","].indexOf(o.prefix.slice(0,1))>-1;if(F||G){var q=u.splice_delimiter.indexOf(" ");u.splice_delimiter=q>-1&&!G?u.splice_delimiter.slice(q):""}}if(u.suppress_decorations=this.tmp.suppress_decorations,u.have_collapsed=this.tmp.have_collapsed,s.push(u),o["author-only"])break}h=this.output.queue.slice();var z="";t&&(z=Ko.checkSuffixSpacePrepend(this,t.properties.suffix));var V=this.citation.opt.layout_suffix,H=this.tmp.cite_locales[this.tmp.cite_locales.length-1];for(H&&this.tmp.cite_affixes[this.tmp.area][H]&&this.tmp.cite_affixes[this.tmp.area][H].suffix&&(V=this.tmp.cite_affixes[this.tmp.area][H].suffix),Ko.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(V.slice(0,1))>-1&&(V=V.slice(0,1)),V=this.output.checkNestedBrace.update(z+V),C=0,I=this.output.queue.length;C<I;C+=1)Ko.Output.Queue.purgeEmptyBlobs(this.output.queue[C]);if(!this.tmp.suppress_decorations&&this.output.queue.length&&(this.opt.development_extensions.apply_citation_wrapper&&this.sys.wrapCitationEntry&&!this.tmp.just_looking&&"citation"===this.tmp.area||(T||(this.output.queue[this.output.queue.length-1].strings.suffix=V),this.output.queue[0].strings.prefix=A)),this.opt.development_extensions.clean_up_csl_flaws)for(L=0,M=this.output.queue.length;L<M;L+=1)this.output.adjust.upward(this.output.queue[L]),this.output.adjust.leftward(this.output.queue[L]),this.output.adjust.downward(this.output.queue[L]),this.tmp.last_chr=this.output.adjust.fix(this.output.queue[L]);for(n=0,a=h.length;n<a;n+=1){var W=[];if(this.output.queue=[h[n]],this.tmp.suppress_decorations=s[n].suppress_decorations,this.tmp.splice_delimiter=s[n].splice_delimiter,h[n].parallel_delimiter&&(this.tmp.splice_delimiter=h[n].parallel_delimiter),this.tmp.have_collapsed=s[n].have_collapsed,c=this.output.string(this,this.output.queue),this.tmp.suppress_decorations=!1,"string"==typeof c)return this.tmp.suppress_decorations=!1,c||(this.opt.development_extensions.throw_on_empty?Ko.error("Citation would render no content"):c="[NO_PRINTED_FORM]"),c;if("object"==typeof c&&0===c.length&&!o["suppress-author"])if(0===n){var $=0===n?y(this.citation.opt.layout_prefix):"",Y=n===h.length-1?y(this.citation.opt.layout_suffix):"";c.push($+"[CSL STYLE ERROR: reference with no printed form.]"+Y)}else if(n===h.length-1){var J=r[r.length-1];"string"==typeof J?r[r.length-1]+=y(this.citation.opt.layout_suffix):"object"==typeof J&&(J.strings.suffix+=y(this.citation.opt.layout_suffix))}if(W.length&&"string"==typeof c[0]){c.reverse();var X=c.pop();X&&","===X.slice(0,1)?W.push(X):"string"==typeof W.slice(-1)[0]&&","===W.slice(-1)[0].slice(-1)?W.push(" "+X):X&&W.push(y(this.tmp.splice_delimiter)+X)}else c.reverse(),void 0!==(p=c.pop())&&(W.length&&"string"==typeof W[W.length-1]&&(W[W.length-1]+=p.successor_prefix),W.push(p));for(f=c.length,d=0;d<f;d+=1)"string"!=typeof(g=c[d])?void 0!==(p=c.pop())&&W.push(p):W.push(y(this.tmp.splice_delimiter)+g);0!==W.length||e[n][1]["suppress-author"],W.length>1&&"string"!=typeof W[0]&&(W=[this.output.renderBlobs(W)]),W.length&&("string"==typeof W[0]?n>0&&(W[0]=y(this.tmp.splice_delimiter)+W[0]):W[0].splice_prefix=n>0?this.tmp.splice_delimiter:""),r=r.concat(W)}if((i+=this.output.renderBlobs(r))&&!this.tmp.suppress_decorations)for(a=this.citation.opt.layout_decorations.length,n=0;n<a;n+=1)"normal"!==(u=this.citation.opt.layout_decorations[n])[1]&&(o&&o["author-only"]||(i=this.fun.decorate[u[0]][u[1]](this,i)));return this.tmp.suppress_decorations=!1,i||(this.opt.development_extensions.throw_on_empty?Ko.error("Citation would render no content"):i="[NO_PRINTED_FORM]"),i},Ko.getCite=function(e,t,i,r){var s,a,n=this.tmp.area;for(t&&t["author-only"]&&this.intext&&this.intext.tokens.length>0&&(this.tmp.area="intext"),this.tmp.cite_renders_content=!1,this.tmp.probably_rendered_something=!1,this.tmp.prevItemID=i,Ko.citeStart.call(this,e,t,r),s=0,this.tmp.name_node={},this.nameOutput=new Ko.NameOutput(this,e,t);s<this[this.tmp.area].tokens.length;)s=Ko.tokenExec.call(this,this[this.tmp.area].tokens[s],e,t);return Ko.citeEnd.call(this,e,t),this.tmp.cite_renders_content||this.tmp.just_looking||"bibliography"===this.tmp.area&&(a={index:this.tmp.bibliography_pos,itemID:""+e.id,error_code:Ko.ERROR_NO_RENDERED_FORM},this.tmp.bibliography_errors.push(a)),this.tmp.area=n,""+e.id},Ko.citeStart=function(e,t,i){if(this.tmp.lang_array=[],e.language){var r=e.language.match(/^([a-zA-Z]+).*/);r&&this.tmp.lang_array.push(r[1].toLowerCase())}if(this.tmp.lang_array.push(this.opt.lang),i||(this.tmp.shadow_numbers={}),this.tmp.disambiguate_count=0,this.tmp.disambiguate_maxMax=0,this.tmp.same_author_as_previous_cite=!1,this.tmp.suppress_decorations?this.tmp.subsequent_author_substitute_ok=!1:this.tmp.subsequent_author_substitute_ok=!0,this.tmp.lastchr="","citation"===this.tmp.area&&this.citation.opt.collapse&&this.citation.opt.collapse.length?this.tmp.have_collapsed=!0:this.tmp.have_collapsed=!1,this.tmp.render_seen=!1,this.tmp.disambig_request&&!this.tmp.disambig_override?this.tmp.disambig_settings=this.tmp.disambig_request:this.registry.registry[e.id]&&!this.tmp.disambig_override?(this.tmp.disambig_request=this.registry.registry[e.id].disambig,this.tmp.disambig_settings=this.registry.registry[e.id].disambig):this.tmp.disambig_settings=new Ko.AmbigConfig,"citation"!==this.tmp.area)if(this.registry.registry[e.id]){if(this.tmp.disambig_restore=Ko.cloneAmbigConfig(this.registry.registry[e.id].disambig),"bibliography"===this.tmp.area&&this.tmp.disambig_settings&&this.tmp.disambig_override&&(this.opt["disambiguate-add-names"]&&(this.tmp.disambig_settings.names=this.registry.registry[e.id].disambig.names.slice(),this.tmp.disambig_request&&(this.tmp.disambig_request.names=this.registry.registry[e.id].disambig.names.slice())),this.opt["disambiguate-add-givenname"])){this.tmp.disambig_request=this.tmp.disambig_settings,this.tmp.disambig_settings.givens=this.registry.registry[e.id].disambig.givens.slice(),this.tmp.disambig_request.givens=this.registry.registry[e.id].disambig.givens.slice();for(var s=0,a=this.tmp.disambig_settings.givens.length;s<a;s+=1)this.tmp.disambig_settings.givens[s]=this.registry.registry[e.id].disambig.givens[s].slice();for(s=0,a=this.tmp.disambig_request.givens.length;s<a;s+=1)this.tmp.disambig_request.givens[s]=this.registry.registry[e.id].disambig.givens[s].slice()}}else this.tmp.disambig_restore=new Ko.AmbigConfig;this.tmp.names_used=[],this.tmp.nameset_counter=0,this.tmp.years_used=[],this.tmp.names_max.clear(),this.tmp.just_looking||t&&"first"!==t.parallel&&t.parallel||(this.tmp.abbrev_trimmer={QUASHES:{}}),this.tmp.splice_delimiter=this[this.tmp.area].opt.layout_delimiter,this.bibliography_sort.keys=[],this.citation_sort.keys=[],this.tmp.has_done_year_suffix=!1,this.tmp.last_cite_locale=!1,!this.tmp.just_looking&&t&&!t.position&&this.registry.registry[e.id]&&(this.tmp.disambig_restore=Ko.cloneAmbigConfig(this.registry.registry[e.id].disambig)),this.tmp.first_name_string=!1,this.tmp.authority_stop_last=0},Ko.citeEnd=function(e,t){if(this.tmp.disambig_restore&&this.registry.registry[e.id]){this.registry.registry[e.id].disambig.names=this.tmp.disambig_restore.names.slice(),this.registry.registry[e.id].disambig.givens=this.tmp.disambig_restore.givens.slice();for(var i=0,r=this.registry.registry[e.id].disambig.givens.length;i<r;i+=1)this.registry.registry[e.id].disambig.givens[i]=this.tmp.disambig_restore.givens[i].slice()}if(this.tmp.disambig_restore=!1,t&&t.suffix?this.tmp.last_suffix_used=t.suffix:this.tmp.last_suffix_used="",this.tmp.last_years_used=this.tmp.years_used.slice(),this.tmp.last_names_used=this.tmp.names_used.slice(),this.tmp.cut_var=!1,this.tmp.disambig_request=!1,this.tmp.cite_locales.push(this.tmp.last_cite_locale),this.tmp.issued_date&&this.tmp.renders_collection_number){var s=[];for(i=this.tmp.issued_date.list.length-1;i>this.tmp.issued_date.pos;i+=-1)s.push(this.tmp.issued_date.list.pop());for(this.tmp.issued_date.list.pop(),i=s.length-1;i>-1;i+=-1)this.tmp.issued_date.list.push(s.pop())}this.tmp.issued_date=!1,this.tmp.renders_collection_number=!1},Ko.Engine.prototype.makeBibliography=function(e){var t,i,r,s,a,n,o;if(!e&&(this.bibliography.opt.exclude_types||this.bibliography.opt.exclude_with_fields)){if(e={exclude:[]},this.bibliography.opt.exclude_types)for(var l in this.bibliography.opt.exclude_types){var u=this.bibliography.opt.exclude_types[l];e.exclude.push({field:"type",value:u})}if(this.bibliography.opt.exclude_with_fields)for(var l in this.bibliography.opt.exclude_with_fields){var c=this.bibliography.opt.exclude_with_fields[l];e.exclude.push({field:c,value:!0})}}if(!this.bibliography.tokens.length)return!1;"string"==typeof e&&(this.opt.citation_number_slug=e,e=!1),n=(t=Ko.getBibliographyEntries.call(this,e))[0],o=t[1];var p=t[2];for(i={maxoffset:0,entryspacing:this.bibliography.opt["entry-spacing"],linespacing:this.bibliography.opt["line-spacing"],"second-field-align":!1,entry_ids:n,bibliography_errors:this.tmp.bibliography_errors.slice(),done:p},this.bibliography.opt["second-field-align"]&&(i["second-field-align"]=this.bibliography.opt["second-field-align"]),s=this.registry.reflist.length,a=0;a<s;a+=1)(r=this.registry.reflist[a]).offset>i.maxoffset&&(i.maxoffset=r.offset);return this.bibliography.opt.hangingindent&&(i.hangingindent=this.bibliography.opt.hangingindent),i.bibstart=this.fun.decorate.bibstart,i.bibend=this.fun.decorate.bibend,this.opt.citation_number_slug=!1,[i,o]},Ko.getBibliographyEntries=function(e){var t,i,r,s,a,n,o,l,u,c,p,h,m,f,d,g,b,y,v,_;function x(e,t){return e===t}function w(e,t){return"boolean"!=typeof e&&e?"string"==typeof t?x(e,t):!!t&&function(e,t){for(c=t.length,p=0;p<c;p+=1)if(x(e,t[p]))return!0;return!1}(e,t):e?!!t:!t}if(t=[],v=[],this.tmp.area="bibliography",this.tmp.root="bibliography",this.tmp.last_rendered_name=!1,this.tmp.bibliography_errors=[],this.tmp.bibliography_pos=0,i=e&&e.page_start&&e.page_length?this.registry.getSortedIds():this.refetchItems(this.registry.getSortedIds()),this.tmp.disambig_override=!0,b={},e&&e.page_start&&e.page_length&&(_=0,!0!==e.page_start))for(f=0,d=i.length;f<d&&(b[i[f]]=!0,e.page_start!=i[f]);f+=1);var E=[],A={};for(this.tmp.container_item_count={},i=i.filter(e=>{var t=e;return e.legislation_id?A[e.legislation_id]?t=!1:A[e.legislation_id]=!0:e.container_id&&(this.tmp.container_item_count[e.container_id]||(this.tmp.container_item_count[e.container_id]=0),this.tmp.container_item_count[e.container_id]++,this.bibliography.opt.consolidate_containers.indexOf(e.type)>-1&&(A[e.container_id]?t=!1:A[e.container_id]=!0)),t}),this.tmp.container_item_pos={},f=0,d=i.length;f<d;f+=1){if(e&&e.page_start&&e.page_length){if(b[i[f]])continue;if(l=this.refetchItem(i[f]),_===e.page_length)break}else if(b[(l=i[f]).id])continue;if(e){if(r=!0,e.include){for(r=!1,T=0,S=e.include.length;T<S;T+=1)if(w((u=e.include[T]).value,l[u.field])){r=!0;break}}else if(e.exclude){for(s=!1,T=0,S=e.exclude.length;T<S;T+=1)if(w((u=e.exclude[T]).value,l[u.field])){s=!0;break}s&&(r=!1)}else if(e.select){for(r=!1,a=!0,T=0,S=e.select.length;T<S;T+=1)w((u=e.select[T]).value,l[u.field])||(a=!1);a&&(r=!0)}if(e.quash){for(a=!0,T=0,S=e.quash.length;T<S;T+=1)w((u=e.quash[T]).value,l[u.field])||(a=!1);a&&(r=!1)}if(!r)continue}if(l.container_id&&(this.tmp.container_item_pos[l.container_id]||(this.tmp.container_item_pos[l.container_id]=0),this.tmp.container_item_pos[l.container_id]++),(n=new Ko.Token("group",Ko.START)).decorations=[["@bibliography","entry"]].concat(this.bibliography.opt.layout_decorations),this.output.startTag("bib_entry",n),l.system_id&&this.sys.embedBibliographyEntry?this.output.current.value().item_id=l.system_id:this.output.current.value().system_id=l.id,m=[],!this.registry.registry[l.id].master||e&&e.page_start&&e.page_length)this.registry.registry[l.id].siblings||(this.tmp.term_predecessor=!1,this.tmp.cite_index=0,m.push(""+Ko.getCite.call(this,l)),e&&e.page_start&&e.page_length&&(_+=1));else{y=[[l,{id:l.id}]];for(var T=0,S=(g=this.registry.registry[l.id].siblings).length;T<S;T++)y.push([this.refetchItem(g[T]),{id:g[T]}]);for(this.parallel.StartCitation(y),this.registry.registry[l.id].parallel_delimiter_override?this.output.queue[0].strings.delimiter=this.registry.registry[l.id].parallel_delimiter_override:this.output.queue[0].strings.delimiter=", ",this.tmp.term_predecessor=!1,this.tmp.cite_index=0,T=0,S=y.length;T<S;T+=1)T<y.length-1?this.tmp.parallel_and_not_last=!0:delete this.tmp.parallel_and_not_last,m.push(""+Ko.getCite.call(this,y[T][0],y[T][1])),this.tmp.cite_index++,b[y[T][0].id]=!0}for(v.push(""),this.tmp.bibliography_pos+=1,E.push(m),this.output.endTag("bib_entry"),this.output.queue[0].blobs.length&&this.output.queue[0].blobs[0].blobs.length&&((h=this.output.queue[0].blobs[0].blobs[0].strings?this.output.queue[0].blobs[0].blobs:this.output.queue[0].blobs)[0].strings.prefix=this.bibliography.opt.layout_prefix+h[0].strings.prefix),T=0,S=this.output.queue.length;T<S;T+=1)Ko.Output.Queue.purgeEmptyBlobs(this.output.queue[T]);for(T=0,S=this.output.queue.length;T<S;T+=1)this.output.adjust.upward(this.output.queue[T]),this.output.adjust.leftward(this.output.queue[T]),this.output.adjust.downward(this.output.queue[T],!0),this.output.adjust.fix(this.output.queue[T]);if(!(o=this.output.string(this,this.output.queue)[0])&&this.opt.update_mode===Ko.NUMERIC){var O=t.length+1+". [CSL STYLE ERROR: reference with no printed form.]";o=Ko.Output.Formats[this.opt.mode]["@bibliography/entry"](this,O)}o&&t.push(o)}var Q=!1;if(e&&e.page_start&&e.page_length){var k=i.slice(-1)[0],C=E.slice(-1)[0];k&&C&&k!=C||(Q=!0)}return this.tmp.disambig_override=!1,[E,t,Q]},Ko.Engine.prototype.setCitationId=function(e,t){var i,r,s;if(i=!1,!e.citationID||t){for(r=Math.floor(1e14*Math.random());;){if(s=0,!this.registry.citationreg.citationById[r]){e.citationID="a"+r.toString(32);break}r+=1==(s=!s&&r<5e13?1:-1)?1:-1}i=""+r}return this.registry.citationreg.citationById[e.citationID]=e,i},Ko.Engine.prototype.rebuildProcessorState=function(e,t,i){e||(e=[]),t||(t="html");for(var r={},s=[],a=0,n=e.length;a<n;a+=1)for(var o=0,l=e[a].citationItems.length;o<l;o+=1){var u=""+e[a].citationItems[o].id;r[u]||s.push(u),r[u]=!0}this.updateItems(s);var c=[],p=[],h=[],m=this.opt.mode;for(this.setOutputFormat(t),a=0,n=e.length;a<n;a+=1){var f=this.processCitationCluster(e[a],c,p,Ko.ASSUME_ALL_ITEMS_REGISTERED);for(c.push([e[a].citationID,e[a].properties.noteIndex]),o=0,l=f[1].length;o<l;o+=1){var d=f[1][o][0];h[d]=[c[d][0],c[d][1],f[1][o][1]]}}return this.updateUncitedItems(i),this.setOutputFormat(m),h},Ko.Engine.prototype.restoreProcessorState=function(e){var t,i,r,s,a,n,o,l,u,c;l=[],u=[],e||(e=[]);var p=[],h={};for(t=0,i=e.length;t<i;t+=1)h[e[t].citationID]&&this.setCitationId(e[t],!0),h[e[t].citationID]=!0,p.push(e[t].properties.index);var m=e.slice();for(m.sort((function(e,t){return e.properties.index<t.properties.index?-1:e.properties.index>t.properties.index?1:0})),t=0,i=m.length;t<i;t+=1)m[t].properties.index=t;for(t=0,i=m.length;t<i;t+=1){for(c=[],r=0,s=m[t].citationItems.length;r<s;r+=1)void 0===(a=m[t].citationItems[r]).sortkeys&&(a.sortkeys=[]),o=[n=this.retrieveItem(""+a.id),a],c.push(o),m[t].citationItems[r].item=n,u.push(""+a.id);m[t].properties.unsorted||c.sort(this.citation.srt.compareCompositeKeys),m[t].sortedItems=c,this.registry.citationreg.citationById[m[t].citationID]=m[t]}for(this.updateItems(u),t=0,i=e.length;t<i;t+=1)l.push([""+e[t].citationID,e[t].properties.noteIndex]);var f=[];return e&&e.length?f=this.processCitationCluster(e[0],[],l.slice(1)):(this.registry=new Ko.Registry(this),this.tmp=new Ko.Engine.Tmp,this.disambiguate=new Ko.Disambiguation(this)),f},Ko.Engine.prototype.updateItems=function(e,t,i,r){var s=this.tmp.area,a=this.tmp.root,n=this.tmp.extension;if(0===this.bibliography_sort.tokens.length&&(t=!0),this.tmp.area="citation",this.tmp.root="citation",this.tmp.extension="",r||(this.tmp.loadedItemIDs={}),this.registry.init(e),i)for(var o in this.registry.ambigcites)this.registry.ambigsTouched[o]=!0;return this.registry.dodeletes(this.registry.myhash),this.registry.doinserts(this.registry.mylist),this.registry.dorefreshes(),this.registry.rebuildlist(t),this.registry.setsortkeys(),this.registry.setdisambigs(),this.registry.sorttokens(t),this.registry.renumber(),this.tmp.extension=n,this.tmp.area=s,this.tmp.root=a,this.registry.getSortedIds()},Ko.Engine.prototype.updateUncitedItems=function(e,t){var i,r=this.tmp.area,s=this.tmp.root,a=this.tmp.extension;if(0===this.bibliography_sort.tokens.length&&(t=!0),this.tmp.area="citation",this.tmp.root="citation",this.tmp.extension="",this.tmp.loadedItemIDs={},e||(e=[]),"object"==typeof e)if(void 0===e.length)for(var n in i=e,e=[],i)e.push(n);else if("number"==typeof e.length){i={};for(var o=0,l=e.length;o<l;o+=1)i[e[o]]=!0}return this.registry.init(e,!0),this.registry.dopurge(i),this.registry.doinserts(this.registry.mylist),this.registry.dorefreshes(),this.registry.rebuildlist(t),this.registry.setsortkeys(),this.registry.setdisambigs(),this.registry.sorttokens(t),this.registry.renumber(),this.tmp.extension=a,this.tmp.area=r,this.tmp.root=s,this.registry.getSortedIds()},Ko.localeResolve=function(e,t){var i,r;return t||(t="en-US"),e||(e=t),i={},r=e.split(/[\-_]/),i.base=Ko.LANG_BASES[r[0]],void 0===i.base?{base:t,best:e,bare:r[0]}:(1===r.length&&(i.generic=!0),1===r.length||"x"===r[1]?i.best=i.base.replace("_","-"):i.best=r.slice(0,2).join("-"),i.base=i.base.replace("_","-"),i.bare=r[0],i)},Ko.Engine.prototype.localeConfigure=function(e,t){var i;if((!t||!this.locale[e.best])&&("en-US"===e.best?(i=Ko.setupXml(this.sys.retrieveLocale("en-US")),this.localeSet(i,"en-US",e.best)):"en-US"!==e.best&&(e.base!==e.best&&(i=Ko.setupXml(this.sys.retrieveLocale(e.base)),this.localeSet(i,e.base,e.best)),i=Ko.setupXml(this.sys.retrieveLocale(e.best)),this.localeSet(i,e.best,e.best)),this.localeSet(this.cslXml,"",e.best),this.localeSet(this.cslXml,e.bare,e.best),e.base!==e.best&&this.localeSet(this.cslXml,e.base,e.best),this.localeSet(this.cslXml,e.best,e.best),void 0===this.locale[e.best].terms["page-range-delimiter"]&&(["fr","pt"].indexOf(e.best.slice(0,2).toLowerCase())>-1?this.locale[e.best].terms["page-range-delimiter"]="-":this.locale[e.best].terms["page-range-delimiter"]="\u2013"),void 0===this.locale[e.best].terms["year-range-delimiter"]&&(this.locale[e.best].terms["year-range-delimiter"]="\u2013"),void 0===this.locale[e.best].terms["citation-range-delimiter"]&&(this.locale[e.best].terms["citation-range-delimiter"]="\u2013"),this.opt.development_extensions.normalize_lang_keys_to_lowercase)){for(var r=["default-locale","locale-sort","locale-translit","locale-translat"],s=0,a=r.length;s<a;s+=1)for(var n=0,o=this.opt[r[s]].length;n<o;n+=1)this.opt[r[s]][n]=this.opt[r[s]][n].toLowerCase();this.opt.lang=this.opt.lang.toLowerCase()}},Ko.Engine.prototype.localeSet=function(e,t,i){var r,s,a,n,o,l,u,c,p,h,m,f;if(t=t.replace("_","-"),i=i.replace("_","-"),this.opt.development_extensions.normalize_lang_keys_to_lowercase&&(t=t.toLowerCase(),i=i.toLowerCase()),this.locale[i]||(this.locale[i]={},this.locale[i].terms={},this.locale[i].opts={},this.locale[i].opts["skip-words"]=Ko.SKIP_WORDS,this.locale[i].opts["leading-noise-words"]||(this.locale[i].opts["leading-noise-words"]=[]),this.locale[i].dates={},this.locale[i].ord={"1.0.1":!1,keys:{}},this.locale[i]["noun-genders"]={}),s=e.makeXml(),e.nodeNameIs(e.dataObj,"locale"))s=e.dataObj;else{a=e.getNodesByName(e.dataObj,"locale");var d=!1;for(o=0,m=e.numberofnodes(a);o<m;o+=1)if(r=a[o],d||e.getAttributeValue(r,"lang","xml")!==t){var g=e.getAttributeValue(r,"lang","xml"),b=e.getNodesByName(r,"style-options");if(g&&b&&b.length){var y=e.getAttributeValue(b[0],"jurisdiction-preference");y&&(this.locale[g]||(this.locale[g]={opts:{}}),this.locale[g].opts["jurisdiction-preference"]=y.split(/\s+/))}}else s=r,d=!0}for(a=e.getNodesByName(s,"type"),j=0,L=e.numberofnodes(a);j<L;j+=1){var v=a[j],_=e.getAttributeValue(v,"name"),x=e.getAttributeValue(v,"gender");this.opt.gender[_]=x}if(e.getNodesByName(s,"term","ordinal").length){for(var w in this.locale[i].ord.keys)delete this.locale[i].terms[w];this.locale[i].ord={"1.0.1":!1,keys:{}}}a=e.getNodesByName(s,"term");var E={"last-digit":{},"last-two-digits":{},"whole-number":{}},A=!1,T={};for(o=0,m=e.numberofnodes(a);o<m;o+=1){if(l=a[o],"sub verbo"===(c=e.getAttributeValue(l,"name"))&&(c="sub-verbo"),"ordinal"===c.slice(0,7)){if("ordinal"===c)A=!0;else{var S,O=e.getAttributeValue(l,"match"),Q=c.slice(8);(S=e.getAttributeValue(l,"gender-form"))||(S="neuter"),O||(O="last-two-digits","0"===Q.slice(0,1)&&(O="last-digit")),"0"===Q.slice(0,1)&&(Q=Q.slice(1)),E[O][Q]||(E[O][Q]={}),E[O][Q][S]=c}this.locale[i].ord.keys[c]=!0}void 0===this.locale[i].terms[c]&&(this.locale[i].terms[c]={}),u="long",S=!1,e.getAttributeValue(l,"form")&&(u=e.getAttributeValue(l,"form")),e.getAttributeValue(l,"gender-form")&&(S=e.getAttributeValue(l,"gender-form")),e.getAttributeValue(l,"gender")&&(this.locale[i]["noun-genders"][c]=e.getAttributeValue(l,"gender")),S?(this.locale[i].terms[c][S]={},this.locale[i].terms[c][S][u]=[],f=this.locale[i].terms[c][S],T[c]=!0):(this.locale[i].terms[c][u]=[],f=this.locale[i].terms[c]),e.numberofnodes(e.getNodesByName(l,"multiple"))?(f[u][0]=e.getNodeValue(l,"single"),f[u][0].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0),f[u][1]=e.getNodeValue(l,"multiple"),f[u][1].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0)):(f[u]=e.getNodeValue(l),f[u].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0))}if(this.locale[i].terms.supplement||(this.locale[i].terms.supplement={}),this.locale[i].terms.supplement.long||(this.locale[i].terms.supplement.long=["supplement","supplements"]),A){for(var k in T){var C={},I=0;for(var N in this.locale[i].terms[k])["masculine","feminine"].indexOf(N)>-1?C[N]=this.locale[i].terms[k][N]:I+=1;if(!I)if(C.feminine)for(var N in C.feminine)this.locale[i].terms[k][N]=C.feminine[N];else if(C.masculine)for(var N in C.masculine)this.locale[i].terms[k][N]=C.masculine[N]}this.locale[i].ord["1.0.1"]=E}for(c in this.locale[i].terms)for(j=0,L=2;j<L;j+=1)if(S=Ko.GENDERS[j],this.locale[i].terms[c][S])for(u in this.locale[i].terms[c])this.locale[i].terms[c][S][u]||(this.locale[i].terms[c][S][u]=this.locale[i].terms[c][u]);for(a=e.getNodesByName(s,"style-options"),o=0,m=e.numberofnodes(a);o<m;o+=1)for(h in p=a[o],n=e.attributes(p))if(n.hasOwnProperty(h))if("@punctuation-in-quote"===h||"@limit-day-ordinals-to-day-1"===h)"true"===n[h]?this.locale[i].opts[h.slice(1)]=!0:this.locale[i].opts[h.slice(1)]=!1;else if("@jurisdiction-preference"===h){var R=n[h].split(/\s+/);this.locale[i].opts[h.slice(1)]=R}else if("@skip-words"===h){var P=n[h].split(/\s*,\s*/);this.locale[i].opts[h.slice(1)]=P}else if("@leading-noise-words"===h){var D=n[h].split(/\s*,\s*/);this.locale[i].opts["leading-noise-words"]=D}else if("@name-as-sort-order"===h){this.locale[i].opts["name-as-sort-order"]={};for(var j=0,L=(M=n[h].split(/\s+/)).length;j<L;j+=1)this.locale[i].opts["name-as-sort-order"][M[j]]=!0}else if("@name-as-reverse-order"===h)for(this.locale[i].opts["name-as-reverse-order"]={},j=0,L=(M=n[h].split(/\s+/)).length;j<L;j+=1)this.locale[i].opts["name-as-reverse-order"][M[j]]=!0;else if("@name-never-short"===h){var M;for(this.locale[i].opts["name-never-short"]={},j=0,L=(M=n[h].split(/\s+/)).length;j<L;j+=1)this.locale[i].opts["name-never-short"][M[j]]=!0}for(a=e.getNodesByName(s,"date"),o=0,m=e.numberofnodes(a);o<m;o+=1){var B=a[o];this.locale[i].dates[e.getAttributeValue(B,"form")]=B}Ko.SET_COURT_CLASSES(this,i,e,s)},Ko.getLocaleNames=function(e,t){var i=Ko.setupXml(e);function r(e,t){var i=["base","best"];if(t)for(var r=Ko.localeResolve(t),s=0,a=i.length;s<a;s++)r[i[s]]&&-1===e.indexOf(r[i[s]])&&e.push(r[i[s]])}var s=["en-US"];function a(e){for(var t=i.getNodesByName(i.dataObj,e),r=0,a=t.length;r<a;r++){var n=i.getAttributeValue(t[r],"locale");if(n)for(var o=0,l=(n=n.split(/ +/)).length;o<l;o++)this.extendLocaleList(s,n[o])}}r(s,t);var n=i.getNodesByName(i.dataObj,"style")[0],o=i.getAttributeValue(n,"default-locale");r(s,o);for(var l=0,u=["layout","if","else-if","condition"].length;l<u;l++)a(i);return s},Ko.Node={},Ko.Node.bibliography={build:function(e,t){this.tokentype===Ko.START&&(e.build.area="bibliography",e.build.root="bibliography",e.build.extension="",this.execs.push((function(e){e.tmp.area="bibliography",e.tmp.root="bibliography",e.tmp.extension=""}))),t.push(this)}},Ko.Node.choose={build:function(e,t){var i;this.tokentype===Ko.START&&(i=function(e){e.tmp.jump.push(void 0,Ko.LITERAL)}),this.tokentype===Ko.END&&(i=function(e){e.tmp.jump.pop()}),this.execs.push(i),t.push(this)},configure:function(e,t){this.tokentype===Ko.END?(e.configure.fail.push(t),e.configure.succeed.push(t)):(e.configure.fail.pop(),e.configure.succeed.pop())}},Ko.Node.citation={build:function(e,t){if(this.tokentype===Ko.START&&(e.build.area="citation",e.build.root="citation",e.build.extension="",this.execs.push((function(e){e.tmp.area="citation",e.tmp.root="citation",e.tmp.extension=""}))),this.tokentype===Ko.END){if(e.opt.grouped_sort="in-text"===e.opt.xclass&&e.citation.opt.collapse&&e.citation.opt.collapse.length||e.citation.opt.cite_group_delimiter&&e.citation.opt.cite_group_delimiter.length&&e.opt.update_mode!==Ko.POSITION&&e.opt.update_mode!==Ko.NUMERIC,e.opt.grouped_sort&&e.citation_sort.opt.sort_directions.length){var i=e.citation_sort.opt.sort_directions[0].slice();e.citation_sort.opt.sort_directions=[i].concat(e.citation_sort.opt.sort_directions)}e.citation.srt=new Ko.Registry.Comparifier(e,"citation_sort")}t.push(this)}},Ko.Node["#comment"]={build:function(){}},Ko.Node.date={build:function(e,t){var i,r,s,a,n,o,l,u,c,p;this.tokentype!==Ko.START&&this.tokentype!==Ko.SINGLETON||(e.dateput.string(e,e.dateput.queue),e.tmp.date_token=Ko.Util.cloneToken(this),e.tmp.date_token.strings.prefix="",e.tmp.date_token.strings.suffix="",e.dateput.openLevel(this),e.build.date_parts=[],e.build.date_variables=this.variables,e.build.extension||Ko.Util.substituteStart.call(this,e,t),i=e.build.extension?Ko.dateMacroAsSortKey:function(e,t,i){var h;if(e.tmp.element_rendered_ok=!1,e.tmp.donesies=[],e.tmp.dateparts=[],h=[],!this.variables.length||e.tmp.just_looking&&"accessed"===this.variables[0])e.tmp.date_object=!1;else{for(void 0===(r=t[this.variables[0]])&&(r={"date-parts":[[0]]},e.opt.development_extensions.locator_date_and_revision&&i&&"locator-date"===this.variables[0]&&i["locator-date"]&&(r=i["locator-date"])),e.tmp.date_object=r,s=this.dateparts.length,a=0;a<s;a+=1)n=this.dateparts[a],(void 0!==e.tmp.date_object[n+"_end"]||"month"===n&&void 0!==e.tmp.date_object.season_end)&&h.push(n);for(o=[],s=(l=["year","month","day"]).length,a=0;a<s;a+=1)h.indexOf(l[a])>-1&&o.push(l[a]);for(h=o.slice(),u=2,s=h.length,a=0;a<s;a+=1)if(n=h[a],c=e.tmp.date_object[n],p=e.tmp.date_object[n+"_end"],c!==p){u=a;break}e.tmp.date_collapse_at=h.slice(u)}},this.execs.push(i),i=function(e,t){if(t[this.variables[0]]&&(e.output.startTag("date",this),"issued"===this.variables[0]&&("legal_case"===t.type||"legislation"===t.type)&&-1===e.opt.disable_duplicate_year_suppression.indexOf(t.country)&&!e.tmp.extension&&""+t["collection-number"]==""+e.tmp.date_object.year&&1===this.dateparts.length&&"year"===this.dateparts[0]))for(var i in e.tmp.date_object)if(e.tmp.date_object.hasOwnProperty(i)&&"year"===i.slice(0,4)){e.tmp.issued_date={};var r=e.output.current.mystack.slice(-2)[0].blobs;e.tmp.issued_date.list=r,e.tmp.issued_date.pos=r.length-1}},this.execs.push(i)),e.build.extension||this.tokentype!==Ko.END&&this.tokentype!==Ko.SINGLETON||(i=function(e,t){t[this.variables[0]]&&e.output.endTag()},this.execs.push(i)),t.push(this),this.tokentype!==Ko.END&&this.tokentype!==Ko.SINGLETON||e.build.extension||Ko.Util.substituteEnd.call(this,e,t)}},Ko.Node["date-part"]={build:function(e,t){var i,r,s,a,n,o,l,u,c,p,h,m,f,d,g,b,y,v,_;this.strings.form||(this.strings.form="long"),e.build.date_parts.push(this.strings.name);var x=e.build.date_variables[0];function w(t,i,r){if(!r)return r;if(r=""+Ko.Util.Dates[this.strings.name][t](e,r,i,this.default_locale),"month"===this.strings.name)if(e.tmp.strip_periods)r=r.replace(/\./g,"");else for(var s=0,a=this.decorations.length;s<a;s+=1)if("@strip-periods"===this.decorations[s][0]&&"true"===this.decorations[s][1]){r=r.replace(/\./g,"");break}return r}i=function(e,t){if(e.tmp.date_object){e.tmp.probably_rendered_something=!0;var i="";if(a=!0,n="",o="",e.tmp.donesies.push(this.strings.name),e.tmp.date_object.literal&&"year"===this.strings.name&&(i=e.tmp.date_object.literal,e.output.append(e.tmp.date_object.literal,this)),e.tmp.date_object&&(n=e.tmp.date_object[this.strings.name],o=e.tmp.date_object[this.strings.name+"_end"]),"year"!==this.strings.name||0!==n||e.tmp.suppress_decorations||(n=!1),l=!e.tmp.suppress_decorations,u=e.tmp.have_collapsed,c="year-suffix"===e[e.tmp.area].opt.collapse||"year-suffix-ranged"===e[e.tmp.area].opt.collapse,p=e.opt["disambiguate-add-year-suffix"],l&&p&&c&&(e.tmp.years_used.push(n),e.tmp.last_years_used.length>=e.tmp.years_used.length&&u&&e.tmp.last_years_used[e.tmp.years_used.length-1]===n&&(n=!1)),void 0!==n){h=!1,m=!1,"year"===this.strings.name&&(parseInt(n,10)<500&&parseInt(n,10)>0&&(m=e.getTerm("ad")),parseInt(n,10)<0&&(h=e.getTerm("bc"),n=-1*parseInt(n,10)),o&&(parseInt(o,10)<500&&parseInt(o,10)>0&&e.getTerm("ad"),parseInt(o,10)<0&&(e.getTerm("bc"),o=-1*parseInt(o,10))));for(var E=""+e.tmp.date_object.month;E.length<2;)E="0"+E;E="month-"+E;var A=e.locale[e.opt.lang]["noun-genders"][E];if(this.strings.form){var T=this.strings.form,S=this.strings.form;"day"===this.strings.name&&"ordinal"===T&&e.locale[e.opt.lang].opts["limit-day-ordinals-to-day-1"]&&(1!=n&&(T="numeric"),1!=o&&(S="numeric")),n=w.call(this,T,A,n),o=w.call(this,S,A,o)}if(e.output.openLevel("empty"),e.tmp.date_collapse_at.length){for(f=!0,s=e.tmp.date_collapse_at.length,r=0;r<s;r+=1)if(_=e.tmp.date_collapse_at[r],-1===e.tmp.donesies.indexOf(_)){f=!1;break}if(f){if(""+o!="0"){if(0===e.dateput.queue.length&&(a=!0),e.opt["year-range-format"]&&"expanded"!==e.opt["year-range-format"]&&!e.tmp.date_object.day&&!e.tmp.date_object.month&&!e.tmp.date_object.season&&"year"===this.strings.name&&n&&o){o=e.fun.year_mangler(n+"-"+o,!0);var O=e.getTerm("year-range-delimiter");o=o.slice(o.indexOf(O)+1)}i=o,e.dateput.append(o,this),a&&(e.dateput.current.value().blobs[0].strings.prefix="")}i=n,e.output.append(n,this),(d=e.output.current.value()).blobs[d.blobs.length-1].strings.suffix="",this.strings["range-delimiter"]?e.output.append(this.strings["range-delimiter"]):e.output.append(e.getTerm("year-range-delimiter"),"empty"),e.dateput.closeLevel(),g=e.dateput.current.value(),d.blobs=d.blobs.concat(g),e.dateput.string(e,e.dateput.queue),e.dateput.openLevel(e.tmp.date_token),e.tmp.date_collapse_at=[]}else i=n,e.output.append(n,this),e.tmp.date_collapse_at.indexOf(this.strings.name)>-1&&""+o!="0"&&(0===e.dateput.queue.length&&(a=!0),e.dateput.openLevel("empty"),i=o,e.dateput.append(o,this),a&&(e.dateput.current.value().blobs[0].strings.prefix=""),h&&(i=h,e.dateput.append(h)),m&&(i=m,e.dateput.append(m)),e.dateput.closeLevel())}else i=n,e.output.append(n,this);h&&(i=h,e.output.append(h)),m&&(i=m,e.output.append(m)),e.output.closeLevel()}else"month"===this.strings.name&&e.tmp.date_object.season&&((n=""+e.tmp.date_object.season)&&n.match(/^[1-4]$/)?(e.tmp.group_context.tip.variable_success=!0,i="winter",e.output.append(e.getTerm("season-0"+n),this)):n&&(i=n,e.output.append(n,this)));e.tmp.value=[],!t[x]||!n&&!e.tmp.have_collapsed||e.opt.has_year_suffix||"year"!==this.strings.name||e.tmp.just_looking||e.registry.registry[t.id]&&!1!==e.registry.registry[t.id].disambig.year_suffix&&!e.tmp.has_done_year_suffix&&(e.tmp.has_done_year_suffix=!0,i="x",y=parseInt(e.registry.registry[t.id].disambig.year_suffix,10),b=new Ko.NumericBlob(!1,y,this,t.id),this.successor_prefix=e[e.build.area].opt.layout_delimiter,this.splice_prefix=e[e.build.area].opt.layout_delimiter,v=new Ko.Util.Suffixator(Ko.SUFFIX_CHARS),b.setFormatter(v),"year-suffix-ranged"===e[e.tmp.area].opt.collapse&&(b.range_prefix=e.getTerm("citation-range-delimiter")),e[e.tmp.area].opt.cite_group_delimiter?b.successor_prefix=e[e.tmp.area].opt.cite_group_delimiter:e[e.tmp.area].opt["year-suffix-delimiter"]?b.successor_prefix=e[e.tmp.area].opt["year-suffix-delimiter"]:b.successor_prefix=e[e.tmp.area].opt.layout_delimiter,b.UGLY_DELIMITER_SUPPRESS_HACK=!0,e.output.append(b,"literal")),i&&!e.tmp.group_context.tip.condition&&(e.tmp.just_did_number=i.match(/[0-9]$/),e.output.current.tip.strings.suffix&&(e.tmp.just_did_number=!1))}},this.execs.push(i),t.push(this)}},Ko.Node["else-if"]={build:function(e,t){Ko.Conditions.TopNode.call(this,e,t),t.push(this)},configure:function(e,t){Ko.Conditions.Configure.call(this,e,t)}},Ko.Node.else={build:function(e,t){t.push(this)},configure:function(e,t){this.tokentype===Ko.START&&(e.configure.fail[e.configure.fail.length-1]=t)}},Ko.Node["et-al"]={build:function(e,t){"citation"!==e.build.area&&"bibliography"!==e.build.area||this.execs.push((function(e){e.tmp.etal_node=this,"string"==typeof this.strings.term&&(e.tmp.etal_term=this.strings.term)})),t.push(this)}},Ko.Node.group={build:function(e,t,i){var r,s,a;if(this.realGroup=i,this.tokentype===Ko.START&&(Ko.Util.substituteStart.call(this,e,t),e.build.substitute_level.value()&&e.build.substitute_level.replace(e.build.substitute_level.value()+1),this.juris||t.push(this),(s=[]).push(r=function(e){if(e.output.startTag("group",this),this.strings.label_form_override&&(e.tmp.group_context.tip.label_form||(e.tmp.group_context.tip.label_form=this.strings.label_form_override)),this.strings.label_capitalize_if_first_override&&(e.tmp.group_context.tip.label_capitalize_if_first||(e.tmp.group_context.tip.label_capitalize_if_first=this.strings.label_capitalize_if_first_override)),this.realGroup){e.tmp.group_context.tip.condition&&Ko.UPDATE_GROUP_CONTEXT_CONDITION(e,this.strings.prefix,null,this);var t=!1,i=!1;e.tmp.group_context.mystack.length&&(e.output.current.value().parent=e.tmp.group_context.tip.output_tip);var r=e.tmp.group_context.tip.label_form;r||(r=this.strings.label_form_override);var s=e.tmp.group_context.tip.label_capitalize_if_first;s||(s=this.strings.label_capitalize_if_first),e.tmp.group_context.tip.condition?(t=e.tmp.group_context.tip.condition,i=e.tmp.group_context.tip.force_suppress):this.strings.reject?t={test:this.strings.reject,not:!0}:this.strings.require&&(t={test:this.strings.require,not:!1});var a={old_term_predecessor:e.tmp.term_predecessor,term_intended:!1,variable_attempt:!1,variable_success:!1,variable_success_parent:e.tmp.group_context.tip.variable_success,output_tip:e.output.current.tip,label_form:r,label_static:e.tmp.group_context.tip.label_static,label_capitalize_if_first:s,parallel_delimiter_override:this.strings.set_parallel_delimiter_override,parallel_delimiter_override_on_suppress:this.strings.set_parallel_delimiter_override_on_suppress,condition:t,force_suppress:i,done_vars:e.tmp.group_context.tip.done_vars.slice()};if(this.non_parallel){var n=e.tmp.group_context.tip.non_parallel;n||(n={}),Object.assign(n,this.non_parallel),a.non_parallel=n}if(this.parallel_first){var o=e.tmp.group_context.tip.parallel_first;o||(o={}),Object.assign(o,this.parallel_first),a.parallel_first=o}if(this.parallel_last){var l=e.tmp.group_context.tip.parallel_last;l||(l={}),Object.assign(l,this.parallel_last),a.parallel_last=l}if(e.tmp.abbrev_trimmer&&e.tmp.abbrev_trimmer.LAST_TO_FIRST&&a.parallel_last)for(var u in a.parallel_first||(a.parallel_first={}),e.tmp.abbrev_trimmer.LAST_TO_FIRST)a.parallel_last[u]&&(a.parallel_first[u]=!0,delete a.parallel_last[u]);if(e.tmp.group_context.push(a),e.tmp.abbrev_trimmer&&this.parallel_last_to_first)for(var u in e.tmp.abbrev_trimmer.LAST_TO_FIRST||(e.tmp.abbrev_trimmer.LAST_TO_FIRST={}),this.parallel_last_to_first)e.tmp.abbrev_trimmer.LAST_TO_FIRST[u]=!0}}),this.execs=s.concat(this.execs),this.strings["has-publisher-and-publisher-place"]&&(e.build["publisher-special"]=!0,this.strings["subgroup-delimiter"]&&(r=function(e,t){if(t.publisher&&t["publisher-place"]){var i=t.publisher.split(/;\s*/),r=t["publisher-place"].split(/;\s*/);i.length>1&&i.length===r.length&&(e.publisherOutput=new Ko.PublisherOutput(e,this),e.publisherOutput["publisher-list"]=i,e.publisherOutput["publisher-place-list"]=r)}},this.execs.push(r))),this.juris)){var n=new Ko.Token("choose",Ko.START);Ko.Node.choose.build.call(n,e,t);var o=new Ko.Token("if",Ko.START);a=this.juris,r=function(t,i){return Ko.INIT_JURISDICTION_MACROS(e,t,i,a)},o.tests||(o.tests=[]),o.tests.push(r),o.test=e.fun.match.any(o,e,o.tests),t.push(o);var l=new Ko.Token("text",Ko.SINGLETON);r=function(e,t,i){var r=t;i&&i["best-jurisdiction"]&&"juris-locator"===this.juris&&(r=i);var s=0;if(e.juris[r["best-jurisdiction"]][this.juris])for(;s<e.juris[r["best-jurisdiction"]][this.juris].length;)s=Ko.tokenExec.call(e,e.juris[r["best-jurisdiction"]][this.juris][s],t,i)},l.juris=this.juris,l.execs.push(r),t.push(l);var u=new Ko.Token("if",Ko.END);Ko.Node.if.build.call(u,e,t);var c=new Ko.Token("else",Ko.START);Ko.Node.else.build.call(c,e,t)}if(this.tokentype===Ko.END&&(e.build["publisher-special"]&&(e.build["publisher-special"]=!1,r=function(e){e.publisherOutput&&(e.publisherOutput.render(),e.publisherOutput=!1)},this.execs.push(r)),r=function(e,t,i){if(e.tmp.group_context.tip.condition||e.output.current.tip.strings.suffix&&(e.tmp.just_did_number=!1),e.output.endTag(),this.realGroup){var r=e.tmp.group_context.pop();if(r.parallel_delimiter_override&&(e.tmp.group_context.tip.parallel_delimiter_override=r.parallel_delimiter_override,!e.tmp.just_looking&&e.registry.registry[t.id].master&&(e.registry.registry[t.id].parallel_delimiter_override=r.parallel_delimiter_override)),r.parallel_delimiter_override_on_suppress&&(e.tmp.group_context.tip.parallel_delimiter_override_on_suppress=r.parallel_delimiter_override_on_suppress),"bibliography_sort"===e.tmp.area){var s=r.done_vars.indexOf("citation-number");this.strings.sort_direction&&s>-1&&1==e.tmp.group_context.length()&&(this.strings.sort_direction===Ko.DESCENDING?e.bibliography_sort.opt.citation_number_sort_direction=Ko.DESCENDING:e.bibliography_sort.opt.citation_number_sort_direction=Ko.ASCENDING,r.done_vars=r.done_vars.slice(0,s).concat(r.done_vars.slice(s+1)))}if(r.condition&&(r.force_suppress=Ko.EVALUATE_GROUP_CONDITION(e,r)),e.tmp.group_context.tip.condition&&(e.tmp.group_context.tip.force_suppress=r.force_suppress),!r.force_suppress&&(r.variable_success||r.term_intended&&!r.variable_attempt)){this.isJurisLocatorLabel||(e.tmp.group_context.tip.variable_success=!0);var a=e.output.current.value().blobs;if(e.output.current.value().blobs.length,!e.tmp.just_looking&&(r.non_parallel||r.parallel_last||r.parallel_first||r.parallel_delimiter_override||r.parallel_delimiter_override_on_suppress)){var n=e.parallel.checkRepeats(r);if(n&&a&&a.pop(),e.tmp.cite_index>0&&(n||!r.parallel_first&&!r.parallel_last&&!r.non_parallel)){var o=e.tmp.suppress_repeats[e.tmp.cite_index-1];n&&r.parallel_delimiter_override_on_suppress&&(o.SIBLING||o.ORPHAN)?e.output.queue.slice(-1)[0].parallel_delimiter=r.parallel_delimiter_override_on_suppress:r.parallel_delimiter_override&&o.SIBLING&&(e.output.queue.slice(-1)[0].parallel_delimiter=r.parallel_delimiter_override)}}}else{if(e.tmp.term_predecessor=r.old_term_predecessor,e.tmp.group_context.tip.variable_attempt=r.variable_attempt,r.force_suppress&&!e.tmp.group_context.tip.condition&&(e.tmp.group_context.tip.variable_attempt=!0,e.tmp.group_context.tip.variable_success=r.variable_success_parent),r.force_suppress)for(var l=0,u=r.done_vars.length;l<u;l++)for(var c=r.done_vars[l],p=0,h=e.tmp.done_vars.length;p<h;p++)e.tmp.done_vars[p]===c&&(e.tmp.done_vars=e.tmp.done_vars.slice(0,p).concat(e.tmp.done_vars.slice(p+1)));e.output.current.value().blobs&&e.output.current.value().blobs.pop()}}},this.execs.push(r),this.juris)){var p=new Ko.Token("else",Ko.END);Ko.Node.else.build.call(p,e,t);var h=new Ko.Token("choose",Ko.END);Ko.Node.choose.build.call(h,e,t)}this.tokentype===Ko.END&&(this.juris||t.push(this),e.build.substitute_level.value()&&e.build.substitute_level.replace(e.build.substitute_level.value()-1),Ko.Util.substituteEnd.call(this,e,t))}},Ko.Node.if={build:function(e,t){Ko.Conditions.TopNode.call(this,e,t),t.push(this)},configure:function(e,t){Ko.Conditions.Configure.call(this,e,t)}},Ko.Node.conditions={build:function(e){this.tokentype===Ko.START&&e.tmp.conditions.addMatch(this.match),this.tokentype===Ko.END&&e.tmp.conditions.matchCombine()}},Ko.Node.condition={build:function(e){if(this.tokentype===Ko.SINGLETON){var t=e.fun.match[this.match](this,e,this.tests);e.tmp.conditions.addTest(t)}}},Ko.Conditions={},Ko.Conditions.TopNode=function(e){var t;this.tokentype!==Ko.START&&this.tokentype!==Ko.SINGLETON||(this.locale&&(e.opt.lang=this.locale),this.tests&&this.tests.length?this.test=e.fun.match[this.match](this,e,this.tests):e.tmp.conditions=new Ko.Conditions.Engine(e,this),0===e.build.substitute_level.value()&&(t=function(e){e.tmp.condition_counter++},this.execs.push(t))),this.tokentype!==Ko.END&&this.tokentype!==Ko.SINGLETON||(0===e.build.substitute_level.value()&&(t=function(e){e.tmp.condition_counter--,e.tmp.condition_lang_counter_arr.length>0&&e.tmp.condition_lang_counter_arr.slice(-1)[0]===e.tmp.condition_counter&&(e.opt.lang=e.tmp.condition_lang_val_arr.pop(),e.tmp.condition_lang_counter_arr.pop()),this.locale_default&&(e.output.current.value().old_locale=this.locale_default,e.output.closeLevel("empty"),e.opt.lang=this.locale_default)},this.execs.push(t)),t=function(e){return this[e.tmp.jump.value()]},this.execs.push(t),this.locale_default&&(e.opt.lang=this.locale_default))},Ko.Conditions.Configure=function(e,t){this.tokentype===Ko.START?(this.fail=e.configure.fail.slice(-1)[0],this.succeed=this.next,e.configure.fail[e.configure.fail.length-1]=t):this.tokentype===Ko.SINGLETON?(this.fail=this.next,this.succeed=e.configure.succeed.slice(-1)[0],e.configure.fail[e.configure.fail.length-1]=t):(this.succeed=e.configure.succeed.slice(-1)[0],this.fail=this.next)},Ko.Conditions.Engine=function(e,t){this.token=t,this.state=e},Ko.Conditions.Engine.prototype.addTest=function(e){this.token.tests||(this.token.tests=[]),this.token.tests.push(e)},Ko.Conditions.Engine.prototype.addMatch=function(e){this.token.match=e},Ko.Conditions.Engine.prototype.matchCombine=function(){this.token.test=this.state.fun.match[this.token.match](this.token,this.state,this.token.tests)},Ko.Node.info={build:function(e){this.tokentype===Ko.START?e.build.skip="info":e.build.skip=!1}},Ko.Node.institution={build:function(e,t){[Ko.SINGLETON,Ko.START].indexOf(this.tokentype)>-1&&this.execs.push((function(e){"string"==typeof this.strings.delimiter?e.tmp.institution_delimiter=this.strings.delimiter:e.tmp.institution_delimiter=e.tmp.name_delimiter,"text"===e.inheritOpt(this,"and")?this.and_term=e.getTerm("and","long",0):"symbol"===e.inheritOpt(this,"and")?e.opt.development_extensions.expect_and_symbol_form?this.and_term=e.getTerm("and","symbol",0):this.and_term="&":"none"===e.inheritOpt(this,"and")&&(this.and_term=e.tmp.institution_delimiter),void 0===this.and_term&&e.tmp.and_term&&(this.and_term=e.tmp.and_term),Ko.STARTSWITH_ROMANESQUE_REGEXP.test(this.and_term)?(this.and_prefix_single=" ",this.and_prefix_multiple=", ","string"==typeof e.tmp.institution_delimiter&&(this.and_prefix_multiple=e.tmp.institution_delimiter),this.and_suffix=" "):(this.and_prefix_single="",this.and_prefix_multiple="",this.and_suffix=""),"always"===e.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_single=e.tmp.institution_delimiter:"never"===e.inheritOpt(this,"delimiter-precedes-last")&&this.and_prefix_multiple&&(this.and_prefix_multiple=" "),this.and={},void 0!==this.and_term?(e.output.append(this.and_term,"empty",!0),this.and.single=e.output.pop(),this.and.single.strings.prefix=this.and_prefix_single,this.and.single.strings.suffix=this.and_suffix,e.output.append(this.and_term,"empty",!0),this.and.multiple=e.output.pop(),this.and.multiple.strings.prefix=this.and_prefix_multiple,this.and.multiple.strings.suffix=this.and_suffix):"undefined"!==this.strings.delimiter&&(this.and.single=new Ko.Blob(e.tmp.institution_delimiter),this.and.single.strings.prefix="",this.and.single.strings.suffix="",this.and.multiple=new Ko.Blob(e.tmp.institution_delimiter),this.and.multiple.strings.prefix="",this.and.multiple.strings.suffix=""),e.nameOutput.institution=this})),t.push(this)},configure:function(e){[Ko.SINGLETON,Ko.START].indexOf(this.tokentype)>-1&&(e.build.has_institution=!0)}},Ko.Node["institution-part"]={build:function(e,t){var i;"long"===this.strings.name?i=this.strings["if-short"]?function(e){e.nameOutput.institutionpart["long-with-short"]=this}:function(e){e.nameOutput.institutionpart.long=this}:"short"===this.strings.name&&(i=function(e){e.nameOutput.institutionpart.short=this}),this.execs.push(i),t.push(this)}},Ko.Node.key={build:function(e,t){var i;t=e[e.build.root+"_sort"].tokens;var r=new Ko.Token("key",Ko.START);e.tmp.root=e.build.root,r.strings["et-al-min"]=e.inheritOpt(this,"et-al-min"),r.strings["et-al-use-first"]=e.inheritOpt(this,"et-al-use-first"),r.strings["et-al-use-last"]=e.inheritOpt(this,"et-al-use-last"),i=function(e){e.tmp.done_vars=[]},r.execs.push(i),i=function(e){e.output.openLevel("empty")},r.execs.push(i);var s=[];if(this.strings.sort_direction===Ko.DESCENDING?(s.push(1),s.push(-1)):(s.push(-1),s.push(1)),e[e.build.area].opt.sort_directions.push(s),Ko.DATE_VARIABLES.indexOf(this.variables[0])>-1&&(e.build.date_key=!0),i=function(e){e.tmp.sort_key_flag=!0,e.inheritOpt(this,"et-al-min")&&(e.tmp["et-al-min"]=e.inheritOpt(this,"et-al-min")),e.inheritOpt(this,"et-al-use-first")&&(e.tmp["et-al-use-first"]=e.inheritOpt(this,"et-al-use-first")),"boolean"==typeof e.inheritOpt(this,"et-al-use-last")&&(e.tmp["et-al-use-last"]=e.inheritOpt(this,"et-al-use-last"))},r.execs.push(i),t.push(r),this.variables.length){var a=this.variables[0];if(Ko.NAME_VARIABLES.indexOf(a)>-1){var n=new Ko.Token("names",Ko.START);n.tokentype=Ko.START,n.variables=this.variables,Ko.Node.names.build.call(n,e,t);var o=new Ko.Token("name",Ko.SINGLETON);o.tokentype=Ko.SINGLETON,o.strings["name-as-sort-order"]="all",o.strings["sort-separator"]=" ",o.strings["et-al-use-last"]=e.inheritOpt(this,"et-al-use-last"),o.strings["et-al-min"]=e.inheritOpt(this,"et-al-min"),o.strings["et-al-use-first"]=e.inheritOpt(this,"et-al-use-first"),Ko.Node.name.build.call(o,e,t);var l=new Ko.Token("institution",Ko.SINGLETON);l.tokentype=Ko.SINGLETON,Ko.Node.institution.build.call(l,e,t);var u=new Ko.Token("names",Ko.END);u.tokentype=Ko.END,Ko.Node.names.build.call(u,e,t)}else{var c=new Ko.Token("text",Ko.SINGLETON);c.strings.sort_direction=this.strings.sort_direction,c.dateparts=this.dateparts,Ko.NUMERIC_VARIABLES.indexOf(a)>-1?i="citation-number"===a?function(e,t){if("bibliography_sort"===e.tmp.area&&(this.strings.sort_direction===Ko.DESCENDING?e.bibliography_sort.opt.citation_number_sort_direction=Ko.DESCENDING:e.bibliography_sort.opt.citation_number_sort_direction=Ko.ASCENDING),"citation_sort"===e.tmp.area&&e.bibliography_sort.tmp.citation_number_map)var i=e.bibliography_sort.tmp.citation_number_map[e.registry.registry[t.id].seq];else i=e.registry.registry[t.id].seq;i&&(i=Ko.Util.padding(""+i)),e.output.append(i,this)}:function(e,t){var i=!1;(i=t[a])&&(i=Ko.Util.padding(i)),e.output.append(i,this)}:"citation-label"===a?i=function(e,t){var i=e.getCitationLabel(t);e.output.append(i,this)}:Ko.DATE_VARIABLES.indexOf(a)>-1?(i=Ko.dateAsSortKey,c.variables=this.variables):i="title"===a?e.transform.getOutputFunction(this.variables,"title",!1,!1,!0):"court-class"===a?function(e,t,i){Ko.INIT_JURISDICTION_MACROS(e,t,i,"juris-main");var r=Ko.GET_COURT_CLASS(e,t,!0);e.output.append(r,"empty")}:function(e,t){var i=t[a];e.output.append(i,"empty")},c.execs.push(i),t.push(c)}}else{var p=new Ko.Token("text",Ko.SINGLETON);p.strings.sort_direction=this.strings.sort_direction,p.postponed_macro=this.postponed_macro,Ko.expandMacro.call(e,p,t)}var h=new Ko.Token("key",Ko.END);i=function(e){var t=e.output.string(e,e.output.queue);e.sys.normalizeUnicode&&(t=e.sys.normalizeUnicode(t)),""===(t=t?t.split(" ").join(e.opt.sort_sep)+e.opt.sort_sep:"")&&(t=void 0),("string"!=typeof t||e.tmp.empty_date)&&(t=void 0,e.tmp.empty_date=!1),e[e[e.tmp.area].root+"_sort"].keys.push(t),e.tmp.value=[]},h.execs.push(i),e.build.date_key&&("citation"===e.build.area&&"_sort"===e.build.extension&&(e[e.build.area].opt.sort_directions.push([-1,1]),i=function(e,t){var i=e.registry.registry[t.id].disambig.year_suffix;i||(i=0);var r=Ko.Util.padding(""+i);e[e.tmp.area].keys.push(r)},h.execs.push(i)),e.build.date_key=!1),i=function(e){e.tmp["et-al-min"]=void 0,e.tmp["et-al-use-first"]=void 0,e.tmp["et-al-use-last"]=void 0,e.tmp.sort_key_flag=!1},h.execs.push(i),t.push(h)}},Ko.Node.label={build:function(e,t){if(this.strings.term)this.execs.push((function(e,t,i){var r=Ko.evaluateLabel(this,e,t,i);i&&"locator"===this.strings.term&&(i.section_form_override=this.strings.form),r&&(e.tmp.group_context.tip.term_intended=!0),Ko.UPDATE_GROUP_CONTEXT_CONDITION(e,r,null,this),-1===r.indexOf("%s")&&(this.strings.capitalize_if_first&&(e.tmp.term_predecessor||"in-text"===e.opt.class&&"citation"===e.tmp.area||(r=Ko.Output.Formatters["capitalize-first"](e,r))),e.output.append(r,this))}));else{this.strings.form||(this.strings.form="long");for(var i=e.build.names_variables[e.build.names_variables.length-1],r=e.build.name_label[e.build.name_label.length-1],s=0,a=i.length;s<a;s+=1)r[i[s]]||(r[i[s]]={});if(e.build.name_flag)for(s=0,a=i.length;s<a;s+=1)r[i[s]].after=this;else for(s=0,a=i.length;s<a;s+=1)r[i[s]].before=this}t.push(this)}},Ko.Node.layout={build:function(e,t){var i,r,s,a,n;function o(){"bibliography"===e.build.area&&(s=new Ko.Token("text",Ko.SINGLETON),i=function(e){if(!e.tmp.parallel_and_not_last){var t;t=e.tmp.cite_affixes[e.tmp.area][e.tmp.last_cite_locale]?e.tmp.cite_affixes[e.tmp.area][e.tmp.last_cite_locale].suffix:e.bibliography.opt.layout_suffix;var i=e.output.current.value();e.opt.using_display?i.blobs[i.blobs.length-1].strings.suffix=t:i.strings.suffix=t}e.bibliography.opt["second-field-align"]&&e.output.endTag("bib_other")},s.execs.push(i),t.push(s))}if(this.tokentype===Ko.START&&(this.locale_raw?e.build.current_default_locale=this.locale_raw:e.build.current_default_locale=e.opt["default-locale"],i=function(e,t,i){if(e.opt.development_extensions.apply_citation_wrapper&&e.sys.wrapCitationEntry&&!e.tmp.just_looking&&t.system_id&&"citation"===e.tmp.area){var r=new Ko.Token("group",Ko.START);r.decorations=[["@cite","entry"]],e.output.startTag("cite_entry",r),e.output.current.value().item_id=t.system_id,i&&(e.output.current.value().locator_txt=i.locator_txt,e.output.current.value().suffix_txt=i.suffix_txt)}},this.execs.push(i)),this.tokentype!==Ko.START||e.tmp.cite_affixes[e.build.area]||(i=function(e,t,i){if(e.tmp.done_vars=[],i&&i["author-only"]&&e.tmp.done_vars.push("locator"),e.opt.suppressedJurisdictions[t.country]&&t.country&&-1===["treaty","patent"].indexOf(t.type)&&e.tmp.done_vars.push("country"),!e.tmp.just_looking&&e.registry.registry[t.id]&&e.registry.registry[t.id].parallel&&e.tmp.done_vars.push("first-reference-note-number"),!e.tmp.just_looking&&e.tmp.abbrev_trimmer&&t.jurisdiction)for(var r in e.tmp.abbrev_trimmer.QUASHES[t.jurisdiction])e.tmp.done_vars.push(r);e.tmp.rendered_name=!1},this.execs.push(i),i=function(e){e.tmp.sort_key_flag=!1},this.execs.push(i),i=function(e){e.tmp.nameset_counter=0},this.execs.push(i),i=function(e,t){var i=new Ko.Token;e.output.openLevel(i)},this.execs.push(i),t.push(this),"citation"===e.build.area&&(r=new Ko.Token("text",Ko.SINGLETON),i=function(e,t,i){if(i&&i.prefix){var r=Ko.checkPrefixSpaceAppend(e,i.prefix);e.tmp.just_looking||(r=e.output.checkNestedBrace.update(r));var s=Ko.checkIgnorePredecessor(e,r);e.output.append(r,this,!1,s)}},r.execs.push(i),t.push(r))),this.locale_raw&&((n=new Ko.Token("dummy",Ko.START)).locale=this.locale_raw,n.strings.delimiter=this.strings.delimiter,n.strings.suffix=this.strings.suffix,e.tmp.cite_affixes[e.build.area]||(e.tmp.cite_affixes[e.build.area]={})),this.tokentype===Ko.START&&(e.build.layout_flag=!0,this.locale_raw||(e[e.tmp.area].opt.topdecor=[this.decorations],e[e.tmp.area+"_sort"].opt.topdecor=[this.decorations],e[e.build.area].opt.layout_prefix=this.strings.prefix,e[e.build.area].opt.layout_suffix=this.strings.suffix,e[e.build.area].opt.layout_delimiter=this.strings.delimiter,e[e.build.area].opt.layout_decorations=this.decorations,e.tmp.cite_affixes[e.build.area]&&(a=new Ko.Token("else",Ko.START),Ko.Node.else.build.call(a,e,t))),this.locale_raw)){if(e.build.layout_locale_flag)n.name="else-if",Ko.Attributes["@locale-internal"].call(n,e,this.locale_raw),Ko.Node["else-if"].build.call(n,e,t);else{var l=new Ko.Token("choose",Ko.START);Ko.Node.choose.build.call(l,e,t),n.name="if",Ko.Attributes["@locale-internal"].call(n,e,this.locale_raw),Ko.Node.if.build.call(n,e,t)}e.tmp.cite_affixes[e.build.area][n.locale]={},e.tmp.cite_affixes[e.build.area][n.locale].delimiter=this.strings.delimiter,e.tmp.cite_affixes[e.build.area][n.locale].suffix=this.strings.suffix}this.tokentype===Ko.END&&(this.locale_raw&&(o(),e.build.layout_locale_flag?(n.name="else-if",n.tokentype=Ko.END,Ko.Attributes["@locale-internal"].call(n,e,this.locale_raw),Ko.Node["else-if"].build.call(n,e,t)):(n.name="if",n.tokentype=Ko.END,Ko.Attributes["@locale-internal"].call(n,e,this.locale_raw),Ko.Node.if.build.call(n,e,t),e.build.layout_locale_flag=!0)),this.locale_raw||(o(),e.tmp.cite_affixes[e.build.area]&&e.build.layout_locale_flag&&(a=new Ko.Token("else",Ko.END),Ko.Node.else.build.call(a,e,t),a=new Ko.Token("choose",Ko.END),Ko.Node.choose.build.call(a,e,t)),e.build_layout_locale_flag=!0,"citation"===e.build.area&&(s=new Ko.Token("text",Ko.SINGLETON),i=function(e,t,i){if(i&&i.suffix){var r=Ko.checkSuffixSpacePrepend(e,i.suffix);e.tmp.just_looking||(r=e.output.checkNestedBrace.update(r)),e.output.append(r,this)}},s.execs.push(i),t.push(s)),i=function(e){e.output.closeLevel()},this.execs.push(i),i=function(e,t){e.opt.development_extensions.apply_citation_wrapper&&e.sys.wrapCitationEntry&&!e.tmp.just_looking&&t.system_id&&"citation"===e.tmp.area&&e.output.endTag()},this.execs.push(i),t.push(this),e.build.layout_flag=!1,e.build.layout_locale_flag=!1))}},Ko.Node.macro={build:function(){}},Ko.Node.alternative={build:function(e,t){if(this.tokentype===Ko.START){var i=new Ko.Token("choose",Ko.START);Ko.Node.choose.build.call(i,e,t);var r=new Ko.Token("if",Ko.START);Ko.Attributes["@alternative-node-internal"].call(r,e),Ko.Node.if.build.call(r,e,t);var s=function(e,t){if(e.tmp.oldItem=t,e.tmp.oldLang=e.opt.lang,e.tmp.abort_alternative=!0,t["language-name"]&&t["language-name-original"]){var i=JSON.parse(JSON.stringify(t));i.language=i["language-name"];var r=Ko.localeResolve(i.language,e.opt["default-locale"][0]);if(e.opt.multi_layout)for(var s in e.opt.multi_layout){var a=e.opt.multi_layout[s],n=!1;for(var o in a){var l=a[o];if(r.best===l.best||r.base===l.base||r.bare===l.bare){n=a[0].best;break}}n||(n=e.opt["default-locale"][0]),e.opt.lang=n}for(var u in i)if(-1===["id","type","language","multi"].indexOf(u)&&"alt-"!==u.slice(0,4))if(i.multi&&i.multi._keys[u]){var c=!0;for(var p in i.multi._keys[u])if(r.bare===p.replace(/^([a-zA-Z]+).*/,"$1")){c=!1;break}c&&delete i[u]}else delete i[u];for(var u in i)"alt-"===u.slice(0,4)?(i[u.slice(4)]=i[u],e.tmp.abort_alternative=!1):i.multi&&i.multi._keys&&!i["alt-"+u]&&i.multi._keys[u]&&(i.multi._keys[u][r.best]?(i[u]=i.multi._keys[u][r.best],e.tmp.abort_alternative=!1):i.multi._keys[u][r.base]?(i[u]=i.multi._keys[u][r.base],e.tmp.abort_alternative=!1):i.multi._keys[u][r.bare]&&(i[u]=i.multi._keys[u][r.bare],e.tmp.abort_alternative=!1))}e.output.openLevel(this),e.registry.refhash[t.id]=i,e.nameOutput=new Ko.NameOutput(e,i)};this.execs.push(s),t.push(this),i=new Ko.Token("choose",Ko.START),Ko.Node.choose.build.call(i,e,t),r=new Ko.Token("if",Ko.START),Ko.Attributes["@alternative-node-internal"].call(r,e),s=function(e){e.tmp.abort_alternative=!0},r.execs.push(s),Ko.Node.if.build.call(r,e,t)}else this.tokentype===Ko.END&&(r=new Ko.Token("if",Ko.END),Ko.Node.if.build.call(r,e,t),i=new Ko.Token("choose",Ko.END),Ko.Node.choose.build.call(i,e,t),s=function(e,t){e.output.closeLevel(),e.registry.refhash[t.id]=e.tmp.oldItem,e.opt.lang=e.tmp.oldLang,e.nameOutput=new Ko.NameOutput(e,e.tmp.oldItem),e.tmp.abort_alternative=!1},this.execs.push(s),t.push(this),r=new Ko.Token("if",Ko.END),Ko.Node.if.build.call(r,e,t),i=new Ko.Token("choose",Ko.END),Ko.Node.choose.build.call(i,e,t))}},Ko.Node["alternative-text"]={build:function(e,t){this.tokentype===Ko.SINGLETON&&this.execs.push((function(e,t){t=e.refetchItem(t.id),Ko.getCite.call(e,t)})),t.push(this)}},Ko.NameOutput=function(e,t,i){this.debug=!1,this.debug&&print("(1)"),this.state=e,this.Item=t,this.item=i,this.nameset_base=0,this.etal_spec={},this._first_creator_variable=!1,this._please_chop=!1},Ko.NameOutput.prototype.init=function(e){this.requireMatch=e.requireMatch,this.state.tmp.term_predecessor&&(this.state.tmp.subsequent_author_substitute_ok=!1),this.nameset_offset&&(this.nameset_base=this.nameset_base+this.nameset_offset),this.nameset_offset=0,this.names=e,this.variables=e.variables,this.state.tmp.value=[],this.state.tmp.rendered_name=[],this.state.tmp.label_blob=!1,this.state.tmp.etal_node=!1,this.state.tmp.etal_term=!1;for(var t=0,i=this.variables.length;t<i;t+=1)this.Item[this.variables[t]]&&this.Item[this.variables[t]].length&&(this.state.tmp.value=this.state.tmp.value.concat(this.Item[this.variables[t]]));if(this["et-al"]=void 0,this.with=void 0,this.name=void 0,this.institutionpart={},this.state.tmp.group_context.tip.variable_attempt=!0,this.labelVariable=this.variables[0],this.state.tmp.value.length&&this.checkCommonAuthor(this.requireMatch)){for(var t in this.state.tmp.can_substitute.pop(),this.state.tmp.can_substitute.push(!0),this.variables){var r=this.state.tmp.done_vars.indexOf(this.variables[t]);r>-1&&(this.state.tmp.done_vars=this.state.tmp.done_vars.slice(0,r).concat(this.state.tmp.done_vars.slice(t+1)))}this.state.tmp.common_term_match_fail=!0,this.variables=[]}},Ko.NameOutput.prototype.reinit=function(e,t){if(this.requireMatch=e.requireMatch,this.labelVariable=t,this.state.tmp.can_substitute.value()){this.nameset_offset=0,this.variables=e.variables;var i=this.state.tmp.value.slice();this.state.tmp.value=[];for(var r=0,s=this.variables.length;r<s;r+=1)this.Item[this.variables[r]]&&this.Item[this.variables[r]].length&&(this.state.tmp.value=this.state.tmp.value.concat(this.Item[this.variables[r]]));this.state.tmp.value.length&&this.state.tmp.can_substitute.replace(!1,Ko.LITERAL),this.state.tmp.value=i}if(this.checkCommonAuthor(this.requireMatch)){for(var r in this.state.tmp.can_substitute.pop(),this.state.tmp.can_substitute.push(!0),this.variables){var a=this.state.tmp.done_vars.indexOf(this.variables[r]);a>-1&&(this.state.tmp.done_vars=this.state.tmp.done_vars.slice(0,a).concat(this.state.tmp.done_vars.slice(r+1)))}this.variables=[]}},Ko.NameOutput.prototype.outputNames=function(){var e=this.variables;if(this.institution.and&&(this.institution.and.single.blobs&&this.institution.and.single.blobs.length||(this.institution.and.single.blobs=this.name.and.single.blobs),this.institution.and.multiple.blobs&&this.institution.and.multiple.blobs.length||(this.institution.and.multiple.blobs=this.name.and.multiple.blobs)),this.variable_offset={},this.family)for(this.family_decor=Ko.Util.cloneToken(this.family),this.family_decor.strings.prefix="",this.family_decor.strings.suffix="",m=0,f=this.family.execs.length;m<f;m+=1)this.family.execs[m].call(this.family_decor,this.state,this.Item);else this.family_decor=!1;if(this.given)for(this.given_decor=Ko.Util.cloneToken(this.given),this.given_decor.strings.prefix="",this.given_decor.strings.suffix="",m=0,f=this.given.execs.length;m<f;m+=1)this.given.execs[m].call(this.given_decor,this.state,this.Item);else this.given_decor=!1;if(this.debug&&print("(2)"),this.getEtAlConfig(),this.debug&&print("(3)"),this.divideAndTransliterateNames(),this.debug&&print("(4)"),this.truncatePersonalNameLists(),this.debug&&print("(5)"),this.debug&&print("(6)"),this.disambigNames(),this.constrainNames(),this.debug&&print("(7)"),"count"!==this.name.strings.form){this.debug&&print("(8)"),this.setEtAlParameters(),this.debug&&print("(9)"),this.setCommonTerm(this.requireMatch),this.debug&&print("(10)"),this.renderAllNames(),this.debug&&print("(11)");var t=[];for(m=0,f=e.length;m<f;m+=1){var i=e[m],r=[],s=!1,a=null;if(this.state.opt.development_extensions.spoof_institutional_affiliations){this.debug&&print("(11a)");for(var n=0,o=this.institutions[i].length;n<o;n+=1)r.push(this.joinPersonsAndInstitutions([this.persons[i][n],this.institutions[i][n]]));if(this.debug&&print("(11b)"),this.institutions[i].length){var l=this.nameset_base+this.variable_offset[i];this.freeters[i].length&&(l+=1),s=this.joinInstitutionSets(r,l)}this.debug&&print("(11c)"),a=this.joinFreetersAndInstitutionSets([this.freeters[i],s]),this.debug&&print("(11d)")}else a=this._join([this.freeters[i]],"");if(a&&(this.state.tmp.extension||(a=this._applyLabels(a,i)),t.push(a)),this.debug&&print("(11e)"),this.common_term)break}for(this.debug&&print("(12)"),this.state.output.openLevel("empty"),this.state.output.current.value().strings.delimiter=this.state.inheritOpt(this.names,"delimiter","names-delimiter"),this.debug&&print("(13)"),m=0,f=t.length;m<f;m+=1)this.state.output.append(t[m],"literal",!0);!this.state.tmp.just_looking&&t.length>0&&(this.state.tmp.probably_rendered_something=!0),this.debug&&print("(14)"),this.state.output.closeLevel("empty"),this.debug&&print("(15)");var u=this.state.output.pop();this.state.tmp.name_node.top=u,this.debug&&print("(16)");var c=Ko.Util.cloneToken(this.names);if(this.state.tmp.group_context.tip.condition&&Ko.UPDATE_GROUP_CONTEXT_CONDITION(this.state,this.names.strings.prefix,null,this.names),this.state.output.append(u,c),this.state.tmp.term_predecessor_name&&(this.state.tmp.term_predecessor=!0),this.debug&&print("(17)"),this.debug&&print("(18)"),"authority"!==e[0]){var p=[],h=this.Item[e[0]];if(h)for(var m=0,f=h.length;m<f;m+=1){var d=Ko.Util.Names.getRawName(h[m]);d&&p.push(d)}(p=p.join(", "))&&(this.state.tmp.name_node.string=p)}if(this.state.tmp.name_node.string&&!this.state.tmp.first_name_string&&(this.state.tmp.first_name_string=this.state.tmp.name_node.string),"classic"===this.Item.type&&this.state.tmp.first_name_string){var g=[];g.push(this.state.tmp.first_name_string),this.Item.title&&g.push(this.Item.title),(g=g.join(", "))&&this.state.sys.getAbbreviation&&(this.state.sys.normalizeAbbrevsKey&&(g=this.state.sys.normalizeAbbrevsKey("classic",g)),this.state.transform.loadAbbreviation("default","classic",g,this.Item.language),this.state.transform.abbrevs.default.classic[g]&&(this.state.tmp.done_vars.push("title"),this.state.output.append(this.state.transform.abbrevs.default.classic[g],"empty",!0),u=this.state.output.pop(),this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.top.blobs.push(u)))}this._collapseAuthor(),this.variables=[],this.state.tmp.authority_stop_last=0,this.debug&&print("(19)")}else(this.state.tmp.extension||0!=this.names_count)&&(this.state.output.append(this.names_count,"empty"),this.state.tmp.group_context.tip.variable_success=!0)},Ko.NameOutput.prototype._applyLabels=function(e,t){var i;if(!this.label||!this.label[this.labelVariable])return e;var r=0,s=this.freeters_count[t]+this.institutions_count[t];if(s>1)r=1;else{for(var a=0,n=this.persons[t].length;a<n;a+=1)s+=this.persons_count[t][a];s>1&&(r=1)}return this.label[this.labelVariable].before?("number"==typeof this.label[this.labelVariable].before.strings.plural&&(r=this.label[this.labelVariable].before.strings.plural),i=this._buildLabel(t,r,"before",this.labelVariable),this.state.output.openLevel("empty"),this.state.output.append(i,this.label[this.labelVariable].before,!0),this.state.output.append(e,"literal",!0),this.state.output.closeLevel("empty"),e=this.state.output.pop()):this.label[this.labelVariable].after&&("number"==typeof this.label[this.labelVariable].after.strings.plural&&(r=this.label[this.labelVariable].after.strings.plural),i=this._buildLabel(t,r,"after",this.labelVariable),this.state.output.openLevel("empty"),this.state.output.append(e,"literal",!0),this.state.output.append(i,this.label[this.labelVariable].after,!0),this.state.tmp.label_blob=this.state.output.pop(),this.state.output.append(this.state.tmp.label_blob,"literal",!0),this.state.output.closeLevel("empty"),e=this.state.output.pop()),e},Ko.NameOutput.prototype._buildLabel=function(e,t,i,r){this.common_term&&(e=this.common_term);var s=!1,a=this.label[r][i];return a&&(s=Ko.castLabel(this.state,a,e,t,Ko.TOLERANT)),s},Ko.NameOutput.prototype._collapseAuthor=function(){var e,t,i;0!==this.state.tmp.name_node.top.blobs.length&&(0===this.nameset_base&&this.Item[this.variables[0]]&&!this._first_creator_variable&&(this._first_creator_variable=this.variables[0]),(this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length||this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter.length)&&(this.state.tmp.authorstring_request?(t="",e=this.state.tmp.name_node.top.blobs.slice(-1)[0].blobs,i=this.state.tmp.offset_characters,e&&(t=this.state.output.string(this.state,e,!1)),this.state.tmp.offset_characters=i,this.state.registry.authorstrings[this.Item.id]=t):this.state.tmp.just_looking||this.state.tmp.suppress_decorations||!(this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length||this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter)||(t="",e=this.state.tmp.name_node.top.blobs.slice(-1)[0].blobs,i=this.state.tmp.offset_characters,e&&(t=this.state.output.string(this.state,e,!1)),t===this.state.tmp.last_primary_names_string?((this.item["suppress-author"]||this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length)&&(this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.children=[],this.state.tmp.offset_characters=i),this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter&&(this.state.tmp.use_cite_group_delimiter=!0)):(this.state.tmp.last_primary_names_string=t,this.variables.indexOf(this._first_creator_variable)>-1&&this.item&&this.item["suppress-author"]&&"legal_case"!==this.Item.type&&(this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.children=[],this.state.tmp.offset_characters=i,this.state.tmp.term_predecessor=!1),this.state.tmp.have_collapsed=!1,this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter&&(this.state.tmp.use_cite_group_delimiter=!1)))))},Ko.NameOutput.prototype.isPerson=function(e){return!(e.literal||!e.given&&e.family&&e.isInstitution)},Ko.NameOutput.prototype.truncatePersonalNameLists=function(){var e,t,i,r;for(e in this.freeters_count={},this.persons_count={},this.institutions_count={},this.freeters)this.freeters.hasOwnProperty(e)&&(this.freeters_count[e]=this.freeters[e].length,this.freeters[e]=this._truncateNameList(this.freeters,e));for(e in this.persons)if(this.persons.hasOwnProperty(e))for(this.institutions_count[e]=this.institutions[e].length,this._truncateNameList(this.institutions,e),this.persons[e]=this.persons[e].slice(0,this.institutions[e].length),this.persons_count[e]=[],s=0,a=this.persons[e].length;s<a;s+=1)this.persons_count[e][s]=this.persons[e][s].length,this.persons[e][s]=this._truncateNameList(this.persons,e,s);if((r=1===this.etal_min&&1===this.etal_use_first&&!this.state.tmp.extension&&!this.state.tmp.just_looking&&e)||this._please_chop)for(t=0,i=this.variables.length;t<i;t+=1){e=this.variables[t],this.freeters[e].length&&(this._please_chop===e?(this.freeters[e]=this.freeters[e].slice(1),this.freeters_count[e]+=-1,this._please_chop=!1):r&&!this._please_chop&&(this.freeters[e]=this.freeters[e].slice(0,1),this.freeters_count[e]=1,this.institutions[e]=[],this.persons[e]=[],this._please_chop=r));for(var s=0,a=this.persons[e].length;s<a;s++)if(this.persons[e][s].length){if(this._please_chop===e){this.persons[e][s]=this.persons[e][s].slice(1),this.persons_count[e][s]+=-1,this._please_chop=!1;break}if(r&&!this._please_chop){this.freeters[e]=this.persons[e][s].slice(0,1),this.freeters_count[e]=1,this.institutions[e]=[],this.persons[e]=[],this._please_chop=r;break}}this.institutions[e].length&&(this._please_chop===e?(this.institutions[e]=this.institutions[e].slice(1),this.institutions_count[e]+=-1,this._please_chop=!1):r&&!this._please_chop&&(this.institutions[e]=this.institutions[e].slice(0,1),this.institutions_count[e]=1,this._please_chop=r))}for(t=0,i=this.variables.length;t<i;t+=1)for(this.institutions[e].length&&(this.nameset_offset+=1),s=0,a=this.persons[e].length;s<a;s++)this.persons[e][s].length&&(this.nameset_offset+=1)},Ko.NameOutput.prototype._truncateNameList=function(e,t,i){var r;if(r=void 0===i?e[t]:e[t][i],this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names&&r.length>50&&r.length>this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names+2){var s=this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names;r=r.slice(0,s+1).concat(r.slice(-1))}return r},Ko.NameOutput.prototype.divideAndTransliterateNames=function(){var e,t,i,r,s=this.Item,a=this.variables;for(this.varnames=a.slice(),this.freeters={},this.persons={},this.institutions={},e=0,t=a.length;e<t;e+=1){var n=a[e];this.variable_offset[n]=this.nameset_offset;var o=this._normalizeVariableValue(s,n);if(this.name.strings["suppress-min"]&&o.length>=this.name.strings["suppress-min"]&&(o=[]),this.name.strings["suppress-max"]&&o.length<=this.name.strings["suppress-max"]&&(o=[]),this._getFreeters(n,o),this._getPersonsAndInstitutions(n,o),this.state.opt.development_extensions.spoof_institutional_affiliations)if(0===this.name.strings["suppress-min"])for(this.freeters[n]=[],i=0,r=this.persons[n].length;i<r;i+=1)this.persons[n][i]=[];else if(0===this.institution.strings["suppress-min"]){for(this.institutions[n]=[],this.freeters[n]=this.freeters[n].concat(this.persons[n]),i=0,r=this.persons[n].length;i<r;i+=1)for(var l=0,u=this.persons[n][i].length;l<u;l+=1)this.freeters[n].push(this.persons[n][i][l]);this.persons[n]=[]}}},Ko.NameOutput.prototype._normalizeVariableValue=function(e,t){var i;return"string"==typeof e[t]||"number"==typeof e[t]?(Ko.debug('name variable "'+t+'" is string or number, not array. Attempting to fix.'),i=[{literal:e[t]+""}]):e[t]?"number"!=typeof e[t].length?(Ko.debug('name variable "'+t+'" is object, not array. Attempting to fix.'),e[t]=[e[t]],i=e[t].slice()):i=e[t].slice():i=[],i},Ko.NameOutput.prototype._getFreeters=function(e,t){if(this.freeters[e]=[],this.state.opt.development_extensions.spoof_institutional_affiliations)for(var i=t.length-1;i>-1&&this.isPerson(t[i]);i--)(r=this._checkNickname(t.pop()))&&this.freeters[e].push(r);else for(i=t.length-1;i>-1;i--){var r=t.pop();this.isPerson(r)&&(r=this._checkNickname(r)),this.freeters[e].push(r)}this.freeters[e].reverse(),this.freeters[e].length&&(this.nameset_offset+=1)},Ko.NameOutput.prototype._getPersonsAndInstitutions=function(e,t){if(this.persons[e]=[],this.institutions[e]=[],this.state.opt.development_extensions.spoof_institutional_affiliations){for(var i=[],r=!1,s=!0,a=t.length-1;a>-1;a+=-1)if(this.isPerson(t[a])){var n=this._checkNickname(t[a]);n&&i.push(n)}else r=!0,this.institutions[e].push(t[a]),s||(i.reverse(),this.persons[e].push(i),i=[]),s=!1;r&&(i.reverse(),this.persons[e].push(i),this.persons[e].reverse(),this.institutions[e].reverse())}},Ko.NameOutput.prototype._clearValues=function(e){for(var t=e.length-1;t>-1;t+=-1)e.pop()},Ko.NameOutput.prototype._checkNickname=function(e){var t;if(["interview","personal_communication"].indexOf(this.Item.type)>-1&&((t=Ko.Util.Names.getRawName(e))&&this.state.sys.getAbbreviation&&(!this.item||!this.item["suppress-author"]))){var i=t;this.state.sys.normalizeAbbrevsKey&&(i=this.state.sys.normalizeAbbrevsKey("author",t)),this.state.transform.loadAbbreviation("default","nickname",i,this.Item.language);var r=this.state.transform.abbrevs.default.nickname[i];r&&(e="!here>>>"!==r&&{family:r,given:""})}return e},Ko.NameOutput.prototype._purgeEmptyBlobs=function(e){for(var t=e.length-1;t>-1;t+=-1)e[t]&&0!==e[t].length&&e[t].blobs.length||(e=e.slice(0,t).concat(e.slice(t+1)));return e},Ko.NameOutput.prototype.joinPersons=function(e,t,i,r){return e=this._purgeEmptyBlobs(e),r||(r="name"),void 0===i?1===this.etal_spec[t].freeters?this._joinEtAl(e):2===this.etal_spec[t].freeters?this._joinEllipsis(e):this.state.tmp.sort_key_flag?this._join(e,this.state.inheritOpt(this.name,"delimiter","name-delimiter",", ")):this._joinAnd(e):1===this.etal_spec[t].persons[i]?this._joinEtAl(e):2===this.etal_spec[t].persons[i]?this._joinEllipsis(e):this.state.tmp.sort_key_flag?this._join(e,this.state.inheritOpt(this.name,"delimiter","name-delimiter",", ")):this._joinAnd(e)},Ko.NameOutput.prototype.joinInstitutionSets=function(e,t){return e=this._purgeEmptyBlobs(e),1===this.etal_spec[t].institutions?this._joinEtAl(e,"institution"):2===this.etal_spec[t].institutions?this._joinEllipsis(e,"institution"):this._joinAnd(e)},Ko.NameOutput.prototype.joinPersonsAndInstitutions=function(e){e=this._purgeEmptyBlobs(e);var t=this._join(e,this.state.tmp.name_delimiter);return t.isInstitution=!0,t},Ko.NameOutput.prototype.joinFreetersAndInstitutionSets=function(e){return e=this._purgeEmptyBlobs(e),this._join(e,"[never here]",this.with.single,this.with.multiple)},Ko.NameOutput.prototype._getAfterInvertedName=function(e,t,i){if(i&&e.length>1&&"after-inverted-name"===this.state.inheritOpt(this.name,"delimiter-precedes-last")){var r=e[e.length-2];r.blobs.length>0&&r.blobs[0].isInverted&&(i.strings.prefix=t)}return i},Ko.NameOutput.prototype._getAndJoin=function(e,t){var i=!1;if(e.length>1){var r="single";e.length>2&&(r="multiple"),i=e[e.length-1].isInstitution?this.institution.and[r]:this.name.and[r],i=JSON.parse(JSON.stringify(i)),i=this._getAfterInvertedName(e,t,i)}return i},Ko.NameOutput.prototype._joinEtAl=function(e){var t=this.state.inheritOpt(this.name,"delimiter","name-delimiter",", "),i=this._join(e,t);return this.state.output.openLevel(this._getToken("name")),this.state.output.current.value().strings.delimiter="",this.state.output.append(i,"literal",!0),e.length>1?this.state.output.append(this["et-al"].multiple,"literal",!0):1===e.length&&this.state.output.append(this["et-al"].single,"literal",!0),this.state.output.closeLevel(),this.state.output.pop()},Ko.NameOutput.prototype._joinEllipsis=function(e){var t=this.state.inheritOpt(this.name,"delimiter","name-delimiter",", "),i=!1;if(e.length>1){var r="single";e.length>2&&(r="multiple"),i=JSON.parse(JSON.stringify(this.name.ellipsis[r])),i=this._getAfterInvertedName(e,t,i)}return this._join(e,t,i)},Ko.NameOutput.prototype._joinAnd=function(e){var t=this.state.inheritOpt(this.name,"delimiter","name-delimiter",", "),i=this._getAndJoin(e,t);return this._join(e,t,i)},Ko.NameOutput.prototype._join=function(e,t,i){if(!e)return!1;if(!(e=this._purgeEmptyBlobs(e)).length)return!1;if(e.length>1)if(2===e.length)i?e=[e[0],i,e[1]]:e[0].strings.suffix+=t;else{var r;r=i?1:0;for(var s=e.pop(),a=0,n=e.length-r;a<n;a++)e[a].strings.suffix+=t;e.push(i),e.push(s)}for(this.state.output.openLevel(),a=0,n=e.length;a<n;a+=1)this.state.output.append(e[a],!1,!0);return this.state.output.closeLevel(),this.state.output.pop()},Ko.NameOutput.prototype._getToken=function(e){var t=this[e];return"institution"===e?new Ko.Token:t},Ko.NameOutput.prototype.checkCommonAuthor=function(e){if(!e)return!1;var t=!1;if(2===this.variables.length){var i=this.variables.slice();i.sort(),t=i.join("")}if(!t)return!1;var r=!1;if(this.state.locale[this.state.opt.lang].terms[t]&&(r=!0),!r)return this.state.tmp.done_vars.push(this.variables[0]),this.state.tmp.done_vars.push(this.variables[1]),!1;var s=this.Item[this.variables[0]],a=this.Item[this.variables[1]],n=this._compareNamesets(s,a);return!0===n&&(this.state.tmp.done_vars.push(this.variables[0]),this.state.tmp.done_vars.push(this.variables[1])),!n},Ko.NameOutput.prototype.setCommonTerm=function(){var e=this.variables.slice();if(e.sort(),this.common_term=e.join(""),this.common_term){var t=!1;if(this.label&&this.label[this.variables[0]]&&(this.label[this.variables[0]].before?t=this.state.getTerm(this.common_term,this.label[this.variables[0]].before.strings.form,0):this.label[this.variables[0]].after&&(t=this.state.getTerm(this.common_term,this.label[this.variables[0]].after.strings.form,0))),!this.state.locale[this.state.opt.lang].terms[this.common_term]||!t||this.variables.length<2)this.common_term=!1;else for(var i=0,r=this.variables.length-1;i<r;i+=1){var s=this.variables[i],a=this.variables[i+1];if((this.freeters[s].length||this.freeters[a].length)&&(this.etal_spec[s].freeters!==this.etal_spec[a].freeters||!this._compareNamesets(this.freeters[s],this.freeters[a])))return void(this.common_term=!1);if(this.persons[s].length!==this.persons[a].length)return void(this.common_term=!1);for(var n=0,o=this.persons[s].length;n<o;n+=1)if(this.etal_spec[s].persons[n]!==this.etal_spec[a].persons[n]||!this._compareNamesets(this.persons[s][n],this.persons[a][n]))return void(this.common_term=!1)}}},Ko.NameOutput.prototype._compareNamesets=function(e,t){if(!e||!t||e.length!==t.length)return!1;for(var i=0,r=t.length;i<r;i+=1)for(var s=0,a=Ko.NAME_PARTS.length;s<a;s+=1){var n=Ko.NAME_PARTS[s];if(!e[i]||e[i][n]!=t[i][n])return!1}return!0},Ko.NameOutput.prototype.constrainNames=function(){var e;this.names_count=0;for(var t=0,i=this.variables.length;t<i;t+=1){var r=this.variables[t];e=this.nameset_base+t,this.freeters[r].length&&(this.state.tmp.names_max.push(this.freeters[r].length,"literal"),this._imposeNameConstraints(this.freeters,this.freeters_count,r,e),this.names_count+=this.freeters[r].length),this.institutions[r].length&&(this.state.tmp.names_max.push(this.institutions[r].length,"literal"),this._imposeNameConstraints(this.institutions,this.institutions_count,r,e),this.persons[r]=this.persons[r].slice(0,this.institutions[r].length),this.names_count+=this.institutions[r].length);for(var s=0,a=this.persons[r].length;s<a;s+=1)this.persons[r][s].length&&(this.state.tmp.names_max.push(this.persons[r][s].length,"literal"),this._imposeNameConstraints(this.persons[r],this.persons_count[r],s,e),this.names_count+=this.persons[r][s].length)}},Ko.NameOutput.prototype._imposeNameConstraints=function(e,t,i,r){var s=e[i],a=this.state.tmp["et-al-min"];this.state.tmp.suppress_decorations?this.state.tmp.disambig_request&&this.state.tmp.disambig_request.names[r]?a=this.state.tmp.disambig_request.names[r]:t[i]>=this.etal_min&&(a=this.etal_use_first):(this.state.tmp.disambig_request&&this.state.tmp.disambig_request.names[r]>this.etal_use_first?a=t[i]<this.etal_min?t[i]:this.state.tmp.disambig_request.names[r]:t[i]>=this.etal_min&&(a=this.etal_use_first),this.etal_use_last&&a>this.etal_min-2&&(a=this.etal_min-2));var n=this.etal_min>=this.etal_use_first,o=t[i]>a;a>t[i]&&(a=s.length),n&&o&&(this.etal_use_last?e[i]=s.slice(0,a).concat(s.slice(-1)):e[i]=s.slice(0,a)),this.state.tmp.disambig_settings.names[r]=e[i].length,this.state.disambiguate.padBase(this.state.tmp.disambig_settings)},Ko.NameOutput.prototype.disambigNames=function(){for(var e,t=0,i=this.variables.length;t<i;t+=1){var r=this.variables[t];if(e=this.nameset_base+t,this.freeters[r].length&&this._runDisambigNames(this.freeters[r],e),this.institutions[r].length){void 0===this.state.tmp.disambig_settings.givens[e]&&(this.state.tmp.disambig_settings.givens[e]=[]);for(var s=0,a=this.institutions[r].length;s<a;s+=1)void 0===this.state.tmp.disambig_settings.givens[e][s]&&this.state.tmp.disambig_settings.givens[e].push(2)}for(s=0,a=this.persons[r].length;s<a;s+=1)this.persons[r][s].length&&this._runDisambigNames(this.persons[r][s],e)}},Ko.NameOutput.prototype._runDisambigNames=function(e,t){var i,r,s,a,n,o;for(a=0,n=e.length;a<n;a+=1)if(e[a].given||e[a].family){if(r=this.state.inheritOpt(this.name,"initialize-with"),this.state.registry.namereg.addname(""+this.Item.id,e[a],a),void 0===this.state.tmp.disambig_settings.givens[t])for(var l=0,u=t+1;l<u;l+=1)this.state.tmp.disambig_settings.givens[l]||(this.state.tmp.disambig_settings.givens[l]=[]);if(void 0===this.state.tmp.disambig_settings.givens[t][a]&&(i=this.state.inheritOpt(this.name,"form","name-form","long"),s=this.state.registry.namereg.evalname(""+this.Item.id,e[a],a,0,i,r),this.state.tmp.disambig_settings.givens[t].push(s)),i=this.state.inheritOpt(this.name,"form","name-form","long"),o=this.state.registry.namereg.evalname(""+this.Item.id,e[a],a,0,i,r),this.state.tmp.disambig_request){var c=this.state.tmp.disambig_settings.givens[t][a];1!==c||"by-cite"!==this.state.citation.opt["givenname-disambiguation-rule"]||void 0!==this.state.inheritOpt(this.name,"initialize-with")&&void 0!==e[a].given||(c=2),s=c,this.state.opt["disambiguate-add-givenname"]&&e[a].given&&(s=this.state.registry.namereg.evalname(""+this.Item.id,e[a],a,s,this.state.inheritOpt(this.name,"form","name-form","long"),this.state.inheritOpt(this.name,"initialize-with")))}else s=o;!this.state.tmp.just_looking&&this.item&&this.item.position===Ko.POSITION_FIRST&&o>s&&(s=o),this.state.tmp.sort_key_flag||(this.state.tmp.disambig_settings.givens[t][a]=s,"string"!=typeof r||void 0!==this.name.strings.initialize&&!0!==this.name.strings.initialize||(this.state.tmp.disambig_settings.use_initials=!0))}},Ko.NameOutput.prototype.getEtAlConfig=function(){var e=this.item;this["et-al"]={},this.state.output.append(this.etal_term,this.etal_style,!0),this["et-al"].single=this.state.output.pop(),this["et-al"].single.strings.suffix=this.etal_suffix,this["et-al"].single.strings.prefix=this.etal_prefix_single,this.state.output.append(this.etal_term,this.etal_style,!0),this["et-al"].multiple=this.state.output.pop(),this["et-al"].multiple.strings.suffix=this.etal_suffix,this["et-al"].multiple.strings.prefix=this.etal_prefix_multiple,void 0===e&&(e={}),e.position?(this.state.inheritOpt(this.name,"et-al-subsequent-min")?this.etal_min=this.state.inheritOpt(this.name,"et-al-subsequent-min"):this.etal_min=this.state.inheritOpt(this.name,"et-al-min"),this.state.inheritOpt(this.name,"et-al-subsequent-use-first")?this.etal_use_first=this.state.inheritOpt(this.name,"et-al-subsequent-use-first"):this.etal_use_first=this.state.inheritOpt(this.name,"et-al-use-first")):(this.state.tmp["et-al-min"]?this.etal_min=this.state.tmp["et-al-min"]:this.etal_min=this.state.inheritOpt(this.name,"et-al-min"),this.state.tmp["et-al-use-first"]?this.etal_use_first=this.state.tmp["et-al-use-first"]:this.etal_use_first=this.state.inheritOpt(this.name,"et-al-use-first"),"boolean"==typeof this.state.tmp["et-al-use-last"]?this.etal_use_last=this.state.tmp["et-al-use-last"]:this.etal_use_last=this.state.inheritOpt(this.name,"et-al-use-last")),this.state.tmp["et-al-min"]||(this.state.tmp["et-al-min"]=this.etal_min)},Ko.NameOutput.prototype.setEtAlParameters=function(){var e,t,i,r;for(e=0,t=this.variables.length;e<t;e+=1){var s=this.variables[e];for(void 0===this.etal_spec[s]&&(this.etal_spec[s]={freeters:0,institutions:0,persons:[]}),this.etal_spec[this.nameset_base+e]=this.etal_spec[s],this.freeters[s].length&&this._setEtAlParameter("freeters",s),i=0,r=this.persons[s].length;i<r;i+=1)void 0===this.etal_spec[s][i]&&(this.etal_spec[s].persons[i]=0),this._setEtAlParameter("persons",s,i);this.institutions[s].length&&this._setEtAlParameter("institutions",s)}},Ko.NameOutput.prototype._setEtAlParameter=function(e,t,i){var r,s;"persons"===e?(r=this.persons[t][i],s=this.persons_count[t][i]):(r=this[e][t],s=this[e+"_count"][t]),r.length<s&&!this.state.tmp.sort_key_flag?this.etal_use_last?"persons"===e?this.etal_spec[t].persons[i]=2:this.etal_spec[t][e]=2:"persons"===e?this.etal_spec[t].persons[i]=1:this.etal_spec[t][e]=1:"persons"===e?this.etal_spec[t].persons[i]=0:this.etal_spec[t][e]=0},Ko.NameOutput.prototype.renderAllNames=function(){for(var e,t=0,i=this.variables.length;t<i;t+=1){var r=this.variables[t];(this.freeters[r].length||this.institutions[r].length)&&(this.state.tmp.group_context.tip.condition||(this.state.tmp.just_did_number=!1)),e=this.nameset_base+t,this.freeters[r].length&&(this.freeters[r]=this._renderNames(r,this.freeters[r],e));for(var s=0,a=this.institutions[r].length;s<a;s+=1)this.persons[r][s]=this._renderNames(r,this.persons[r][s],e,s)}this.renderInstitutionNames()},Ko.NameOutput.prototype.renderInstitutionNames=function(){for(var e=0,t=this.variables.length;e<t;e+=1)for(var i=this.variables[e],r=0,s=this.institutions[i].length;r<s;r+=1){var a,n=this.institutions[i][r],o={primary:"locale-orig",secondary:!1,tertiary:!1};if(a=this.state.tmp.extension?["sort"]:n.isInstitution||n.literal?this.state.opt["cite-lang-prefs"].institutions:this.state.opt["cite-lang-prefs"].persons)for(var l=["primary","secondary","tertiary"],u=0,c=l.length;u<c&&!(a.length-1<u);u+=1)a[u]&&(o[l[u]]="locale-"+a[u]);else o.primary="locale-translat";"bibliography"===this.state.tmp.area||"citation"===this.state.tmp.area&&"note"===this.state.opt.xclass&&this.item&&!this.item.position||(o.secondary=!1,o.tertiary=!1),this.setRenderedName(n);var p=this._renderInstitutionName(i,n,o,r);this.institutions[i][r]=p}},Ko.NameOutput.prototype._renderInstitutionName=function(e,t,i,r){var s,a,n,o,l,u=this.getName(t,i.primary,!0),c=u.name,p=u.usedOrig;if(c&&(c=this.fixupInstitution(c,e,r)),h=!1,i.secondary){var h=(u=this.getName(t,i.secondary,!1,p)).name;p=u.usedOrig,h&&(h=this.fixupInstitution(h,e,r))}s=!1,i.tertiary&&(s=(u=this.getName(t,i.tertiary,!1,p)).name)&&(s=this.fixupInstitution(s,e,r));var m={l:{pri:!1,sec:!1,ter:!1},s:{pri:!1,sec:!1,ter:!1}};switch(c&&(m.l.pri=c.long,m.s.pri=c.short.length?c.short:c.long),h&&(m.l.sec=h.long,m.s.sec=h.short.length?h.short:h.long),s&&(m.l.ter=s.long,m.s.ter=s.short.length?s.short:s.long),this.institution.strings["institution-parts"]){case"short":c.short.length?(n=this._getShortStyle(),o=[this._composeOneInstitutionPart([m.s.pri,m.s.sec,m.s.ter],i,n,e)]):(a=this._getLongStyle(c,e,r),o=[this._composeOneInstitutionPart([m.l.pri,m.l.sec,m.l.ter],i,a,e)]);break;case"short-long":a=this._getLongStyle(c,e,r),n=this._getShortStyle(),o=[l=this._renderOneInstitutionPart(c.short,n),this._composeOneInstitutionPart([m.l.pri,m.l.sec,m.l.ter],i,a,e)];break;case"long-short":a=this._getLongStyle(c,e,r),n=this._getShortStyle(),l=this._renderOneInstitutionPart(c.short,n),o=[this._composeOneInstitutionPart([m.l.pri,m.l.sec,m.l.ter],i,a,e),l];break;default:a=this._getLongStyle(c,e,r),o=[this._composeOneInstitutionPart([m.l.pri,m.l.sec,m.l.ter],i,a,e)]}var f=this._join(o," ");return f&&(f.isInstitution=!0),this.state.tmp.name_node.children.push(f),f},Ko.NameOutput.prototype._composeOneInstitutionPart=function(e,t,i){var r,s,a,n,o=!1,l=!1,u=!1;if(e[0]){if(r=Ko.Util.cloneToken(i),this.state.opt.citeAffixes[t.primary]&&"<i>"===this.state.opt.citeAffixes.institutions[t.primary].prefix){for(var c=!1,p=0,h=r.decorations.length;p<h;p+=1)"@font-style"===i.decorations[p][0]&&"italic"===r.decorations[p][1]&&(c=!0);c||r.decorations.push(["@font-style","italic"])}o=this._renderOneInstitutionPart(e[0],r)}if(e[1]&&(l=this._renderOneInstitutionPart(e[1],i)),e[2]&&(u=this._renderOneInstitutionPart(e[2],i)),l||u){this.state.output.openLevel("empty"),this.state.output.append(o),s=Ko.Util.cloneToken(i),t.secondary&&(s.strings.prefix=this.state.opt.citeAffixes.institutions[t.secondary].prefix,s.strings.suffix=this.state.opt.citeAffixes.institutions[t.secondary].suffix,s.strings.prefix||(s.strings.prefix=" "));var m=new Ko.Token;m.decorations.push(["@font-style","normal"]),m.decorations.push(["@font-weight","normal"]),this.state.output.openLevel(m),this.state.output.append(l,s),this.state.output.closeLevel(),a=Ko.Util.cloneToken(i),t.tertiary&&(a.strings.prefix=this.state.opt.citeAffixes.institutions[t.tertiary].prefix,a.strings.suffix=this.state.opt.citeAffixes.institutions[t.tertiary].suffix,a.strings.prefix||(a.strings.prefix=" "));var f=new Ko.Token;f.decorations.push(["@font-style","normal"]),f.decorations.push(["@font-weight","normal"]),this.state.output.openLevel(f),this.state.output.append(u,a),this.state.output.closeLevel(),this.state.output.closeLevel(),n=this.state.output.pop()}else n=o;return n},Ko.NameOutput.prototype._renderOneInstitutionPart=function(e,t){for(var i=0,r=e.length;i<r;i+=1)if(e[i]){var s=e[i];if(this.state.tmp.strip_periods)s=s.replace(/\./g,"");else for(var a=0,n=t.decorations.length;a<n;a+=1)if("@strip-periods"===t.decorations[a][0]&&"true"===t.decorations[a][1]){s=s.replace(/\./g,"");break}this.state.tmp.group_context.tip.variable_success=!0,this.state.tmp.can_substitute.replace(!1,Ko.LITERAL),"!here>>>"===s?e[i]=!1:(this.state.output.append(s,t,!0),e[i]=this.state.output.pop())}return void 0===this.institution.strings["part-separator"]&&(this.institution.strings["part-separator"]=this.state.tmp.name_delimiter),this._join(e,this.institution.strings["part-separator"])},Ko.NameOutput.prototype._renderNames=function(e,t,i,r){var s=!1;if(t.length){for(var a=[],n=0,o=t.length;n<o;n+=1){var l,u=t[n],c={primary:"locale-orig",secondary:!1,tertiary:!1};if(l=this.state.tmp.extension?["sort"]:u.isInstitution||u.literal?this.state.opt["cite-lang-prefs"].institutions:this.state.opt["cite-lang-prefs"].persons)for(var p=["primary","secondary","tertiary"],h=0,m=p.length;h<m&&!(l.length-1<h);h+=1)c[p[h]]="locale-"+l[h];else c.primary="locale-translat";if((this.state.tmp.sort_key_flag||"bibliography"!==this.state.tmp.area&&("citation"!==this.state.tmp.area||"note"!==this.state.opt.xclass||!this.item||this.item.position))&&(c.secondary=!1,c.tertiary=!1),this.setRenderedName(u),u.literal||u.isInstitution)a.push(this._renderInstitutionName(e,u,c,r));else{var f=this._renderPersonalName(e,u,c,i,n,r),d=Ko.Util.cloneToken(this.name);this.state.output.append(f,d,!0),a.push(this.state.output.pop())}}s=this.joinPersons(a,i,r)}return s},Ko.NameOutput.prototype._renderPersonalName=function(e,t,i,r,s,a){var n=this.getName(t,i.primary,!0),o=this._renderOnePersonalName(n.name,r,s,a),l=!1;i.secondary&&(n=this.getName(t,i.secondary,!1,n.usedOrig)).name&&(l=this._renderOnePersonalName(n.name,r,s,a));var u,c=!1;if(i.tertiary&&(n=this.getName(t,i.tertiary,!1,n.usedOrig)).name&&(c=this._renderOnePersonalName(n.name,r,s,a)),l||c){this.state.output.openLevel("empty"),this.state.output.append(o);var p=new Ko.Token;i.secondary&&(p.strings.prefix=this.state.opt.citeAffixes.persons[i.secondary].prefix,p.strings.suffix=this.state.opt.citeAffixes.persons[i.secondary].suffix,p.strings.prefix||(p.strings.prefix=" ")),this.state.output.append(l,p);var h=new Ko.Token;i.tertiary&&(h.strings.prefix=this.state.opt.citeAffixes.persons[i.tertiary].prefix,h.strings.suffix=this.state.opt.citeAffixes.persons[i.tertiary].suffix,h.strings.prefix||(h.strings.prefix=" ")),this.state.output.append(c,h),this.state.output.closeLevel(),u=this.state.output.pop()}else u=o;return u},Ko.NameOutput.prototype._isRomanesque=function(e){var t,i=2;return e.family.replace(/\"/g,"").match(Ko.ROMANESQUE_REGEXP)||(i=0),!i&&e.given&&e.given.match(Ko.STARTSWITH_ROMANESQUE_REGEXP)&&(i=1),2==i&&(e.multi&&e.multi.main?t=e.multi.main.slice(0,2):this.Item.language&&(t=this.Item.language.slice(0,2)),["ja","zh"].indexOf(t)>-1&&(i=1)),i},Ko.NameOutput.prototype._renderOnePersonalName=function(e,t,i,r){var s=e,a=this._droppingParticle(s,t,r),n=this._familyName(s),o=this._nonDroppingParticle(s),l=this._givenName(s,t,i),u=l.blob,c=this._nameSuffix(s);!1===u&&(a=!1,c=!1);var p,h=this.state.inheritOpt(this.name,"sort-separator");h||(h=""),p=s["comma-suffix"]?", ":" ";var m,f,d,g,b,y=this._isRomanesque(s),v=function e(t){return!!t&&("string"==typeof t.blobs?["\u2019","'","-"," "].indexOf(t.blobs.slice(-1))>-1:e(t.blobs[t.blobs.length-1]))}(o);if(m=["fr","ru","cs"].indexOf(this.state.opt["default-locale"][0].slice(0,2))>-1?"\xa0":" ",0===y)f=this._join([o,n,u],"");else if(1===y||s["static-ordering"])d=this._join([o,n],m),f=this._join([d,u]," ");else if(s["reverse-ordering"])d=this._join([o,n],m),f=this._join([u,d]," ");else if(this.state.tmp.sort_key_flag)"never"===this.state.opt["demote-non-dropping-particle"]?(d=this._join([o,n],m),d=this._join([d,a]," "),d=this._join([d,u],this.state.opt.sort_sep),f=this._join([d,c]," ")):(b=this._join([u,a,o]," "),d=this._join([n,b],this.state.opt.sort_sep),f=this._join([d,c]," "));else if("all"===this.state.inheritOpt(this.name,"name-as-sort-order")||"first"===this.state.inheritOpt(this.name,"name-as-sort-order")&&0===i&&(0===r||void 0===r))["Lord","Lady"].indexOf(s.given)>-1&&(h=", "),["always","display-and-sort"].indexOf(this.state.opt["demote-non-dropping-particle"])>-1?(b=this._join([u,a],s["comma-dropping-particle"]+" "),(b=this._join([b,o]," "))&&this.given&&(b.strings.prefix=this.given.strings.prefix,b.strings.suffix=this.given.strings.suffix),n&&this.family&&(n.strings.prefix=this.family.strings.prefix,n.strings.suffix=this.family.strings.suffix),d=this._join([n,b],h),f=this._join([d,c],h)):((g=v?this._join([o,n],""):this._join([o,n],m))&&this.family&&(g.strings.prefix=this.family.strings.prefix,g.strings.suffix=this.family.strings.suffix),(b=this._join([u,a],s["comma-dropping-particle"]+" "))&&this.given&&(b.strings.prefix=this.given.strings.prefix,b.strings.suffix=this.given.strings.suffix),d=this._join([g,b],h),f=this._join([d,c],h)),f.isInverted=!0;else{if(s["dropping-particle"]&&s.family&&!s["non-dropping-particle"]){var _=s["dropping-particle"];["'","\u02bc","\u2019","-"].indexOf(_.slice(-1))>-1&&"de"!==_.slice(0,-1)&&(n=this._join([a,n],""),a=!1)}var x;v?(b=this._join([o,n],""),b=this._join([a,b],m)):b=this._join([a,o,n],m),(b=this._join([b,c],p))&&this.family&&(b.strings.prefix=this.family.strings.prefix,b.strings.suffix=this.family.strings.suffix),u&&this.given&&(u.strings.prefix=this.given.strings.prefix,u.strings.suffix=this.given.strings.suffix),b.strings.prefix&&(s["comma-dropping-particle"]=""),x=this.state.inheritOpt(this.name,"initialize-with")&&this.state.inheritOpt(this.name,"initialize-with").match(/[\u00a0\ufeff]/)&&1===l.initializationLevel?m:" ",f=this._join([u,b],s["comma-dropping-particle"]+x)}return this.state.tmp.group_context.tip.variable_success=!0,this.state.tmp.can_substitute.replace(!1,Ko.LITERAL),this.state.tmp.term_predecessor=!0,this.state.tmp.name_node.children.push(f),f},Ko.NameOutput.prototype._normalizeNameInput=function(e){var t={literal:e.literal,family:e.family,isInstitution:e.isInstitution,given:e.given,suffix:e.suffix,"comma-suffix":e["comma-suffix"],"non-dropping-particle":e["non-dropping-particle"],"dropping-particle":e["dropping-particle"],"static-ordering":e["static-ordering"],"static-particles":e["static-particles"],"reverse-ordering":e["reverse-ordering"],"full-form-always":e["full-form-always"],"parse-names":e["parse-names"],"comma-dropping-particle":"",block_initialize:e.block_initialize,multi:e.multi};return this._parseName(t),t},Ko.NameOutput.prototype._stripPeriods=function(e,t){var i=this[e+"_decor"];if(t)if(this.state.tmp.strip_periods)t=t.replace(/\./g,"");else if(i)for(var r=0,s=i.decorations.length;r<s;r+=1)if("@strip-periods"===i.decorations[r][0]&&"true"===i.decorations[r][1]){t=t.replace(/\./g,"");break}return t},Ko.NameOutput.prototype._nonDroppingParticle=function(e){var t=e["non-dropping-particle"];t&&this.state.tmp.sort_key_flag&&(t=t.replace(/[\'\u2019]/,""));var i=this._stripPeriods("family",t);return!!this.state.output.append(i,this.family_decor,!0)&&this.state.output.pop()},Ko.NameOutput.prototype._droppingParticle=function(e,t,i){var r=e["dropping-particle"];r&&this.state.tmp.sort_key_flag&&(r=r.replace(/[\'\u2019]/,""));var s=this._stripPeriods("given",r);if(e["dropping-particle"]&&e["dropping-particle"].match(/^et.?al[^a-z]$/))this.state.inheritOpt(this.name,"et-al-use-last")?void 0===i?this.etal_spec[t].freeters=2:this.etal_spec[t].persons=2:void 0===i?this.etal_spec[t].freeters=1:this.etal_spec[t].persons=1,e["comma-dropping-particle"]="";else if(this.state.output.append(s,this.given_decor,!0))return this.state.output.pop();return!1},Ko.NameOutput.prototype._familyName=function(e){var t=this._stripPeriods("family",e.family);return!!this.state.output.append(t,this.family_decor,!0)&&this.state.output.pop()},Ko.NameOutput.prototype._givenName=function(e,t,i){var r,s,a="long"!==this.state.inheritOpt(this.name,"form","name-form","long"),n=!1!==this.state.inheritOpt(this.name,"initialize"),o="string"==typeof this.state.inheritOpt(this.name,"initialize-with")&&!e.block_initialize;if(e["full-form-always"])s=2;else{r=a?0:o?1:2;var l=this.state.tmp.disambig_settings.givens[t][i];s=l>r?l:r}var u=this.state.citation.opt["givenname-disambiguation-rule"];if(u&&"-with-initials"===u.slice(-14)&&(o=!0),e.family&&1===s)if(o){var c=this.state.inheritOpt(this.name,"initialize-with",!1,"");e.given=Ko.Util.Names.initializeWith(this.state,e.given,c,!n)}else e.given=Ko.Util.Names.unInitialize(this.state,e.given);else{if(0===s)return{blob:!1};2===s&&(e.given=Ko.Util.Names.unInitialize(this.state,e.given))}var p=this._stripPeriods("given",e.given);return this.state.output.append(p,this.given_decor,!0)?{blob:this.state.output.pop(),initializationLevel:s}:{blob:!1}},Ko.NameOutput.prototype._nameSuffix=function(e){var t,i=e.suffix;"string"==typeof this.state.inheritOpt(this.name,"initialize-with")&&(i=Ko.Util.Names.initializeWith(this.state,e.suffix,this.state.inheritOpt(this.name,"initialize-with"),!0));var r="";return(i=this._stripPeriods("family",i))&&"."===i.slice(-1)&&(i=i.slice(0,-1),r="."),!!this.state.output.append(i,"empty",!0)&&((t=this.state.output.pop()).strings.suffix=r+t.strings.suffix,t)},Ko.NameOutput.prototype._getLongStyle=function(e){var t;return(t=e.short.length&&this.institutionpart["long-with-short"]?this.institutionpart["long-with-short"]:this.institutionpart.long)||(t=new Ko.Token),t},Ko.NameOutput.prototype._getShortStyle=function(){return this.institutionpart.short?this.institutionpart.short:new Ko.Token},Ko.NameOutput.prototype._parseName=function(e){if(!e["parse-names"]&&void 0!==e["parse-names"])return e;var t;e.family&&!e.given&&e.isInstitution&&(e.literal=e.family,e.family=void 0,e.isInstitution=void 0),e.family&&'"'===e.family.slice(0,1)&&'"'===e.family.slice(-1)||!e["parse-names"]&&void 0!==e["parse-names"]?(e.family=e.family.slice(1,-1),t=!0,e["parse-names"]=0):t=!1,this.state.opt.development_extensions.parse_names&&!e["non-dropping-particle"]&&e.family&&!t&&e.given&&(e["static-particles"]||Ko.parseParticles(e,!0))},Ko.NameOutput.prototype.getName=function(e,t,i,r){if(r&&"locale-orig"===t)return{name:!1,usedOrig:r};e.family||(e.family=""),e.given||(e.given="");var s={};s["static-ordering"]=this.getStaticOrder(e);var a,n=!0;if("locale-orig"!==t&&(n=!1,e.multi))for(var o=this.state.opt[t],l=0,u=o.length;l<u;l+=1)if(a=o[l],e.multi._key[a]){n=!0;var c=e.isInstitution;(e=e.multi._key[a]).isInstitution=c,(s=this.getNameParams(a)).transliterated=!0;break}return n||(a=!1,e.multi&&e.multi.main?a=e.multi.main:this.Item.language&&(a=this.Item.language),a&&(s=this.getNameParams(a))),i||n?(e.family||(e.family=""),e.given||(e.given=""),e.literal&&(delete e.family,delete e.given),!(e={family:e.family,given:e.given,"non-dropping-particle":e["non-dropping-particle"],"dropping-particle":e["dropping-particle"],suffix:e.suffix,"static-ordering":s["static-ordering"],"static-particles":e["static-particles"],"reverse-ordering":s["reverse-ordering"],"full-form-always":s["full-form-always"],"parse-names":e["parse-names"],"comma-suffix":e["comma-suffix"],"comma-dropping-particle":e["comma-dropping-particle"],transliterated:s.transliterated,block_initialize:s["block-initialize"],literal:e.literal,isInstitution:e.isInstitution,multi:e.multi}).literal&&!e.given&&e.family&&e.isInstitution&&(e.literal=e.family),e.literal&&(delete e.family,delete e.given),{name:e=this._normalizeNameInput(e),usedOrig:r||!n}):{name:!1,usedOrig:r}},Ko.NameOutput.prototype.getNameParams=function(e){var t={},i=Ko.localeResolve(this.Item.language,this.state.opt["default-locale"][0]),r=this.state.locale[i.best]?i.best:this.state.opt["default-locale"][0],s=this.state.locale[r].opts["name-as-sort-order"],a=this.state.locale[r].opts["name-as-reverse-order"],n=this.state.locale[r].opts["name-never-short"],o=e.split("-")[0];return s&&s[o]&&(t["static-ordering"]=!0,t["reverse-ordering"]=!1),a&&a[o]&&(t["reverse-ordering"]=!0,t["static-ordering"]=!1),n&&n[o]&&(t["full-form-always"]=!0),t["static-ordering"]&&(t["block-initialize"]=!0),t},Ko.NameOutput.prototype.setRenderedName=function(e){if("bibliography"===this.state.tmp.area){for(var t="",i=0,r=Ko.NAME_PARTS.length;i<r;i+=1)e[Ko.NAME_PARTS[i]]&&(t+=e[Ko.NAME_PARTS[i]]);this.state.tmp.rendered_name.push(t)}},Ko.NameOutput.prototype.fixupInstitution=function(e,t,i){!e.literal&&e.family&&(e.literal=e.family,delete e.family);var r=e.literal,s=r,a={long:r.split(/\s*\|\s*/),short:s.split(/\s*\|\s*/)};if(this.state.sys.getAbbreviation){if("short"===this.institution.strings.form){let e=this.Item.jurisdiction;e=this.state.transform.loadAbbreviation(e,"institution-entire",r,this.Item.language),this.state.transform.abbrevs[e]["institution-entire"][r]?r=this.state.transform.abbrevs[e]["institution-entire"][r]:(e=this.Item.jurisdiction,e=this.state.transform.loadAbbreviation(e,"institution-part",o,this.Item.language),this.state.transform.abbrevs[e]["institution-part"][r]&&(r=this.state.transform.abbrevs[e]["institution-part"][r])),r=this._quashChecks(e,r)}if(["short","short-long","long-short"].indexOf(this.institution.strings["institution-parts"])>-1){let e=this.Item.jurisdiction;e=this.state.transform.loadAbbreviation(e,"institution-part",s,this.Item.language),this.state.transform.abbrevs[e]["institution-part"][s]&&(s=this.state.transform.abbrevs[e]["institution-part"][s]),s=this._quashChecks(e,s),["short-long","long-short"].indexOf(this.institution.strings["institution-parts"])>-1&&s===r&&(s="")}if(a.long=r.split(/\s*\|\s*/),a.short=s.split(/\s*\|\s*/),["short","short-long","long-short"].indexOf(this.institution.strings["institution-parts"])>-1)for(var n=a.short.length-1;n>-1;n--){let e=this.Item.jurisdiction;var o=a.short[n];if(e=this.state.transform.loadAbbreviation(e,"institution-part",o,this.Item.language),this.state.transform.abbrevs[e]["institution-part"][o]&&(a.short[n]=this.state.transform.abbrevs[e]["institution-part"][o]),a.short[n].indexOf("|")>-1){let e=a.short,t=e[n].split(/\s*\|\s*/);a.short=e.slice(0,n).concat(t).concat(e.slice(n+1))}}if(this.state.opt.development_extensions.legacy_institution_name_ordering&&a.short.reverse(),a.short=this._trimInstitution(a.short),this.institution.strings["reverse-order"]&&a.short.reverse(),!this.state.tmp.just_looking&&this.Item.jurisdiction){let e=this.Item.jurisdiction;var l=this.state.tmp.abbrev_trimmer;if(l&&l[e]&&l[e][t])for(var u=0,c=a.short.length;u<c;u++){var p=a.short[u];a.short[u]=p.replace(l[e][t],"").trim()}}}return this.state.opt.development_extensions.legacy_institution_name_ordering&&a.long.reverse(),a.long=this._trimInstitution(a.long),this.institution.strings["reverse-order"]&&a.long.reverse(),a},Ko.NameOutput.prototype.getStaticOrder=function(e,t){var i=!1;return(!t&&e["static-ordering"]||0===this._isRomanesque(e)||(!e.multi||!e.multi.main)&&this.Item.language&&["vi","hu"].indexOf(this.Item.language)>-1||e.multi&&e.multi.main&&["vi","hu"].indexOf(e.multi.main.slice(0,2))>-1||this.state.opt["auto-vietnamese-names"]&&Ko.VIETNAMESE_NAMES.exec(e.family+" "+e.given)&&Ko.VIETNAMESE_SPECIALS.exec(e.family+e.given))&&(i=!0),i},Ko.NameOutput.prototype._quashChecks=function(e,t){var i=(t=this.state.transform.quashCheck(e,t)).split(/>>[0-9]{4}>>/),r=t.match(/>>([0-9]{4})>>/);t=i.pop();var s=this.Item["original-date"]?this.Item["original-date"]:this.Item.issued;if(s&&(s=parseInt(s.year,10),s=!isNaN(s)&&s),s){if(i.length>0)for(var a=r.length-1;a>0&&!(s>=parseInt(r[a],10));a--)t=i.pop();t=t.replace(/\s*\|\s*/g,"|")}return t},Ko.NameOutput.prototype._trimInstitution=function(e){var t=!1,i=!1,r=!1,s=!1,a=e.slice();if(this.institution){if(void 0!==this.institution.strings["use-first"]&&(t=this.institution.strings["use-first"]),void 0!==this.institution.strings["use-last"]&&(r=this.institution.strings["use-last"]),void 0!==this.institution.strings["stop-first"]&&(s=this.institution.strings["stop-first"]),void 0!==this.institution.strings["stop-last"]&&(i=this.institution.strings["stop-last"]),t&&(i&&(a=a.slice(0,-1*i)),a=a.slice(0,t)),r){var n=e.slice();t?s=t:a=[],s&&(n=n.slice(s)),n=n.slice(-1*r),a=a.concat(n)}e=a}return e},Ko.PublisherOutput=function(e,t){this.state=e,this.group_tok=t,this.varlist=[]},Ko.PublisherOutput.prototype.render=function(){this.clearVars(),this.composeAndBlob(),this.composeElements(),this.composePublishers(),this.joinPublishers()},Ko.PublisherOutput.prototype.composeAndBlob=function(){this.and_blob={};var e=!1;"text"===this.group_tok.strings.and?e=this.state.getTerm("and"):"symbol"===this.group_tok.strings.and&&(e="&");var t=new Ko.Token;t.strings.suffix=" ",t.strings.prefix=" ",this.state.output.append(e,t,!0);var i=this.state.output.pop();t.strings.prefix=this.group_tok.strings["subgroup-delimiter"],this.state.output.append(e,t,!0);var r=this.state.output.pop();this.and_blob.single=!1,this.and_blob.multiple=!1,e&&("always"===this.group_tok.strings["subgroup-delimiter-precedes-last"]?this.and_blob.single=r:"never"===this.group_tok.strings["subgroup-delimiter-precedes-last"]?(this.and_blob.single=i,this.and_blob.multiple=i):(this.and_blob.single=i,this.and_blob.multiple=r))},Ko.PublisherOutput.prototype.composeElements=function(){for(var e=0;e<2;e+=1)for(var t=["publisher","publisher-place"][e],i=0,r=this["publisher-list"].length;i<r;i+=1){var s=this[t+"-list"][i],a=this[t+"-token"];this.state.output.append(s,a,!0),this[t+"-list"][i]=this.state.output.pop()}},Ko.PublisherOutput.prototype.composePublishers=function(){for(var e,t=0,i=this["publisher-list"].length;t<i;t+=1)e=[this[this.varlist[0]+"-list"][t],this[this.varlist[1]+"-list"][t]],this["publisher-list"][t]=this._join(e,this.group_tok.strings.delimiter)},Ko.PublisherOutput.prototype.joinPublishers=function(){var e=this["publisher-list"],t=this._join(e,this.group_tok.strings["subgroup-delimiter"],this.and_blob.single,this.and_blob.multiple,this.group_tok);this.state.output.append(t,"literal")},Ko.PublisherOutput.prototype._join=Ko.NameOutput.prototype._join,Ko.PublisherOutput.prototype._getToken=Ko.NameOutput.prototype._getToken,Ko.PublisherOutput.prototype.clearVars=function(){this.state.tmp["publisher-list"]=!1,this.state.tmp["publisher-place-list"]=!1,this.state.tmp["publisher-group-token"]=!1,this.state.tmp["publisher-token"]=!1,this.state.tmp["publisher-place-token"]=!1},Ko.evaluateLabel=function(e,t,i,r){var s;"locator"===e.strings.term?(r&&r.label&&(s="sub verbo"===r.label?"sub-verbo":r.label),s||(s="page")):s=e.strings.term;var a=e.strings.plural;if("number"!=typeof a){var n=r&&"locator"===e.strings.term?r:i;n[e.strings.term]&&(t.processNumber(!1,n,e.strings.term,i.type),a=t.tmp.shadow_numbers[e.strings.term].plural,t.tmp.shadow_numbers[e.strings.term].labelForm||t.tmp.shadow_numbers[e.strings.term].labelDecorations||(e.strings.form?t.tmp.shadow_numbers[e.strings.term].labelForm=e.strings.form:t.tmp.group_context.tip.label_form&&(t.tmp.shadow_numbers[e.strings.term].labelForm=t.tmp.group_context.tip.label_form),t.tmp.shadow_numbers[e.strings.term].labelCapitalizeIfFirst=e.strings.capitalize_if_first,t.tmp.shadow_numbers[e.strings.term].labelDecorations=e.decorations.slice()),["locator","number","page"].indexOf(e.strings.term)>-1&&t.tmp.shadow_numbers[e.strings.term].label&&(s=t.tmp.shadow_numbers[e.strings.term].label),e.decorations&&t.opt.development_extensions.csl_reverse_lookup_support&&(e.decorations.reverse(),e.decorations.push(["@showid","true",e.cslid]),e.decorations.reverse()))}return Ko.castLabel(t,e,s,a,Ko.TOLERANT)},Ko.castLabel=function(e,t,i,r,s){var a=t.strings.form,n=t.strings.capitalize_if_first;e.tmp.group_context.tip.label_form&&("static"===a?e.tmp.group_context.tip.label_static=!0:a=e.tmp.group_context.tip.label_form),e.tmp.group_context.tip.label_capitalize_if_first&&(n=e.tmp.group_context.tip.label_capitalize_if_first);var o=e.getTerm(i,a,r,!1,s,t.default_locale);if(n&&(o=Ko.Output.Formatters["capitalize-first"](e,o)),e.tmp.strip_periods)o=o.replace(/\./g,"");else for(var l=0,u=t.decorations.length;l<u;l+=1)if("@strip-periods"===t.decorations[l][0]&&"true"===t.decorations[l][1]){o=o.replace(/\./g,"");break}return o},Ko.Node.name={build:function(e,t){var i,r;[Ko.SINGLETON,Ko.START].indexOf(this.tokentype)>-1&&(void 0===e.tmp.root?(r=void 0,e.tmp.root="citation"):r=e.tmp.root,e.inheritOpt(this,"et-al-subsequent-min")&&e.inheritOpt(this,"et-al-subsequent-min")!==e.inheritOpt(this,"et-al-min")&&(e.opt.update_mode=Ko.POSITION),e.inheritOpt(this,"et-al-subsequent-use-first")&&e.inheritOpt(this,"et-al-subsequent-use-first")!==e.inheritOpt(this,"et-al-use-first")&&(e.opt.update_mode=Ko.POSITION),e.tmp.root=r,i=function(e){e.tmp.etal_term="et-al",e.tmp.name_delimiter=e.inheritOpt(this,"delimiter","name-delimiter",", "),e.tmp["delimiter-precedes-et-al"]=e.inheritOpt(this,"delimiter-precedes-et-al"),"text"===e.inheritOpt(this,"and")?this.and_term=e.getTerm("and","long",0):"symbol"===e.inheritOpt(this,"and")&&(e.opt.development_extensions.expect_and_symbol_form?this.and_term=e.getTerm("and","symbol",0):this.and_term="&"),e.tmp.and_term=this.and_term,Ko.STARTSWITH_ROMANESQUE_REGEXP.test(this.and_term)?(this.and_prefix_single=" ",this.and_prefix_multiple=", ","string"==typeof e.tmp.name_delimiter&&(this.and_prefix_multiple=e.tmp.name_delimiter),this.and_suffix=" "):(this.and_prefix_single="",this.and_prefix_multiple="",this.and_suffix=""),"always"===e.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_single=e.tmp.name_delimiter:"never"===e.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_multiple&&(this.and_prefix_multiple=" "):"after-inverted-name"===e.inheritOpt(this,"delimiter-precedes-last")&&(this.and_prefix_single&&(this.and_prefix_single=e.tmp.name_delimiter),this.and_prefix_multiple&&(this.and_prefix_multiple=" ")),this.and={},e.inheritOpt(this,"and")?(e.output.append(this.and_term,"empty",!0),this.and.single=e.output.pop(),this.and.single.strings.prefix=this.and_prefix_single,this.and.single.strings.suffix=this.and_suffix,e.output.append(this.and_term,"empty",!0),this.and.multiple=e.output.pop(),this.and.multiple.strings.prefix=this.and_prefix_multiple,this.and.multiple.strings.suffix=this.and_suffix):e.tmp.name_delimiter&&(this.and.single=new Ko.Blob(e.tmp.name_delimiter),this.and.single.strings.prefix="",this.and.single.strings.suffix="",this.and.multiple=new Ko.Blob(e.tmp.name_delimiter),this.and.multiple.strings.prefix="",this.and.multiple.strings.suffix=""),this.ellipsis={},e.inheritOpt(this,"et-al-use-last")&&(this.ellipsis_term="\u2026",this.ellipsis_prefix_single=" ",this.ellipsis_prefix_multiple=e.inheritOpt(this,"delimiter","name-delimiter",", "),this.ellipsis_suffix=" ",this.ellipsis.single=new Ko.Blob(this.ellipsis_term),this.ellipsis.single.strings.prefix=this.ellipsis_prefix_single,this.ellipsis.single.strings.suffix=this.ellipsis_suffix,this.ellipsis.multiple=new Ko.Blob(this.ellipsis_term),this.ellipsis.multiple.strings.prefix=this.ellipsis_prefix_multiple,this.ellipsis.multiple.strings.suffix=this.ellipsis_suffix),void 0===e.tmp["et-al-min"]&&(e.tmp["et-al-min"]=e.inheritOpt(this,"et-al-min")),void 0===e.tmp["et-al-use-first"]&&(e.tmp["et-al-use-first"]=e.inheritOpt(this,"et-al-use-first")),void 0===e.tmp["et-al-use-last"]&&(e.tmp["et-al-use-last"]=e.inheritOpt(this,"et-al-use-last")),e.nameOutput.name=this},e.build.name_flag=!0,this.execs.push(i)),t.push(this)}},Ko.Node["name-part"]={build:function(e){e.build[this.strings.name]=this}},Ko.Node.names={build:function(e,t){var i;if(this.tokentype!==Ko.START&&this.tokentype!==Ko.SINGLETON||(Ko.Util.substituteStart.call(this,e,t),e.build.substitute_level.push(1)),this.tokentype===Ko.SINGLETON){for(var r in e.build.names_variables[e.build.names_variables.length-1].concat(this.variables),this.variables){var s=this.variables[r],a=e.build.name_label[e.build.name_label.length-1];Object.keys(a).length&&(a[s]=a[Object.keys(a)[0]])}i=function(e){e.nameOutput.reinit(this,this.variables_real[0])},this.execs.push(i)}if(this.tokentype===Ko.START&&(e.build.names_flag=!0,e.build.name_flag=!1,e.build.names_level+=1,e.build.names_variables.push(this.variables),e.build.name_label.push({}),i=function(e){e.tmp.can_substitute.push(!0),e.tmp.name_node={},e.tmp.name_node.children=[],e.nameOutput.init(this)},this.execs.push(i)),this.tokentype===Ko.END){for(r=0;r<3;r+=1){var n=["family","given","et-al"][r];this[n]=e.build[n],1===e.build.names_level&&(e.build[n]=void 0)}this.label=e.build.name_label[e.build.name_label.length-1],e.build.names_level+=-1,e.build.names_variables.pop(),e.build.name_label.pop(),i=function(e){e.tmp.etal_node?this.etal_style=e.tmp.etal_node:this.etal_style="empty",this.etal_term=e.getTerm(e.tmp.etal_term,"long",0),this.etal_prefix_single=" ",this.etal_prefix_multiple=e.tmp.name_delimiter,"always"===e.tmp["delimiter-precedes-et-al"]?this.etal_prefix_single=e.tmp.name_delimiter:"never"===e.tmp["delimiter-precedes-et-al"]?this.etal_prefix_multiple=" ":"after-inverted-name"===e.tmp["delimiter-precedes-et-al"]&&(this.etal_prefix_single=e.tmp.name_delimiter,this.etal_prefix_multiple=" "),this.etal_suffix="",Ko.STARTSWITH_ROMANESQUE_REGEXP.test(this.etal_term)||(" "===this.etal_prefix_single&&(this.etal_prefix_single="")," "===this.etal_prefix_multiple&&(this.etal_prefix_multiple="")," "===this.etal_suffix&&(this.etal_suffix=""));for(var t=0;t<3;t+=1){var i=["family","given"][t];e.nameOutput[i]=this[i]}e.nameOutput.with=this.with;var r="",s="";Ko.STARTSWITH_ROMANESQUE_REGEXP.test("with")&&(r=" ",s=" ");var a={};a.single=new Ko.Blob("with"),a.single.strings.suffix=s,a.multiple=new Ko.Blob("with"),a.multiple.strings.suffix=s,"always"===e.inheritOpt(e.nameOutput.name,"delimiter-precedes-last")?(a.single.strings.prefix=e.inheritOpt(this,"delimiter","names-delimiter"),a.multiple.strings.prefix=e.inheritOpt(this,"delimiter","names-delimiter")):"contextual"===e.inheritOpt(e.nameOutput.name,"delimiter-precedes-last")?(a.single.strings.prefix=r,a.multiple.strings.prefix=e.inheritOpt(this,"delimiter","names-delimiter")):"after-inverted-name"===e.inheritOpt(e.nameOutput.name,"delimiter-precedes-last")?(a.single.strings.prefix=e.inheritOpt(this,"delimiter","names-delimiter"),a.multiple.strings.prefix=r):(a.single.strings.prefix=r,a.multiple.strings.prefix=r),e.nameOutput.with=a,e.nameOutput.label=this.label,e.nameOutput.etal_style=this.etal_style,e.nameOutput.etal_term=this.etal_term,e.nameOutput.etal_prefix_single=this.etal_prefix_single,e.nameOutput.etal_prefix_multiple=this.etal_prefix_multiple,e.nameOutput.etal_suffix=this.etal_suffix,e.nameOutput.outputNames(),e.tmp["et-al-use-first"]=void 0,e.tmp["et-al-min"]=void 0,e.tmp["et-al-use-last"]=void 0},this.execs.push(i),i=function(e){e.tmp.can_substitute.pop()||e.tmp.can_substitute.replace(!1,Ko.LITERAL),1===e.tmp.can_substitute.mystack.length&&(e.tmp.can_block_substitute=!1)},this.execs.push(i),e.build.name_flag=!1}t.push(this),this.tokentype!==Ko.END&&this.tokentype!==Ko.SINGLETON||(e.build.substitute_level.pop(),Ko.Util.substituteEnd.call(this,e,t))}},Ko.Node.number={build:function(e,t){var i;Ko.Util.substituteStart.call(this,e,t),"roman"===this.strings.form?this.formatter=e.fun.romanizer:"ordinal"===this.strings.form?this.formatter=e.fun.ordinalizer:"long-ordinal"===this.strings.form&&(this.formatter=e.fun.long_ordinalizer),void 0===this.successor_prefix&&(this.successor_prefix=e[e.build.area].opt.layout_delimiter),void 0===this.splice_prefix&&(this.splice_prefix=e[e.build.area].opt.layout_delimiter),i=function(e,t,i){if(0!==this.variables.length){var r;if(r=this.variables[0],void 0===i&&(i={}),["locator","locator-extra"].indexOf(r)>-1){if(e.tmp.just_looking)return;if(!i[r])return}else if(!t[r])return;if("collection-number"===r&&"legal_case"===t.type&&(e.tmp.renders_collection_number=!0),e.tmp.group_context.tip.force_suppress)return!1;if(["locator","locator-extra"].indexOf(r)>-1?e.processNumber.call(e,this,i,r,t.type):(!e.tmp.group_context.tip.condition&&t[r]&&(e.tmp.just_did_number=(""+t[r]).match(/[0-9]$/)),e.processNumber.call(e,this,t,r,t.type)),this.substring){var s=t[r].slice(this.substring);e.output.append(s,this)}else Ko.Util.outputNumericField(e,r,t.id);["locator","locator-extra"].indexOf(this.variables_real[0])>-1&&!e.tmp.just_looking&&(e.tmp.done_vars.push(this.variables_real[0]),e.tmp.group_context.tip.done_vars.push(this.variables_real[0]))}},this.execs.push(i),t.push(this),Ko.Util.substituteEnd.call(this,e,t)}},Ko.Node.sort={build:function(e,t){if(t=e[e.build.root+"_sort"].tokens,this.tokentype===Ko.START){"citation"===e.build.area&&(e.opt.sort_citations=!0),e.build.area=e.build.root+"_sort",e.build.extension="_sort";var i=function(e,t){if(e.opt.has_layout_locale){for(var i,r=Ko.localeResolve(t.language,e.opt["default-locale"][0]),s=e[e.tmp.area.slice(0,-5)].opt.sort_locales,a=0,n=s.length;a<n&&((i=s[a][r.bare])||(i=s[a][r.best]),!i);a+=1);i||(i=e.opt["default-locale"][0]),e.tmp.lang_sort_hold=e.opt.lang,e.opt.lang=i}};this.execs.push(i)}this.tokentype===Ko.END&&(e.build.area=e.build.root,e.build.extension="",i=function(e){e.opt.has_layout_locale&&(e.opt.lang=e.tmp.lang_sort_hold,delete e.tmp.lang_sort_hold)},this.execs.push(i)),t.push(this)}},Ko.Node.substitute={build:function(e,t){var i;if(this.tokentype===Ko.START){var r=new Ko.Token("choose",Ko.START);Ko.Node.choose.build.call(r,e,t);var s=new Ko.Token("if",Ko.SINGLETON);i=function(){return!(!e.tmp.value.length||e.tmp.common_term_match_fail)},s.tests=[i],s.test=e.fun.match.any(s,e,s.tests),t.push(s),i=function(e){e.tmp.can_block_substitute=!0,e.tmp.value.length&&!e.tmp.common_term_match_fail&&e.tmp.can_substitute.replace(!1,Ko.LITERAL),e.tmp.common_term_match_fail=!1},this.execs.push(i),t.push(this)}if(this.tokentype===Ko.END){t.push(this);var a=new Ko.Token("choose",Ko.END);Ko.Node.choose.build.call(a,e,t)}}},Ko.Node.text={build:function(e,t){var i,r,s,a,n,o,l,u,c,p,h;if(this.postponed_macro){var m=Ko.Util.cloneToken(this);m.name="group",m.tokentype=Ko.START,Ko.Node.group.build.call(m,e,t),Ko.expandMacro.call(e,this,t);var f=Ko.Util.cloneToken(this);f.name="group",f.tokentype=Ko.END,"juris-locator-label"===this.postponed_macro&&(f.isJurisLocatorLabel=!0),Ko.Node.group.build.call(f,e,t)}else{if(Ko.Util.substituteStart.call(this,e,t),this.variables_real||(this.variables_real=[]),this.variables||(this.variables=[]),r="long",s=0,this.strings.form&&(r=this.strings.form),this.strings.plural&&(s=this.strings.plural),"citation-number"===this.variables_real[0]||"year-suffix"===this.variables_real[0]||"citation-label"===this.variables_real[0])"citation-number"===this.variables_real[0]?("citation"===e.build.root&&(e.opt.update_mode=Ko.NUMERIC),"bibliography"===e.build.root&&(e.opt.bib_mode=Ko.NUMERIC),"citation-number"===e[e.tmp.area].opt.collapse&&(this.range_prefix=e.getTerm("citation-range-delimiter")),this.successor_prefix=e[e.build.area].opt.layout_delimiter,this.splice_prefix=e[e.build.area].opt.layout_delimiter,i=function(e,t,i){if(a=""+t.id,!e.tmp.just_looking){if("_sort"===e.tmp.area.slice(-5)&&"citation-number"===this.variables[0]){if("bibliography_sort"===e.tmp.area&&e.tmp.group_context.tip.done_vars.push("citation-number"),"citation_sort"===e.tmp.area&&e.bibliography_sort.tmp.citation_number_map)var r=e.bibliography_sort.tmp.citation_number_map[e.registry.registry[t.id].seq];else r=e.registry.registry[t.id].seq;return r&&(r=Ko.Util.padding(""+r)),void e.output.append(r,this)}i&&i["author-only"]&&e.tmp.element_trace.replace("suppress-me"),r="bibliography_sort"!==e.tmp.area&&e.bibliography_sort.tmp.citation_number_map&&e.bibliography_sort.opt.citation_number_sort_direction===Ko.DESCENDING?e.bibliography_sort.tmp.citation_number_map[e.registry.registry[a].seq]:e.registry.registry[a].seq,e.opt.citation_number_slug?e.output.append(e.opt.citation_number_slug,this):(o=new Ko.NumericBlob(!1,r,this,t.id),e.tmp.in_cite_predecessor&&(o.suppress_splice_prefix=!0),e.output.append(o,"literal"))}},this.execs.push(i)):"year-suffix"===this.variables_real[0]?(e.opt.has_year_suffix=!0,"year-suffix-ranged"===e[e.tmp.area].opt.collapse&&(this.range_prefix=e.getTerm("citation-range-delimiter")),this.successor_prefix=e[e.build.area].opt.layout_delimiter,e[e.tmp.area].opt["year-suffix-delimiter"]&&(this.successor_prefix=e[e.build.area].opt["year-suffix-delimiter"]),i=function(e,t){if(e.registry.registry[t.id]&&!1!==e.registry.registry[t.id].disambig.year_suffix&&!e.tmp.just_looking){n=parseInt(e.registry.registry[t.id].disambig.year_suffix,10),e[e.tmp.area].opt.cite_group_delimiter&&(this.successor_prefix=e[e.tmp.area].opt.cite_group_delimiter),o=new Ko.NumericBlob(!1,n,this,t.id),l=new Ko.Util.Suffixator(Ko.SUFFIX_CHARS),o.setFormatter(l),e.output.append(o,"literal"),u=!1;for(var i=0,r=e.tmp.group_context.mystack.length;i<r;i++){var s=e.tmp.group_context.mystack[i];if(!s.variable_success&&(s.variable_attempt||!s.variable_attempt&&!s.term_intended)){u=!0;break}}c=e[e.tmp.area].opt["year-suffix-delimiter"],u&&c&&!e.tmp.sort_key_flag&&(e.tmp.splice_delimiter=e[e.tmp.area].opt["year-suffix-delimiter"])}},this.execs.push(i)):"citation-label"===this.variables_real[0]&&("bibliography"===e.build.root&&(e.opt.bib_mode=Ko.TRIGRAPH),e.opt.has_year_suffix=!0,i=function(e,t){(p=t["citation-label"])||(p=e.getCitationLabel(t)),e.tmp.just_looking||(h="",e.registry.registry[t.id]&&!1!==e.registry.registry[t.id].disambig.year_suffix&&(n=parseInt(e.registry.registry[t.id].disambig.year_suffix,10),h=e.fun.suffixator.format(n)),p+=h),e.output.append(p,this)},this.execs.push(i));else if(this.strings.term)i=function(e,t){var i,a=e.opt.gender[t.type],n=this.strings.term;if(""!==(n=e.getTerm(n,r,s,a,Ko.TOLERANT,this.default_locale))&&(e.tmp.group_context.tip.term_intended=!0),Ko.UPDATE_GROUP_CONTEXT_CONDITION(e,n,null,this),i=e.tmp.term_predecessor||"in-text"===e.opt.class&&"citation"===e.tmp.area?n:Ko.Output.Formatters["capitalize-first"](e,n),e.tmp.strip_periods)i=i.replace(/\./g,"");else for(var o=0,l=this.decorations.length;o<l;o+=1)if("@strip-periods"===this.decorations[o][0]&&"true"===this.decorations[o][1]){i=i.replace(/\./g,"");break}e.output.append(i,this),e.tmp.can_block_substitute&&e.tmp.can_substitute.replace(!1,Ko.LITERAL)},this.execs.push(i),e.build.term=!1,e.build.form=!1,e.build.plural=!1;else if(this.variables_real.length){if(i=function(e,t){"locator"!==this.variables_real[0]&&(e.tmp.have_collapsed=!1),!e.tmp.group_context.tip.condition&&t[this.variables[0]]&&(e.tmp.just_did_number=!1);var i=t[this.variables[0]];i&&!e.tmp.group_context.tip.condition&&((""+i).slice(-1).match(/[0-9]/)?e.tmp.just_did_number=!0:e.tmp.just_did_number=!1)},this.execs.push(i),Ko.MULTI_FIELDS.indexOf(this.variables_real[0])>-1||this.variables_real[0].indexOf("-main")>-1||this.variables_real[0].indexOf("-sub")>-1||["language-name","language-name-original"].indexOf(this.variables_real[0])>-1){var d=this.variables[0],g=!1,b=!1,y=!1;"short"===r?"-short"!==this.variables_real[0].slice(-6)&&(b=this.variables_real[0]+"-short"):d=!1,e.build.extension?y=!0:(y=!0,g=!0),i=e.transform.getOutputFunction(this.variables,d,g,b,y)}else i=Ko.CITE_FIELDS.indexOf(this.variables_real[0])>-1?function(e,t,i){i&&i[this.variables[0]]&&(e.processNumber(this,i,this.variables[0],t.type),Ko.Util.outputNumericField(e,this.variables[0],t.id),["locator","locator-extra"].indexOf(this.variables_real[0])>-1&&!e.tmp.just_looking&&e.tmp.done_vars.push(this.variables_real[0]))}:["page","page-first","chapter-number","collection-number","edition","issue","number","number-of-pages","number-of-volumes","volume"].indexOf(this.variables_real[0])>-1?function(e,t){e.processNumber(this,t,this.variables[0],t.type),Ko.Util.outputNumericField(e,this.variables[0],t.id)}:["URL","DOI"].indexOf(this.variables_real[0])>-1?function(e,t){var i;if(this.variables[0]&&(i=e.getVariable(t,this.variables[0],r)))if("URL"===this.variables[0]&&"short"===r&&(i=i.replace(/(.*\.[^\/]+)\/.*/,"$1")).match(/\/\/www\./)&&(i=i.replace(/https?:\/\//,"")),e.opt.development_extensions.wrap_url_and_doi)if(this.decorations.length&&this.decorations[0][0]==="@"+this.variables[0])e.output.append(i,this,!1,!1,!0);else{var s=Ko.Util.cloneToken(this),a=new Ko.Blob(null,null,"url-wrapper");if(a.decorations.push(["@DOI","true"]),"DOI"===this.variables_real[0]){var n;this.strings.prefix&&this.strings.prefix.match(/^.*https:\/\/doi\.org\/$/)&&(n=(i=i.replace(/^https?:\/\/doi\.org\//,"")).match(/^https?:\/\//)?"":"https://doi.org/",s.strings.prefix=this.strings.prefix.slice(0,s.strings.prefix.length-16));var o=new Ko.Blob(n),l=new Ko.Blob(i);a.push(o),a.push(l),e.output.append(a,s,!1,!1,!0)}else l=new Ko.Blob(i),a.push(l),e.output.append(a,s,!1,!1,!0)}else{if(this.decorations.length)for(var u=this.decorations.length-1;u>-1;u--)this.decorations[u][0]==="@"+this.variables[0]&&(this.decorations=this.decorations.slice(0,u).concat(this.decorations.slice(u+1)));e.output.append(i,this,!1,!1,!0)}}:"section"===this.variables_real[0]?function(e,t){var i;(i=e.getVariable(t,this.variables[0],r))&&e.output.append(i,this)}:"hereinafter"===this.variables_real[0]?function(e,t){var i=e.transform.abbrevs.default.hereinafter[t.id];i&&(e.output.append(i,this),e.tmp.group_context.tip.variable_success=!0)}:function(e,t){var i;this.variables[0]&&(i=e.getVariable(t,this.variables[0],r))&&(i=(i=""+i).split("\\").join(""),e.output.append(i,this))};this.execs.push(i)}else this.strings.value&&(i=function(e){e.tmp.group_context.tip.term_intended=!0,Ko.UPDATE_GROUP_CONTEXT_CONDITION(e,this.strings.value,!0,this),e.output.append(this.strings.value,this),e.tmp.can_block_substitute&&e.tmp.can_substitute.replace(!1,Ko.LITERAL)},this.execs.push(i));t.push(this),Ko.Util.substituteEnd.call(this,e,t)}}},Ko.Node.intext={build:function(e,t){this.tokentype===Ko.START&&(e.build.area="intext",e.build.root="intext",e.build.extension="",this.execs.push((function(e,t){e.tmp.area="intext",e.tmp.root="intext",e.tmp.extension=""}))),this.tokentype===Ko.END&&(e.intext_sort={opt:{sort_directions:e.citation_sort.opt.sort_directions}},e.intext.srt=e.citation.srt),t.push(this)}},Ko.Attributes={},Ko.Attributes["@disambiguate"]=function(e,t){if(this.tests||(this.tests=[]),"true"===t){e.opt.has_disambiguate=!0;var i=function(t){if("bibliography"===e.tmp.area){if(e.tmp.disambiguate_count<e.registry.registry[t.id].disambig.disambiguate)return e.tmp.disambiguate_count+=1,!0}else if(e.tmp.disambiguate_maxMax+=1,e.tmp.disambig_settings.disambiguate&&e.tmp.disambiguate_count<e.tmp.disambig_settings.disambiguate)return e.tmp.disambiguate_count+=1,!0;return!1};this.tests.push(i)}else"check-ambiguity-and-backreference"===t&&(i=function(t){return!!(e.registry.registry[t.id].disambig.disambiguate&&e.registry.registry[t.id]["citation-count"]>1)},this.tests.push(i))},Ko.Attributes["@is-numeric"]=function(e,t){this.tests||(this.tests=[]);for(var i=t.split(/\s+/),r=function(t){return function(i,r){var s=i;if(r&&["locator","locator-extra"].indexOf(t)>-1&&(s=r),!s[t])return!1;if(Ko.NUMERIC_VARIABLES.indexOf(t)>-1){if(e.tmp.shadow_numbers[t]||e.processNumber(!1,s,t,i.type),e.tmp.shadow_numbers[t].numeric)return!0}else if(["title","version"].indexOf(t)>-1&&s[t].slice(-1)===""+parseInt(s[t].slice(-1),10))return!0;return!1}},s=0;s<i.length;s+=1)this.tests.push(r(i[s]))},Ko.Attributes["@is-uncertain-date"]=function(e,t){this.tests||(this.tests=[]);for(var i=t.split(/\s+/),r=function(e){return function(t){return!(!t[e]||!t[e].circa)}},s=0,a=i.length;s<a;s+=1)this.tests.push(r(i[s]))},Ko.Attributes["@locator"]=function(e,t){this.tests||(this.tests=[]);for(var i=t.replace("sub verbo","sub-verbo"),r=function(t){return function(i,r){var s;return e.processNumber(!1,r,"locator"),!(!(s=e.tmp.shadow_numbers.locator.label)||t!==s)}},s=0,a=(i=i.split(/\s+/)).length;s<a;s+=1)this.tests.push(r(i[s]))},Ko.Attributes["@position"]=function(e,t){this.tests||(this.tests=[]),e.opt.update_mode=Ko.POSITION;for(var i=t.split(/\s+/),r=function(e,t){return!!(t&&Ko.POSITION_MAP[t.position]>=Ko.POSITION_MAP[Ko.POSITION_SUBSEQUENT]&&t["near-note"])},s=function(e,t){return!(!t||Ko.POSITION_MAP[t.position]!=Ko.POSITION_MAP[Ko.POSITION_SUBSEQUENT]||t["near-note"])},a=function(t){return function(i,r){if("bibliography"===e.tmp.area)return!1;if(r&&void 0===r.position&&(r.position=0),r&&"number"==typeof r.position){if(0===r.position&&0===t)return!0;if(t>0&&Ko.POSITION_MAP[r.position]>=Ko.POSITION_MAP[t])return!0}else if(0===t)return!0;return!1}},n=0,o=i.length;n<o;n+=1){var l;"first"===(l=i[n])?l=Ko.POSITION_FIRST:"container-subsequent"===l?l=Ko.POSITION_CONTAINER_SUBSEQUENT:"subsequent"===l?l=Ko.POSITION_SUBSEQUENT:"ibid"===l?l=Ko.POSITION_IBID:"ibid-with-locator"===l&&(l=Ko.POSITION_IBID_WITH_LOCATOR),"near-note"===l?this.tests.push(r):"far-note"===l?this.tests.push(s):this.tests.push(a(l))}},Ko.Attributes["@type"]=function(e,t){this.tests||(this.tests=[]);for(var i=t.split(/\s+/),r=function(e){return function(t){return!(t.type!==e)}},s=[],a=0,n=i.length;a<n;a+=1)s.push(r(i[a]));this.tests.push(e.fun.match.any(this,e,s))},Ko.Attributes["@variable"]=function(e,t){var i;if(this.tests||(this.tests=[]),this.variables=t.split(/\s+/),this.variables_real=this.variables.slice(),"label"===this.name&&this.variables[0])this.strings.term=this.variables[0];else if(["names","date","text","number"].indexOf(this.name)>-1)i=function(e,t,i){for(var r=this.variables.length-1;r>-1;r+=-1)this.variables.pop();r=0;for(var s=this.variables_real.length;r<s;r++)-1===e.tmp.done_vars.indexOf(this.variables_real[r])&&this.variables.push(this.variables_real[r]),e.tmp.can_block_substitute&&e.tmp.done_vars.push(this.variables_real[r])},this.execs.push(i),i=function(e,t,i){for(var r=!1,s=0,a=this.variables.length;s<a;s++){var n=this.variables[s];if(["authority","committee"].indexOf(n)>-1&&"string"==typeof t[n]&&"names"===this.name){var o=!0,l=t[n].split(/\s*;\s*/),u={};if(t.multi&&t.multi._keys[n])for(var c in t.multi._keys[n])if(u[c]=t.multi._keys[n][c].split(/\s*;\s*/),u[c].length!==l.length){o=!1;break}o||(l=[t[n]],u=t.multi._keys[n]);for(var p=0,h=l.length;p<h;p++){var m={literal:l[p],multi:{_key:{}}};for(var c in u){var f={literal:u[c][p]};m.multi._key[c]=f}l[p]=m}t[n]=l}if("short"!==this.strings.form||t[n]||("title"===n?n="title-short":"container-title"===n&&(n="container-title-short")),"year-suffix"===n){r=!0;break}if(Ko.DATE_VARIABLES.indexOf(n)>-1){if(e.opt.development_extensions.locator_date_and_revision&&"locator-date"===n){r=!0;break}if(t[n]){for(var d in t[n])if((-1!==this.dateparts.indexOf(d)||"literal"===d)&&t[n][d]){r=!0;break}if(r)break}}else{if("locator"===n){i&&i.locator&&(r=!0);break}if("locator-extra"===n){i&&i["locator-extra"]&&(r=!0);break}if(["citation-number","citation-label"].indexOf(n)>-1){r=!0;break}if("first-reference-note-number"===n){i&&i["first-reference-note-number"]&&(r=!0);break}if("first-container-reference-note-number"===n){i&&i["first-container-reference-note-number"]&&(r=!0);break}if("hereinafter"===n){e.transform.abbrevs.default.hereinafter[t.id]&&e.sys.getAbbreviation&&t.id&&(r=!0);break}if("object"==typeof t[n])break;if("string"==typeof t[n]&&t[n]){r=!0;break}if("number"==typeof t[n]){r=!0;break}}if(r)break}if(r){for(s=0,a=this.variables_real.length;s<a;s++)"citation-number"===(n=this.variables_real[s])&&"bibliography"===e.tmp.area||(e.tmp.cite_renders_content=!0),e.tmp.group_context.tip.variable_success=!0,e.tmp.can_substitute.value()&&"bibliography"===e.tmp.area&&"string"==typeof t[n]&&(e.tmp.name_node.top=e.output.current.value(),e.tmp.rendered_name.push(t[n]));e.tmp.can_substitute.replace(!1,Ko.LITERAL)}else e.tmp.group_context.tip.variable_attempt=!0},this.execs.push(i);else if(["if","else-if","condition"].indexOf(this.name)>-1)for(var r=function(t){return function(i,r){var s=i;if(r&&["locator","locator-extra","first-reference-note-number","first-container-reference-note-number","locator-date"].indexOf(t)>-1&&(s=r),"hereinafter"===t&&e.sys.getAbbreviation&&s.id){if(e.transform.abbrevs.default.hereinafter[s.id])return!0}else if(s[t]){if("number"==typeof s[t]||"string"==typeof s[t])return!0;if("object"==typeof s[t])for(var a in s[t])if(s[t][a])return!0}return!1}},s=0,a=this.variables.length;s<a;s+=1)this.tests.push(r(this.variables[s]))},Ko.Attributes["@page"]=function(e,t){this.tests||(this.tests=[]);for(var i=t.replace("sub verbo","sub-verbo"),r=function(t){return function(i){var r;return e.processNumber(!1,i,"page",i.type),r=e.tmp.shadow_numbers.page.label?"sub verbo"===e.tmp.shadow_numbers.page.label?"sub-verbo":e.tmp.shadow_numbers.page.label:"page",e.tmp.shadow_numbers.page.values.length>0&&e.tmp.shadow_numbers.page.values[0].gotosleepability&&(e.tmp.shadow_numbers.page.values[0].labelVisibility=!1),t===r}},s=0,a=(i=i.split(/\s+/)).length;s<a;s+=1)this.tests.push(r(i[s]))},Ko.Attributes["@number"]=function(e,t){this.tests||(this.tests=[]);for(var i=t.split(/\s+/),r=function(t){return function(i){var r;return e.processNumber(!1,i,"number",i.type),r=e.tmp.shadow_numbers.number.label?e.tmp.shadow_numbers.number.label:"number",t===r}},s=0,a=i.length;s<a;s+=1)this.tests.push(r(i[s]))},Ko.Attributes["@jurisdiction"]=function(e,t){this.tests||(this.tests=[]);var i=t.split(/\s+/);this.tests.push(function(e){return function(t){if(!t.jurisdiction)return!1;for(var i=t.jurisdiction,r=0,s=e.length;r<s;r++)if(i===e[r])return!0;return!1}}(i))},Ko.Attributes["@country"]=function(e,t){this.tests||(this.tests=[]);var i=t.split(/\s+/);this.tests.push(function(e){return function(t){if(!t.country)return!1;for(var i=t.country,r=0,s=e.length;r<s;r++)if(i===e[r])return!0;return!1}}(i))},Ko.Attributes["@context"]=function(e,t){this.tests||(this.tests=[]),this.tests.push((function(){return["bibliography","citation"].indexOf(t)>-1?e.tmp.area.slice(0,t.length)===t:"alternative"===t?!!e.tmp.abort_alternative:void 0}))},Ko.Attributes["@has-year-only"]=function(e,t){this.tests||(this.tests=[]);for(var i=t.split(/\s+/),r=function(e){return function(t){var i=t[e];return!(!i||i.month||i.season)}},s=0,a=i.length;s<a;s+=1)this.tests.push(r(i[s]))},Ko.Attributes["@has-to-month-or-season"]=function(e,t){this.tests||(this.tests=[]);for(var i=t.split(/\s+/),r=function(e){return function(t){var i=t[e];return!(!i||!i.month&&!i.season||i.day)}},s=0,a=i.length;s<a;s+=1)this.tests.push(r(i[s]))},Ko.Attributes["@has-day"]=function(e,t){this.tests||(this.tests=[]);for(var i=t.split(/\s+/),r=function(e){return function(t){var i=t[e];return!(!i||!i.day)}},s=0,a=i.length;s<a;s+=1)this.tests.push(r(i[s]))},Ko.Attributes["@is-plural"]=function(e,t){this.tests||(this.tests=[]),this.tests.push((function(i){var r=i[t];if(r&&r.length){for(var s=0,a=0,n=!1,o=0,l=r.length;o<l;o+=1)e.opt.development_extensions.spoof_institutional_affiliations&&(r[o].literal||r[o].isInstitution&&r[o].family&&!r[o].given)?(a+=1,n=!1):(s+=1,n=!0);if(s>1)return!0;if(a>1)return!0;if(a&&n)return!0}return!1}))},Ko.Attributes["@locale"]=function(e,t){var i,r,s;this.tests||(this.tests=[]);var a=e.opt["default-locale"][0];if("layout"===this.name){if(this.locale_raw=t,this.tokentype===Ko.START){e.opt.multi_layout||(e.opt.multi_layout=[]);var n=[],o=t.split(/\s+/),l={},u=Ko.localeResolve(o[0],a);n.push(u),u.generic?l[u.generic]=u.best:l[u.best]=u.best;for(var c=1,p=o.length;c<p;c+=1){var h=Ko.localeResolve(o[c],a);n.push(h),h.generic?l[h.generic]=u.best:l[h.best]=u.best}e[e.build.area].opt.sort_locales.push(l),e.opt.multi_layout.push(n)}e.opt.has_layout_locale=!0}else{s=t.split(/\s+/);var m=[];for(c=0,p=s.length;c<p;c+=1)r=s[c],i=Ko.localeResolve(r,a),2===s[c].length&&m.push(i.bare),e.localeConfigure(i,!0),s[c]=i;var f=s.slice();this.tests.push(function(t,i,r){return function(s){var a,n,o;for(a=!1,o=s.language?s.language:i,n=Ko.localeResolve(o,i),c=0,p=t.length;c<p;c+=1)if(n.best===t[c].best){e.tmp.condition_lang_counter_arr.push(e.tmp.condition_counter),e.tmp.condition_lang_val_arr.push(e.opt.lang),e.opt.lang=t[0].best,a=!0;break}return!a&&r.indexOf(n.bare)>-1&&(e.tmp.condition_lang_counter_arr.push(e.tmp.condition_counter),e.tmp.condition_lang_val_arr.push(e.opt.lang),e.opt.lang=t[0].best,a=!0),a}}(f,a,m))}},Ko.Attributes["@alternative-node-internal"]=function(e){this.tests||(this.tests=[]),this.tests.push((function(){return!e.tmp.abort_alternative}))},Ko.Attributes["@locale-internal"]=function(e,t){var i,r,s,a,n,o;for(this.tests||(this.tests=[]),s=t.split(/\s+/),this.locale_bares=[],a=0,n=s.length;a<n;a+=1)r=s[a],i=Ko.localeResolve(r,e.opt["default-locale"][0]),2===s[a].length&&this.locale_bares.push(i.bare),e.localeConfigure(i),s[a]=i;this.locale_default=e.opt["default-locale"][0],this.locale=s[0].best,this.locale_list=s.slice(),this.tests.push((o=this,function(t){var i;i=!1;var s=!1;if(t.language&&(r=t.language,(s=Ko.localeResolve(r,e.opt["default-locale"][0])).best===e.opt["default-locale"][0]&&(s=!1)),s){for(a=0,n=o.locale_list.length;a<n;a+=1)if(s.best===o.locale_list[a].best){e.opt.lang=o.locale,e.tmp.last_cite_locale=o.locale,e.output.openLevel("empty"),e.output.current.value().new_locale=o.locale,i=!0;break}!i&&o.locale_bares.indexOf(s.bare)>-1&&(e.opt.lang=o.locale,e.tmp.last_cite_locale=o.locale,e.output.openLevel("empty"),e.output.current.value().new_locale=o.locale,i=!0)}return i}))},Ko.Attributes["@court-class"]=function(e,t){this.tests||(this.tests=[]);for(var i=t.split(/\s+/),r=function(t){return function(i){return Ko.GET_COURT_CLASS(e,i)===t}},s=0,a=i.length;s<a;s++)this.tests.push(r(i[s]))},Ko.Attributes["@container-multiple"]=function(e,t){this.tests||(this.tests=[]);var i="true"===t;this.tests.push(function(t){return function(i){return e.tmp.container_item_count[i.container_id]&&e.tmp.container_item_count[i.container_id]>1?t:!t}}(i))},Ko.Attributes["@container-subsequent"]=function(e,t){this.tests||(this.tests=[]);var i="true"===t;this.tests.push(function(t){return function(i){return e.tmp.container_item_pos[i.container_id]>1?t:!t}}(i))},Ko.Attributes["@has-subunit"]=function(e,t){var i;this.tests||(this.tests=[]),this.tests.push((i=t,function(e){var t=0;for(var r in e[i]){var s=e[i][r];if(!s.given){var a=(s.literal?s.literal:s.family).split("|").length;(0===t||a<t)&&(t=a)}}return t>1}))},Ko.Attributes["@disable-duplicate-year-suppression"]=function(e,t){e.opt.disable_duplicate_year_suppression=t.split(/\s+/)},Ko.Attributes["@consolidate-containers"]=function(e,t){Ko.Attributes["@track-containers"](e,t);var i=t.split(/\s+/);e.bibliography.opt.consolidate_containers=i},Ko.Attributes["@track-containers"]=function(e,t){var i=t.split(/\s+/);e.bibliography.opt.track_container_items||(e.bibliography.opt.track_container_items=[]),e.bibliography.opt.consolidate_containers||(e.bibliography.opt.consolidate_containers=[]),e.bibliography.opt.track_container_items=e.bibliography.opt.track_container_items.concat(i)},Ko.Attributes["@parallel-first"]=function(e,t){e.opt.parallel.enable=!0;var i=t.split(/\s+/);for(var r in e.opt.track_repeat||(e.opt.track_repeat={}),this.parallel_first={},i){var s=i[r];this.parallel_first[s]=!0,e.opt.track_repeat[s]=!0}},Ko.Attributes["@parallel-last"]=function(e,t){e.opt.parallel.enable=!0;var i=t.split(/\s+/);for(var r in e.opt.track_repeat||(e.opt.track_repeat={}),this.parallel_last={},i){var s=i[r];this.parallel_last[s]=!0,e.opt.track_repeat[s]=!0}},Ko.Attributes["@parallel-last-to-first"]=function(e,t){var i=t.split(/\s+/);this.parallel_last_to_first={};for(var r=0,s=i.length;r<s;r++)this.parallel_last_to_first[i[r]]=!0},Ko.Attributes["@parallel-delimiter-override"]=function(e,t){this.strings.set_parallel_delimiter_override=t},Ko.Attributes["@parallel-delimiter-override-on-suppress"]=function(e,t){this.strings.set_parallel_delimiter_override_on_suppress=t},Ko.Attributes["@no-repeat"]=function(e,t){e.opt.parallel.enable=!0;var i=t.split(/\s+/);for(var r in e.opt.track_repeat||(e.opt.track_repeat={}),this.non_parallel={},i){var s=i[r];this.non_parallel[s]=!0,e.opt.track_repeat[s]=!0}},Ko.Attributes["@require"]=function(e,t){e.opt.use_context_condition=!0,this.strings.require=t},Ko.Attributes["@reject"]=function(e,t){e.opt.use_context_condition=!0,this.strings.reject=t},Ko.Attributes["@require-comma-on-symbol"]=function(e,t){e.opt.require_comma_on_symbol=t},Ko.Attributes["@gender"]=function(e,t){this.gender=t},Ko.Attributes["@cslid"]=function(e,t){this.cslid=parseInt(t,10)},Ko.Attributes["@capitalize-if-first"]=function(e,t){this.strings.capitalize_if_first_override=t},Ko.Attributes["@label-capitalize-if-first"]=function(e,t){this.strings.label_capitalize_if_first_override=t},Ko.Attributes["@label-form"]=function(e,t){this.strings.label_form_override=t},Ko.Attributes["@part-separator"]=function(e,t){this.strings["part-separator"]=t},Ko.Attributes["@leading-noise-words"]=function(e,t){this["leading-noise-words"]=t},Ko.Attributes["@name-never-short"]=function(e,t){this["name-never-short"]=t},Ko.Attributes["@class"]=function(e,t){e.opt.class=t},Ko.Attributes["@version"]=function(e,t){e.opt.version=t},Ko.Attributes["@value"]=function(e,t){this.strings.value=t},Ko.Attributes["@name"]=function(e,t){this.strings.name=t},Ko.Attributes["@form"]=function(e,t){this.strings.form=t},Ko.Attributes["@date-parts"]=function(e,t){this.strings["date-parts"]=t},Ko.Attributes["@range-delimiter"]=function(e,t){this.strings["range-delimiter"]=t},Ko.Attributes["@macro"]=function(e,t){this.postponed_macro=t},Ko.Attributes["@term"]=function(e,t){this.strings.term="sub verbo"===t?"sub-verbo":t},Ko.Attributes["@xmlns"]=function(){},Ko.Attributes["@lang"]=function(e,t){t&&(e.build.lang=t)},Ko.Attributes["@lingo"]=function(){},Ko.Attributes["@macro-has-date"]=function(){this["macro-has-date"]=!0},Ko.Attributes["@suffix"]=function(e,t){this.strings.suffix=t},Ko.Attributes["@prefix"]=function(e,t){this.strings.prefix=t},Ko.Attributes["@delimiter"]=function(e,t){this.strings.delimiter=t},Ko.Attributes["@match"]=function(e,t){this.match=t},Ko.Attributes["@names-min"]=function(e,t){var i=parseInt(t,10);e[e.build.area].opt.max_number_of_names<i&&(e[e.build.area].opt.max_number_of_names=i),this.strings["et-al-min"]=i},Ko.Attributes["@names-use-first"]=function(e,t){this.strings["et-al-use-first"]=parseInt(t,10)},Ko.Attributes["@names-use-last"]=function(e,t){this.strings["et-al-use-last"]="true"===t},Ko.Attributes["@sort"]=function(e,t){"descending"===t&&(this.strings.sort_direction=Ko.DESCENDING)},Ko.Attributes["@plural"]=function(e,t){"always"===t||"true"===t?this.strings.plural=1:"never"===t||"false"===t?this.strings.plural=0:"contextual"===t&&(this.strings.plural=!1)},Ko.Attributes["@has-publisher-and-publisher-place"]=function(){this.strings["has-publisher-and-publisher-place"]=!0},Ko.Attributes["@publisher-delimiter-precedes-last"]=function(e,t){this.strings["publisher-delimiter-precedes-last"]=t},Ko.Attributes["@publisher-delimiter"]=function(e,t){this.strings["publisher-delimiter"]=t},Ko.Attributes["@publisher-and"]=function(e,t){this.strings["publisher-and"]=t},Ko.Attributes["@givenname-disambiguation-rule"]=function(e,t){Ko.GIVENNAME_DISAMBIGUATION_RULES.indexOf(t)>-1&&(e.citation.opt["givenname-disambiguation-rule"]=t)},Ko.Attributes["@collapse"]=function(e,t){t&&(e[this.name].opt.collapse=t)},Ko.Attributes["@cite-group-delimiter"]=function(e,t){t&&(e[e.tmp.area].opt.cite_group_delimiter=t)},Ko.Attributes["@names-delimiter"]=function(e,t){e.setOpt(this,"names-delimiter",t)},Ko.Attributes["@name-form"]=function(e,t){e.setOpt(this,"name-form",t)},Ko.Attributes["@subgroup-delimiter"]=function(e,t){this.strings["subgroup-delimiter"]=t},Ko.Attributes["@subgroup-delimiter-precedes-last"]=function(e,t){this.strings["subgroup-delimiter-precedes-last"]=t},Ko.Attributes["@name-delimiter"]=function(e,t){e.setOpt(this,"name-delimiter",t)},Ko.Attributes["@et-al-min"]=function(e,t){var i=parseInt(t,10);e[e.build.area].opt.max_number_of_names<i&&(e[e.build.area].opt.max_number_of_names=i),e.setOpt(this,"et-al-min",i)},Ko.Attributes["@et-al-use-first"]=function(e,t){e.setOpt(this,"et-al-use-first",parseInt(t,10))},Ko.Attributes["@et-al-use-last"]=function(e,t){"true"===t?e.setOpt(this,"et-al-use-last",!0):e.setOpt(this,"et-al-use-last",!1)},Ko.Attributes["@et-al-subsequent-min"]=function(e,t){var i=parseInt(t,10);e[e.build.area].opt.max_number_of_names<i&&(e[e.build.area].opt.max_number_of_names=i),e.setOpt(this,"et-al-subsequent-min",i)},Ko.Attributes["@et-al-subsequent-use-first"]=function(e,t){e.setOpt(this,"et-al-subsequent-use-first",parseInt(t,10))},Ko.Attributes["@suppress-min"]=function(e,t){this.strings["suppress-min"]=parseInt(t,10)},Ko.Attributes["@suppress-max"]=function(e,t){this.strings["suppress-max"]=parseInt(t,10)},Ko.Attributes["@and"]=function(e,t){e.setOpt(this,"and",t)},Ko.Attributes["@delimiter-precedes-last"]=function(e,t){e.setOpt(this,"delimiter-precedes-last",t)},Ko.Attributes["@delimiter-precedes-et-al"]=function(e,t){e.setOpt(this,"delimiter-precedes-et-al",t)},Ko.Attributes["@initialize-with"]=function(e,t){e.setOpt(this,"initialize-with",t)},Ko.Attributes["@initialize"]=function(e,t){"false"===t&&e.setOpt(this,"initialize",!1)},Ko.Attributes["@name-as-reverse-order"]=function(e,t){this["name-as-reverse-order"]=t},Ko.Attributes["@name-as-sort-order"]=function(e,t){"style-options"===this.name?this["name-as-sort-order"]=t:e.setOpt(this,"name-as-sort-order",t)},Ko.Attributes["@sort-separator"]=function(e,t){e.setOpt(this,"sort-separator",t)},Ko.Attributes["@require-match"]=function(e,t){"true"===t&&(this.requireMatch=!0)},Ko.Attributes["@exclude-types"]=function(e,t){e.bibliography.opt.exclude_types=t.split(/\s+/)},Ko.Attributes["@exclude-with-fields"]=function(e,t){e.bibliography.opt.exclude_with_fields=t.split(/\s+/)},Ko.Attributes["@year-suffix-delimiter"]=function(e,t){e[this.name].opt["year-suffix-delimiter"]=t},Ko.Attributes["@after-collapse-delimiter"]=function(e,t){e[this.name].opt["after-collapse-delimiter"]=t},Ko.Attributes["@subsequent-author-substitute"]=function(e,t){e[this.name].opt["subsequent-author-substitute"]=t},Ko.Attributes["@subsequent-author-substitute-rule"]=function(e,t){e[this.name].opt["subsequent-author-substitute-rule"]=t},Ko.Attributes["@disambiguate-add-names"]=function(e,t){"true"===t&&(e.opt["disambiguate-add-names"]=!0)},Ko.Attributes["@disambiguate-add-givenname"]=function(e,t){"true"===t&&(e.opt["disambiguate-add-givenname"]=!0)},Ko.Attributes["@disambiguate-add-year-suffix"]=function(e,t){"true"===t&&"numeric"!==e.opt.xclass&&(e.opt["disambiguate-add-year-suffix"]=!0)},Ko.Attributes["@second-field-align"]=function(e,t){"flush"!==t&&"margin"!==t||(e[this.name].opt["second-field-align"]=t)},Ko.Attributes["@hanging-indent"]=function(e,t){"true"===t&&(e.opt.development_extensions.hanging_indent_legacy_number?e[this.name].opt.hangingindent=2:e[this.name].opt.hangingindent=!0)},Ko.Attributes["@line-spacing"]=function(e,t){t&&t.match(/^[.0-9]+$/)&&(e[this.name].opt["line-spacing"]=parseFloat(t,10))},Ko.Attributes["@entry-spacing"]=function(e,t){t&&t.match(/^[.0-9]+$/)&&(e[this.name].opt["entry-spacing"]=parseFloat(t,10))},Ko.Attributes["@near-note-distance"]=function(e,t){e[this.name].opt["near-note-distance"]=parseInt(t,10)},Ko.Attributes["@substring"]=function(e,t){this.substring=parseInt(t,10)},Ko.Attributes["@text-case"]=function(e,t){this.execs.push((function(e,i){"normal"===t?this.text_case_normal=!0:(this.strings["text-case"]=t,"title"===t&&i.jurisdiction&&(this.strings["text-case"]="passthrough"))}))},Ko.Attributes["@page-range-format"]=function(e,t){e.opt["page-range-format"]=t},Ko.Attributes["@year-range-format"]=function(e,t){e.opt["year-range-format"]=t},Ko.Attributes["@default-locale"]=function(e,t){if("style"===this.name){var i,r,s,a,n;if(n=t.match(/-x-(sort|translit|translat)-/g))for(s=0,r=n.length;s<r;s+=1)n[s]=n[s].replace(/^-x-/,"").replace(/-$/,"");for(a=[(i=t.split(/-x-(?:sort|translit|translat)-/))[0]],s=1,r=i.length;s<r;s+=1)a.push(n[s-1]),a.push(i[s]);for(r=(i=a.slice()).length,s=1;s<r;s+=2)e.opt["locale-"+i[s]].push(i[s+1].replace(/^\s*/g,"").replace(/\s*$/g,""));i.length?e.opt["default-locale"]=i.slice(0,1):e.opt["default-locale"]=["en"]}else"true"===t&&(this.default_locale=!0)},Ko.Attributes["@default-locale-sort"]=function(e,t){e.opt["default-locale-sort"]=t},Ko.Attributes["@demote-non-dropping-particle"]=function(e,t){e.opt["demote-non-dropping-particle"]=t},Ko.Attributes["@initialize-with-hyphen"]=function(e,t){"false"===t&&(e.opt["initialize-with-hyphen"]=!1)},Ko.Attributes["@institution-parts"]=function(e,t){this.strings["institution-parts"]=t},Ko.Attributes["@if-short"]=function(e,t){"true"===t&&(this.strings["if-short"]=!0)},Ko.Attributes["@substitute-use-first"]=function(e,t){this.strings["substitute-use-first"]=parseInt(t,10)},Ko.Attributes["@use-first"]=function(e,t){this.strings["use-first"]=parseInt(t,10)},Ko.Attributes["@use-last"]=function(e,t){this.strings["use-last"]=parseInt(t,10)},Ko.Attributes["@stop-first"]=function(e,t){this.strings["stop-first"]=parseInt(t,10)},Ko.Attributes["@stop-last"]=function(e,t){this.strings["stop-last"]=-1*parseInt(t,10)},Ko.Attributes["@reverse-order"]=function(e,t){"true"===t&&(this.strings["reverse-order"]=!0)},Ko.Attributes["@display"]=function(e,t){2===e.bibliography.tokens.length&&(e.opt.using_display=!0),this.strings.cls=t},Ko.Stack=function(e,t){this.mystack=[],(t||e)&&this.mystack.push(e),this.tip=this.mystack[0]},Ko.Stack.prototype.push=function(e,t){t||e?this.mystack.push(e):this.mystack.push(""),this.tip=this.mystack[this.mystack.length-1]},Ko.Stack.prototype.clear=function(){this.mystack=[],this.tip={}},Ko.Stack.prototype.replace=function(e,t){0===this.mystack.length&&Ko.error("Internal CSL processor error: attempt to replace nonexistent stack item with "+e),this.mystack[this.mystack.length-1]=t||e?e:"",this.tip=this.mystack[this.mystack.length-1]},Ko.Stack.prototype.pop=function(){var e=this.mystack.pop();return this.mystack.length?this.tip=this.mystack[this.mystack.length-1]:this.tip={},e},Ko.Stack.prototype.value=function(){return this.mystack.slice(-1)[0]},Ko.Stack.prototype.length=function(){return this.mystack.length},Ko.Parallel=function(e){this.state=e},Ko.Parallel.prototype.StartCitation=function(e,t){if(this.state.tmp.suppress_repeats=[],!(e.length<2)){for(var i=0,r=!1,s=[],a=0,n=e.length-1;a<n;a++){var o=e[a][0],l=e[a+1][0],u=!1,c={};if(e[a][0].seeAlso&&e[a][0].seeAlso.length>0&&!r){u=!0;var p=(r=[e[a][0].id].concat(e[a][0].seeAlso)).slice(),h=e.slice(a);h[0][1].parallel="first";for(var m=0,f=h.length;m<f;m++){var d=h[m][0].id,g=p.indexOf(d);if(i=!1,-1===g?i=a+m-1:a+m===e.length-1&&(i=a+m),i){s.push([a,i]);break}p=p.slice(0,g).concat(p.slice(g+1))}}for(var b in a>0&&u&&(this.state.tmp.suppress_repeats[a-1].START=!0,u=!1),this.state.opt.track_repeat)if(o[b]&&l[b])if("string"==typeof l[b]||"number"==typeof l[b]){if("title"===b&&o["title-short"]&&l["title-short"])var y=o["title-short"],v=l["title-short"];else y=o[b],v=l[b];c[b]=y==v}else if(void 0===o[b].length){c[b]=!1;var _=o[b].year,x=l[b].year;_&&x&&_==x&&(c[b]=!0)}else y=JSON.stringify(o[b]),v=JSON.stringify(l[b]),c[b]=y===v;else c[b]=!1;r||(c.ORPHAN=!0),i===a&&(c.END=!0,r=!1),this.state.tmp.suppress_repeats.push(c)}for(m=0,f=s.length;m<f;m++){var w=e[s[m][0]][0].id;this.state.registry.registry[w].master=!0,this.state.registry.registry[w].siblings=[];for(var E=s[m][0],A=s[m][1],T=E;T<A;T++){this.state.tmp.suppress_repeats[T].SIBLING=!0;var S=e[T+1][0].id;e[T+1][1].parallel="other",this.state.registry.registry[w].siblings.push(S)}}}},Ko.Parallel.prototype.checkRepeats=function(e){var t=this.state.tmp.cite_index;if(this.state.tmp.suppress_repeats){if(e.parallel_first&&Object.keys(e.parallel_first).length>0){var i=[{}].concat(this.state.tmp.suppress_repeats),r=!0;for(var s in e.parallel_first)i[t][s]&&!i[t].START||(r=!1);return r}if(e.parallel_last&&Object.keys(e.parallel_last).length>0){for(var s in i=this.state.tmp.suppress_repeats.concat([{}]),r=Object.keys(e.parallel_last).length>0,e.parallel_last)i[t][s]&&!i[t].END||(r=!1);return r}if(e.non_parallel&&Object.keys(e.non_parallel).length>0){for(var s in i=[{}].concat(this.state.tmp.suppress_repeats),r=!0,e.non_parallel)i[t][s]||(r=!1);return r}}return!1},Ko.Util={},Ko.Util.Match=function(){this.any=function(e,t,i){return function(e,t){for(var r=0,s=i.length;r<s;r+=1)if(i[r](e,t))return!0;return!1}},this.none=function(e,t,i){return function(e,t){for(var r=0,s=i.length;r<s;r+=1)if(i[r](e,t))return!1;return!0}},this.all=function(e,t,i){return function(e,t){for(var r=0,s=i.length;r<s;r+=1)if(!i[r](e,t))return!1;return!0}},this[void 0]=this.all,this.nand=function(e,t,i){return function(e,t){for(var r=0,s=i.length;r<s;r+=1)if(!i[r](e,t))return!0;return!1}}},Ko.Transform=function(e){function t(t,i,r){var s="";return e.sys.getHumanForm&&("country"===t?s=(s=e.sys.getHumanForm(i.toLowerCase(),!1,!0)).split("|")[0]:"jurisdiction"===t&&(s=e.sys.getHumanForm(i.toLowerCase(),!1,!0),s=r?"":s.split("|").slice(1).join(", "))),s}function i(e,i,r,s,a,n,o){var l,u="",c=Ko.FIELD_CATEGORY_REMAP[n];if(!c)return a;var p=n,h=a;e.sys.normalizeAbbrevsKey&&(h=e.sys.normalizeAbbrevsKey(n,a));var m=!1;if("jurisdiction"===p&&h&&(m=-1===h.indexOf(":")),["jurisdiction","country"].indexOf(n)>-1&&a===a.toLowerCase()&&(h=a.toUpperCase()),e.sys.getAbbreviation){l=["jurisdiction","country","language-name","language-name-original"].indexOf(p)>-1?"default":r.jurisdiction?r.jurisdiction:"default";var f=e.transform.loadAbbreviation(l,c,h,r.language);if(e.transform.abbrevs[f][c]&&h){var d=e.transform.abbrevs[f][c][h];u="short"===i.strings.form&&d?m?"":d:t(p,h,m)}}return u||e.opt.development_extensions.require_explicit_legal_case_title_short&&"legal_case"===r.type||!s||!r[s]||!o||(u=r[s]),u||e.sys.getAbbreviation||!e.sys.getHumanForm||(u=t(p,h,m)),u||m||e.sys.getHumanForm&&"jurisdiction"===p||(u=a),e.opt.development_extensions.force_title_abbrev_fallback&&"title"===p&&u===a&&r["title-short"]&&(u=r["title-short"]),u}function r(t,i){var r,s=e.opt["default-locale"][0].slice(0,2);if(r=e.opt.development_extensions.strict_text_case_locales?new RegExp("^([a-zA-Z]{2})(?:$|-.*| .*)"):new RegExp("^([a-zA-Z]{2})(?:$|-.*|.*)"),t.language){var a=(""+t.language).match(r);s=a?a[1]:"tlh"}return t.multi&&t.multi&&t.multi.main&&t.multi.main[i]&&(s=t.multi.main[i]),e.opt.development_extensions.strict_text_case_locales&&!e.opt.development_extensions.normalize_lang_keys_to_lowercase||(s=s.toLowerCase()),s}function s(t,i,s,a,n,o){var l,u,c,p,h=n,m=!1;if(!t[i])return{name:"",usedOrig:n,token:Ko.Util.cloneToken(this)};var f=!1;Ko.VARIABLES_WITH_SHORT_FORM.indexOf(i)>-1&&o&&(i+="-short",f=!0);var d=!1,g=null,b=[];"-short"===i.slice(-6)?(b.push(i),b.push(i.slice(0,-6))):b.push(i);for(var y=0,v=b.length;y<v;y++){var _=!1;c={name:"",usedOrig:n,locale:r(t,i=b[y])},p=e.opt[s]?e.opt[s].slice():[];var x=!1;if("locale-orig"===s?(n||(c.name=t[i],c.usedOrig=!1),x=!0,m=!0):!a||void 0!==p&&0!==p.length||(c.name=t[i],c.usedOrig=!0,x=!0,m=!0),!x){for(var w=0,E=p.length;w<E;w+=1){if(u=(l=p[w]).split(/[\-_]/)[0],l&&t.multi&&t.multi._keys[i]&&t.multi._keys[i][l]){c.name=t.multi._keys[i][l],c.locale=l,x=!0,_=!0,m=!1;break}if(u&&t.multi&&t.multi._keys[i]&&t.multi._keys[i][u]){c.name=t.multi._keys[i][u],c.locale=u,x=!0,_=!0,m=!1;break}}!c.name&&a&&(c={name:t[i],usedOrig:!0,locale:r(t,i)},m=!0)}if(c.token=Ko.Util.cloneToken(this),0===y?(_&&(c.found_variant_ok=!0),g=c,f||void 0!==p&&0!==p.length||(d=!0),_&&(d=!0)):f||_||!g?_&&(c.found_variant_ok=!0):(c=g,i=b[0]),["title","container-title"].indexOf(i)>-1&&!(h||c.token.strings["text-case"]&&"sentence"!==c.token.strings["text-case"]&&"normal"!==c.token.strings["text-case"])){var A;e.opt.lang,A=!m&&c.locale;var T=i.slice(0,-5),S="sentence"===c.token.strings["text-case"];c.name=Ko.titlecaseSentenceOrNormal(e,t,T,A,S),delete c.token.strings["text-case"]}if(d)break}return c}function a(t,r,s,a){var n=t.variables[0];if(e.publisherOutput&&s){if(-1===["publisher","publisher-place"].indexOf(n))return!1;e.publisherOutput[n+"-token"]=t,e.publisherOutput.varlist.push(n);var o=s.split(/;\s*/);o.length===e.publisherOutput[n+"-list"].length&&(e.publisherOutput[n+"-list"]=o);for(var l=0,u=o.length;l<u;l+=1)o[l]=i(e,t,r,!1,o[l],a,!0);return e.tmp[n+"-token"]=t,!0}return!1}function n(t,i){var r=i.match(/^!((?:[-_a-z]+(?:(?:.*)))(?:,(?:[-_a-z]+(?:(?:.*))))*)>>>/);if(r){var s=r[1].split(",");i=i.slice(r[0].length);for(var a=0,n=s.length;a<n;a+=1){var o=s[a].match(/^([-_a-z]+)(?:\:(.*))*$/),l=o[1],u=e.tmp.abbrev_trimmer;o[2]?u&&t&&(u[t]||(u[t]={}),u[t][l]=o[2]):-1===e.tmp.done_vars.indexOf(l)&&(u&&t&&(u.QUASHES[t]||(u.QUASHES[t]={}),u.QUASHES[t][l]=!0),e.tmp.done_vars.push(l))}}return i}this.abbrevs={},this.abbrevs.default=new e.sys.AbbreviationSegments,this.getTextSubField=s,this.loadAbbreviation=function(t,i,r,s){t||(t="default");var a=t.split(":")[0],n=Ko.getAbbrevsDomain(e,a,s);return n&&(t+="@"+n),r?(e.sys.getAbbreviation&&((t=e.sys.getAbbreviation(e.opt.styleID,e.transform.abbrevs,t,i,r))||(t="default",n&&(t+="@"+n))),t):(e.transform.abbrevs[t]||(e.transform.abbrevs[t]=new e.sys.AbbreviationSegments),e.transform.abbrevs[t][i]||(e.transform.abbrevs[t][i]={}),t)},this.quashCheck=n,this.getOutputFunction=function(t,r,o,l){var u,c=Ko.LangPrefsMap[t[0]];return u=!!c&&e.opt["cite-lang-prefs"][c],function(e,o,p){var h,m,f,d,g,b;if(!t[0]||!o[t[0]]&&!o[l])return null;if(!e.tmp.just_looking&&p&&p["suppress-author"]&&!e.tmp.probably_rendered_something&&e.tmp.can_substitute.length()>1)return null;var y={primary:!1,secondary:!1,tertiary:!1};if("_sort"===e.tmp.area.slice(-5))y.primary="locale-sort";else if(u&&1===u.length&&"locale-orig"===u[0])y.primary="locale-orig",u=!1;else if(u&&!e.tmp.multi_layout)for(var v=["primary","secondary","tertiary"],_=0,x=v.length;_<x&&!(u.length-1<_);_+=1)u[_]&&(y[v[_]]="locale-"+u[_]);else y.primary="locale-orig";if("title-short"!==t[0]&&("bibliography"===e.tmp.area||"citation"===e.tmp.area&&"note"===e.opt.xclass&&p&&!p.position)||(y.secondary=!1,y.tertiary=!1),e.tmp.multi_layout&&(y.secondary=!1,y.tertiary=!1),e.tmp["publisher-list"])return"publisher"===t[0]?e.tmp["publisher-token"]=this:"publisher-place"===t[0]&&(e.tmp["publisher-place-token"]=this),null;var w=e.tmp.lang_array.slice(),E=s.call(this,o,t[0],y.primary,!0,null,r);h=E.name,m=E.locale;var A,T,S,O=E.token,Q=E.usedOrig;if(r&&!E.found_variant_ok&&(h=i(e,O,o,l,h,r,!0))&&(e.tmp.just_looking||(h=n(o.jurisdiction,h))),a(this,o,h,r))return e.tmp.lang_array=w,null;if(f=!1,g=!1,y.secondary&&(f=(E=s.call(this,o,t[0],y.secondary,!1,E.usedOrig,null,r)).name,d=E.locale,A=E.token,r&&!E.found_variant_ok&&f&&(f=i(e,A,o,!1,f,r,!0))),y.tertiary&&(g=(E=s.call(this,o,t[0],y.tertiary,!1,E.usedOrig,null,r)).name,b=E.locale,T=E.token,r&&!E.found_variant_ok&&g&&(g=i(e,T,o,!1,g,r,!0))),"locale-translit"===y.primary&&(S=e.opt.citeAffixes[c][y.primary].prefix),"<i>"===S&&"title"===t[0]&&!Q){var k=!1;for(_=0,x=O.decorations.length;_<x;_+=1)"@font-style"===O.decorations[_][0]&&"italic"===O.decorations[_][1]&&(k=!0);k||O.decorations.push(["@font-style","italic"])}if("en"!==m&&"title"===O.strings["text-case"]&&(O.strings["text-case"]="passthrough"),"title"===t[0]&&(h=Ko.demoteNoiseWords(e,h,this["leading-noise-words"])),f||g){if(e.output.openLevel("empty"),O.strings.suffix=O.strings.suffix.replace(/[ .,]+$/,""),m&&(e.tmp.lang_array=[m].concat(w)),Ko.UPDATE_GROUP_CONTEXT_CONDITION(e,null,null,O,O.strings.prefix+h),e.output.append(h,O),e.tmp.probably_rendered_something=!0,h===f&&(f=!1),f){for(A.strings.prefix=e.opt.citeAffixes[c][y.secondary].prefix,A.strings.suffix=e.opt.citeAffixes[c][y.secondary].suffix,A.strings.prefix||(A.strings.prefix=" "),_=A.decorations.length-1;_>-1;_+=-1)["@quotes/true","@font-style/italic","@font-style/oblique","@font-weight/bold"].indexOf(A.decorations[_].join("/"))>-1&&(A.decorations=A.decorations.slice(0,_).concat(A.decorations.slice(_+1)));"en"!==d&&"title"===A.strings["text-case"]&&(A.strings["text-case"]="passthrough"),d&&(e.tmp.lang_array=[d].concat(w));var C=new Ko.Token;C.decorations.push(["@font-style","normal"]),C.decorations.push(["@font-weight","normal"]),e.output.openLevel(C),e.output.append(f,A),e.output.closeLevel(),e.output.current.value(),e.output.current.value().blobs.length}if(h===g&&(g=!1),g){for(T.strings.prefix=e.opt.citeAffixes[c][y.tertiary].prefix,T.strings.suffix=e.opt.citeAffixes[c][y.tertiary].suffix,T.strings.prefix||(T.strings.prefix=" "),_=T.decorations.length-1;_>-1;_+=-1)["@quotes/true","@font-style/italic","@font-style/oblique","@font-weight/bold"].indexOf(T.decorations[_].join("/"))>-1&&(T.decorations=T.decorations.slice(0,_).concat(T.decorations.slice(_+1)));"en"!==b&&"title"===T.strings["text-case"]&&(T.strings["text-case"]="passthrough"),b&&(e.tmp.lang_array=[b].concat(w));var I=new Ko.Token;I.decorations.push(["@font-style","normal"]),I.decorations.push(["@font-weight","normal"]),e.output.openLevel(I),e.output.append(g,T),e.output.closeLevel(),e.output.current.value(),e.output.current.value().blobs.length}e.output.closeLevel()}else m&&(e.tmp.lang_array=[m].concat(w)),Ko.UPDATE_GROUP_CONTEXT_CONDITION(e,null,null,O,O.strings.prefix+h),e.output.append(h,O),e.tmp.probably_rendered_something=!0;return e.tmp.lang_array=w,e.tmp.can_block_substitute&&e.tmp.name_node.children.push(e.output.current.value()),null}}},Ko.Token=function(e,t,i){this.name=e,this.strings={},this.strings.delimiter=void 0,this.strings.prefix="",this.strings.suffix="",this.decorations=[],this.variables=[],this.execs=[],this.tokentype=t},Ko.Util.cloneToken=function(e){var t,i,r;if("string"==typeof e)return e;for(var s in t=new Ko.Token(e.name,e.tokentype),e.strings)e.strings.hasOwnProperty(s)&&(t.strings[s]=e.strings[s]);if(e.decorations)for(t.decorations=[],i=0,r=e.decorations.length;i<r;i+=1)t.decorations.push(e.decorations[i].slice());return e.variables&&(t.variables=e.variables.slice()),e.execs&&(t.execs=e.execs.slice(),e.tests&&(t.tests=e.tests.slice())),t},Ko.AmbigConfig=function(){this.maxvals=[],this.minval=1,this.names=[],this.givens=[],this.year_suffix=!1,this.disambiguate=0},Ko.Blob=function(e,t,i){var r,s;if(this.levelname=i,t){for(var a in this.strings={prefix:"",suffix:""},t.strings)t.strings.hasOwnProperty(a)&&(this.strings[a]=t.strings[a]);for(this.decorations=[],r=void 0===t.decorations?0:t.decorations.length,s=0;s<r;s+=1)this.decorations.push(t.decorations[s].slice())}else this.strings={},this.strings.prefix="",this.strings.suffix="",this.strings.delimiter="",this.decorations=[];this.blobs="string"==typeof e?e:e?[e]:[],this.alldecor=[this.decorations]},Ko.Blob.prototype.push=function(e){"string"==typeof this.blobs?Ko.error("Attempt to push blob onto string object"):!1!==e&&(e.alldecor=e.alldecor.concat(this.alldecor),this.blobs.push(e))},Ko.NumericBlob=function(e,t,i,r){this.id=r,this.alldecor=[],this.num=t,this.particle=e,this.blobs=t.toString(),this.status=Ko.START,this.strings={},i?(this.gender=i.gender,this.decorations=i.decorations,this.strings.prefix=i.strings.prefix,this.strings.suffix=i.strings.suffix,this.strings["text-case"]=i.strings["text-case"],this.successor_prefix=i.successor_prefix,this.range_prefix=i.range_prefix,this.splice_prefix=i.splice_prefix,this.formatter=i.formatter,this.formatter||(this.formatter=new Ko.Output.DefaultFormatter),this.formatter&&(this.type=this.formatter.format(1))):(this.decorations=[],this.strings.prefix="",this.strings.suffix="",this.successor_prefix="",this.range_prefix="",this.splice_prefix="",this.formatter=new Ko.Output.DefaultFormatter)},Ko.NumericBlob.prototype.setFormatter=function(e){this.formatter=e,this.type=this.formatter.format(1)},Ko.Output.DefaultFormatter=function(){},Ko.Output.DefaultFormatter.prototype.format=function(e){return e.toString()},Ko.NumericBlob.prototype.checkNext=function(e,t){t?(this.status=Ko.START,"object"==typeof e&&(e.num===this.num+1?e.status=Ko.SUCCESSOR:e.status=Ko.SEEN)):e&&e.num&&this.type===e.type&&e.num===this.num+1?this.status===Ko.START||this.status===Ko.SEEN?e.status=Ko.SUCCESSOR:this.status!==Ko.SUCCESSOR&&this.status!==Ko.SUCCESSOR_OF_SUCCESSOR||(this.range_prefix?(e.status=Ko.SUCCESSOR_OF_SUCCESSOR,this.status=Ko.SUPPRESS):e.status=Ko.SUCCESSOR):(this.status===Ko.SUCCESSOR_OF_SUCCESSOR&&(this.status=Ko.END),"object"==typeof e&&(e.status=Ko.SEEN))},Ko.NumericBlob.prototype.checkLast=function(e){return(this.status===Ko.SEEN||e.num!==this.num-1&&this.status===Ko.SUCCESSOR)&&(this.status=Ko.SUCCESSOR,!0)},Ko.Util.fixDateNode=function(e,t,i){var r,s,a,n,o,l,u,c,p,h,m,f,d,g=this.cslXml.getAttributeValue(i,"lingo"),b=this.cslXml.getAttributeValue(i,"default-locale");if(this.build.date_key=!0,r=this.cslXml.getAttributeValue(i,"form"),g=b?this.opt["default-locale"][0]:this.cslXml.getAttributeValue(i,"lingo"),!this.getDate(r,b))return e;var y=this.cslXml.getAttributeValue(i,"date-parts");for(var v in s=this.cslXml.getAttributeValue(i,"variable"),c=this.cslXml.getAttributeValue(i,"prefix"),p=this.cslXml.getAttributeValue(i,"suffix"),f=this.cslXml.getAttributeValue(i,"display"),d=this.cslXml.getAttributeValue(i,"cslid"),a=this.cslXml.nodeCopy(this.getDate(r,b)),this.cslXml.setAttribute(a,"lingo",this.opt.lang),this.cslXml.setAttribute(a,"form",r),this.cslXml.setAttribute(a,"date-parts",y),this.cslXml.setAttribute(a,"cslid",d),this.cslXml.setAttribute(a,"variable",s),this.cslXml.setAttribute(a,"default-locale",b),c&&this.cslXml.setAttribute(a,"prefix",c),p&&this.cslXml.setAttribute(a,"suffix",p),f&&this.cslXml.setAttribute(a,"display",f),h=this.cslXml.children(a))n=h[v],"date-part"===this.cslXml.nodename(n)&&(o=this.cslXml.getAttributeValue(n,"name"),b&&this.cslXml.setAttributeOnNodeIdentifiedByNameAttribute(a,"date-part",o,"@default-locale","true"));for(var v in h=this.cslXml.children(i))if(n=h[v],"date-part"===this.cslXml.nodename(n))for(l in o=this.cslXml.getAttributeValue(n,"name"),m=this.cslXml.attributes(n))"@name"!==l&&(g&&g!==this.opt.lang&&["@suffix","@prefix","@form"].indexOf(l)>-1||(u=m[l],this.cslXml.setAttributeOnNodeIdentifiedByNameAttribute(a,"date-part",o,l,u)));if("year"===this.cslXml.getAttributeValue(i,"date-parts"))this.cslXml.deleteNodeByNameAttribute(a,"month"),this.cslXml.deleteNodeByNameAttribute(a,"day");else if("year-month"===this.cslXml.getAttributeValue(i,"date-parts"))this.cslXml.deleteNodeByNameAttribute(a,"day");else if("month-day"===this.cslXml.getAttributeValue(i,"date-parts")){for(var _=this.cslXml.children(a),x=1,w=this.cslXml.numberofnodes(_);x<w;x++)if("year"===this.cslXml.getAttributeValue(_[x],"name")){this.cslXml.setAttribute(_[x-1],"suffix","");break}this.cslXml.deleteNodeByNameAttribute(a,"year")}return this.cslXml.insertChildNodeAfter(e,i,t,a)},Ko.dateMacroAsSortKey=function(e,t){Ko.dateAsSortKey.call(this,e,t,!0)},Ko.dateAsSortKey=function(e,t,i){var r,s,a,n,o,l,u,c=this.variables[0],p="empty";for(i&&e.tmp.extension&&(p="macro-with-date"),void 0===(r=t[c])&&((r={"date-parts":[[0]]}).year||(e.tmp.empty_date=!0)),void 0===this.dateparts&&(this.dateparts=["year","month","day"]),r.raw?r=e.fun.dateparser.parseDateToArray(r.raw):r["date-parts"]&&(r=e.dateParseArray(r)),void 0===r&&(r={}),l=0,u=Ko.DATE_PARTS_INTERNAL.length;l<u;l+=1)if(a=0,"_end"===(n=s=Ko.DATE_PARTS_INTERNAL[l]).slice(-4)&&(n=n.slice(0,-4)),r[s]&&this.dateparts.indexOf(n)>-1&&(a=r[s]),"year"===s.slice(0,4)){var h="Y";"-"===(o=Ko.Util.Dates[n].numeric(e,a))[0]&&(h="X",o=o.slice(1),o=9999-parseInt(o,10)),e.output.append(Ko.Util.Dates[s.slice(0,4)].numeric(e,h+o),p)}else(a=Ko.Util.Dates[n]["numeric-leading-zeros"](e,a))||(a="00"),e.output.append(a,p)},Ko.Engine.prototype.dateParseArray=function(e){var t,i,r,s;for(i in t={},e)if("date-parts"===i){(r=e["date-parts"]).length>1&&r[0].length!==r[1].length&&Ko.error("CSL data error: element mismatch in date range input."),s=["","_end"];for(var a=0,n=r.length;a<n;a+=1)for(var o=0,l=Ko.DATE_PARTS.length;o<l;o+=1)isNaN(parseInt(r[a][o],10))?t[Ko.DATE_PARTS[o]+s[a]]=void 0:t[Ko.DATE_PARTS[o]+s[a]]=parseInt(r[a][o],10)}else e.hasOwnProperty(i)&&("literal"===i&&"object"==typeof e.literal&&"string"==typeof e.literal.part?(Ko.debug("Warning: fixing up weird literal date value"),t.literal=e.literal.part):t[i]=e[i]);return t},Ko.Util.Names={},Ko.Util.Names.compareNamesets=Ko.NameOutput.prototype._compareNamesets,Ko.Util.Names.unInitialize=function(e,t){var i,r,s,a,n;if(!t)return"";for(s=t.split(/(?:\-|\s+)/),a=t.match(/(\-|\s+)/g),n="",i=0,r=s.length;i<r;i+=1)n+=s[i],i<r-1&&(n+=a[i]);return n},Ko.Util.Names.initializeWith=function(e,t,i,r){var s,a,n;if(!t)return"";if(i||(i=""),["Lord","Lady"].indexOf(t)>-1||!t.match(Ko.STARTSWITH_ROMANESQUE_REGEXP)&&!i.match("%s"))return t;var o=t;!1===e.opt["initialize-with-hyphen"]&&(o=o.replace(/\-/g," "));for(var l=(o=(o=o.replace(/\s*\-\s*/g,"-").replace(/\s+/g," ")).replace(/-([a-z])/g,"\u2013$1")).length-2;l>-1;l+=-1)"."===o.slice(l,l+1)&&" "!==o.slice(l+1,l+2)&&(o=o.slice(0,l)+". "+o.slice(l+1));if(a=o.match(/[\-\s]+/g),n=o.split(/[\-\s]+/),null===a){var u=n[0].match(/[^\.]+$/);u&&1===u[0].length&&u[0]!==u[0].toLowerCase()&&(n[0]+=".")}if(0===n.length)o=a;else for(o=[n[0]],l=1,s=n.length;l<s;l+=1)o.push(a[l-1]),o.push(n[l]);return n=o,(r?Ko.Util.Names.doNormalize(e,n,i):Ko.Util.Names.doInitialize(e,n,i)).replace(/\u2013([a-z])/g,"-$1")},Ko.Util.Names.doNormalize=function(e,t,i){var r,s;i=i||"";var a=[];for(r=0,s=t.length;r<s;r+=1)t[r].length>1&&"."===t[r].slice(-1)?(t[r]=t[r].slice(0,-1),a.push(!0)):1===t[r].length&&t[r].toUpperCase()===t[r]?a.push(!0):a.push(!1);for(r=0,s=t.length;r<s;r+=2)a[r]&&(r<t.length-2&&(t[r+1]="",a[r+2]||(t[r+1]=" "),t[r+2].length>1?t[r]=t[r]+i.replace(/\ufeff$/,""):t[r]=t[r]+i),r===t.length-1&&(t[r]=t[r]+i));return t.join("").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020\ufeff\u00a0]+$/,"").replace(/\s*\-\s*/g,"-").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020]+/g," ")},Ko.Util.Names.doInitialize=function(e,t,i){var r,s,a,n,o,l,u;for(r=0,s=t.length;r<s;r+=2)if(u=t[r])if(!(a=u.match(Ko.NAME_INITIAL_REGEXP))&&!u.match(Ko.STARTSWITH_ROMANESQUE_REGEXP)&&u.length>1&&i.match("%s")&&(a=u.match(/(.)(.*)/)),a&&a[2]&&a[3]&&(a[1]=a[1]+a[2],a[2]=""),a&&a[1].slice(0,1)===a[1].slice(0,1).toUpperCase()){var c="";if(a[2]){var p="";for(n=0,o=(l=a[2].split("")).length;n<o;n+=1){var h=l[n];if(h!==h.toUpperCase())break;p+=h}p.length<a[2].length&&(c=Ko.toLocaleLowerCase.call(e,p))}t[r]=a[1]+c,r<s-1?i.match("%s")?t[r]=i.replace("%s",t[r]):t[r+1].indexOf("-")>-1?t[r+1]=i+t[r+1]:t[r+1]=i:i.match("%s")?t[r]=i.replace("%s",t[r]):t.push(i)}else!u.match(Ko.ROMANESQUE_REGEXP)||a&&a[3]||(t[r]=" "+u);var m=t.join("");return m.replace(/[\u0009\u000a\u000b\u000c\u000d\u0020\ufeff\u00a0]+$/,"").replace(/\s*\-\s*/g,"-").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020]+/g," ")},Ko.Util.Names.getRawName=function(e){var t=[];return e.literal?t.push(e.literal):(e.given&&t.push(e.given),e.family&&t.push(e.family)),t.join(" ")},Ko.Util.Dates={},Ko.Util.Dates.year={},Ko.Util.Dates.year.long=function(e,t){return t||(t="boolean"==typeof t?"":0),t.toString()},Ko.Util.Dates.year.imperial=function(e,t,i){var r="";t||(t="boolean"==typeof t?"":0),i=i?"_end":"";var s=e.tmp.date_object["month"+i];for(s=s?""+s:"1";s.length<2;)s="0"+s;var a=e.tmp.date_object["day"+i];for(a=a?""+a:"1";a.length<2;)a="0"+a;var n,o,l=parseInt(t+s+a,10);if(l>=18680908&&l<19120730?(n="\u660e\u6cbb",o=1867):l>=19120730&&l<19261225?(n="\u5927\u6b63",o=1911):l>=19261225&&l<19890108?(n="\u662d\u548c",o=1925):l>=19890108&&(n="\u5e73\u6210",o=1988),n&&o){var u=n;e.sys.normalizeAbbrevsKey&&(u=e.sys.normalizeAbbrevsKey("number",n)),e.transform.abbrevs.default.number[u]||e.transform.loadAbbreviation("default","number",u,null),e.transform.abbrevs.default.number[u]&&(n=e.transform.abbrevs.default.number[u]),r=n+(t-o)}return r},Ko.Util.Dates.year.short=function(e,t){if((t=t.toString())&&4===t.length)return t.substr(2)},Ko.Util.Dates.year.numeric=function(e,t){var i,r;for((r=(t=""+t).match(/([0-9]*)$/))?(i=t.slice(0,-1*r[1].length),t=r[1]):(i=t,t="");t.length<4;)t="0"+t;return i+t},Ko.Util.Dates.normalizeMonth=function(e,t){var i;if(e||(e=0),(e=""+e).match(/^[0-9]+$/)||(e=0),e=parseInt(e,10),t){var r={stub:"month-",num:e};if(r.num<1||r.num>24)r.num=0;else{for(;r.num>16;)r.num=r.num-4;r.num>12&&(r.stub="season-",r.num=r.num-12)}i=r}else(e<1||e>12)&&(e=0),i=e;return i},Ko.Util.Dates.month={},Ko.Util.Dates.month.numeric=function(e,t){return(t=Ko.Util.Dates.normalizeMonth(t))||(t=""),t},Ko.Util.Dates.month["numeric-leading-zeros"]=function(e,t){if(t=Ko.Util.Dates.normalizeMonth(t))for(t=""+t;t.length<2;)t="0"+t;else t="";return t},Ko.Util.Dates.month.long=function(e,t,i,r){var s=Ko.Util.Dates.normalizeMonth(t,!0);if(t=s.num){for(t=""+t;t.length<2;)t="0"+t;t=e.getTerm(s.stub+t,"long",0,0,!1,r)}else t="";return t},Ko.Util.Dates.month.short=function(e,t,i,r){var s=Ko.Util.Dates.normalizeMonth(t,!0);if(t=s.num){for(t=""+t;t.length<2;)t="0"+t;t=e.getTerm(s.stub+t,"short",0,0,!1,r)}else t="";return t},Ko.Util.Dates.day={},Ko.Util.Dates.day.numeric=function(e,t){return t.toString()},Ko.Util.Dates.day.long=Ko.Util.Dates.day.numeric,Ko.Util.Dates.day["numeric-leading-zeros"]=function(e,t){for(t||(t=0),t=t.toString();t.length<2;)t="0"+t;return t.toString()},Ko.Util.Dates.day.ordinal=function(e,t,i){return e.fun.ordinalizer.format(t,i)},Ko.Util.Sort={},Ko.Util.Sort.strip_prepositions=function(e){var t;return"string"==typeof e&&(t=e.match(/^(([aA]|[aA][nN]|[tT][hH][eE])\s+)/)),t&&(e=e.substr(t[1].length)),e},Ko.Util.substituteStart=function(e,t){var i,r,s,a,n,o,l;a=function(e,t,i){for(var r=0,s=this.decorations.length;r<s;r+=1)if("@strip-periods"===this.decorations[r][0]&&"true"===this.decorations[r][1]){e.tmp.strip_periods+=1;break}},this.execs.push(a),this.decorations&&e.opt.development_extensions.csl_reverse_lookup_support&&(this.decorations.reverse(),this.decorations.push(["@showid","true",this.cslid]),this.decorations.reverse()),l=["number","date","names"],("text"===this.name&&!this.postponed_macro||l.indexOf(this.name)>-1)&&(i=function(e,t,i){"author"===e.tmp.element_trace.value()||"names"===this.name?(!e.tmp.just_looking&&i&&i["author-only"]&&"intext"!==e.tmp.area&&e.tmp.probably_rendered_something&&e.tmp.element_trace.push("suppress-me"),!e.tmp.just_looking&&i&&i["suppress-author"]&&(e.tmp.probably_rendered_something||e.tmp.element_trace.push("suppress-me"))):"date"===this.name?!e.tmp.just_looking&&i&&i["author-only"]&&"intext"!==e.tmp.area&&e.tmp.probably_rendered_something&&e.tmp.element_trace.push("suppress-me"):!e.tmp.just_looking&&i&&i["author-only"]&&"intext"!==e.tmp.area?!e.tmp.probably_rendered_something&&e.tmp.can_block_substitute||e.tmp.element_trace.push("suppress-me"):i&&i["suppress-author"]&&e.tmp.element_trace.push("do-not-suppress-me")},this.execs.push(i)),r=this.strings.cls,this.strings.cls=!1,0===e.build.render_nesting_level&&("bibliography"===e.build.area&&e.bibliography.opt["second-field-align"]?((s=new Ko.Token("group",Ko.START)).decorations=[["@display","left-margin"]],a=function(e,t){e.tmp.render_seen||(s.strings.first_blob=t.id,e.output.startTag("bib_first",s))},s.execs.push(a),t.push(s)):Ko.DISPLAY_CLASSES.indexOf(r)>-1&&((s=new Ko.Token("group",Ko.START)).decorations=[["@display",r]],a=function(e,t){s.strings.first_blob=t.id,e.output.startTag("bib_first",s)},s.execs.push(a),t.push(s)),e.build.cls=r),e.build.render_nesting_level+=1,1===e.build.substitute_level.value()&&(n=new Ko.Token("choose",Ko.START),Ko.Node.choose.build.call(n,e,t),a=function(){return!!e.tmp.can_substitute.value()},(o=new Ko.Token("if",Ko.START)).tests||(o.tests=[]),o.tests.push(a),o.test=e.fun.match.any(this,e,o.tests),t.push(o)),e.sys.variableWrapper&&this.variables_real&&this.variables_real.length&&(a=function(e,t,i){if(!e.tmp.just_looking&&!e.tmp.suppress_decorations){var r=new Ko.Token("text",Ko.START);r.decorations=[["@showid","true"]],e.output.startTag("variable_entry",r);var s=null;i&&(s=i.position),s||(s=0);var a=0;i&&i.noteIndex&&(a=i.noteIndex);var n=0;i&&i["first-reference-note-number"]&&(n=i["first-reference-note-number"]);var o=0;i&&i["first-container-reference-note-number"]&&(o=i["first-container-reference-note-number"]);var l=0;i&&i["citation-number"]&&(l=i["citation-number"]);var u=0;i&&i.index&&(u=i.index);var c={itemData:t,variableNames:this.variables,context:e.tmp.area,xclass:e.opt.xclass,position:["first","container-subsequent","subsequent","ibid","ibid-with-locator"][s],"note-number":a,"first-reference-note-number":n,"first-container-reference-note-number":o,"citation-number":l,index:u,mode:e.opt.mode};e.output.current.value().params=c}},this.execs.push(a))},Ko.Util.substituteEnd=function(e,t){var i,r,s,a,n,o;if(e.sys.variableWrapper&&(this.hasVariable||this.variables_real&&this.variables_real.length)&&(i=function(e){e.tmp.just_looking||e.tmp.suppress_decorations||e.output.endTag("variable_entry")},this.execs.push(i)),i=function(e){for(var t=0,i=this.decorations.length;t<i;t+=1)if("@strip-periods"===this.decorations[t][0]&&"true"===this.decorations[t][1]){e.tmp.strip_periods+=-1;break}},this.execs.push(i),e.build.render_nesting_level+=-1,0===e.build.render_nesting_level&&(e.build.cls?(i=function(e){e.output.endTag("bib_first")},this.execs.push(i),e.build.cls=!1):"bibliography"===e.build.area&&e.bibliography.opt["second-field-align"]&&(i=function(e){e.tmp.render_seen||e.output.endTag("bib_first")},(r=new Ko.Token("group",Ko.END)).execs.push(i),t.push(r),(s=new Ko.Token("group",Ko.START)).decorations=[["@display","right-inline"]],i=function(e){e.tmp.render_seen||(e.tmp.render_seen=!0,e.output.startTag("bib_other",s))},s.execs.push(i),t.push(s))),1===e.build.substitute_level.value()&&(a=new Ko.Token("if",Ko.END),t.push(a),n=new Ko.Token("choose",Ko.END),Ko.Node.choose.build.call(n,e,t)),"names"===this.name||"text"===this.name&&"title"!==this.variables_real){new Ko.Token("text",Ko.SINGLETON);var l=this.name;i=function(e,t){if("bibliography"===e.tmp.area&&"string"==typeof e.bibliography.opt["subsequent-author-substitute"]&&(!this.variables_real||t[this.variables_real])&&(!this.variables_real||"names"!==l)){var i,r,s=e.bibliography.opt["subsequent-author-substitute-rule"];if(!e.tmp.suppress_decorations&&e.tmp.subsequent_author_substitute_ok&&e.tmp.rendered_name){if("partial-each"===s||"partial-first"===s){var a=!0,n=[];for(i=0,r=e.tmp.name_node.children.length;i<r;i+=1){var u=e.tmp.rendered_name[i];a&&e.tmp.last_rendered_name&&e.tmp.last_rendered_name.length>i-1&&u&&!u.localeCompare(e.tmp.last_rendered_name[i])?(o=new Ko.Blob(e[e.tmp.area].opt["subsequent-author-substitute"]),e.tmp.name_node.children[i].blobs=[o],"partial-first"===s&&(a=!1)):a=!1,n.push(u)}e.tmp.last_rendered_name=n}else if("complete-each"===s){if(n=e.tmp.rendered_name.join(",")){if(e.tmp.last_rendered_name&&!n.localeCompare(e.tmp.last_rendered_name))for(i=0,r=e.tmp.name_node.children.length;i<r;i+=1)o=new Ko.Blob(e[e.tmp.area].opt["subsequent-author-substitute"]),e.tmp.name_node.children[i].blobs=[o];e.tmp.last_rendered_name=n}}else(n=e.tmp.rendered_name.join(","))&&(e.tmp.last_rendered_name&&!n.localeCompare(e.tmp.last_rendered_name)&&(o=new Ko.Blob(e[e.tmp.area].opt["subsequent-author-substitute"]),e.tmp.label_blob?e.tmp.name_node.top.blobs=[o,e.tmp.label_blob]:e.tmp.name_node.top.blobs.length?e.tmp.name_node.top.blobs[0].blobs=[o]:e.tmp.name_node.top.blobs=[o],e.tmp.substituted_variable=l),e.tmp.last_rendered_name=n);e.tmp.subsequent_author_substitute_ok=!1}}},this.execs.push(i)}("text"===this.name&&!this.postponed_macro||["number","date","names"].indexOf(this.name)>-1)&&(i=function(e,t){e.tmp.element_trace.mystack.length>1&&e.tmp.element_trace.pop()},this.execs.push(i))},Ko.Util.padding=function(e){var t=e.match(/\s*(-{0,1}[0-9]+)/);if(t)for((e=parseInt(t[1],10))<0&&(e=1e20+e),e=""+e;e.length<20;)e="0"+e;return e},Ko.Util.LongOrdinalizer=function(){},Ko.Util.LongOrdinalizer.prototype.init=function(e){this.state=e},Ko.Util.LongOrdinalizer.prototype.format=function(e,t){e<10&&(e="0"+e);var i=Ko.Engine.getField(Ko.LOOSE,this.state.locale[this.state.opt.lang].terms,"long-ordinal-"+e,"long",0,t);return i||(i=this.state.fun.ordinalizer.format(e,t)),this.state.tmp.cite_renders_content=!0,i},Ko.Util.Ordinalizer=function(e){this.state=e,this.suffixes={}},Ko.Util.Ordinalizer.prototype.init=function(){if(!this.suffixes[this.state.opt.lang]){this.suffixes[this.state.opt.lang]={};for(var e=0;e<3;e+=1){var t=[void 0,"masculine","feminine"][e];this.suffixes[this.state.opt.lang][t]=[];for(var i=1;i<5;i+=1){var r=this.state.getTerm("ordinal-0"+i,"long",!1,t);if(void 0===r){delete this.suffixes[this.state.opt.lang][t];break}this.suffixes[this.state.opt.lang][t].push(r)}}}},Ko.Util.Ordinalizer.prototype.format=function(e,t){var i;i=""+(e=parseInt(e,10));var r="",s=[];if(t&&s.push(t),s.push("neuter"),this.state.locale[this.state.opt.lang].ord["1.0.1"]){var a;r=this.state.getTerm("ordinal",!1,0,t);for(var n=0,o=s.length;n<o;n+=1){a=s[n];var l=this.state.locale[this.state.opt.lang].ord["1.0.1"];if(l["whole-number"][i]&&l["whole-number"][i][a]?r=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["whole-number"][i][a],!1,0,t):l["last-two-digits"][i.slice(i.length-2)]&&l["last-two-digits"][i.slice(i.length-2)][a]?r=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["last-two-digits"][i.slice(i.length-2)][a],!1,0,t):l["last-digit"][i.slice(i.length-1)]&&l["last-digit"][i.slice(i.length-1)][a]&&(r=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["last-digit"][i.slice(i.length-1)][a],!1,0,t)),r)break}}else t||(t=void 0),this.state.fun.ordinalizer.init(),r=e/10%10==1||e>10&&e<20?this.suffixes[this.state.opt.lang][t][3]:e%10==1&&e%100!=11?this.suffixes[this.state.opt.lang][t][0]:e%10==2&&e%100!=12?this.suffixes[this.state.opt.lang][t][1]:e%10==3&&e%100!=13?this.suffixes[this.state.opt.lang][t][2]:this.suffixes[this.state.opt.lang][t][3];return i+r},Ko.Util.Romanizer=function(){},Ko.Util.Romanizer.prototype.format=function(e){var t,i,r,s,a;if(t="",e<6e3)for((s=e.toString().split("")).reverse(),i=0,r=0,a=s.length,i=0;i<a;i+=1)r=parseInt(s[i],10),t=Ko.ROMAN_NUMERALS[i][r]+t;return t},Ko.Util.Suffixator=function(e){e||(e=Ko.SUFFIX_CHARS),this.slist=e.split(",")},Ko.Util.Suffixator.prototype.format=function(e){var t;e+=1;var i="";do{t=e%26==0?26:e%26,i=this.slist[t-1]+i,e=(e-t)/26}while(0!==e);return i},Ko.Engine.prototype.processNumber=function(e,t,i){var r,s=this,a=i;i="page-first"===i?"page":i;var n=",\\s+and\\s+|\\s+and\\s+";"en"!==this.opt.lang.slice(0,2)&&(n+="|,\\s+"+this.getTerm("and")+"\\s+|\\s+"+this.getTerm("and")+"\\s+");var o=new RegExp("^\\s*&\\s*$"),l=new RegExp("(\\s*&\\s*|"+n+"|;\\s+|,\\s+|\\s*\\\\*[\\-\\u2013]+\\s*)","g"),u=new RegExp("(?:\\s*&\\s*|"+n+"|;\\s+|,\\s+|\\s*\\\\*[\\-\\u2013]+\\s*)"),c=this.getTerm("and"),p=this.getTerm("and","symbol");function h(e,t,r,s,n){s=s||"";var o={};if(t||Ko.STATUTE_SUBDIV_STRINGS_REVERSE[i]||(t="var:"+i),t){var l=t.match(/(\s*)([^\s]+)(\s*)/);"page"===a&&0===n&&-1===["p.","pp."].indexOf(l[2])?(o.gotosleepability=!0,o.labelVisibility=!0):o.labelVisibility=!1,o.label=l[2],o.origLabel=e,o.labelSuffix=l[3]?l[3]:"",o.plural=0}return(l=r.match(/^([0-9]*[a-zA-Z]+0*)?([0-9]+(?:[a-zA-Z]*|[-,a-zA-Z]+))$/))?(o.particle=l[1]?l[1]:"",o.value=l[2]):(o.particle="",o.value=r),o.joiningSuffix=s.replace(/\s*-\s*/,"-"),o}function m(e,t,i){var r=e[i.pos],s=e[t].value,a="\\-"===r.joiningSuffix;s.particle&&s.particle!==r.particle&&(i.collapsible=!1);var n=s.match(/^[0-9]+([-,:a-zA-Z]*)$/),o=r.value.match(/^(?:[0-9]+|[ixv]+)([-,:a-zA-Z]*|\-[\-0-9]+)$/);if(s&&n&&o&&!a||(i.collapsible=!1,s&&o||(i.numeric=!1),a&&i.count--),(n&&n[1]||o&&o[1])&&(i.collapsible=!1),void 0===e[t].collapsible){for(var l=t,u=t+i.count;l<u;l++)isNaN(parseInt(e[l].value))&&!e[l].value.match(/^[ivxlcmIVXLCM]+$/)?e[l].collapsible=!1:e[l].collapsible=!0;i.collapsible=e[t].collapsible}var c=i.collapsible;for(l=i.pos,u=i.pos+i.count;l<u;l++)i.count>1&&c&&(e[l].plural=1),e[l].numeric=i.numeric,e[l].collapsible=i.collapsible}function f(e,t,r){"var:"!==r.label.slice(0,4)&&(0===r.pos?(["locator","number","locator-extra","page"].indexOf(i)>-1&&void 0===s.getTerm(Ko.STATUTE_SUBDIV_STRINGS[r.label])&&(e[r.pos].labelVisibility=!0),-1===["locator","number","locator-extra","page"].indexOf(i)&&Ko.STATUTE_SUBDIV_STRINGS[r.label]!==i&&(e[0].labelVisibility=!0)):e[r.pos].labelVisibility=!0)}function d(e){return e.replace("\\-","-")}function g(t){var i=Ko.Util.cloneToken(e),r=new Ko.Token;s.tmp.just_looking||(r.decorations=i.decorations,i.decorations=[],r.strings.prefix=i.strings.prefix,i.strings.prefix="",r.strings.suffix=i.strings.suffix,i.strings.suffix="");var a=t.length?t[0].label:null;if(t.length){for(var n=0,o=t.length;n<o;n++){var l=t[n],u=Ko.Util.cloneToken(i);u.gender=e.gender,a===l.label&&(u.formatter=e.formatter),l.numeric&&(u.successor_prefix=l.successor_prefix),u.strings.suffix=u.strings.suffix+d(l.joiningSuffix),l.styling=u}s.tmp.just_looking||'"'===t[0].value.slice(0,1)&&'"'===t[t.length-1].value.slice(-1)&&(t[0].value=t[0].value.slice(1),t[t.length-1].value=t[t.length-1].value.slice(0,-1),r.decorations.push(["@quotes",!0]))}return r}function b(e,t){return"page"===e||["locator","locator-extra"].indexOf(e)>-1&&(["p."].indexOf(t.label)>-1||["p."].indexOf(t.origLabel)>-1)}function y(e,t,i,r){var a=b(e,t);return function(e,t){var i,r=!0;return["locator","locator-extra","page"].indexOf(e)>-1&&(i=t.origLabel?t.origLabel:t.label,r=!!s.getTerm(Ko.STATUTE_SUBDIV_STRINGS[i])),r}(e,t)&&"-"===i&&r&&((a||["locator","locator-extra","issue","volume","edition","number"].indexOf(e)>-1)&&((i=s.getTerm("page-range-delimiter"))||(i="\u2013")),"collection-number"===e&&((i=s.getTerm("year-range-delimiter"))||(i="\u2013"))),i}function v(e,t,r){if(!(t<1)&&2===r.count&&e[t-1].particle===e[t].particle)if("-"===e[t-1].joiningSuffix)if(!s.opt["page-range-format"]&&parseInt(e[t-1].value,10)>parseInt(e[t].value,10))e[t-1].joiningSuffix=y(i,e[t],e[t-1].joiningSuffix,!0);else{var a,n=e[t];!b(i,n)||isNaN(parseInt(e[t-1].value))||isNaN(parseInt(e[t].value))?((""+e[t-1].value).match(/^([0-9]+|[ivxlcmIVXLCM]+)$/)&&(""+e[t].value).match(/^([0-9]+|[ivxlcmIVXLCM]+)$/)&&(e[t-1].joiningSuffix=s.getTerm("page-range-delimiter")),a=e[t-1].value+d(e[t-1].joiningSuffix)+e[t].value):(a=e[t-1].particle+e[t-1].value+" - "+e[t].particle+e[t].value,a=s.fun.page_mangler(a));var o=a.match(/^((?:[0-9]*[a-zA-Z]+0*))?([0-9]+[a-z]*)(\s*[^0-9]+\s*)([-,a-zA-Z]?0*)([0-9]+[a-z]*)$/);if(o){var l=o[3];l=y(i,n,l,e[t].numeric),e[t-1].particle=o[1],e[t-1].value=o[2],e[t-1].joiningSuffix=l,e[t].particle=o[4],e[t].value=o[5]}r.count=0}else r.count=1}function _(t){if(e&&-1!==["page","chapter-number","collection-number","edition","issue","number","number-of-pages","number-of-volumes","volume","locator","locator-extra"].indexOf(i)){for(var r={count:0,label:null,lastHadRangeDelimiter:!1},s=0,a=t.length;s<a;s++){var n=t[s];if(n.collapsible)r.label===n.label&&"-"===n.joiningSuffix?r.count=1:r.label===n.label&&"-"!==n.joiningSuffix?(r.count++,2===r.count&&v(t,s,r)):r.label!==n.label?(r.label=n.label,r.count=1):(r.count=1,r.label=n.label);else{r.count=0,r.label=null;var o=n.numeric;n.joiningSuffix=y(i,n,n.joiningSuffix,o)}}2===r.count&&v(t,t.length-1,r)}}if(c===p&&(p="&"),e&&this.tmp.shadow_numbers[a]&&this.tmp.shadow_numbers[a].values.length)return _(S=this.tmp.shadow_numbers[a].values),void(this.tmp.shadow_numbers[a].masterStyling=g(S));if(this.tmp.shadow_numbers[a]||(this.tmp.shadow_numbers[a]={values:[]}),t){var x=Ko.LangPrefsMap[i];if(x){var w=this.opt["cite-lang-prefs"][x][0];r=(r=this.transform.getTextSubField(t,a,"locale-"+w,!0)).name}else r=t[a];if(r&&this.sys.getAbbreviation){if(this.sys.normalizeAbbrevsKey)var E=this.sys.normalizeAbbrevsKey(a,r);else E=r;var A=this.transform.loadAbbreviation(t.jurisdiction,"number",E,t.language);this.transform.abbrevs[A].number&&(this.transform.abbrevs[A].number[E]?r=this.transform.abbrevs[A].number[E]:void 0!==this.transform.abbrevs[A].number[E]&&delete this.transform.abbrevs[A].number[E])}if(void 0!==r&&("string"==typeof r||"number"==typeof r)){"number"==typeof r&&(r=""+r);var T=Ko.STATUTE_SUBDIV_STRINGS_REVERSE[i];if(0===this.tmp.shadow_numbers[a].values.length){var S=function(e,r){var a,n,c;if(r=r||"",(e=function(e){var r=(e=e.trim()).match(/^([^ ]+)/);if(r&&!Ko.STATUTE_SUBDIV_STRINGS[r[1]]){var s;(s=["locator","locator-extra","page"].indexOf(i)>-1?t.label?Ko.STATUTE_SUBDIV_STRINGS_REVERSE[t.label]:"p.":Ko.STATUTE_SUBDIV_STRINGS_REVERSE[i])&&(e=s+" "+e)}return e}(e)).indexOf("\\-")>-1){a=new RegExp(l.source.replace("\\-","")),n=new RegExp(u.source.replace("\\-",""));for(var m=0,f=(g=e.split("\\-")).length;m<f;m++)g[m]=g[m].replace(/\-/g,"\u2013");c=(c=g.join("\\-")).replace(/\\/g,"")}else a=l,n=u,c=e;var d=[];if(_=c.match(a)){var g=c.split(n);for(m=0,f=_.length;m<f;m++)_[m].match(o)&&(g[m].match(/[a-zA-Z]$/)&&g[m].match(/^[a-zA-Z]/)?_[m]=p:_[m]=" "+p+" ");for(var m in g)if((""+g[m]).replace(/^[a-z]\.\s+/,"").match(/[^\s0-9ivxlcmIVXLCM]/))break;for(m=0,f=g.length-1;m<f;m++)d.push(g[m]),d.push(_[m]);d.push(g[g.length-1]),d=function(e){for(var t=e.length-2;t>-1;t-=2)"-"===e[t]&&e[t-1].match(/^(?:(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z])\.  *)*[0-9]+[,a-zA-Z]+$/)&&e[t+1].match(/^[,a-zA-Z]+$/)&&(e[t-1]=e.slice(t-1,t+2).join(""),e=e.slice(0,t).concat(e.slice(t+2)));return e}(d)}else d=[c];var b=[],y=r,v="";for(m=0,f=d.length;m<f;m+=2){var _;if(_=d[m].match(/((?:^| )(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z]|subpara|subch|amend|bibliog|annot|illus|princ|intro|sched|subdiv|subsec)(?:\.| ) *)/g)){for(var x=(g=d[m].split(/(?:(?:^| )(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z]|subpara|subch|amend|bibliog|annot|illus|princ|intro|sched|subdiv|subsec)(?:\.| ) *)/)).length-1;x>0;x--)!g[x-1]||g[x].match(/^[0-9]+([-;,:a-zA-Z]*)$/)&&g[x-1].match(/^[0-9]+([-;,:a-zA-Z]*)$/)||(g[x-1]=g[x-1]+_[x-1]+g[x],g=g.slice(0,x).concat(g.slice(x+1)),_=_.slice(0,x-1).concat(_.slice(x)));if(_.length>0){var w=_[0].trim();!Ko.STATUTE_SUBDIV_STRINGS[w]||void 0===s.getTerm(Ko.STATUTE_SUBDIV_STRINGS[w])||-1===["locator","number","locator-extra","page"].indexOf(i)&&Ko.STATUTE_SUBDIV_STRINGS[w]!==i?0===m&&(_=_.slice(1),g[0]=g[0]+" "+w+" "+g[1],g=g.slice(0,1).concat(g.slice(2))):v=w}x=0;for(var E=g.length;x<E;x++)(g[x]||x===g.length-1)&&(A=v===(y=_[x-1]?_[x-1]:y).trim()?"":v,c=g[x]?g[x].trim():"",x===g.length-1?b.push(h(A,y,c,d[m+1],m)):b.push(h(A,y,c,null,m)))}else{var A;A=v===y.trim()?"":v,b.push(h(A,y,d[m],d[m+1]))}}return b}(r,T);for(var O of(function(e){for(var t=0,i=e.length-1;t<i;t++)!e[t].joiningSuffix&&e[t+1].label&&(e[t].joiningSuffix=" ")}(S),function(e){if(0!==e.length){for(var r=0,s=1,n=1,o=e.length;n<o;n++){var l=e[n-1],u=e[n];l.label===u.label&&l.particle==l.particle?s++:((c=JSON.parse(JSON.stringify(e[r]))).pos=r,c.count=s,c.numeric=!0,m(e,r,c),l.label!==u.label&&f(e,0,c),r=n,s=1)}var c;(c=JSON.parse(JSON.stringify(e[r]))).pos=r,c.count=s,c.numeric=!0,m(e,r,c),f(e,0,c),e.length&&e[0].numeric&&"number-of-"===i.slice(0,10)&&parseInt(t[a],10)>1&&(e[0].plural=1)}}(S),S))O.numeric||(O.plural=0);this.tmp.shadow_numbers[a].values=S,e&&(_(S),this.tmp.shadow_numbers[a].masterStyling=g(S)),function(e,t,r){var a=e[t];r.length&&(a.numeric=r[0].numeric,a.collapsible=r[0].collapsible,a.plural=r[0].plural,a.label=Ko.STATUTE_SUBDIV_STRINGS[r[0].label],"number"===i&&"issue"===a.label&&s.getTerm("number")&&(a.label="number"))}(this.tmp.shadow_numbers,a,S)}var Q=this.tmp.shadow_numbers[a];"number"===i&&1===Q.values.length&&Q.values[0].value.indexOf("|")>-1&&(Q.values[0].value=Q.values[0].value.replace(/\|/g,", "),Q.values[0].numeric=!0,Q.values[0].plural=1,Q.values[0].collapsible=!1,Q.numeric=!0,Q.plural=1,Q.collapsible=!1),1===Q.values.length&&Q.values[0].value.match(/^[0-9]+(?:\/[0-9]+)+$/)&&(Q.values[0].numeric=!0,Q.values[0].plural=0,Q.values[0].collapsible=!1,Q.numeric=!0,Q.plural=0,Q.collapsible=!1),"page"===i&&Q.values.length>0&&Q.values[0].gotosleepability&&(Q.labelForm="short")}}},Ko.Util.outputNumericField=function(e,t,i){e.output.openLevel(e.tmp.shadow_numbers[t].masterStyling);var r,s=e.tmp.shadow_numbers[t].masterStyling,a=e.tmp.shadow_numbers[t].values,n=a.length?a[0].label:null,o=e.tmp.shadow_numbers[t].labelForm,l=e.tmp.group_context.tip.label_static;r=o||"short";for(var u=e.tmp.shadow_numbers[t].labelCapitalizeIfFirst,c=e.tmp.shadow_numbers[t].labelDecorations,p=null,h=0,m=a.length;h<m;h++){var f,d=a[h],g="";d.label&&(f="var:"===d.label.slice(0,4)?d.label.slice(4):Ko.STATUTE_SUBDIV_STRINGS[d.label])&&(d.label===n?(l&&-1===(g=e.getTerm(f,"static",d.plural)).indexOf("%s")&&(g=""),g||(g=e.getTerm(f,o,d.plural))):(l&&-1===(g=e.getTerm(f,"static",d.plural)).indexOf("%s")&&(g=""),g||(g=e.getTerm(f,r,d.plural))),u&&(g=Ko.Output.Formatters["capitalize-first"](e,g)));var b=-1;g&&(b=g.indexOf("%s"));var y,v=Ko.Util.cloneToken(d.styling);if(v.formatter=d.styling.formatter,v.type=d.styling.type,v.num=d.styling.num,v.gender=d.styling.gender,b>0&&b<g.length-2)v.strings.prefix+=g.slice(0,b),v.strings.suffix=g.slice(b+2)+v.strings.suffix;else if(d.labelVisibility)if(g||(g=d.label,f=d.label),b>0){var _=new Ko.Token;_.decorations=c,e.output.append(g.slice(0,b),_)}else b!==g.length-2&&-1!==b||e.output.append(g+d.labelSuffix,"empty");if(Ko.UPDATE_GROUP_CONTEXT_CONDITION(e,s.strings.prefix,null,s,`${d.particle}${d.value}`),d.collapsible?(void 0===(y=d.value.match(/^[1-9][0-9]*$/)?new Ko.NumericBlob(d.particle,parseInt(d.value,10),v,i):new Ko.NumericBlob(d.particle,d.value,v,i)).gender&&(y.gender=e.locale[e.opt.lang]["noun-genders"][t]),e.output.append(y,"literal")):e.output.append(d.particle+d.value,v),0===b&&b<g.length-2&&(null===p&&(p=f),f!==p||h===a.length-1)){var x=new Ko.Token;x.decorations=c,e.output.append(g.slice(b+2),x)}p=f,e.tmp.term_predecessor=!0}e.output.closeLevel()},Ko.Util.PageRangeMangler={},Ko.Util.PageRangeMangler.getFunction=function(e,t){var i,r,s,a,n,o,l,u,c,p,h,m,f,d,g,b,y,v=e.getTerm(t+"-range-delimiter");i=/([0-9]*[a-zA-Z]+0*)?([0-9]+[a-z]*)\s*(?:\u2013|-)\s*([0-9]*[a-zA-Z]+0*)?([0-9]+[a-z]*)/,a=function(i){for(s=i.length,r=1;r<s;r+=2)"object"==typeof i[r]&&(i[r]=i[r].join(""));var a=i.join("");return a.replace(/([^\\])\-/g,"$1"+e.getTerm(t+"-range-delimiter"))},n=function(e){var t,i,a,n=new RegExp("([^\\\\])[-"+("-"===v?"":v)+"\\u2013]","g");e=e.replace(n,"$1 - ").replace(/\s+-\s+/g," - ");var o=new RegExp("((?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*\\s+\\-\\s+(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*)","g"),l=new RegExp("(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*\\s+\\-\\s+(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*");if(t=e.match(o),0===(i=e.split(l)).length)a=t;else for(a=[i[0]],r=1,s=i.length;r<s;r+=1)a.push(t[r-1].replace(/\s*\-\s*/g,"-")),a.push(i[r]);return a},o=function(e){for(p=n(e=""+e),s=p.length,r=1;r<s;r+=2)(h=p[r].match(i))&&(h[3]&&h[1]!==h[3]||(h[4].length<h[2].length&&(h[4]=h[2].slice(0,h[2].length-h[4].length)+h[4]),parseInt(h[2],10)<parseInt(h[4],10)&&(h[3]=v+(h[1]?h[1]:""),p[r]=h.slice(1)))),"string"==typeof p[r]&&(p[r]=p[r].replace(/\-/g,v));return p},l=function(e,t,i){s=e.length;for(var r=1,n=e.length;r<n;r+=2)"object"==typeof e[r]&&(e[r][3]=u(e[r][1],e[r][3],t,i),e[r][2].slice(1)===e[r][0]&&(e[r][2]=v));return a(e)},u=function(e,t,i,r){if(i||(i=0),m=(""+e).split(""),f=(""+t).split(""),(d=f.slice()).reverse(),m.length===f.length)for(var s=0,a=m.length;s<a;s+=1){if(!(m[s]===f[s]&&d.length>i)){if(i&&r&&3===d.length){var n=m.slice(0,s);n.reverse(),d=d.concat(n)}break}d.pop()}return d.reverse(),d.join("")},c=function(e){for(s=e.length,r=1;r<s;r+=2)"object"==typeof e[r]&&(h=e[r],g=parseInt(h[1],10),b=parseInt(h[3],10),g>100&&g%100&&parseInt(g/100,10)===parseInt(b/100,10)?h[3]=""+b%100:g>=1e4&&(h[3]=""+b%1e3)),h[2].slice(1)===h[0]&&(h[2]=v);return a(e)};var _=function(e,t,i,r){return t(o(e=""+e),i,r)};return e.opt[t+"-range-format"]?"expanded"===e.opt[t+"-range-format"]?y=function(e){return _(e,a)}:"minimal"===e.opt[t+"-range-format"]?y=function(e){return _(e,l)}:"minimal-two"===e.opt[t+"-range-format"]?y=function(e,t){return _(e,l,2,t)}:"chicago"===e.opt[t+"-range-format"]&&(y=function(e){return _(e,c)}):y=function(e){return _(e,a)},y},Ko.Util.FlipFlopper=function(e){var t=[],i={'<span class="nocase">':{type:"nocase",opener:'<span class="nocase">',closer:"</span>",attr:null,outer:null,flipflop:null},'<span class="nodecor">':{type:"nodecor",opener:'<span class="nodecor">',closer:"</span>",attr:"@class",outer:"nodecor",flipflop:{nodecor:"nodecor"}},'<span style="font-variant:small-caps;">':{type:"tag",opener:'<span style="font-variant:small-caps;">',closer:"</span>",attr:"@font-variant",outer:"small-caps",flipflop:{"small-caps":"normal",normal:"small-caps"}},"<sc>":{type:"tag",opener:"<sc>",closer:"</sc>",attr:"@font-variant",outer:"small-caps",flipflop:{"small-caps":"normal",normal:"small-caps"}},"<i>":{type:"tag",opener:"<i>",closer:"</i>",attr:"@font-style",outer:"italic",flipflop:{italic:"normal",normal:"italic"}},"<b>":{type:"tag",opener:"<b>",closer:"</b>",attr:"@font-weight",outer:"bold",flipflop:{bold:"normal",normal:"bold"}},"<sup>":{type:"tag",opener:"<sup>",closer:"</sup>",attr:"@vertical-align",outer:"sup",flipflop:{sub:"sup",sup:"sup"}},"<sub>":{type:"tag",opener:"<sub>",closer:"</sub>",attr:"@vertical-align",outer:"sub",flipflop:{sup:"sub",sub:"sub"}},' "':{type:"quote",opener:' "',closer:'"',attr:"@quotes",outer:"true",flipflop:{true:"inner",inner:"true",false:"true"}}," '":{type:"quote",opener:" '",closer:"'",attr:"@quotes",outer:"inner",flipflop:{true:"inner",inner:"true",false:"true"}}};i['("']=i[' "'],i["('"]=i[" '"];var r=e.getTerm("open-quote"),s=e.getTerm("close-quote"),a=e.getTerm("open-inner-quote"),n=e.getTerm("close-inner-quote");function o(e){for(var t=[],r=Object.keys(i),s=0,a=r.length;s<a;s++){var n=r[s];"quote"===i[e].type&&i[e]||t.push(n)}var o=i[e];return o.opener=new RegExp("^(?:"+t.map((function(e){return e.replace("(","\\(")})).join("|")+")"),o}r&&s&&-1===[' "'," '",'"',"'"].indexOf(r)&&(i[r]=JSON.parse(JSON.stringify(i[' "'])),i[r].opener=r,i[r].closer=s),a&&n&&-1===[' "'," '",'"',"'"].indexOf(a)&&(i[a]=JSON.parse(JSON.stringify(i[" '"])),i[a].opener=a,i[a].closer=n);var l=function(){for(var e={},t=Object.keys(i),r=0,s=t.length;r<s;r++){var a=t[r];e[a]=o(a)}return e}(),u=function(){var e=[],t=[],i={};for(var r in l)e.push(r),i[l[r].closer]=!0;for(var s=Object.keys(i),a=0,n=s.length;a<n;a++){var o=s[a];t.push(o)}var u=e.concat(t).map((function(e){return e.replace("(","\\(")})).join("|");return{matchAll:new RegExp("((?:"+u+"))","g"),splitAll:new RegExp("(?:"+u+")","g"),open:new RegExp("(^(?:"+e.map((function(e){return e.replace("(","\\(")})).join("|")+")$)"),close:new RegExp("(^(?:"+t.join("|")+")$)")}}();function c(e,i){return e.match(u.open)?function(e,i){var r=t[t.length-1];return!r||e.match(r.opener)?(t.push({type:l[e].type,opener:l[e].opener,closer:l[e].closer,pos:i}),!1):(t.pop(),t.push({type:l[e].type,opener:l[e].opener,closer:l[e].closer,pos:i}),{fixtag:r.pos})}(e,i):function(e,i){var r=t[t.length-1];return r&&e===r.closer?(t.pop(),"nocase"===r.type&&{nocase:{open:r.pos,close:i}}):r?{fixtag:r.pos}:{fixtag:i}}(e,i)}var p=function(t){var r=[];this.set=function(s){for(var a=i[s].attr,n=null,o=r.length-1;o>-1;o--)if((p=r[o])[0]===a){n=p;break}if(!n){var l=[e[e.tmp.area].opt.layout_decorations].concat(t.alldecor);e:for(o=l.length-1;o>-1;o--){var u=l[o];if(u)for(var c=u.length-1;c>-1;c--){var p;if((p=u[c])[0]===a){n=p;break e}}}}n=n?[a,i[s].flipflop[n[1]]]:[a,i[s].outer],r.push(n)},this.pair=function(){return r[r.length-1]},this.pop=function(){r.pop()}};function h(e,t){if("'"===e){if(t&&t.match(/^[^\,\.\?\:\;\ ]/))return"\u2019"}else if(" '"===e&&t&&t.match(/^[\ ]/))return" \u2019";return!1}this.processTags=function(r){var s=!1;" "!==(d=r.blobs).slice(0,1)||d.match(/^\s+[\'\"]/)||(s=!0);var a=new RegExp("("+Ko.ROMANESQUE_REGEXP.source+")\u2019("+Ko.ROMANESQUE_REGEXP.source+")","g"),n=function(e){var t=[],r=(e=(e=e.replace(/(<span)\s+(style=\"font-variant:)\s*(small-caps);?\"[^>]*(>)/g,'$1 $2$3;"$4')).replace(/(<span)\s+(class=\"no(?:case|decor)\")[^>]*(>)/g,"$1 $2$3")).match(u.matchAll);if(!r)return{tags:[],strings:[e],forcedSpaces:[]};for(var s=e.split(u.splitAll),a=0,n=r.length-1;a<n;a++)i[r[a]]&&(""===s[a+1]&&['"',"'"].indexOf(r[a+1])>-1?(r[a+1]=" "+r[a+1],t.push(!0)):t.push(!1));return{tags:r,strings:s,forcedSpaces:t}}(d=" "+d.replace(a,"$1'$2"));if(0!==n.tags.length){for(var o,l=!1,m=0,f=n.tags.length;m<f;m++){var d,g=h(_=n.tags[m],d=n.strings[m+1]);if(g)n.strings[m+1]=g+n.strings[m+1],n.tags[m]="";else{for(var b;b=c(_,m);){if(!(Object.keys(b).indexOf("fixtag")>-1)){if(b.nocase){n.tags[b.nocase.open]="",n.tags[b.nocase.close]="";break}break}if(_.match(u.close)&&"'"===_)n.strings[m+1]="\u2019"+n.strings[m+1],n.tags[m]="";else{var y=n.tags[b.fixtag];n.forcedSpaces[b.fixtag-1]&&(y=y.slice(1)),n.strings[b.fixtag+1]=y+n.strings[b.fixtag+1],n.tags[b.fixtag]=""}if(!(t.length>0))break;if("'"===_)break;t.pop()}b&&(b.fixtag||0===b.fixtag)&&(n.strings[m+1]=n.tags[m]+n.strings[m+1],n.tags[m]="")}}for(m=t.length-1;m>-1;m--){var v=t[m].pos,_=n.tags[v];n.strings[v+1]=" '"===_||"'"===_?" \u2019"+n.strings[v+1]:n.tags[v]+n.strings[v+1],n.tags[v]="",t.pop()}for(m=n.tags.length-1;m>-1;m--)n.tags[m]||(n.tags=n.tags.slice(0,m).concat(n.tags.slice(m+1)),n.strings[m]=n.strings[m]+n.strings[m+1],n.strings=n.strings.slice(0,m+1).concat(n.strings.slice(m+2)));for(m=0,f=n.tags.length;m<f;m++){_=n.tags[m];var x=n.forcedSpaces[m-1];[' "'," '",'("',"('"].indexOf(_)>-1&&(l||(i[o=_].outer="true",i[{" '":' "',' "':" '",'("':"('","('":'("'}[o]].outer="inner",l=!0),x||(n.strings[m]+=_.slice(0,1)))}!function(t,i,r){var s=!0,a=new p(t);t.blobs=[];var n=new function(t){this.stack=[t],this.latest=t,this.addStyling=function(t,i){if(s&&(" "===t.slice(0,1)&&(t=t.slice(1))," "===t.slice(0,1)&&(t=t.slice(1)),s=!1),this.latest=this.stack[this.stack.length-1],i){"string"==typeof this.latest.blobs&&((m=new Ko.Blob).blobs=this.latest.blobs,m.alldecor=this.latest.alldecor.slice(),this.latest.blobs=[m]);var r,a=new Ko.Token;if((r=new Ko.Blob(null,a)).alldecor=this.latest.alldecor.slice(),"@class"===i[0]&&"nodecor"===i[1]){for(var n=[],o={},l=[e[e.tmp.area].opt.layout_decorations].concat(r.alldecor),u=l.length-1;u>-1;u--){var c=l[u];if(c)for(var p=c.length-1;p>-1;p--){var h=c[p];["@font-weight","@font-style","@font-variant"].indexOf(h[0])>-1&&!o[h[0]]&&("normal"!==i[1]&&(r.decorations.push([h[0],"normal"]),n.push([h[0],"normal"])),o[h[0]]=!0)}}r.alldecor.push(n)}else r.decorations.push(i),r.alldecor.push([i]);this.latest.blobs.push(r),this.stack.push(r),this.latest=r,t&&(a=new Ko.Token,(r=new Ko.Blob(null,a)).blobs=t,r.alldecor=this.latest.alldecor.slice(),this.latest.blobs.push(r))}else{var m;t&&((m=new Ko.Blob).blobs=t,m.alldecor=this.latest.alldecor.slice(),this.latest.blobs.push(m))}},this.popStyling=function(){this.stack.pop()}}(t);if(i.strings.length){var o=i.strings[0];r&&(o=" "+o),n.addStyling(o)}for(var l=0,c=i.tags.length;l<c;l++){var h=i.tags[l];o=i.strings[l+1],h.match(u.open)?(a.set(h),n.addStyling(o,a.pair())):(a.pop(),n.popStyling(),n.addStyling(o))}}(r,n,s)}}},Ko.Output.Formatters=function(){var e=new Ko.Doppeler('(?:\u2018|\u2019|\u201c|\u201d| "| \'|"|\'|[-\u2013\u2014/.,;?!:]|\\[|\\]|\\(|\\)|<span style="font-variant: small-caps;">|<span class="no(?:case|decor)">|</span>|</?(?:i|sc|b|sub|sup)>)',(function(e){return e.replace(/(<span)\s+(class=\"no(?:case|decor)\")[^>]*(>)/g,"$1 $2$3").replace(/(<span)\s+(style=\"font-variant:)\s*(small-caps);?(\")[^>]*(>)/g,"$1 $2 $3;$4$5")})),t=new Ko.Doppeler("(?:[ \xa0\u2000-\u200b\u205f\u3000]+)"),i={'<span style="font-variant: small-caps;">':"</span>",'<span class="nocase">':"</span>",'<span class="nodecor">':"</span>","<sc>":"</sc>","<sub>":"</sub>","<sup>":"</sup>"};function r(e){var t=e.match(/(^\s*)((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))(.*)/);return!t||t[2].match(/^[\u0370-\u03FF]$/)&&!t[3]?e:t[1]+Ko.toLocaleUpperCase.call(this,t[2])+t[3]}function s(s,a){if(!a)return"";s.doppel=e.split(a);var n={' "':{opener:" '",closer:'"'}," '":{opener:' "',closer:"'"},"\u2018":{opener:"\u2018",closer:"\u2019"},"\u201c":{opener:"\u201c",closer:"\u201d"}};function o(e,t){var i=e.match(/(^(?:\u2018|\u2019|\u201C|\u201D|\"|\')|(?: \"| \')$)/);if(i)return function(e,t){return["\u201c","\u2018",' "'," '"].indexOf(e)>-1?function(e,t){if(0===s.quoteState.length||e===s.quoteState[s.quoteState.length-1].opener)return s.quoteState.push({opener:n[e].opener,closer:n[e].closer,pos:t}),!1;var i=s.quoteState[s.quoteState.length-1].pos;return s.quoteState.pop(),s.quoteState.push({opener:n[e].opener,closer:n[e].closer,positions:t}),i}(e,t):function(e,t){if(!(s.quoteState.length>0&&e===s.quoteState[s.quoteState.length-1].closer))return t;s.quoteState.pop()}(e,t)}(i[1],t)}s.doppel.strings.length&&s.doppel.strings[0].trim()&&(s.doppel.strings[0]=s.capitaliseWords(s.doppel.strings[0],0,s.doppel.tags[0]));for(var l=0,u=s.doppel.tags.length;l<u;l++){var c=s.doppel.tags[l],p=s.doppel.strings[l+1];if(null!==s.tagState&&(i[c]?s.tagState.push(i[c]):s.tagState.length&&c===s.tagState[s.tagState.length-1]&&s.tagState.pop()),null!==s.afterPunct&&c.match(/[\!\?\:]$/)&&(s.afterPunct=!0),0===s.tagState.length?s.doppel.strings[l+1]=s.capitaliseWords(p,l+1,s.doppel,s.doppel.tags[l+1]):s.doppel.strings[l+1].trim()&&(s.lastWordPos=null),null!==s.quoteState&&((m=o(c,l))||0===m)){var h=s.doppel.origStrings[m+1].slice(0,1);s.doppel.strings[m+1]=h+s.doppel.strings[m+1].slice(1),s.lastWordPos=null}s.isFirst&&p.trim()&&(s.isFirst=!1),s.afterPunct&&p.trim()&&(s.afterPunct=!1)}if(s.quoteState)for(l=0,u=s.quoteState.length;l<u;l++){var m;void 0!==(m=s.quoteState[l].pos)&&(h=s.doppel.origStrings[m+1].slice(0,1),s.doppel.strings[m+1]=h+s.doppel.strings[m+1].slice(1))}if(s.lastWordPos){var f=t.split(s.doppel.strings[s.lastWordPos.strings]),d=f.strings[s.lastWordPos.words];d.length>1&&Ko.toLocaleLowerCase.call(this,d).match(s.skipWordsRex)&&(d=r.call(this,d),f.strings[s.lastWordPos.words]=d),s.doppel.strings[s.lastWordPos.strings]=t.join(f)}return e.join(s.doppel)}return{passthrough:function(e,t){return t},lowercase:function(e,t){var i={quoteState:null,capitaliseWords:function(t){for(var i=t.split(" "),r=0,s=i.length;r<s;r++){var a=i[r];a&&(i[r]=Ko.toLocaleLowerCase.call(e,a))}return i.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null};return s.call(e,i,t)},uppercase:function(e,t){var i={quoteState:null,capitaliseWords:function(t){for(var i=t.split(" "),r=0,s=i.length;r<s;r++){var a=i[r];a&&(i[r]=Ko.toLocaleUpperCase.call(e,a))}return i.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null};return s.call(e,i,t)},sentence:function(e,t){var i={quoteState:[],capitaliseWords:function(t){for(var s=t.split(" "),a=0,n=s.length;a<n;a++){var o=s[a];o&&(i.isFirst?(s[a]=r.call(e,o),i.isFirst=!1):s[a]=Ko.toLocaleLowerCase.call(e,o))}return s.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:!0};return s.call(e,i,t)},title:function(e,i){var a={quoteState:[],capitaliseWords:function(i,s,n){if(i.trim()){for(var o=i.split(/[ \u00A0]+/),l=t.split(i),u=0,c=(o=l.strings).length;u<c;u++){var p=o[u];p&&((p.length>1&&!Ko.toLocaleLowerCase.call(e,p).match(a.skipWordsRex)||u===o.length-1&&"-"===n||a.isFirst||a.afterPunct)&&(o[u]=r.call(e,o[u])),a.afterPunct=!1,a.isFirst=!1,a.lastWordPos={strings:s,words:u})}i=t.join(l)}return i},skipWordsRex:e.locale[e.opt.lang].opts["skip-words-regexp"],tagState:[],afterPunct:!1,isFirst:!0};return s.call(e,a,i)},"capitalize-first":function(e,t){var i={quoteState:[],capitaliseWords:function(t){for(var s=t.split(" "),a=0,n=s.length;a<n;a++){var o=s[a];if(o&&i.isFirst){s[a]=r.call(e,o),i.isFirst=!1;break}}return s.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:!0};return s.call(e,i,t)},"capitalize-all":function(e,t){var i={quoteState:[],capitaliseWords:function(t){for(var i=t.split(" "),s=0,a=i.length;s<a;s++){var n=i[s];n&&(i[s]=r.call(e,n))}return i.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null};return s.call(e,i,t)}}}(),Ko.Output.Formats=function(){},Ko.Output.Formats.prototype.html={text_escape:function(e){return e||(e=""),e.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\s\s/g,"\xa0 ").replace(Ko.SUPERSCRIPTS_REGEXP,(function(e){return"<sup>"+Ko.SUPERSCRIPTS[e]+"</sup>"}))},bibstart:'<div class="csl-bib-body">\n',bibend:"</div>","@font-style/italic":"<i>%%STRING%%</i>","@font-style/oblique":"<em>%%STRING%%</em>","@font-style/normal":'<span style="font-style:normal;">%%STRING%%</span>',"@font-variant/small-caps":'<span style="font-variant:small-caps;">%%STRING%%</span>',"@passthrough/true":Ko.Output.Formatters.passthrough,"@font-variant/normal":'<span style="font-variant:normal;">%%STRING%%</span>',"@font-weight/bold":"<b>%%STRING%%</b>","@font-weight/normal":'<span style="font-weight:normal;">%%STRING%%</span>',"@font-weight/light":!1,"@text-decoration/none":'<span style="text-decoration:none;">%%STRING%%</span>',"@text-decoration/underline":'<span style="text-decoration:underline;">%%STRING%%</span>',"@vertical-align/sup":"<sup>%%STRING%%</sup>","@vertical-align/sub":"<sub>%%STRING%%</sub>","@vertical-align/baseline":'<span style="baseline">%%STRING%%</span>',"@strip-periods/true":Ko.Output.Formatters.passthrough,"@strip-periods/false":Ko.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return void 0===t?"\u2019":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){var i="";return e.sys.embedBibliographyEntry&&(i=e.sys.embedBibliographyEntry(this.item_id)+"\n"),'  <div class="csl-entry">'+t+"</div>\n"+i},"@display/block":function(e,t){return'\n\n    <div class="csl-block">'+t+"</div>\n"},"@display/left-margin":function(e,t){return'\n    <div class="csl-left-margin">'+t+"</div>"},"@display/right-inline":function(e,t){return'<div class="csl-right-inline">'+t+"</div>\n  "},"@display/indent":function(e,t){return'<div class="csl-indent">'+t+"</div>\n  "},"@showid/true":function(e,t,i){if(e.tmp.just_looking||e.tmp.suppress_decorations)return t;if(i)return'<span class="'+e.opt.nodenames[i]+'" cslid="'+i+'">'+t+"</span>";if(this.params&&"string"==typeof t){var r="";if(t){var s=t.match(Ko.VARIABLE_WRAPPER_PREPUNCT_REX);r=s[1],t=s[2]}var a="";return t&&Ko.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))>-1&&(a=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,r,t,a)}return t},"@URL/true":function(e,t){return'<a href="'+t+'">'+t+"</a>"},"@DOI/true":function(e,t){var i=t;return t.match(/^https?:\/\//)||(i="https://doi.org/"+t),'<a href="'+i+'">'+t+"</a>"}},Ko.Output.Formats.prototype.text={text_escape:function(e){return e||(e=""),e},bibstart:"",bibend:"","@font-style/italic":!1,"@font-style/oblique":!1,"@font-style/normal":!1,"@font-variant/small-caps":!1,"@passthrough/true":Ko.Output.Formatters.passthrough,"@font-variant/normal":!1,"@font-weight/bold":!1,"@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":!1,"@vertical-align/baseline":!1,"@vertical-align/sup":!1,"@vertical-align/sub":!1,"@strip-periods/true":Ko.Output.Formatters.passthrough,"@strip-periods/false":Ko.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return void 0===t?"\u2019":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return t+"\n"},"@display/block":function(e,t){return"\n"+t},"@display/left-margin":function(e,t){return t},"@display/right-inline":function(e,t){return t},"@display/indent":function(e,t){return"\n    "+t},"@showid/true":function(e,t){return t},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){return t}},Ko.Output.Formats.prototype.rtf={text_escape:function(e){return e||(e=""),e.replace(/([\\{}])/g,"\\$1").replace(Ko.SUPERSCRIPTS_REGEXP,(function(e){return"\\super "+Ko.SUPERSCRIPTS[e]+"\\nosupersub{}"})).replace(/[\u007F-\uFFFF]/g,(function(e){return"\\uc0\\u"+e.charCodeAt(0).toString()+"{}"})).split("\t").join("\\tab{}")},"@passthrough/true":Ko.Output.Formatters.passthrough,"@font-style/italic":"{\\i{}%%STRING%%}","@font-style/normal":"{\\i0{}%%STRING%%}","@font-style/oblique":"{\\i{}%%STRING%%}","@font-variant/small-caps":"{\\scaps %%STRING%%}","@font-variant/normal":"{\\scaps0{}%%STRING%%}","@font-weight/bold":"{\\b{}%%STRING%%}","@font-weight/normal":"{\\b0{}%%STRING%%}","@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":"{\\ul{}%%STRING%%}","@vertical-align/baseline":!1,"@vertical-align/sup":"\\super %%STRING%%\\nosupersub{}","@vertical-align/sub":"\\sub %%STRING%%\\nosupersub{}","@strip-periods/true":Ko.Output.Formatters.passthrough,"@strip-periods/false":Ko.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?Ko.Output.Formats.rtf.text_escape(e.getTerm("open-quote")):Ko.Output.Formats.rtf.text_escape(e.getTerm("open-quote"))+t+Ko.Output.Formats.rtf.text_escape(e.getTerm("close-quote"))},"@quotes/inner":function(e,t){return void 0===t?Ko.Output.Formats.rtf.text_escape("\u2019"):Ko.Output.Formats.rtf.text_escape(e.getTerm("open-inner-quote"))+t+Ko.Output.Formats.rtf.text_escape(e.getTerm("close-inner-quote"))},"@quotes/false":!1,bibstart:"{\\rtf ",bibend:"}","@display/block":"\\line{}%%STRING%%\\line\r\n","@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return t},"@display/left-margin":function(e,t){return t+"\\tab "},"@display/right-inline":function(e,t){return t+"\r\n"},"@display/indent":function(e,t){return"\n\\tab "+t+"\\line\r\n"},"@showid/true":function(e,t){if(e.tmp.just_looking||e.tmp.suppress_decorations)return t;var i="";if(t){var r=t.match(Ko.VARIABLE_WRAPPER_PREPUNCT_REX);i=r[1],t=r[2]}var s="";return t&&Ko.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))>-1&&(s=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,i,t,s)},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){return t}},Ko.Output.Formats.prototype.asciidoc={text_escape:function(e){return e||(e=""),e.replace("*","pass:[*]","g").replace("_","pass:[_]","g").replace("#","pass:[#]","g").replace("^","pass:[^]","g").replace("~","pass:[~]","g").replace("[[","pass:[[[]","g").replace("  ","&#160; ","g").replace(Ko.SUPERSCRIPTS_REGEXP,(function(e){return"^"+Ko.SUPERSCRIPTS[e]+"^"}))},bibstart:"",bibend:"","@passthrough/true":Ko.Output.Formatters.passthrough,"@font-style/italic":"__%%STRING%%__","@font-style/oblique":"__%%STRING%%__","@font-style/normal":!1,"@font-variant/small-caps":"[small-caps]#%%STRING%%#","@font-variant/normal":!1,"@font-weight/bold":"**%%STRING%%**","@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":"[underline]##%%STRING%%##","@vertical-align/sup":"^^%%STRING%%^^","@vertical-align/sub":"~~%%STRING%%~~","@vertical-align/baseline":!1,"@strip-periods/true":Ko.Output.Formatters.passthrough,"@strip-periods/false":Ko.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?"``":"``"+t+"''"},"@quotes/inner":function(e,t){return void 0===t?"`":"`"+t+"'"},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return t+"\n"},"@display/block":function(e,t){return t},"@display/left-margin":function(e,t){return t},"@display/right-inline":function(e,t){return" "+t},"@display/indent":function(e,t){return" "+t},"@showid/true":function(e,t){if(e.tmp.just_looking||e.tmp.suppress_decorations||!this.params||"string"!=typeof t)return t;var i="";if(t){var r=t.match(Ko.VARIABLE_WRAPPER_PREPUNCT_REX);i=r[1],t=r[2]}var s="";return t&&Ko.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))>-1&&(s=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,i,t,s)},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){var i=t;return t.match(/^https?:\/\//)||(i="https://doi.org/"+t),i+"["+t+"]"}},Ko.Output.Formats.prototype.fo={text_escape:function(e){return e||(e=""),e.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace("  ","&#160; ","g").replace(Ko.SUPERSCRIPTS_REGEXP,(function(e){return'<fo:inline vertical-align="super">'+Ko.SUPERSCRIPTS[e]+"</fo:inline>"}))},bibstart:"",bibend:"","@passthrough/true":Ko.Output.Formatters.passthrough,"@font-style/italic":'<fo:inline font-style="italic">%%STRING%%</fo:inline>',"@font-style/oblique":'<fo:inline font-style="oblique">%%STRING%%</fo:inline>',"@font-style/normal":'<fo:inline font-style="normal">%%STRING%%</fo:inline>',"@font-variant/small-caps":'<fo:inline font-variant="small-caps">%%STRING%%</fo:inline>',"@font-variant/normal":'<fo:inline font-variant="normal">%%STRING%%</fo:inline>',"@font-weight/bold":'<fo:inline font-weight="bold">%%STRING%%</fo:inline>',"@font-weight/normal":'<fo:inline font-weight="normal">%%STRING%%</fo:inline>',"@font-weight/light":'<fo:inline font-weight="lighter">%%STRING%%</fo:inline>',"@text-decoration/none":'<fo:inline text-decoration="none">%%STRING%%</fo:inline>',"@text-decoration/underline":'<fo:inline text-decoration="underline">%%STRING%%</fo:inline>',"@vertical-align/sup":'<fo:inline vertical-align="super">%%STRING%%</fo:inline>',"@vertical-align/sub":'<fo:inline vertical-align="sub">%%STRING%%</fo:inline>',"@vertical-align/baseline":'<fo:inline vertical-align="baseline">%%STRING%%</fo:inline>',"@strip-periods/true":Ko.Output.Formatters.passthrough,"@strip-periods/false":Ko.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return void 0===t?"\u2019":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){var i="";if(e.bibliography&&e.bibliography.opt&&e.bibliography.opt.hangingindent){var r=e.bibliography.opt.hangingindent;i=' start-indent="'+r+'em" text-indent="-'+r+'em"'}var s="";return e.sys.embedBibliographyEntry&&(s=e.sys.embedBibliographyEntry(this.item_id)+"\n"),'<fo:block id="'+this.system_id+'"'+i+">"+t+"</fo:block>\n"+s},"@display/block":function(e,t){return"\n  <fo:block>"+t+"</fo:block>\n"},"@display/left-margin":function(e,t){return'\n  <fo:table table-layout="fixed" width="100%">\n    <fo:table-column column-number="1" column-width="$$$__COLUMN_WIDTH_1__$$$"/>\n    <fo:table-column column-number="2" column-width="proportional-column-width(1)"/>\n    <fo:table-body>\n      <fo:table-row>\n        <fo:table-cell>\n          <fo:block>'+t+"</fo:block>\n        </fo:table-cell>\n        "},"@display/right-inline":function(e,t){return"<fo:table-cell>\n          <fo:block>"+t+"</fo:block>\n        </fo:table-cell>\n      </fo:table-row>\n    </fo:table-body>\n  </fo:table>\n"},"@display/indent":function(e,t){return'<fo:block margin-left="2em">'+t+"</fo:block>\n"},"@showid/true":function(e,t){if(e.tmp.just_looking||e.tmp.suppress_decorations||!this.params||"string"!=typeof t)return t;var i="";if(t){var r=t.match(Ko.VARIABLE_WRAPPER_PREPUNCT_REX);i=r[1],t=r[2]}var s="";return t&&Ko.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))>-1&&(s=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,i,t,s)},"@URL/true":function(e,t){return"<fo:basic-link external-destination=\"url('"+t+"')\">"+t+"</fo:basic-link>"},"@DOI/true":function(e,t){var i=t;return t.match(/^https?:\/\//)||(i="https://doi.org/"+t),"<fo:basic-link external-destination=\"url('"+i+"')\">"+t+"</fo:basic-link>"}},Ko.Output.Formats.prototype.latex={text_escape:function(e){return e||(e=""),e},bibstart:"\\begin{thebibliography}{4}",bibend:"end{thebibliography}","@font-style/italic":"{\\em %%STRING%%}","@font-style/oblique":!1,"@font-style/normal":!1,"@font-variant/small-caps":!1,"@passthrough/true":Ko.Output.Formatters.passthrough,"@font-variant/normal":!1,"@font-weight/bold":"{\\bf %%STRING%%}","@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":!1,"@vertical-align/baseline":!1,"@vertical-align/sup":!1,"@vertical-align/sub":!1,"@strip-periods/true":Ko.Output.Formatters.passthrough,"@strip-periods/false":Ko.Output.Formatters.passthrough,"@quotes/true":function(e,t){return void 0===t?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return void 0===t?"\u2019":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return"\\bibitem{"+e.sys.embedBibliographyEntry(this.item_id)+"}\n"},"@display/block":function(e,t){return"\n"+t},"@display/left-margin":function(e,t){return t},"@display/right-inline":function(e,t){return t},"@display/indent":function(e,t){return"\n    "+t},"@showid/true":function(e,t,i){return t},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){return t}},Ko.Output.Formats=new Ko.Output.Formats,Ko.Registry=function(e){this.debug=!1,this.state=e,this.registry={},this.reflist=[],this.refhash={},this.namereg=new Ko.Registry.NameReg(e),this.citationreg=new Ko.Registry.CitationReg(e),this.authorstrings={},this.masterMap={},this.mylist=[],this.myhash={},this.deletes=[],this.inserts=[],this.uncited={},this.refreshes={},this.akeys={},this.oldseq={},this.return_data={},this.ambigcites={},this.ambigresets={},this.sorter=new Ko.Registry.Comparifier(e,"bibliography_sort"),this.getSortedIds=function(){for(var e=[],t=0,i=this.reflist.length;t<i;t+=1)e.push(""+this.reflist[t].id);return e},this.getSortedRegistryItems=function(){for(var e=[],t=0,i=this.reflist.length;t<i;t+=1)e.push(this.reflist[t]);return e}},Ko.Registry.prototype.init=function(e,t){if(this.oldseq={},t){this.uncited={};for(var i=0,r=e.length;i<r;i+=1)this.myhash[e[i]]||this.mylist.push(""+e[i]),this.uncited[e[i]]=!0,this.myhash[e[i]]=!0}else{for(var s in this.uncited)e.push(s);var a={};for(i=e.length-1;i>-1;i+=-1)a[e[i]]?e=e.slice(0,i).concat(e.slice(i+1)):a[e[i]]=!0;this.mylist=e,this.myhash=a}this.refreshes={},this.touched={},this.ambigsTouched={},this.ambigresets={}},Ko.Registry.prototype.dopurge=function(e){for(var t=this.mylist.length-1;t>-1;t+=-1)this.citationreg.citationsByItemId&&(this.citationreg.citationsByItemId[this.mylist[t]]||e[this.mylist[t]]||(delete this.myhash[this.mylist[t]],this.mylist=this.mylist.slice(0,t).concat(this.mylist.slice(t+1))));this.dodeletes(this.myhash)},Ko.Registry.prototype.dodeletes=function(e){var t,i,r,s,a,n,o;if("string"==typeof e){var l=e;(e={})[l]=!0}for(var l in this.registry)if(!e[l]){if(this.uncited[l])continue;for(a in this.namereg.delitems(l))this.refreshes[a]=!0;for(t=this.registry[l].ambig,(n=this.ambigcites[t].indexOf(l))>-1&&(s=this.ambigcites[t].slice(),this.ambigcites[t]=s.slice(0,n).concat(s.slice(n+1,s.length)),this.ambigresets[t]=this.ambigcites[t].length),r=this.ambigcites[t].length,i=0;i<r;i+=1)o=""+this.ambigcites[t][i],this.refreshes[o]=!0;if(this.registry[l].siblings)if(1==this.registry[l].siblings.length){var u=this.registry[l].siblings[0];this.registry[u].siblings&&(this.registry[u].siblings.pop(),this.registry[u].master=!0)}else if(this.registry[l].siblings.length>1){var c=[l];if(this.registry[l].master){var p=this.registry[l].siblings[0];this.registry[p].master=!0,c.push(p)}for(var h=[],m=this.registry[l].siblings.length-1;m>-1;m+=-1){var f=this.registry[l].siblings.pop();-1===c.indexOf(f)&&h.push(f)}for(m=h.length-1;m>-1;m+=-1)this.registry[l].siblings.push(h[m])}for(var d=this.reflist.length-1;d>-1;d--)this.reflist[d].id===l&&(this.reflist=this.reflist.slice(0,d).concat(this.reflist.slice(d+1)));delete this.registry[l],delete this.refhash[l],this.return_data.bibchange=!0}},Ko.Registry.prototype.doinserts=function(e){var t,i,r,s,a;"string"==typeof e&&(e=[e]);for(var n=0,o=e.length;n<o;n+=1)t=e[n],this.registry[t]||(i=this.state.retrieveItem(t),r=Ko.getAmbiguousCite.call(this.state,i),this.ambigsTouched[r]=!0,i.legislation_id||(this.akeys[r]=!0),s={id:""+t,seq:0,offset:0,sortkeys:!1,ambig:!1,rendered:!1,disambig:!1,ref:i,newItem:!0},this.registry[t]=s,this.citationreg.citationsByItemId&&this.citationreg.citationsByItemId[t]&&(this.registry[t]["first-reference-note-number"]=this.citationreg.citationsByItemId[t][0].properties.noteIndex),a=Ko.getAmbigConfig.call(this.state),this.registerAmbigToken(r,t,a),this.touched[t]=!0,this.return_data.bibchange=!0)},Ko.Registry.prototype.rebuildlist=function(e){var t,i,r,s;if(e)for(this.reflist=[],t=this.mylist.length,i=0;i<t;i+=1)r=this.mylist[i],s=this.registry[r],this.reflist.push(s),this.oldseq[r]=this.registry[r].seq,this.registry[r].seq=i+1;else for(this.reflist_inserts=[],t=this.mylist.length,i=0;i<t;i+=1)r=this.mylist[i],(s=this.registry[r]).newItem&&this.reflist_inserts.push(s),this.oldseq[r]=this.registry[r].seq,this.registry[r].seq=i+1},Ko.Registry.prototype.dorefreshes=function(){var e;for(var t in this.refreshes)if(e=this.registry[t]){e.sortkeys=void 0,a=this.state.refetchItem(t);var i=e.ambig;for(var r in void 0===i&&(this.state.tmp.disambig_settings=!1,i=Ko.getAmbiguousCite.call(this.state,a),n=Ko.getAmbigConfig.call(this.state),this.registerAmbigToken(i,t,n)),this.ambigresets)if(1===this.ambigresets[r]){var s=this.ambigcites[i][0],a=this.state.refetchItem(s);this.registry[s].disambig=new Ko.AmbigConfig,this.state.tmp.disambig_settings=!1,i=Ko.getAmbiguousCite.call(this.state,a);var n=Ko.getAmbigConfig.call(this.state);this.registerAmbigToken(i,s,n)}this.state.tmp.taintedItemIDs[t]=!0,this.ambigsTouched[i]=!0,a.legislation_id||(this.akeys[i]=!0),this.touched[t]=!0}},Ko.Registry.prototype.setdisambigs=function(){for(var e in this.ambigsTouched)this.state.disambiguate.run(e);this.ambigsTouched={},this.akeys={}},Ko.Registry.prototype.renumber=function(){var e,t,i;for(this.state.bibliography_sort.opt.citation_number_sort_direction===Ko.DESCENDING&&(this.state.bibliography_sort.tmp.citation_number_map={}),e=this.reflist.length,t=0;t<e;t+=1)(i=this.reflist[t]).seq=t+1,this.state.bibliography_sort.opt.citation_number_sort_direction===Ko.DESCENDING&&(this.state.bibliography_sort.tmp.citation_number_map[i.seq]=this.reflist.length-i.seq+1),this.state.opt.update_mode===Ko.NUMERIC&&i.seq!=this.oldseq[i.id]&&(this.state.tmp.taintedItemIDs[i.id]=!0),i.seq!=this.oldseq[i.id]&&(this.return_data.bibchange=!0)},Ko.Registry.prototype.setsortkeys=function(){for(var e=0,t=this.mylist.length;e<t;e+=1){var i=this.mylist[e];(this.touched[i]||this.state.tmp.taintedItemIDs[i]||!this.registry[i].sortkeys)&&(this.registry[i].sortkeys=Ko.getSortKeys.call(this.state,this.state.retrieveItem(i),"bibliography_sort"))}},Ko.Registry.prototype._insertItem=function(e,t){return t.splice(this._locationOf(e,t)+1,0,e),t},Ko.Registry.prototype._locationOf=function(e,t,i,r){if(0===t.length)return-1;var s=(i=i||0)+(r=r||t.length)>>1,a=this.sorter.compareKeys(e,t[s]);if(r-i<=1)return-1==a?s-1:s;switch(a){case-1:return this._locationOf(e,t,i,s);case 0:return s;case 1:return this._locationOf(e,t,s,r)}},Ko.Registry.prototype.sorttokens=function(e){var t,i,r;if(!e){for(this.reflist_inserts=[],t=this.mylist.length,r=0;r<t;r+=1)i=this.mylist[r],(o=this.registry[i]).newItem&&this.reflist_inserts.push(o);for(var s in this.state.tmp.taintedItemIDs)if(this.registry[s]&&!this.registry[s].newItem)for(var a=this.reflist.length-1;a>-1;a--)this.reflist[a].id===s&&(this.reflist_inserts.push(this.reflist[a]),this.reflist=this.reflist.slice(0,a).concat(this.reflist.slice(a+1)));a=0;for(var n=this.reflist_inserts.length;a<n;a++){var o;delete(o=this.reflist_inserts[a]).newItem,this.reflist=this._insertItem(o,this.reflist)}for(r=0;r<t;r+=1)i=this.mylist[r],o=this.registry[i],this.registry[i].seq=r+1}},Ko.Registry.Comparifier=function(e,t){var i,r,s,a,n=Ko.getSortCompare.call(e,e.opt["default-locale-sort"]);i=e[t].opt.sort_directions,this.compareKeys=function(e,t){for(r=e.sortkeys?e.sortkeys.length:0,s=0;s<r;s+=1){var a;if(0<(a=e.sortkeys[s]===t.sortkeys[s]?0:void 0===e.sortkeys[s]?i[s][1]:void 0===t.sortkeys[s]?i[s][0]:n(e.sortkeys[s],t.sortkeys[s])))return i[s][1];if(0>a)return i[s][0]}return e.seq>t.seq?1:e.seq<t.seq?-1:0},a=this.compareKeys,this.compareCompositeKeys=function(e,t){return a(e[1],t[1])}},Ko.Registry.prototype.compareRegistryTokens=function(e,t){return e.seq>t.seq?1:e.seq<t.seq?-1:0},Ko.Registry.prototype.registerAmbigToken=function(e,t,i){if(this.registry[t]||Ko.debug("Warning: unregistered item: itemID=("+t+"), akey=("+e+")"),this.registry[t]&&this.registry[t].disambig&&this.registry[t].disambig.names)for(var r=0,s=i.names.length;r<s;r+=1)if(i.names[r]!==this.registry[t].disambig.names[r])this.state.tmp.taintedItemIDs[t]=!0;else if(i.givens[r])for(var a=0,n=i.givens[r].length;a<n;a+=1)i.givens[r][a]!==this.registry[t].disambig.givens[r][a]&&(this.state.tmp.taintedItemIDs[t]=!0);this.ambigcites[e]||(this.ambigcites[e]=[]),-1===this.ambigcites[e].indexOf(""+t)&&this.ambigcites[e].push(""+t),this.registry[t].ambig=e,this.registry[t].disambig=Ko.cloneAmbigConfig(i)},Ko.getSortKeys=function(e,t){var i,r,s,a,n,o;for(i=this.tmp.area,r=this.tmp.root,s=this.tmp.extension,a=Ko.Util.Sort.strip_prepositions,this.tmp.area=t,this.tmp.root=t.indexOf("_")>-1?t.slice(0,-5):t,this.tmp.extension="_sort",this.tmp.disambig_override=!0,this.tmp.disambig_request=!1,this.tmp.suppress_decorations=!0,Ko.getCite.call(this,e),this.tmp.suppress_decorations=!1,this.tmp.disambig_override=!1,n=this[t].keys.length,o=0;o<n;o+=1)this[t].keys[o]=a(this[t].keys[o]);return this.tmp.area=i,this.tmp.root=r,this.tmp.extension=s,this[t].keys},Ko.Registry.NameReg=function(e){var t,i,r,s,a,n,o,l,u,c,p,h;this.state=e,this.namereg={},this.nameind={},this.nameindpkeys={},this.itemkeyreg={},o=function(e){return e||(e=""),e.replace(/\./g," ").replace(/\s+/g," ").replace(/\s+$/,"")},l=function(e,s,a){t=o(a.family);var n=(r=o(a.given)).match(/[,\!]* ([^,]+)$/);n&&n[1]===n[1].toLowerCase()&&(r=r.replace(/[,\!]* [^,]+$/,"")),i=Ko.Util.Names.initializeWith(e,r,"%s"),"by-cite"===e.citation.opt["givenname-disambiguation-rule"]&&(t=""+s+t)},u=function(r,n,o,u,c,p){var h;if("bibliography"===e.tmp.area.slice(0,12)&&!c)return"string"==typeof p?1:2;n=e.nameOutput.getName(n,"locale-translit",!0).name,l(this.state,""+r,n),h=2,s=e.opt["disambiguate-add-givenname"];var m=a=e.citation.opt["givenname-disambiguation-rule"];return"by-cite"===a&&(a="all-names"),"short"===c?h=0:"string"==typeof p&&(h=1),void 0===this.namereg[t]||void 0===this.namereg[t].ikey[i]?h:"by-cite"===m&&h<=u?u:s?"string"==typeof a&&"primary-name"===a.slice(0,12)&&o>0?h:(a&&"all-names"!==a&&"primary-name"!==a?"all-names-with-initials"!==a&&"primary-name-with-initials"!==a||(h=this.namereg[t].count>1?1:0):(this.namereg[t].count>1&&(h=1),(this.namereg[t].ikey&&this.namereg[t].ikey[i].count>1||this.namereg[t].count>1&&"string"!=typeof p)&&(h=2)),e.registry.registry[r]?h:"short"==c?0:"string"==typeof p?1:void 0):h},c=function(s){var a,o,l,u,c;for("string"!=typeof s&&"number"!=typeof s||(s=[""+s]),o=s.length,a=0;a<o;a+=1)if(u=""+s[a],this.nameind[u]){for(c in this.nameind[u])if(this.nameind[u].hasOwnProperty(c)){var p=c.split("::");if(t=p[0],i=p[1],r=p[2],void 0===this.namereg[t])continue;if(n=this.namereg[t].items,r&&this.namereg[t].ikey[i]&&this.namereg[t].ikey[i].skey[r]&&((l=(h=this.namereg[t].ikey[i].skey[r].items).indexOf(""+u))>-1&&(this.namereg[t].ikey[i].skey[r].items=h.slice(0,l).concat(h.slice([l+1]))),0===this.namereg[t].ikey[i].skey[r].items.length&&(delete this.namereg[t].ikey[i].skey[r],this.namereg[t].ikey[i].count+=-1,this.namereg[t].ikey[i].count<2)))for(var m=0,f=this.namereg[t].ikey[i].items.length;m<f;m+=1)e.tmp.taintedItemIDs[this.namereg[t].ikey[i].items[m]]=!0;if(i&&this.namereg[t].ikey[i]&&((l=this.namereg[t].ikey[i].items.indexOf(""+u))>-1&&(n=this.namereg[t].ikey[i].items.slice(),this.namereg[t].ikey[i].items=n.slice(0,l).concat(n.slice([l+1]))),0===this.namereg[t].ikey[i].items.length&&(delete this.namereg[t].ikey[i],this.namereg[t].count+=-1,this.namereg[t].count<2)))for(m=0,f=this.namereg[t].items.length;m<f;m+=1)e.tmp.taintedItemIDs[this.namereg[t].items[m]]=!0;t&&((l=this.namereg[t].items.indexOf(""+u))>-1&&(n=this.namereg[t].items.slice(),this.namereg[t].items=n.slice(0,l).concat(n.slice([l+1],n.length))),this.namereg[t].items.length<2&&delete this.namereg[t]),delete this.nameind[u][c]}delete this.nameind[u],delete this.nameindpkeys[u]}return{}},p=function(s,a,n){if(a=e.nameOutput.getName(a,"locale-translit",!0).name,!e.citation.opt["givenname-disambiguation-rule"]||"primary-"!==e.citation.opt["givenname-disambiguation-rule"].slice(0,8)||0===n){if("never"===e.opt["demote-non-dropping-particle"]&&a["non-dropping-particle"]&&a.family&&(a.family=a["non-dropping-particle"]+" "+a.family),l(this.state,""+s,a),t&&(void 0===this.namereg[t]?(this.namereg[t]={},this.namereg[t].count=0,this.namereg[t].ikey={},this.namereg[t].items=[s]):-1===this.namereg[t].items.indexOf(s)&&this.namereg[t].items.push(s)),t&&i)if(void 0===this.namereg[t].ikey[i]){if(this.namereg[t].ikey[i]={},this.namereg[t].ikey[i].count=0,this.namereg[t].ikey[i].skey={},this.namereg[t].ikey[i].items=[s],this.namereg[t].count+=1,2===this.namereg[t].count)for(var o=0,u=this.namereg[t].items.length;o<u;o+=1)e.tmp.taintedItemIDs[this.namereg[t].items[o]]=!0}else-1===this.namereg[t].ikey[i].items.indexOf(s)&&this.namereg[t].ikey[i].items.push(s);if(t&&i&&r)if(void 0===this.namereg[t].ikey[i].skey[r]){if(this.namereg[t].ikey[i].skey[r]={},this.namereg[t].ikey[i].skey[r].items=[s],this.namereg[t].ikey[i].count+=1,2===this.namereg[t].ikey[i].count)for(o=0,u=this.namereg[t].ikey[i].items.length;o<u;o+=1)e.tmp.taintedItemIDs[this.namereg[t].ikey[i].items[o]]=!0}else-1===this.namereg[t].ikey[i].skey[r].items.indexOf(s)&&this.namereg[t].ikey[i].skey[r].items.push(s);void 0===this.nameind[s]&&(this.nameind[s]={},this.nameindpkeys[s]={}),t&&(this.nameind[s][t+"::"+i+"::"+r]=!0,this.nameindpkeys[s][t]=this.namereg[t])}},this.addname=p,this.delitems=c,this.evalname=u},Ko.Registry.CitationReg=function(){this.citationById={},this.citationByIndex=[]},Ko.Disambiguation=function(e){this.state=e,this.sys=this.state.sys,this.registry=e.registry.registry,this.ambigcites=e.registry.ambigcites,this.configModes(),this.debug=!1},Ko.Disambiguation.prototype.run=function(e){this.modes.length&&(this.debug&&print("[A] === RUN ==="),this.akey=e,this.initVars(e)&&this.runDisambig())},Ko.Disambiguation.prototype.runDisambig=function(){var e;for(this.debug&&print("[C] === runDisambig() ==="),this.initGivens=!0;this.lists.length;){for(this.gnameset=0,this.gname=0,this.clashes=[1,0];this.lists[0][1].length;)this.listpos=0,this.base||(this.base=this.lists[0][0]),e=this.incrementDisambig(),this.scanItems(this.lists[0]),this.evalScan(e);this.lists=this.lists.slice(1)}},Ko.Disambiguation.prototype.scanItems=function(e){var t;this.debug&&print("[2] === scanItems() ==="),this.Item=e[1][0],this.ItemCite=Ko.getAmbiguousCite.call(this.state,this.Item,this.base,!0),this.scanlist=e[1],this.partners=[],this.partners.push(this.Item),this.nonpartners=[];for(var i=0,r=1,s=e[1].length;r<s;r+=1){t=e[1][r];var a=Ko.getAmbiguousCite.call(this.state,t,this.base,!0);this.debug&&r>1&&print("  -----------"),this.ItemCite===a?(this.debug&&(print("  [CLASH]--\x3e "+this.Item.id+": "+this.ItemCite),print("             "+t.id+": "+a)),i+=1,this.partners.push(t)):(this.debug&&(print("  [clear]--\x3e "+this.Item.id+": "+this.ItemCite),print("             "+t.id+": "+a)),this.nonpartners.push(t))}this.clashes[0]=this.clashes[1],this.clashes[1]=i},Ko.Disambiguation.prototype.evalScan=function(e){this[this.modes[this.modeindex]](e),e&&(this.modeindex<this.modes.length-1?this.modeindex+=1:this.lists[this.listpos+1]=[this.base,[]])},Ko.Disambiguation.prototype.disNames=function(e){if(this.debug&&print("[3] == disNames() =="),0===this.clashes[1]&&1===this.nonpartners.length)this.captureStepToBase(),this.debug&&(print("  ** RESOLUTION [a]: lone partner, one nonpartner"),print("  registering "+this.partners[0].id+" and "+this.nonpartners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.nonpartners[0].id,this.betterbase),this.state.registry.registerAmbigToken(this.akey,""+this.partners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,[]];else if(0===this.clashes[1])this.captureStepToBase(),this.debug&&(print("  ** RESOLUTION [b]: lone partner, unknown number of remaining nonpartners"),print("  registering "+this.partners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.partners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,this.nonpartners],this.nonpartners.length&&(this.initGivens=!0);else if(1===this.nonpartners.length)this.captureStepToBase(),this.debug&&(print("  ** RESOLUTION [c]: lone nonpartner, unknown number of partners remaining"),print("  registering "+this.nonpartners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.nonpartners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,this.partners];else if(this.clashes[1]<this.clashes[0])this.captureStepToBase(),this.debug&&print("  ** RESOLUTION [d]: better result, but no entries safe to register"),this.lists[this.listpos]=[this.betterbase,this.partners],this.lists.push([this.betterbase,this.nonpartners]);else if(this.debug&&print("  ** RESOLUTION [e]: no improvement, and clashes remain"),e&&(this.lists[this.listpos]=[this.betterbase,this.nonpartners],this.lists.push([this.betterbase,this.partners]),this.modeindex===this.modes.length-1)){this.debug&&print("     (registering clashing entries because we've run out of options)");for(var t=0,i=this.partners.length;t<i;t+=1)this.state.registry.registerAmbigToken(this.akey,""+this.partners[t].id,this.betterbase);this.lists[this.listpos]=[this.betterbase,[]]}},Ko.Disambiguation.prototype.disExtraText=function(){this.debug&&print("[3] === disExtraText ==");var e=!1;if(0===this.clashes[1]&&this.nonpartners.length<2&&(e=!0),e||this.base.disambiguate&&this.state.tmp.disambiguate_count===this.state.tmp.disambiguate_maxMax){if(e||this.state.tmp.disambiguate_count===this.state.tmp.disambiguate_maxMax)if(e||this.modeindex===this.modes.length-1){var t=this.lists[this.listpos][0];for(i=0,r=this.lists[this.listpos][1].length;i<r;i+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][i].id]=!0,this.state.registry.registerAmbigToken(this.akey,""+this.lists[this.listpos][1][i].id,t);this.lists[this.listpos]=[this.betterbase,[]]}else for(this.modeindex=this.modes.length-1,(t=this.lists[this.listpos][0]).disambiguate=!0,i=0,r=this.lists[this.listpos][1].length;i<r;i+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][i].id]=!0,this.state.registry.registerAmbigToken(this.akey,""+this.lists[this.listpos][1][i].id,t)}else if(this.modeindex=0,this.base.disambiguate=this.state.tmp.disambiguate_count,this.betterbase.disambiguate=this.state.tmp.disambiguate_count,this.base.disambiguate)this.disNames();else{this.initGivens=!0,this.base.disambiguate=1;for(var i=0,r=this.lists[this.listpos][1].length;i<r;i+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][i].id]=!0}},Ko.Disambiguation.prototype.disYears=function(){var e;this.debug&&print("[3] === disYears =="),e=[];var t=this.lists[this.listpos][0];if(this.clashes[1])for(var i=0,r=this.state.registry.mylist.length;i<r;i+=1)for(var s=this.state.registry.mylist[i],a=0,n=this.lists[this.listpos][1].length;a<n;a+=1){var o;if((o=this.lists[this.listpos][1][a]).id==s){e.push(this.registry[o.id]);break}}e.sort(this.state.registry.sorter.compareKeys);for(var l=0,u=e.length;l<u;l+=1){t.year_suffix=""+l;var c=this.state.registry.registry[e[l].id].disambig;this.state.registry.registerAmbigToken(this.akey,""+e[l].id,t),Ko.ambigConfigDiff(c,t)&&(this.state.tmp.taintedItemIDs[e[l].id]=!0)}this.lists[this.listpos]=[this.betterbase,[]]},Ko.Disambiguation.prototype.incrementDisambig=function(){if(this.debug&&print("\n[1] === incrementDisambig() ==="),this.initGivens)return this.initGivens=!1,!1;var e=!1,t=!0;if("disNames"===this.modes[this.modeindex]){t=!1,"number"!=typeof this.givensMax&&(t=!0);var i=!1;"number"!=typeof this.namesMax&&(i=!0),"number"==typeof this.givensMax&&(this.base.givens.length&&this.base.givens[this.gnameset][this.gname]<this.givensMax?this.base.givens[this.gnameset][this.gname]+=1:t=!0),"number"==typeof this.namesMax&&t&&(this.state.opt["disambiguate-add-names"]?(i=!1,this.gname<this.namesMax?(this.base.names[this.gnameset]+=1,this.gname+=1):i=!0):i=!0),"number"==typeof this.namesetsMax&&i&&this.gnameset<this.namesetsMax&&(this.gnameset+=1,this.base.names[this.gnameset]=1,this.gname=0),this.debug&&(print("    ------------------"),print("    incremented values"),print("    ------------------"),print("    | gnameset: "+this.gnameset),print("    | gname: "+this.gname),print("    | names value: "+this.base.names[this.gnameset]),this.base.givens.length?print("    | givens value: "+this.base.givens[this.gnameset][this.gname]):print("    | givens value: nil"),print("    | namesetsMax: "+this.namesetsMax),print("    | namesMax: "+this.namesMax),print("    | givensMax: "+this.givensMax)),"number"==typeof this.namesetsMax&&-1!==this.namesetsMax&&this.gnameset!==this.namesetsMax||this.state.opt["disambiguate-add-names"]&&"number"==typeof this.namesMax&&this.gname!==this.namesMax||"number"==typeof this.givensMax&&void 0!==this.base.givens[this.gnameset]&&void 0!==this.base.givens[this.gnameset][this.gname]&&this.base.givens[this.gnameset][this.gname]!==this.givensMax||(e=!0,this.debug&&print("    MAXED"))}else"disExtraText"===this.modes[this.modeindex]&&(this.base.disambiguate+=1,this.betterbase.disambiguate+=1);return e},Ko.Disambiguation.prototype.initVars=function(e){var t,i,r;if(this.debug&&print("[B] === initVars() ==="),this.lists=[],this.base=!1,this.betterbase=!1,this.akey=e,this.maxNamesByItemId={},i=[],!(t=this.ambigcites[e])||!t.length)return!1;var s=this.state.refetchItem(""+t[0]);if(this.getCiteData(s),this.base=Ko.getAmbigConfig.call(this.state),t&&t.length>1){i.push([this.maxNamesByItemId[s.id],s]);for(var a=1,n=t.length;a<n;a+=1)s=this.state.refetchItem(""+t[a]),this.getCiteData(s,this.base),i.push([this.maxNamesByItemId[s.id],s]);i.sort((function(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:e[1].id>t[1].id?1:e[1].id<t[1].id?-1:0})),r=[];for(a=0,n=i.length;a<n;a+=1)r.push(i[a][1]);this.lists.push([this.base,r]),this.Item=this.lists[0][1][0]}else this.Item=this.state.refetchItem(""+t[0]);return this.modeindex=0,this.state.citation.opt["disambiguate-add-names"],this.namesMax=this.maxNamesByItemId[this.Item.id][0],this.padBase(this.base),this.padBase(this.betterbase),this.base.year_suffix=!1,this.base.disambiguate=!1,this.betterbase.year_suffix=!1,this.betterbase.disambiguate=!1,"by-cite"===this.state.citation.opt["givenname-disambiguation-rule"]&&this.state.opt["disambiguate-add-givenname"]&&(this.givensMax=2),!0},Ko.Disambiguation.prototype.padBase=function(e){for(var t=0,i=e.names.length;t<i;t+=1){e.givens[t]||(e.givens[t]=[]);for(var r=0,s=e.names[t];r<s;r+=1)e.givens[t][r]||(e.givens[t][r]=0)}},Ko.Disambiguation.prototype.configModes=function(){var e,t;this.modes=[],e=this.state.opt["disambiguate-add-givenname"],t=this.state.citation.opt["givenname-disambiguation-rule"],(this.state.opt["disambiguate-add-names"]||e&&"by-cite"===t)&&this.modes.push("disNames"),this.state.opt.development_extensions.prioritize_disambiguate_condition?(this.state.opt.has_disambiguate&&this.modes.push("disExtraText"),this.state.opt["disambiguate-add-year-suffix"]&&this.modes.push("disYears")):(this.state.opt["disambiguate-add-year-suffix"]&&this.modes.push("disYears"),this.state.opt.has_disambiguate&&this.modes.push("disExtraText"))},Ko.Disambiguation.prototype.getCiteData=function(e,t){if(!this.maxNamesByItemId[e.id]){Ko.getAmbiguousCite.call(this.state,e,t),t=Ko.getAmbigConfig.call(this.state),this.maxNamesByItemId[e.id]=Ko.getMaxVals.call(this.state),this.state.registry.registry[e.id].disambig.givens=this.state.tmp.disambig_settings.givens.slice();for(var i=0,r=this.state.registry.registry[e.id].disambig.givens.length;i<r;i+=1)this.state.registry.registry[e.id].disambig.givens[i]=this.state.tmp.disambig_settings.givens[i].slice();for(this.namesetsMax=this.state.registry.registry[e.id].disambig.names.length-1,this.base||(this.base=t,this.betterbase=Ko.cloneAmbigConfig(t)),t.names.length<this.base.names.length&&(this.base=t),i=0,r=t.names.length;i<r;i+=1)t.names[i]>this.base.names[i]&&(this.base.givens[i]=t.givens[i].slice(),this.base.names[i]=t.names[i],this.betterbase.names=this.base.names.slice(),this.betterbase.givens=this.base.givens.slice(),this.padBase(this.base),this.padBase(this.betterbase));this.betterbase.givens=this.base.givens.slice();for(var s=0,a=this.base.givens.length;s<a;s+=1)this.betterbase.givens[s]=this.base.givens[s].slice()}},Ko.Disambiguation.prototype.captureStepToBase=function(){"by-cite"===this.state.citation.opt["givenname-disambiguation-rule"]&&this.base.givens&&this.base.givens.length&&void 0!==this.base.givens[this.gnameset][this.gname]&&(this.betterbase.givens.length<this.base.givens.length&&(this.betterbase.givens=JSON.parse(JSON.stringify(this.base.givens))),this.betterbase.givens[this.gnameset][this.gname]=this.base.givens[this.gnameset][this.gname]),this.betterbase.names[this.gnameset]=this.base.names[this.gnameset]},Ko.Engine.prototype.getJurisdictionList=function(e){for(var t=[],i=e.split(":"),r=i.length;r>0;r--){var s=i.slice(0,r).join(":");if(t.push(s),this.opt.jurisdiction_fallbacks[s]){var a=this.opt.jurisdiction_fallbacks[s];t.push(a)}}return-1===t.indexOf("us")&&t.push("us"),t},Ko.Engine.prototype.loadStyleModule=function(e,t,i){var r=null;this.juris[e]={};var s=Ko.setupXml(t);s.addMissingNameNodes(s.dataObj),s.addInstitutionNodes(s.dataObj),s.insertPublisherAndPlace(s.dataObj),s.flagDateMacros(s.dataObj);for(var a=0,n=(c=s.getNodesByName(s.dataObj,"law-module")).length;a<n;a++){var o=s.getAttributeValue(c[a],"types");if(o){this.juris[e].types={};for(var l=0,u=(o=o.split(/\s+/)).length;l<u;l++)this.juris[e].types[o[l]]=!0}i||(r=s.getAttributeValue(c[a],"fallback"))&&"us"!==e&&(this.opt.jurisdiction_fallbacks[e]=r)}var c,p=this.opt.lang?this.opt.lang:this.opt["default-locale"][0];for(Ko.SET_COURT_CLASSES(this,p,s,s.dataObj),this.juris[e].types||(this.juris[e].types=Ko.MODULE_TYPES),a=0,n=(c=s.getNodesByName(s.dataObj,"macro")).length;a<n;a++){var h=s.getAttributeValue(c[a],"name");Ko.MODULE_MACROS[h]?(this.juris[e][h]=[],this.buildTokenLists(c[a],this.juris[e][h]),this.configureTokenList(this.juris[e][h])):Ko.debug('CSL: skipping non-modular macro name "'+h+'" in module context')}return r},Ko.Engine.prototype.retrieveAllStyleModules=function(e){for(var t={},i=this.locale[this.opt.lang].opts["jurisdiction-preference"],r=(i=[""].concat(i=i||[])).length-1;r>-1;r--)for(var s=i[r],a=0,n=e.length;a<n;a++){var o=e[a];if(!this.opt.jurisdictions_seen[o]){var l=this.sys.retrieveStyleModule(o,s);(!l&&!s||l)&&(this.opt.jurisdictions_seen[o]=!0),l&&(t[o]=l)}}return t},Ko.ParticleList=[["'s",zo=[[null,[0,1]]]],["'s-",zo],["'t",zo],["a",zo],["aan 't",Vo=[[null,[0,2]]]],["aan de",Vo],["aan den",Vo],["aan der",Vo],["aan het",Vo],["aan t",Vo],["aan",zo],["ad-",Wo=[[null,[0,1]],[[0,1],null]]],["adh-",Wo],["af",Wo],["al",Wo],["al-",Wo],["am de",Vo],["am",zo],["an-",Wo],["ar-",Wo],["as-",Wo],["ash-",Wo],["at-",Wo],["ath-",Wo],["auf dem",Jo=[[[0,2],null],[null,[0,2]]]],["auf den",Jo],["auf der",Jo],["auf ter",Vo],["auf",Yo=[[[0,1],null],[null,[0,1]]]],["aus 'm",Jo],["aus dem",Jo],["aus den",Jo],["aus der",Jo],["aus m",Jo],["aus",Yo],["aus'm",Jo],["az-",Wo],["a\u0161-",Wo],["a\u1e0d-",Wo],["a\u1e0f-",Wo],["a\u1e63-",Wo],["a\u1e6d-",Wo],["a\u1e6f-",Wo],["a\u1e93-",Wo],["ben",zo],["bij 't",Vo],["bij de",Vo],["bij den",Vo],["bij het",Vo],["bij t",Vo],["bij",zo],["bin",zo],["boven d",Vo],["boven d'",Vo],["d",zo],["d'",Wo],["da",Wo],["dal",zo],["dal'",zo],["dall'",zo],["dalla",zo],["das",Wo],["de die le",Ho=[[null,[0,3]]]],["de die",Vo],["de l",Vo],["de l'",Vo],["de la",Xo=[[null,[0,2]],[[0,1],[1,2]]]],["de las",Xo],["de le",Vo],["de li",$o=[[null,[0,2]],[[0,2],null]]],["de van der",Ho],["de",Wo],["de'",Wo],["deca",zo],["degli",Wo],["dei",Wo],["del",Wo],["dela",qo=[[[0,1],null]]],["dell'",Wo],["della",Wo],["delle",Wo],["dello",Wo],["den",Wo],["der",Wo],["des",Wo],["di",Wo],["die le",Vo],["do",zo],["don",zo],["dos",Wo],["du",Wo],["ed-",Wo],["edh-",Wo],["el",Wo],["el-",Wo],["en-",Wo],["er-",Wo],["es-",Wo],["esh-",Wo],["et-",Wo],["eth-",Wo],["ez-",Wo],["e\u0161-",Wo],["e\u1e0d-",Wo],["e\u1e0f-",Wo],["e\u1e63-",Wo],["e\u1e6d-",Wo],["e\u1e6f-",Wo],["e\u1e93-",Wo],["het",zo],["i",zo],["il",qo],["im",zo],["in 't",Vo],["in de",Vo],["in den",Vo],["in der",$o],["in het",Vo],["in t",Vo],["in",zo],["l",zo],["l'",zo],["la",zo],["las",zo],["le",zo],["les",Wo],["lo",Wo],["los",zo],["lou",zo],["of",zo],["onder 't",Vo],["onder de",Vo],["onder den",Vo],["onder het",Vo],["onder t",Vo],["onder",zo],["op 't",Vo],["op de",$o],["op den",Vo],["op der",Vo],["op gen",Vo],["op het",Vo],["op t",Vo],["op ten",Vo],["op",zo],["over 't",Vo],["over de",Vo],["over den",Vo],["over het",Vo],["over t",Vo],["over",zo],["s",zo],["s'",zo],["sen",qo],["t",zo],["te",zo],["ten",zo],["ter",zo],["tho",zo],["thoe",zo],["thor",zo],["to",zo],["toe",zo],["tot",zo],["uijt 't",Vo],["uijt de",Vo],["uijt den",Vo],["uijt te de",Ho],["uijt ten",Vo],["uijt",zo],["uit 't",Vo],["uit de",Vo],["uit den",Vo],["uit het",Vo],["uit t",Vo],["uit te de",Ho],["uit ten",Vo],["uit",zo],["unter",zo],["v",zo],["v.",zo],["v.d.",zo],["van 't",Vo],["van de l",Ho],["van de l'",Ho],["van de",Vo],["van de",Vo],["van den",Vo],["van der",Vo],["van gen",Vo],["van het",Vo],["van la",Vo],["van t",Vo],["van ter",Vo],["van van de",Ho],["van",Wo],["vander",zo],["vd",zo],["ver",zo],["vom und zum",[[[0,3],null]]],["vom",Wo],["von 't",Vo],["von dem",Jo],["von den",Jo],["von der",Jo],["von t",Vo],["von und zu",[[[0,3],null],[null,[0,3]]]],["von zu",Jo],["von",Yo],["voor 't",Vo],["voor de",Vo],["voor den",Vo],["voor in 't",Ho],["voor in t",Ho],["voor",zo],["vor der",Jo],["vor",Yo],["z",qo],["ze",qo],["zu",Yo],["zum",Wo],["zur",Wo]],Ko.parseParticles=function(){function e(e,t,i){var r=e;e=i?e.toLowerCase():e;var s,a,n=[];t?(e=e.split("").reverse().join(""),s=Ko.PARTICLE_GIVEN_REGEXP):s=Ko.PARTICLE_FAMILY_REGEXP;for(var o=e.match(s);o;){var l,u=t?o[1].split("").reverse().join(""):o[1];if(!(a=!!(l=!!(l=!!o&&u)&&u.replace(/^[-\'\u02bb\u2019\s]*(.).*$/,"$1"))&&l.toUpperCase()!==l))break;t?(n.push(r.slice(-1*u.length)),r=r.slice(0,-1*u.length)):(n.push(r.slice(0,u.length)),r=r.slice(u.length)),o=(e=o[2]).match(s)}if(t){e=e.split("").reverse().join(""),n.reverse();for(var c=1,p=n.length;c<p;c++)" "==n[c].slice(0,1)&&(n[c-1]+=" ");for(c=0,p=n.length;c<p;c++)" "==n[c].slice(0,1)&&(n[c]=n[c].slice(1));e=r.slice(0,e.length)}else e=r.slice(-1*e.length);return[a,e,n]}return function(t){var i=(o=e(t.family))[1],r=o[2];t.family=i;var s,a,n=(a=(s=r.join("")).slice(-1),s=s.trim()," "===a&&["'","\u2019"].indexOf(s.slice(-1))>-1&&(s+=" "),s);n&&(t["non-dropping-particle"]=n),function(e){if(!e.suffix&&e.given){var t=e.given.match(/(\s*,!*\s*)/);if(t){var i=e.given.indexOf(t[1]),r=e.given.slice(i+t[1].length),s=e.given.slice(i,i+t[1].length).replace(/\s*/g,"");"et al"!==r.replace(/\./g,"")||e["dropping-particle"]?(2===s.length&&(e["comma-suffix"]=!0),e.suffix=r):(e["dropping-particle"]=r,e["comma-dropping-particle"]=","),e.given=e.given.slice(0,i)}}}(t);var o,l=(o=e(t.given,!0))[1],u=o[2];t.given=l;var c=u.join("").trim();c&&(t["dropping-particle"]=c)}}(),Fo=Ko;var Zo={};Object.defineProperty(Zo,"__esModule",{value:!0}),Zo.fetchEngine=Zo.default=void 0;var el,tl=(el=Fo)&&el.__esModule?el:{default:el};const il=Symbol.for("proxied"),rl=function(e){const t=function(t,i){if(t.sys.wrapBibliographyEntry){const[e,r]=t.sys.wrapBibliographyEntry(this.system_id);i=[e,i,r].join("")}return e.call(this,t,i)};return t[il]=!0,t};for(const Zh in tl.default.Output.Formats){const e=tl.default.Output.Formats[Zh]["@bibliography/entry"];e&&!e[il]&&(tl.default.Output.Formats[Zh]["@bibliography/entry"]=rl(e))}const sl={},al=function(e,t,i,r,s){const a=`${e}|${t}`;let n;return sl[a]instanceof tl.default.Engine?((n=sl[a]).sys.retrieveItem=r,n.updateItems([])):n=sl[a]=new tl.default.Engine({retrieveLocale:s,retrieveItem:r},i,t,!0),n};Zo.fetchEngine=al;Zo.default=function(e,t,i,r){const s=e.reduce((e,t)=>(e[t.id]=t,e),{}),a=Lo.templates.get(Lo.templates.has(t)?t:"apa");i=Ro.locales.has(i)?i:"en-US";const n=al(t,i,a,e=>s[e],Ro.locales.get.bind(Ro.locales));return n.setOutputFormat(r),n};var nl={};Object.defineProperty(nl,"__esModule",{value:!0}),nl.getPrefixedEntry=void 0;const ol=(e,t,i)=>e.replace(/^\s*<[a-z]+/i,`$& data-${t}="${i}"`);nl.getPrefixedEntry=(e,t)=>ol(e,"csl-entry-id",t);var ll={};Object.defineProperty(ll,"__esModule",{value:!0}),ll.default=function(e,t={}){const{template:i="apa",lang:r="en-US",format:s="text",nosort:a=!1}=t,n=(0,cl.default)(e,i,r,s),o=n.updateItems(e.map(e=>e.id),a);if(t.append||t.prepend){const{append:i,prepend:r}=t,s=e.reduce((e,t)=>(e[t.id]=t,e),{});n.sys.wrapBibliographyEntry=function(e){const t=s[e];return[pl(t,r),pl(t,i)]}}else n.sys.wrapBibliographyEntry=()=>["",""];const l=n.makeBibliography(),[{bibstart:u,bibend:c},p]=l;return u+p.map((e,t)=>(0,nl.getPrefixedEntry)(e,o[t])).join("")+c};var ul,cl=(ul=Zo)&&ul.__esModule?ul:{default:ul};const pl=(e,t)=>"function"==typeof t?t(e):t||"";var hl={};Object.defineProperty(hl,"__esModule",{value:!0}),hl.default=function(e,t={}){const{template:i="apa",lang:r="en-US",format:s="text"}=t,a=e.map(({id:e})=>e),n=t.entry?[].concat(t.entry):a,o=(0,fl.default)(e,i,r,s);return o.updateItems(a),o.previewCitationCluster({citationItems:n.map(e=>({id:e})),properties:{noteIndex:0}},[],[],s)};var ml,fl=(ml=Zo)&&ml.__esModule?ml:{default:ml},dl=yl(Zo),gl=yl(ll),bl=yl(hl);function yl(e){return e&&e.__esModule?e:{default:e}}Wa.plugins.add("@csl",{output:{bibliography:gl.default,citation:bl.default},config:{engine:dl.default,locales:Ro.locales,templates:Lo.templates}});var vl={outputSpec:"mixed"},_l={RIS:{ABST:"article-journal",ADVS:"motion_picture",AGGR:"dataset",ANCIENT:"manuscript",ART:"graphic",BILL:"bill",BLOG:"post-weblog",BOOK:"book",CASE:"legal_case",CHAP:"chapter",CHART:"figure",CLSWK:"manuscript",COMP:"book",CONF:"paper-conference",CPAPER:"paper-conference",CTLG:"entry",DATA:"dataset",DBASE:"dataset",DICT:"entry-dictionary",EBOOK:"book",ECHAP:"chapter",EDBOOK:"book",EJOUR:"article-journal",ELEC:"webpage",ENCYC:"entry-encyclopedia",EQUA:"article",FIGURE:"figure",GEN:"book",GOVDOC:"report",GRANT:"article",HEAR:"interview",ICOMM:"personal_communication",INPR:"article-journal",JFULL:"article-journal",JOUR:"article-journal",LEGAL:"legislation",MANSCPT:"manuscript",MAP:"map",MGZN:"article-magazine",MPCT:"broadcast",MULTI:"motion_picture",MUSIC:"musical_score",NEWS:"article-newspaper",PAMP:"pamphlet",PAT:"patent",PCOMM:"personal_communication",RPRT:"report",SER:"book",SLIDE:"motion_picture",SOUND:"motion_picture",STAND:"report",STAT:"legislation",THES:"thesis",UNBILL:"manuscript",UNPB:"manuscript",VIDEO:"motion_picture",WEB:"webpage"},CSL:{"article-journal":"JOUR","article-magazine":"MGZN","article-newspaper":"NEWS",article:"JOUR",bill:"BILL",book:"BOOK",broadcast:"MPCT",chapter:"CHAP",dataset:"DATA",entry:"CTLG","entry-dictionary":"DICT","entry-encyclopedia":"ENCYC",figure:"FIGURE",graphic:"ART",interview:"GEN",legal_case:"CASE",legislation:"LEGAL",manuscript:"MANSCPT",map:"MAP",motion_picture:"MPCT",musical_score:"MUSIC",pamphlet:"PAMP","paper-conference":"CONF",patent:"PAT",personal_communication:"PCOMM","post-weblog":"BLOG",post:"ICOMM",report:"RPRT","review-book":"BOOK",review:"JOUR",song:"SOUND",speech:"SOUND",thesis:"THES",treaty:"GEN",webpage:"ELEC"}},xl=[{source:"A2",target:"editor",when:{source:{TY:["ANCIENT","BLOG","CHAP","CONF","CPAPER","DICT","EBOOK","ECHAP","ENCYC","MUSIC","SER"]},target:{type:["chapter","entry-dictionary","entry-encyclopedia","musical_score","paper-conference","post-weblog"]}}},{source:"A2",target:"collection-editor",when:{source:{TY:["BOOK","CLSWK","COMP","EDBOOK","ELEC","MAP","MULTI","RPRT","UNPB"]},target:{type:["book","map","report","review-book","webpage"]}}},{source:"A2",target:"reporter",when:{source:{TY:["CASE"]},target:{type:["legal_case"]}}},{source:"A2",target:"recipient",when:{source:{TY:["ICOMM","PCOMM"]},target:{type:["personal_communication","post"]}}},{source:"A3",target:"collection-editor",when:{source:{TY:["ADVS","CHAP","CONF","EBOOK","MUSIC","SER","SLIDE","SOUND","VIDEO"]},target:{type:["chapter","musical_score","paper-conference","song","speech"]}}},{source:"A3",target:"illustrator",when:{source:{TY:["BLOG"]},target:{type:["post-weblog"]}}},{source:"A3",target:"editor",when:{source:{TY:["BOOK"]},target:{type:["book","review-book"]}}},{source:["A3","PB"],target:"publisher",when:{source:{TY:["RPRT"]},target:{type:["report"]}}},{source:"A4",target:"translator",when:{source:{TY:["ANCIENT","BOOK","CHAP","CLSWK","CTLG","DICT","EDBOOK","ENCYC","GRANT","PAMP"]},target:{type:["book","chapter","entry","entry-dictionary","entry-encyclopedia","pamphlet","review-book"]}}},{source:"AB",target:"abstract",when:{source:{TY:["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","personal_communication","post","post-weblog","report","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"AU",target:"author",when:{source:{TY:["ABST","ADVS","AGGR","ANCIENT","ART","BLOG","BOOK","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MULTI","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","THES","UNPB","VIDEO"]},target:{type:["article","article-journal","article-magazine","book","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legislation","manuscript","map","pamphlet","paper-conference","patent","personal_communication","post","post-weblog","report","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"AU",target:"editor",when:{source:{TY:["EDBOOK"]},target:!1}},{source:"AU",target:"director",when:{source:{TY:["MPCT"]},target:{type:["broadcast","motion_picture"]}}},{source:"AU",target:"composer",when:{source:{TY:["MUSIC"]},target:{type:["musical_score"]}}},{source:"AU",target:"reporter",when:{source:{TY:["NEWS"]},target:{type:["article-newspaper"]}}},{source:"C1",target:"section",when:{source:{TY:["CHAP","ECHAP","SER"]},target:{type:["chapter"]}}},{source:"C1",target:"scale",when:{source:{TY:["MAP"]},target:{type:["map"]}}},{source:"C2",target:"PMCID",when:{source:{TY:["ABST","INPR","JFULL","JOUR"]},target:{type:["article","article-journal","review"]}}},{source:"C2",target:"issue",when:{source:{TY:["NEWS"]},target:{type:["article-newspaper"]}}},{source:"C2",target:"number",when:{source:{TY:["SER"]},target:!1}},{source:["C2","DA"],target:"issued",when:{source:{TY:["CONF"]},target:{type:["paper-conference"]}}},{source:["C2","DA","PY"],target:"issued",when:{source:{TY:["PAT"]},target:{type:["patent"]}}},{source:"C3",target:"dimensions",when:{source:{TY:["ADVS","MAP","SLIDE","SOUND","VIDEO"]},target:{type:["map","song","speech"]}}},{source:"C3",target:"container-title",when:{source:{TY:["CONF"]},target:{type:["paper-conference"]}}},{source:"C3",target:"PMCID",when:{source:{TY:["EJOUR"]},target:!1}},{source:"C3",target:"jurisdiction",when:{source:{TY:["PAT"]},target:{type:["patent"]}}},{source:["C3","M1"],target:"dimensions",when:{source:{TY:["ART"]},target:{type:["graphic"]}}},{source:"C5",target:"number",when:{source:{TY:["GRANT"]},target:!1}},{source:"C5",target:"dimensions",when:{source:{TY:["MULTI"]},target:!1}},{source:"C5",target:"references",when:{source:{TY:["PAT"]},target:{type:["patent"]}}},{source:["C5","PB"],target:"publisher",when:{source:{TY:["STAT"]},target:!1}},{source:["C5","PY"],target:"issued",when:{source:{TY:["EBOOK"]},target:!1}},{source:"C6",target:"status",when:{source:{TY:["PAT"]},target:{type:["patent"]}}},{source:"C6",target:"issue",when:{source:{TY:["RPRT"]},target:{type:["report"]}}},{source:"C6",target:"volume",when:{source:{TY:["STAT"]},target:!1}},{source:"C7",target:"number",when:{source:{TY:["ABST","INPR","JFULL","JOUR"]},target:{type:["article","article-journal","review"]}}},{source:"C7",target:"PMCID",when:{source:{TY:["EBOOK","ECHAP"]},target:!1}},{source:["C7","NV"],target:"number",when:{source:{TY:["EJOUR"]},target:!1}},{source:"CN",target:"call-number",when:{source:{TY:["ABST","ADVS","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CTLG","DATA","DICT","EBOOK","ECHAP","EDBOOK","ELEC","ENCYC","EQUA","FIGURE","GEN","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","VIDEO"]},target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","personal_communication","post","post-weblog","report","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"CY",target:"event-place",when:{source:{TY:["CONF","CPAPER"]},target:{type:["paper-conference"]}}},{source:"DA",target:"accessed",when:{source:{TY:["AGGR","DBASE","EBOOK","EJOUR","MULTI"]},target:!1}},{source:["DA","PY"],target:"issued",when:{source:{TY:["ABST","ADVS","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHART","CPAPER","CTLG","DATA","EDBOOK","ELEC","ENCYC","EQUA","FIGURE","GEN","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MUSIC","PAMP","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","THES","UNBILL","UNPB","VIDEO"]},target:{type:["article","article-journal","article-magazine","bill","book","broadcast","dataset","entry","entry-encyclopedia","figure","graphic","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","personal_communication","post","post-weblog","report","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:["DA","PY","Y2"],target:"issued",when:{source:{TY:["STAT"]},target:!1}},{source:["DA","Y2"],target:"accessed",when:{source:{TY:["ECHAP"]},target:!1}},{source:"DB",target:"source",when:{source:{TY:["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","personal_communication","post","post-weblog","report","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"DO",target:"DOI",when:{source:{TY:["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","personal_communication","post","post-weblog","report","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"ET",target:"edition",when:{source:{TY:["ADVS","ANCIENT","ART","BLOG","BOOK","CHAP","CLSWK","CONF","CTLG","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","GEN","GOVDOC","LEGAL","MAP","MGZN","MPCT","MUSIC","NEWS","PAMP","RPRT","SER","SLIDE","SOUND","VIDEO"]},target:{type:["article-magazine","article-newspaper","book","broadcast","chapter","entry","entry-dictionary","entry-encyclopedia","graphic","interview","legislation","map","motion_picture","musical_score","pamphlet","paper-conference","post-weblog","report","review-book","song","speech","treaty","webpage"]}}},{source:"ET",target:"version",when:{source:{TY:["CHART","COMP","DATA","EQUA","FIGURE"]},target:{type:["dataset","figure"]}}},{source:"ET",target:"medium",when:{source:{TY:["MANSCPT"]},target:{type:["manuscript"]}}},{source:["ET","PY"],target:"issued",when:{source:{TY:["AGGR","DBASE"]},target:!1}},{source:"ID",target:"id"},{source:"IS",target:"number-of-volumes",when:{source:{TY:["CHAP"]},target:{type:["chapter"]}}},{source:"IS",target:"issue",when:{source:{TY:["ABST","INPR","JFULL","JOUR"]},target:{type:["article","article-journal","review"]}}},{source:"J2",target:"container-title-short",when:{source:{TY:["ABST","ANCIENT","BOOK","CHAP","CTLG","DATA","DICT","ENCYC","GRANT","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MGZN","PAMP","PCOMM","SER","STAND","STAT","UNPB"]},target:{type:["article","article-journal","article-magazine","book","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","legislation","manuscript","pamphlet","personal_communication","post","review","review-book"]}}},{source:"KW",target:"keyword",when:{source:{TY:["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","personal_communication","post","post-weblog","report","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:["L4","UR"],target:"URL",when:{source:{TY:["HEAR"]},target:!1}},{source:"LA",target:"language",when:{source:{TY:["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","personal_communication","post","post-weblog","report","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"LB",target:"citation-label",when:{source:{TY:["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},target:{type:["article","article-journal","article-magazine","bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","personal_communication","post","post-weblog","report","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"M1",target:"number",when:{source:{TY:["ADVS","AGGR","ANCIENT","BILL","CHART","DICT","EQUA","FIGURE","GEN","HEAR","SLIDE","SOUND","THES","UNBILL","UNPB","VIDEO"]},target:{type:["bill","entry-dictionary","figure","interview","song","speech","thesis","treaty"]}}},{source:"M1",target:"collection-number",when:{source:{TY:["BOOK","CLSWK","CTLG","EDBOOK","PAMP","SER"]},target:{type:["book","entry","pamphlet","review-book"]}}},{source:"M1",target:"issue",when:{source:{TY:["CONF","EJOUR","GOVDOC","MGZN"]},target:{type:["article-magazine","paper-conference"]}}},{source:"M1",target:"chapter-number",when:{source:{TY:["ECHAP"]},target:!1}},{source:"M1",target:"status",when:{source:{TY:["GRANT"]},target:!1}},{source:"M1",target:"page-first",when:{source:{TY:["LEGAL","NEWS","STAND"]},target:{type:["article-newspaper","legislation"]}}},{source:["M1","NV"],target:"number",when:{source:{TY:["ICOMM","MANSCPT","PCOMM","STAT"]},target:{type:["manuscript","personal_communication","post"]}}},{source:["M1","SE","SN"],target:"number",when:{source:{TY:["PAT"]},target:{type:["patent"]}}},{source:["M1","SN"],target:"number",when:{source:{TY:["RPRT"]},target:{type:["report"]}}},{source:["M1","VL"],target:"accessed",when:{source:{TY:["ELEC"]},target:{type:["webpage"]}}},{source:"M2",target:"page-first",when:{source:{TY:["ABST","INPR","JFULL","JOUR"]},target:{type:["article","article-journal","review"]}}},{source:"M2",target:"number-of-pages",when:{source:{TY:["PAMP"]},target:{type:["pamphlet"]}}},{source:"M3",target:"genre",when:{source:{TY:["ABST","ADVS","AGGR","ANCIENT","ART","BOOK","CHART","CLSWK","COMP","CPAPER","CTLG","DBASE","DICT","ECHAP","EDBOOK","EJOUR","EQUA","FIGURE","GEN","GRANT","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MULTI","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","THES","UNPB","VIDEO"]},target:{type:["article","article-journal","article-magazine","article-newspaper","book","entry","entry-dictionary","figure","graphic","interview","legislation","manuscript","map","pamphlet","patent","personal_communication","post","report","review","review-book","song","speech","thesis","treaty"]}}},{source:"M3",target:"medium",when:{source:{TY:["BLOG","EBOOK","ELEC","MPCT","MUSIC"]},target:{type:["broadcast","motion_picture","musical_score","post-weblog","webpage"]}}},{source:["N1","RN"],target:"note",when:{source:{TY:["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PCOMM","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","personal_communication","post","post-weblog","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:["N1","RN","RP"],target:"note",when:{source:{TY:["PAT","RPRT"]},target:{type:["patent","report"]}}},{source:"NV",target:"number-of-volumes",when:{source:{TY:["ANCIENT","BOOK","CLSWK","CONF","DICT","ECHAP","EDBOOK","ENCYC","GEN","HEAR","MUSIC","SER"]},target:{type:["book","entry-dictionary","entry-encyclopedia","interview","musical_score","paper-conference","review-book","treaty"]}}},{source:"NV",target:"number",when:{source:{TY:["CTLG","DATA"]},target:{type:["dataset","entry"]}}},{source:"NV",target:"version",when:{source:{TY:["EBOOK"]},target:!1}},{source:"NV",target:"dimensions",when:{source:{TY:["GRANT"]},target:!1}},{source:"NV",target:"collection-number",when:{source:{TY:["RPRT"]},target:{type:["report"]}}},{source:"OP",target:"original-title",when:{source:{TY:["ABST","AGGR","ANCIENT","BOOK","CHAP","CLSWK","CTLG","DICT","EBOOK","ECHAP","EDBOOK","ENCYC","GEN","INPR","JFULL","JOUR","MGZN","MUSIC","PAMP","SER"]},target:{type:["article","article-journal","article-magazine","book","chapter","entry","entry-dictionary","entry-encyclopedia","interview","musical_score","pamphlet","review","review-book","treaty"]}}},{source:"OP",target:"references",when:{source:{TY:["BILL","CASE","HEAR","LEGAL","STAT","UNBILL"]},target:{type:["bill","legal_case","legislation"]}}},{source:"PB",target:"publisher",when:{source:{TY:["ADVS","AGGR","ANCIENT","ART","BLOG","BOOK","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","LEGAL","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PCOMM","SER","SLIDE","SOUND","STAND","THES","UNPB","VIDEO"]},target:{type:["article-magazine","article-newspaper","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legislation","map","motion_picture","musical_score","pamphlet","paper-conference","personal_communication","post","post-weblog","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"PB",target:"authority",when:{source:{TY:["CASE"]},target:{type:["legal_case"]}}},{source:"PB",target:"archive",when:{source:{TY:["MANSCPT"]},target:{type:["manuscript"]}}},{source:"PY",target:"issued",when:{source:{TY:["CHAP","CLSWK","COMP","DICT","ECHAP","GOVDOC","MULTI","NEWS"]},target:{type:["article-newspaper","chapter","entry-dictionary"]}}},{source:"PY",target:"event-date",when:{source:{TY:["CONF"]},target:{type:["paper-conference"]}}},{source:["PY","SE"],target:"issued",when:{source:{TY:["EJOUR"]},target:!1}},{source:"RI",target:"reviewed-title",when:{source:{TY:["ABST","ANCIENT","CHAP","DICT","EBOOK","ECHAP","EJOUR","ENCYC","GEN","GRANT","INPR","JFULL","JOUR","MGZN","NEWS","SER"]},target:{type:["article","article-journal","article-magazine","article-newspaper","chapter","entry-dictionary","entry-encyclopedia","interview","review","treaty"]}}},{source:"RI",target:"locator",when:{source:{TY:["STAT"]},target:!1}},{source:"SE",target:"section",when:{source:{TY:["BILL","GEN","GOVDOC","MUSIC","NEWS","STAT","UNBILL"]},target:{type:["article-newspaper","bill","interview","musical_score","treaty"]}}},{source:"SE",target:"number",when:{source:{TY:["BLOG"]},target:{type:["post-weblog"]}}},{source:"SE",target:"chapter-number",when:{source:{TY:["CHAP","SER"]},target:{type:["chapter"]}}},{source:"SE",target:"page",when:{source:{TY:["BOOK"]},target:{type:["book","review-book"]}}},{source:"SE",target:"submitted",when:{source:{TY:["CASE"]},target:{type:["legal_case"]}}},{source:"SE",target:"number-of-pages",when:{source:{TY:["CTLG"]},target:{type:["entry"]}}},{source:"SE",target:"original-date",when:{source:{TY:["DATA"]},target:{type:["dataset"]}}},{source:"SE",target:"version",when:{source:{TY:["DICT"]},target:{type:["entry-dictionary"]}}},{source:"SE",target:"locator",when:{source:{TY:["STAND"]},target:!1}},{source:"SE",target:"page-first",when:{source:{TY:["MANSCPT","MGZN"]},target:{type:["article-magazine","manuscript"]}}},{source:["SE","T2"],target:"locator",when:{source:{TY:["LEGAL"]},target:{type:["legislation"]}}},{source:"SN",target:["ISBN","ISSN"],when:{source:{TY:["AGGR","CLSWK","GEN"]},target:{type:["interview","treaty"]}}},{source:"SN",target:"ISBN",when:{source:{TY:["ADVS","ANCIENT","BLOG","BOOK","CHAP","COMP","CONF","CTLG","DICT","EBOOK","ECHAP","EDBOOK","ELEC","ENCYC","HEAR","MAP","PAMP","SER","SLIDE","SOUND","VIDEO"]},target:{type:["book","chapter","entry","entry-dictionary","entry-encyclopedia","map","pamphlet","paper-conference","post-weblog","review-book","song","speech","webpage"]}}},{source:"SN",target:"ISSN",when:{source:{TY:["ABST","DATA","EJOUR","INPR","JFULL","JOUR","MGZN","MUSIC","NEWS"]},target:{type:["article","article-journal","article-magazine","article-newspaper","dataset","musical_score","review"]}}},{source:"SN",target:"number",when:{source:{TY:["DBASE","GOVDOC"]},target:!1}},{source:["SN","T3"],target:"number",when:{source:{TY:["LEGAL","STAND"]},target:{type:["legislation"]}}},{source:"SP",target:"page",when:{source:{TY:["ABST","AGGR","ANCIENT","BILL","CHAP","CONF","CPAPER","CTLG","DBASE","DICT","ECHAP","EJOUR","ENCYC","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MGZN","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","STAND","STAT","UNBILL","UNPB"]},target:{type:["article","article-journal","article-magazine","article-newspaper","bill","chapter","entry","entry-dictionary","entry-encyclopedia","interview","legislation","manuscript","musical_score","pamphlet","paper-conference","patent","personal_communication","post","report","review","treaty"]}}},{source:"SP",target:"number-of-pages",when:{source:{TY:["BOOK","CLSWK","EBOOK","EDBOOK","THES"]},target:{type:["book","review-book","thesis"]}}},{source:"SP",target:"page-first",when:{source:{TY:["CASE"]},target:{type:["legal_case"]}}},{source:"SP",target:"dimensions",when:{source:{TY:["MPCT"]},target:{type:["broadcast","motion_picture"]}}},{source:"ST",target:"title-short",when:{source:{TY:["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CLSWK","COMP","CONF","CTLG","DATA","DICT","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","GEN","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","MANSCPT","MAP","MGZN","MPCT","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAT","THES","UNBILL","UNPB","VIDEO"]},target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","graphic","interview","legal_case","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","personal_communication","post","post-weblog","report","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"SV",target:"collection-number",when:{source:{TY:["CHAP"]},target:{type:["chapter"]}}},{source:"T2",target:"collection-title",when:{source:{TY:["AGGR","BOOK","CLSWK","COMP","CTLG","DBASE","ELEC","MANSCPT","MAP","MPCT","MULTI","RPRT","UNPB"]},target:{type:["book","broadcast","entry","manuscript","map","motion_picture","report","review-book","webpage"]}}},{source:"T2",target:"container-title",when:{source:{TY:["ABST","ANCIENT","BILL","BLOG","CHAP","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ENCYC","GEN","INPR","JFULL","JOUR","MGZN","MUSIC","NEWS","PAMP","PAT","SER","STAT","THES","UNBILL"]},target:{type:["article","article-journal","article-magazine","article-newspaper","bill","chapter","entry-dictionary","entry-encyclopedia","interview","musical_score","pamphlet","patent","post-weblog","review","thesis","treaty"]}}},{source:"T2",target:"event",when:{source:{TY:["CONF","CPAPER"]},target:{type:["paper-conference"]}}},{source:"T2",target:"committee",when:{source:{TY:["HEAR"]},target:!1}},{source:"T2",target:"section",when:{source:{TY:["STAND"]},target:!1}},{source:"T3",target:"collection-title",when:{source:{TY:["ADVS","ANCIENT","CHAP","CONF","DATA","EBOOK","ECHAP","EJOUR","GEN","GOVDOC","MUSIC","SER","SLIDE","SOUND","VIDEO"]},target:{type:["chapter","dataset","interview","musical_score","paper-conference","song","speech","treaty"]}}},{source:"TI",target:"title",when:{source:{TY:["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","personal_communication","post","post-weblog","report","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"TY",target:"type"},{source:"UR",target:"URL",when:{source:{TY:["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","personal_communication","post","post-weblog","report","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"VL",target:"volume",when:{source:{TY:["ABST","ADVS","AGGR","ANCIENT","BILL","BOOK","CASE","CHAP","CLSWK","CONF","CPAPER","CTLG","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ENCYC","GEN","GOVDOC","INPR","JFULL","JOUR","LEGAL","MANSCPT","MGZN","MUSIC","NEWS","RPRT","SER","SLIDE","SOUND","STAND","UNBILL","VIDEO"]},target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","chapter","entry","entry-dictionary","entry-encyclopedia","interview","legal_case","legislation","manuscript","musical_score","paper-conference","report","review","review-book","song","speech","treaty"]}}},{source:"VL",target:"dimensions",when:{source:{TY:["CHART","EQUA","FIGURE"]},target:{type:["figure"]}}},{source:"VL",target:"edition",when:{source:{TY:["COMP"]},target:!1}},{source:"VL",target:"number",when:{source:{TY:["PAMP"]},target:{type:["pamphlet"]}}},{source:"VL",target:"version",when:{source:{TY:["PAT"]},target:{type:["patent"]}}},{source:["VL","Y2"],target:"accessed",when:{source:{TY:["BLOG"]},target:{type:["post-weblog"]}}},{source:"Y2",target:"accessed",when:{source:{TY:["ABST","ADVS","ANCIENT","ART","BILL","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DICT","EDBOOK","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","THES","UNBILL","UNPB","VIDEO"]},target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","personal_communication","post","report","review","review-book","song","speech","thesis","treaty"]}}},{source:"C4",target:"author",when:{source:{TY:["BOOK","CHAP","EBOOK","ECHAP","EJOUR"]},target:{"reviewed-author":!0,type:["book","chapter","review-book","review"]}}},{source:"AU",target:"reviewed-author",when:{source:{C4:!0,TY:["BOOK","CHAP","EBOOK","ECHAP","EJOUR"]},target:{type:["book","chapter","review-book","review"]}}},{source:"TA",target:"author",when:{source:{TY:["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},target:{"original-author":!0,translator:!0,type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","personal_communication","post","post-weblog","report","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"AU",target:"original-author",when:{source:{TA:!0,TY:["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},target:{translator:!0,type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","personal_communication","post","post-weblog","report","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"TT",target:"title",when:{source:{TY:["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},target:{"original-author":!0,translator:!0,type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","personal_communication","post","post-weblog","report","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"TI",target:"original-title",when:{source:{TT:!0,TY:["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"]},target:{translator:!0,type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","personal_communication","post","post-weblog","report","review","review-book","song","speech","thesis","treaty","webpage"]}}}],wl={};Object.defineProperty(wl,"__esModule",{value:!0}),wl.default=void 0;var El,Al=(El=_l)&&El.__esModule?El:{default:El};const Tl=/^\d{4}-\d{4}$/,Sl=/10(?:\.[0-9]{4,})?\/[^\s]*[^\s.,]/;var Ol={ANY:{toTarget:(...e)=>e.find(Boolean),toSource:e=>[e]},PAGE:{keepAll:!0,toTarget:(e,t)=>[e,t].filter(Boolean).join("-"),toSource:e=>e.replace(/[-\u2013\u2014]/g,"-")},ISBN:{toTarget:e=>Tl.test(e)?[e]:[void 0,e],toSource:(...e)=>e.find(Boolean)},DATE:{toTarget:e=>e&&(0,Sn.parse)(e.split("/").slice(0,3).filter(Boolean).join("/")),toSource(e){const t=Array(4).fill("");return e["date-parts"][0].forEach((e,i)=>{t[i]=e}),e.season&&(t[3]=e.season),t.join("/")}},NAME:{toTarget:e=>e&&[].concat(e).map(e=>{const t=e.split(/, ?/),[i,r,s]=t;switch(t.length){case 3:return{family:i,given:r,suffix:s};case 2:return{family:i,given:r};case 1:if(i.indexOf(" ")>-1)return{family:i};default:return{literal:e}}}),toSource:e=>e.map(({family:e,given:t,suffix:i,literal:r})=>{const s=[e,t,i].filter(Boolean);return s.length?s.join(", "):r})},KEYWORD:{toTarget:e=>(e=[].concat(e)).join(","),toSource:e=>e.split(",")},ID:{toSource:e=>e.slice(0,20)},TYPE:{toTarget:e=>Al.default.RIS[e],toSource:e=>Al.default.CSL[e]},DOI:{toTarget:e=>e.match(Sl)[0],toSource:e=>e.match(Sl)[0]}};wl.default=Ol;var Ql={};Object.defineProperty(Ql,"__esModule",{value:!0}),Ql.default=void 0;var kl,Cl=(kl=wl)&&kl.__esModule?kl:{default:kl},Il=[{source:"TY",target:"type"},{source:"ID",target:"id"},{source:["T1","TI","CT"],target:"title"},{source:"BT",target:"title",when:{source:{type:["BOOK","UNPB"],T1:!1,TI:!1,CT:!1},target:!1}},{source:"T2",target:"container-title",when:{target:{type:["bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","personal_communication","post","post-weblog","report","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"BT",target:"container-title",when:{source:{type:["ABST","ADVS","ART","BILL","CASE","CHAP","COMP","CONF","CTLG","DATA","ELEC","GEN","HEAR","ICOMM","INPR","JFULL","JOUR","MAP","MGZN","MPCT","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAT","THES","UNBILL","VIDEO"],T2:!1},target:!1}},{source:"T3",target:"collection-title"},{source:["A1","AU"],target:"author"},{source:["A2","ED"],target:"editor"},{source:"A3",target:"collection-editor"},{source:["Y1","PY"],target:"issued"},{source:"Y2",target:"event-date",convert:Cl.default.DATE,when:{source:{type:["CONF","CPAPER"]},target:{type:["paper-conference"]}}},{source:"Y2",target:"submitted",convert:Cl.default.DATE,when:{source:{type:["PAT"]},target:{type:"patent"}}},{source:["AB","N1"],target:"note"},{source:"N2",target:"abstract"},{source:"KW",target:"keyword"},{source:["JF","JO"],target:"container-title",convert:Cl.default.ANY,when:{target:{type:["article","article-journal","article-magazine","article-newspaper"]}}},{source:["JA","J1","J2"],target:"container-title-short"},{source:"VL",target:"volume"},{source:["IS","CP"],target:"issue"},{source:"SP",target:"page-first"},{source:["SP","EP"],target:"page",convert:Cl.default.PAGE,when:{source:{SP:!0,EP:!0}}},{source:"PB",target:"publisher"},{source:"SN",target:["ISSN","ISBN"]},{source:"AV",target:"archive_location"},{source:"UR",target:"URL"}];Ql.default=Il;var Nl={};Object.defineProperty(Nl,"__esModule",{value:!0}),Nl.default=void 0;var Rl=Dl(xl),Pl=Dl([{source:["T1","BT"],target:"title",when:{source:{TY:["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"],TI:!1},target:!1}},{source:"A1",target:"author",when:{source:{TY:["ABST","ADVS","AGGR","ANCIENT","ART","BLOG","BOOK","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MULTI","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","THES","UNPB","VIDEO"],AU:!1},target:!1}},{source:"Y1",target:"issued",when:{source:{TY:["CONF"],C2:!1,DA:!1},target:!1}},{source:"Y1",target:"issued",when:{source:{TY:["PAT"],C2:!1,DA:!1,PY:!1},target:!1}},{source:"Y1",target:"issued",when:{source:{TY:["EBOOK"],C5:!1,PY:!1},target:!1}},{source:"Y1",target:"issued",when:{source:{TY:["ABST","ADVS","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHART","CPAPER","CTLG","DATA","EDBOOK","ELEC","ENCYC","EQUA","FIGURE","GEN","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MUSIC","PAMP","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","THES","UNBILL","UNPB","VIDEO"],DA:!1,PY:!1},target:!1}},{source:"Y1",target:"issued",when:{source:{TY:["STAT"],DA:!1,PY:!1,Y2:!1},target:!1}},{source:"Y1",target:"issued",when:{source:{TY:["AGGR","DBASE"],ET:!1,PY:!1},target:!1}},{source:"Y1",target:"issued",when:{source:{TY:["CHAP","CLSWK","COMP","DICT","ECHAP","GOVDOC","MULTI","NEWS"],PY:!1},target:!1}},{source:"Y1",target:"issued",when:{source:{TY:["EJOUR"],PY:!1,SE:!1},target:!1}},{source:["JO","JF","J1"],target:"container-title",when:{source:{TY:["CONF"],C3:!1},target:!1}},{source:["JO","JF","J1"],target:"container-title",when:{source:{TY:["ABST","ANCIENT","BILL","BLOG","CHAP","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ENCYC","GEN","INPR","JFULL","JOUR","MGZN","MUSIC","NEWS","PAMP","PAT","SER","STAT","THES","UNBILL"],T2:!1},target:!1}},{source:"JA",target:"container-title-short",when:{source:{TY:["ABST","ANCIENT","BOOK","CHAP","CTLG","DATA","DICT","ENCYC","GRANT","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MGZN","PAMP","PCOMM","SER","STAND","STAT","UNPB"],J2:!1},target:!1}},{source:"N2",target:"abstract",when:{source:{TY:["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"],AB:!1},target:!1}},{source:["SP","EP"],target:"page",when:{source:{TY:["BOOK"],SE:!1},target:!1}},{source:["SP","EP"],target:"page",when:{source:{TY:["ABST","AGGR","ANCIENT","BILL","CHAP","CONF","CPAPER","CTLG","DBASE","DICT","ECHAP","EJOUR","ENCYC","GEN","GOVDOC","GRANT","HEAR","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MGZN","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","STAND","STAT","UNBILL","UNPB"],EP:!0},target:!1}},{source:"AV",target:"archive_location",when:{target:!1}},{source:"LK",target:"URL",when:{source:{TY:["HEAR"],L4:!1,UR:!1},target:!1}},{source:"LK",target:"URL",when:{source:{TY:["ABST","ADVS","AGGR","ANCIENT","ART","BILL","BLOG","BOOK","CASE","CHAP","CHART","CLSWK","COMP","CONF","CPAPER","CTLG","DATA","DBASE","DICT","EBOOK","ECHAP","EDBOOK","EJOUR","ELEC","ENCYC","EQUA","FIGURE","GEN","GOVDOC","GRANT","ICOMM","INPR","JFULL","JOUR","LEGAL","MANSCPT","MAP","MGZN","MPCT","MULTI","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAND","STAT","THES","UNBILL","UNPB","VIDEO"],UR:!1},target:!1}}]);function Dl(e){return e&&e.__esModule?e:{default:e}}var jl=Rl.default.concat(Pl.default);Nl.default=jl;var Ll={};Object.defineProperty(Ll,"__esModule",{value:!0}),Object.defineProperty(Ll,"TYPES",{enumerable:!0,get:function(){return Ml.default}}),Ll.SPECS=void 0;var Ml=Gl(_l),Bl=Gl(xl),Ul=Gl(Ql),Fl=Gl(Nl);function Gl(e){return e&&e.__esModule?e:{default:e}}const ql={new:Bl.default,old:Ul.default,mixed:Fl.default};Ll.SPECS=ql;var zl={};Object.defineProperty(zl,"__esModule",{value:!0}),zl.parse=function(e){const t=[];let i,r;for(let s of e.split(/\r?\n/)){if(s=s.trim(),!Yl.test(s)){i&&r&&(i[r]+=" "+s);continue}const[e,a]=s.split(Jl);switch(e){case"ER":i=void 0,r=void 0;break;case"TY":i={},t.push(i);default:Array.isArray(i[e])?i[e].push(a):i[e]=i[e]?[i[e],a]:a,r=e}}return t},zl.parseOld=function(e){return Kl(Ll.SPECS.old).convertToTarget(e)},zl.parseNew=function(e){return Kl(Ll.SPECS.new).convertToTarget(e)},zl.parseMixed=function(e){return Kl(Ll.SPECS.mixed).convertToTarget(e)},zl.format=function(e,{type:t,format:i=t||"text"}={}){const r=e.map(Kl(Ll.SPECS[Vl.default.outputSpec]).convertToSource);return"object"===i?r:r.map(e=>{const t=[];for(const i in e)"TY"!==i&&t.push(...[].concat(e[i]).map(e=>`${i}  - ${e.toString().replace(/(.{70})/g,"$1\n")}`));return t.unshift("TY  - "+e.TY),t.push("ER  - "),t.join("\n")}).join("\n")};var Vl=$l(vl),Hl=$l(wl),Wl=$l({author:"NAME","collection-editor":"NAME",composer:"NAME","container-author":"NAME",director:"NAME",editor:"NAME","editorial-director":"NAME",interviewer:"NAME",illustrator:"NAME","original-author":"NAME",recipient:"NAME","reviewed-author":"NAME",translator:"NAME",accessed:"DATE",container:"DATE","event-date":"DATE",issued:"DATE","original-date":"DATE",submitted:"DATE",id:"ID","ISSN,ISBN":"ISBN",keyword:"KEYWORD",page:"PAGE",type:"TYPE",DOI:"DOI"});function $l(e){return e&&e.__esModule?e:{default:e}}const Yl=/^[A-Z][A-Z0-9] {2}-( |$)/,Jl=/ {2}-(?: |$)/,Xl=new Map;function Kl(e){if(!Xl.has(e)){for(const t of e)if(t.target in Wl.default&&(t.convert=Hl.default[Wl.default[t.target]]),(!t.convert||!0!==t.convert.keepAll)&&Array.isArray(t.source))if(t.convert){const{toSource:e,toTarget:i}=t.convert;t.convert={toTarget:(...e)=>i(Hl.default.ANY.toTarget(...e)),toSource:(...t)=>Hl.default.ANY.toSource(e(...t))}}else t.convert=Hl.default.ANY;Xl.set(e,new Wa.util.Translator(e))}return Xl.get(e)}var Zl,eu=(Zl=vl)&&Zl.__esModule?Zl:{default:Zl};const tu=["A1","AV","BT","CP","ED","EP","ID","J1","JA","JF","JO","L2","L3","N2","T1","U1","U2","U3","U4","U5","U6","Y1"],iu=["A4","AD","AN","C1","C2","C3","C4","C5","C6","C7","C8","CA","CN","DA","DB","DO","DP","ET","LA","LB","NV","OP","PY","RI","RN","SE","ST","SV","TA","TT"];Wa.plugins.add("@ris",{input:{"@ris/file":{parse:zl.parse,parseType:{dataType:"String",predicate:/^TY {2}- /m}},"@ris/record":{parse:zl.parseMixed,parseType:{dataType:"SimpleObject",propertyConstraint:{props:["TY"]}}},"@ris/new+record":{parse:zl.parseNew,parseType:{extends:"@ris/record",propertyConstraint:[{props:iu,match:"some"},{props:tu,match:"none"}]}},"@ris/old+record":{parse:zl.parseOld,parseType:{extends:"@ris/record",propertyConstraint:[{props:tu,match:"some"},{props:iu,match:"none"}]}}},config:eu.default,output:{ris:zl.format}});var ru={};function su(e){const{firstname:t,lastname:i,firstName:r=t,lastName:s=i}=e;return r&&s?{given:r,family:s}:e.name?(0,Dr.parse)(e.name):void 0}Object.defineProperty(ru,"__esModule",{value:!0}),ru.record=ru.quickscrapeRecord=void 0;const au=["PMID","PMCID","DOI","ISBN"],nu=["ISSN"];function ou(e,t){const i={};for(const r in e){const s=r.toUpperCase();t.includes(s)&&(i[s]=e[r])}if(e.identifier)for(let{id:r,type:s=""}of e.identifier)s=s.toUpperCase(),t.includes(s)&&(i[s]=r);return i}const lu={article:"article",book:"book",booklet:"book",proceedings:"book",mastersthesis:"thesis",inbook:"chapter",incollection:"chapter",conference:"paper-conference",inproceedings:"paper-conference",online:"website",patent:"patent",phdthesis:"thesis",techreport:"report",unpublished:"manuscript",manual:void 0,misc:void 0};function uu(e){const t={type:lu[e.type]||"book"};if(e.title&&(t.title=e.title),e.author&&(t.author=e.author.map(su).filter(Boolean)),e.editor&&(t.editor=e.editor.map(su).filter(Boolean)),e.reviewer&&(e.author&&(t["reviewed-author"]=t.author),t.author=e.reviewer.map(su).filter(Boolean)),Array.isArray(e.keywords)?t.keyword=e.keywords.join():e.keywords&&(t.keyword=e.keywords),e.publisher&&(t.publisher=e.publisher.name||e.publisher),e.date&&Object.keys(e.date).length>0){const i=e.date;i.submitted&&(t.submitted=(0,Sn.parse)(i.submitted)),i.published&&(t.issued=(0,Sn.parse)(i.published))}else e.year&&(t.issued={"date-parts":[[+e.year]]});if(e.journal){const i=e.journal;i.name&&(t["container-title"]=i.name),i.volume&&(t.volume=+i.volume),i.issue&&(t.issue=+i.issue),Object.assign(t,ou(i,nu)),i.firstpage&&(t["page-first"]=i.firstpage),i.pages?t.page=i.pages.replace("--","-"):i.firstpage&&i.lastpage&&(t.page=i.firstpage+"-"+i.lastpage)}return e.link&&"object"==typeof e.link[0]&&(t.URL=e.link[0].url),Object.assign(t,ou(e,au)),e.cid?t.id=e.cid:t.DOI&&(t.id=t.DOI),t}ru.quickscrapeRecord=function(e){return Object.assign(uu(e),{type:"article-journal"})},ru.record=function(e){return uu(e)};var cu={};Object.defineProperty(cu,"__esModule",{value:!0}),cu.formats=cu.parsers=cu.ref=void 0;var pu=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,t&&t.set(e,i),i}(ru);const hu=["fulltext_html","fulltext_xml","fulltext_pdf"];cu.ref="@bibjson";const mu={json:pu};cu.parsers=mu;const fu={"@bibjson/quickscrape+record+object":{parse:pu.quickscrapeRecord,parseType:{propertyConstraint:{props:"link",value:e=>hu.some(t=>e.find(({type:e})=>e===t))},extends:"@bibjson/record+object"}},"@bibjson/record+object":{parse:pu.record,parseType:{dataType:"SimpleObject",propertyConstraint:[{props:"title"},{props:["author","editor"],match:"some",value:e=>Array.isArray(e)&&e[0]&&"name"in e[0]}]}},"@bibjson/collection+object":{parse:e=>e.records,parseType:{dataType:"SimpleObject",propertyConstraint:[{props:"metadata",value:e=>"collection"in e},{props:"records",value:e=>Array.isArray(e)}]}}};cu.formats=fu,Wa.plugins.add("@bibjson",{input:fu});var du={};Object.defineProperty(du,"__esModule",{value:!0}),du.default=du.parse=void 0,du.default=du.parse=e=>(Array.isArray(e)?e:e.trim().split(/(?:\s+)/g)).map(e=>"https://doi.org/"+e);var gu={};Object.defineProperty(gu,"__esModule",{value:!0}),gu.default=gu.parse=void 0;const bu={"journal-article":"article-journal","book-chapter":"chapter","posted-content":"manuscript","proceedings-article":"paper-conference"};gu.default=gu.parse=e=>bu[e]||e;var yu={};Object.defineProperty(yu,"__esModule",{value:!0}),yu.default=yu.parse=void 0;var vu,_u=(vu=gu)&&vu.__esModule?vu:{default:vu};yu.default=yu.parse=function(e){const t={type:(0,_u.default)(e.type)};return["submitted","issued","event-date","original-date","container","accessed"].forEach(t=>{const i=e[t];i&&i["date-parts"]&&"number"==typeof i["date-parts"][0]&&(i["date-parts"]=[i["date-parts"]])}),Object.assign({},e,t)};var xu={};Object.defineProperty(xu,"__esModule",{value:!0}),xu.parseAsync=xu.parse=void 0;var wu,Eu=(wu=yu)&&wu.__esModule?wu:{default:wu};const Au={checkContentType:!0,headers:{Accept:"application/vnd.citationstyles.csl+json"}},Tu=async function(e){const t=await Wa.util.fetchFileAsync(e,Au);return"[]"===t?{}:JSON.parse(t)};xu.parseAsync=async function(e){return(await Promise.all([].concat(e).map(Tu))).map(Eu.default)};const Su=function(e){const t=Wa.util.fetchFile(e,Au);return"[]"===t?{}:JSON.parse(t)};xu.parse=e=>[].concat(e).map(Su).map(Eu.default);var Ou={};Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.formats=Ou.parsers=Ou.ref=void 0;var Qu=Ru(du),ku=Ru(xu),Cu=Ru(yu),Iu=Ru(gu);function Nu(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Nu=function(){return e},e}function Ru(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=Nu();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,t&&t.set(e,i),i}Ou.ref="@doi";const Pu={id:Qu,api:ku,json:Cu,type:Iu};Ou.parsers=Pu;const Du={"@doi/api":{parse:ku.parse,parseAsync:ku.parseAsync,parseType:{dataType:"String",predicate:/^\s*(https?:\/\/(?:dx\.)?doi\.org\/(10.\d{4,9}\/[-._;()/:A-Z0-9]+))\s*$/i,extends:"@else/url"}},"@doi/id":{parse:Qu.parse,parseType:{dataType:"String",predicate:/^\s*(10.\d{4,9}\/[-._;()/:A-Z0-9]+)\s*$/i}},"@doi/list+text":{parse:Qu.parse,parseType:{dataType:"String",tokenList:/^10.\d{4,9}\/[-._;()/:A-Z0-9]+$/i}},"@doi/list+object":{parse:Qu.parse,parseType:{dataType:"Array",elementConstraint:"@doi/id"}},"@doi/type":{parse:Iu.parse}};Ou.formats=Du,Wa.plugins.add("@doi",{input:Du});var ju={shortLang:e=>e.toLowerCase().split("_")[0],forceArray:e=>("string"==typeof e&&(e=[e]),e||[]),isPlainObject:e=>!(!e||"object"!=typeof e||e instanceof Array),fixedEncodeURIComponent:e=>encodeURIComponent(e).replace(/[!'()*]/g,Lu),replaceSpaceByUnderscores:e=>e.replace(/\s/g,"_"),uniq:e=>Array.from(new Set(e))};const Lu=e=>"%"+e.charCodeAt(0).toString(16),Mu=e=>t=>{const i={};return Object.keys(t).forEach(r=>{const s=t[r];i[r]=null!=s?e?s.map(Bu):s.value:e?[]:null}),i},Bu=e=>e.value,Uu=Mu(!1);var Fu={labels:Uu,descriptions:Uu,aliases:Mu(!0),lemmas:Uu,representations:Uu,glosses:Uu},Gu=e=>{"object"==typeof e&&(e=e.time);const t=e[0];var[i,r]=e.slice(1).split("T");return i=i.replace(/-00/g,"-01"),qu(t,`${i}T${r}`)};const qu=(e,t)=>{const i=t.split("-")[0];return"-"===e||i.length>4?zu(e,t,i):new Date(t)},zu=(e,t,i)=>{var r;return r=4===i.length?`${e}00${t}`:5===i.length?`${e}0${t}`:e+t,new Date(r)};var Vu={};const Hu={isNumericId:e=>/^[1-9][0-9]*$/.test(e),isEntityId:e=>/^((Q|P|L)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)$/.test(e),isItemId:e=>/^Q[1-9][0-9]*$/.test(e),isPropertyId:e=>/^P[1-9][0-9]*$/.test(e),isLexemeId:e=>/^L[1-9][0-9]*$/.test(e),isFormId:e=>/^L[1-9][0-9]*-F[1-9][0-9]*$/.test(e),isSenseId:e=>/^L[1-9][0-9]*-S[1-9][0-9]*$/.test(e),isGuid:e=>/^((Q|P|L)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)\$[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e),isHash:e=>/^[0-9a-f]{40}$/.test(e),isPropertyClaimsId:e=>{const[t,i]=e.split("#");return Hu.isEntityId(t)&&Hu.isPropertyId(i)},isRevisionId:e=>/^\d+$/.test(e),isEntityPageTitle:e=>{if("string"!=typeof e)return!1;var[t,i]=e.split(":");return t&&i?$u(t)&&Hu[`is${t}Id`](i):(i=t,Hu.isItemId(i))}},Wu=["Item","Property","Lexeme"],$u=e=>Wu.includes(e);Hu.getNumericId=e=>{if(!(e=>/^(Q|P|L)[1-9][0-9]*$/.test(e))(e))throw new Error("invalid entity id: "+e);return e.replace(/^(Q|P|L)/,"")},Hu.wikibaseTimeToDateObject=Gu;const Yu=e=>t=>{try{return e(t)}catch(i){const e=(t=t.time||t)[0];let[r,s]=t.slice(1).split("T");return`${e}${r=r.replace(/-00/g,"-01")}T${s}`}};Hu.wikibaseTimeToEpochTime=Yu(e=>Gu(e).getTime()),Hu.wikibaseTimeToISOString=Yu(e=>Gu(e).toISOString()),Hu.wikibaseTimeToSimpleDay=Yu(e=>{if("object"==typeof e){const{time:t,precision:i}=e;e=9===i?t.replace("-01-01T","-00-00T"):10===i?t.replace("-01T","-00T"):t}return e.split("T")[0].replace(/^\+/,"").replace(/^(-?)0+/,"$1").replace(/-00$/,"").replace(/-00$/,"")}),Hu.getImageUrl=(e,t)=>{var i="https://commons.wikimedia.org/wiki/Special:FilePath/"+e;return"number"==typeof t&&(i+="?width="+t),i},Hu.getEntityIdFromGuid=e=>e.split("$")[0].toUpperCase(),Vu=Hu;const{wikibaseTimeToISOString:Ju,wikibaseTimeToEpochTime:Xu,wikibaseTimeToSimpleDay:Ku}=Vu,Zu=e=>e.value,ec=(e,t)=>ic(e,t.entityPrefix),tc={item:"Q",lexeme:"L",property:"P"},ic=(e,t)=>{const{value:i}=e,r=i.id||tc[i["entity-type"]]+i["numeric-id"];return"string"==typeof t?`${t}:${r}`:r},rc={iso:Ju,epoch:Xu,"simple-day":Ku,none:e=>e.time||e},sc={commonsMedia:Zu,"external-id":Zu,"geo-shape":Zu,"globe-coordinate":(e,t)=>t.keepRichValues?e.value:[e.value.latitude,e.value.longitude],math:Zu,monolingualtext:(e,t)=>t.keepRichValues?e.value:e.value.text,"musical-notation":Zu,quantity:(e,t)=>{const{value:i}=e,r=parseFloat(i.amount);if(t.keepRichValues){const e={amount:parseFloat(i.amount),unit:i.unit.replace(/^https?:\/\/.*\/entity\//,"")};return null!=i.upperBound&&(e.upperBound=parseFloat(i.upperBound)),null!=i.lowerBound&&(e.lowerBound=parseFloat(i.lowerBound)),e}return r},string:Zu,"tabular-data":Zu,time:(e,t)=>{var i;if(i="function"==typeof t.timeConverter?t.timeConverter(e.value):((e="iso")=>{const t=rc[e];if(!t)throw new Error("invalid converter key: "+JSON.stringify(e).substring(0,100));return t})(t.timeConverter)(e.value),t.keepRichValues){const{timezone:t,before:r,after:s,precision:a,calendarmodel:n}=e.value;return{time:i,timezone:t,before:r,after:s,precision:a,calendarmodel:n}}return i},url:Zu,"wikibase-entityid":ec,"wikibase-form":ec,"wikibase-item":ec,"wikibase-lexeme":ec,"wikibase-property":ec,"wikibase-sense":ec};var ac={parse:(e,t,i,r)=>{e=e||t.type;try{return sc[e](t,i)}catch(s){throw"parsers[datatype] is not a function"===s.message&&(s.message=`${e} claim parser isn't implemented\n        Claim id: ${r}\n        Please report to https://github.com/maxlath/wikibase-sdk/issues`),s}}};const nc=e=>{const t=e.reduce(oc,{});return t.preferred||t.normal||[]},oc=(e,t)=>{const{rank:i}=t;return e[i]||(e[i]=[]),e[i].push(t),e};var lc={truthyClaims:e=>{const t={};return Object.keys(e).forEach(i=>{t[i]=nc(e[i])}),t},truthyPropertyClaims:nc};const{parse:uc}=ac,{uniq:cc}=ju,{truthyPropertyClaims:pc}=lc,hc=(e,...t)=>{const{propertyPrefix:i}=gc(t),r={};for(let s in e){const a=e[s];i&&(s=i+":"+s),r[s]=mc(a,...t)}return r},mc=(e,...t)=>{if(null==e||0===e.length)return[];const{keepNonTruthy:i,areSubSnaks:r}=gc(t);return i||r||(e=pc(e)),(e=e.map(e=>dc(e,...t)).filter(fc))[0]&&"object"!=typeof e[0]?cc(e):e},fc=e=>void 0!==e,dc=(e,...t)=>{t=gc(t);const{keepQualifiers:i,keepReferences:r,keepIds:s,keepHashes:a,keepTypes:n,keepSnaktypes:o,keepRanks:l}=vc(t),{mainsnak:u,rank:c}=e;var p,h,m,f,d,g;if(u?(h=u.datatype,m=u.datavalue,f=u.snaktype):(m=e.datavalue,h=e.datatype,f=e.snaktype,e.hash?d=!0:g=!0),m)p=uc(h,m,t,e.id);else if("somevalue"===f)p=t.somevalueValue;else{if("novalue"!==f)throw new Error("no datavalue or special snaktype found");p=t.novalueValue}if(d){if(!(a||n||o))return p;const t={value:p};return a&&(t.hash=e.hash),n&&(t.type=h),o&&(t.snaktype=f),t}if(g)return n?{type:h,value:p}:p;if(!(i||r||s||n||o||l))return p;const b={value:p};n&&(b.type=h),o&&(b.snaktype=f),l&&(b.rank=c);const y=bc(t);return y.keepHashes=a,i&&(b.qualifiers=hc(e.qualifiers,y)),r&&(e.references=e.references||[],b.references=e.references.map(e=>{const t=hc(e.snaks,y);return a?{snaks:t,hash:e.hash}:t})),s&&(b.id=e.id),b},gc=e=>{if(null==e)return{};if(e[0]&&"object"==typeof e[0])return e[0];var[t,i,r]=e;return{entityPrefix:t,propertyPrefix:i,keepQualifiers:r}},bc=e=>Object.assign({},e,{areSubSnaks:!0}),yc=["keepQualifiers","keepReferences","keepIds","keepHashes","keepTypes","keepSnaktypes","keepRanks","keepRichValues"],vc=e=>(e.keepAll&&yc.forEach(t=>{null==e[t]&&(e[t]=!0)}),e);var _c={simplifyClaims:hc,simplifyPropertyClaims:mc,simplifyClaim:dc,simplifyQualifiers:(e,t)=>hc(e,bc(t)),simplifyPropertyQualifiers:(e,t)=>mc(e,bc(t)),simplifyQualifier:dc};const{isFormId:xc}=Vu,{representations:wc}=Fu,{simplifyClaims:Ec}=_c,Ac=(e,t)=>{const{id:i,representations:r,grammaticalFeatures:s,claims:a}=e;if(!xc(i))throw new Error("invalid form object");return{id:i,representations:wc(r),grammaticalFeatures:s,claims:Ec(a,t)}};var Tc={simplifyForm:Ac,simplifyForms:(e,t)=>e.map(e=>Ac(e,t))};const{isSenseId:Sc}=Vu,{glosses:Oc}=Fu,{simplifyClaims:Qc}=_c,kc=(e,t)=>{const{id:i,glosses:r,claims:s}=e;if(!Sc(i))throw new Error("invalid sense object");return{id:i,glosses:Oc(r),claims:Qc(s,t)}};var Cc={simplifySense:kc,simplifySenses:(e,t)=>e.map(e=>kc(e,t))},Ic=["aa","ab","ace","ady","af","ak","als","am","ang","an","arc","ar","ary","arz","ast","as","atj","avk","av","awa","ay","azb","az","ban","bar","bat_smg","ba","bcl","be_x_old","be","bg","bh","bi","bjn","bm","bn","bo","bpy","br","bs","bug","bxr","ca","cbk_zam","cdo","ceb","ce","cho","chr","ch","chy","ckb","co","crh","cr","csb","cs","cu","cv","cy","da","de","din","diq","dsb","dty","dv","dz","ee","el","eml","en","eo","es","et","eu","ext","fa","ff","fiu_vro","fi","fj","fo","frp","frr","fr","fur","fy","gag","gan","ga","gcr","gd","glk","gl","gn","gom","gor","got","gu","gv","hak","ha","haw","he","hif","hi","ho","hr","hsb","ht","hu","hy","hyw","hz","ia","id","ie","ig","ii","ik","ilo","inh","io","is","it","iu","jam","ja","jbo","jv","kaa","kab","ka","kbd","kbp","kg","ki","kj","kk","kl","km","kn","koi","ko","krc","kr","ksh","ks","ku","kv","kw","ky","lad","la","lbe","lb","lez","lfn","lg","lij","li","lld","lmo","ln","lo","lrc","ltg","lt","lv","mai","map_bms","mdf","mg","mhr","mh","min","mi","mk","ml","mn","mnw","mo","mrj","mr","ms","mt","mus","mwl","myv","my","mzn","nah","nap","na","nds_nl","nds","ne","new","ng","nl","nn","nov","no","nqo","nrm","nso","nv","ny","oc","olo","om","or","os","pag","pam","pap","pa","pcd","pdc","pfl","pih","pi","pl","pms","pnb","pnt","ps","pt","qu","rm","rmy","rn","roa_rup","roa_tara","ro","rue","ru","rw","sah","sat","sa","scn","sco","sc","sd","se","sg","shn","sh","shy","simple","si","sk","sl","sm","sn","so","sq","srn","sr","ss","stq","st","su","sv","sw","szl","szy","ta","tcy","tet","te","tg","th","ti","tk","tl","tn","to","tpi","tr","ts","tt","tum","tw","tyv","ty","udm","ug","uk","ur","uz","vec","vep","ve","vi","vls","vo","war","wa","wo","wuu","xal","xh","xmf","yi","yo","yue","za","zea","zh_classical","zh_min_nan","zh_yue","zh","zu"];const{fixedEncodeURIComponent:Nc,replaceSpaceByUnderscores:Rc,isPlainObject:Pc}=ju,{isPropertyId:Dc}=Vu,jc=e=>t=>`https://${e}.wikimedia.org/wiki/${t}`,Lc={commons:jc("commons"),mediawiki:e=>"https://www.mediawiki.org/wiki/"+e,meta:jc("meta"),species:jc("species"),wikidata:e=>Dc(e)?"https://www.wikidata.org/wiki/Property:"+e:"https://www.wikidata.org/wiki/"+e,wikimania:jc("wikimania")},Mc=/^https?:\/\/([\w-]{2,10})\.(\w+)\.org\/\w+\/(.*)/,Bc=e=>{if(e.startsWith("http")){const t=e,i=t.match(Mc);if(!i)throw new Error("invalid sitelink url: "+t);let r,[s,a,n]=i.slice(1);return n=decodeURIComponent(n),"www"===s?(s="en",r=a):"commons"===s?(s="en",a=r="commons"):r=`${s}${a}`.replace("wikipedia","wiki"),{lang:s,project:a,key:r,title:n,url:t}}{const t=e,i=Uc[t];if(i)return{lang:"en",project:i,key:t};const[r,s,a]=t.split("wik");if(null!=a)throw new Error("invalid sitelink key: "+t);if(-1===Ic.indexOf(r))throw new Error("sitelink lang not found: "+r);const n=Fc[s];if(!n)throw new Error("sitelink project not found: "+n);return{lang:r,project:n,key:t}}},Uc={commonswiki:"commons",mediawikiwiki:"mediawiki",metawiki:"meta",specieswiki:"specieswiki",wikidatawiki:"wikidata",wikimaniawiki:"wikimania"},Fc={i:"wikipedia",isource:"wikisource",iquote:"wikiquote",tionary:"wiktionary",ibooks:"wikibooks",iversity:"wikiversity",ivoyage:"wikivoyage",inews:"wikinews"};var Gc={getSitelinkUrl:(e,t)=>{if(Pc(e)&&(t=e.title,e=e.site),!e)throw new Error("missing a site");if(!t)throw new Error("missing a title");const i=e.replace(/wiki$/,""),r=Lc[i]||Lc[e];if(r)return r(t);const{lang:s,project:a}=Bc(e);return`https://${s}.${a}.org/wiki/${t=Nc(Rc(t))}`},getSitelinkData:Bc,isSitelinkKey:e=>{try{return Bc(e),!0}catch(t){return!1}}};const{getSitelinkUrl:qc}=Gc;const zc=(e,t)=>(i,r)=>{const{title:s}=e[r];return i[r]=t?{title:s,url:qc(r,s)}:s,i};const Vc=e=>{if(e){var{datatype:t}=e;return t=t&&t.replace("http://www.w3.org/2001/XMLSchema#",""),(Hc[e.type]||$c(t))(e)}},Hc={uri:e=>Xc(e.value),bnode:()=>null},Wc=e=>parseFloat(e.value),$c=e=>(e=e&&e.replace("http://www.w3.org/2001/XMLSchema#",""),Yc[e]||Jc),Yc={decimal:Wc,integer:Wc,float:Wc,double:Wc,boolean:e=>"true"===e.value},Jc=e=>e.value,Xc=e=>e.match(/http.*\/entity\/statement\//)?Kc(e):e.replace(/^https?:\/\/.*\/entity\//,"").replace(/^https?:\/\/.*\/prop\/direct\//,""),Kc=e=>{const t=(e=e.replace(/^https?:\/\/.*\/entity\/statement\//,"")).split("-");return t[0]+"$"+t.slice(1).join("-")},Zc=e=>{const t=e.filter(t=>e.some(ep(t))),i=new RegExp(`^(${t.join("|")})[A-Z]`),r=e.filter(e=>i.test(e)),s=e.filter(e=>!t.includes(e)&&!i.test(e));return{richVars:t,associatedVars:r,standaloneVars:s}},ep=e=>{const t=new RegExp(`^${e}[A-Z]\\w+`);return t.test.bind(t)},tp=(e,t,i)=>r=>{const s={};for(const i of e){const e={},a=Vc(r[i]);null!=a&&(e.value=a);for(const s of t)s.startsWith(i)&&ip(r,i,s,e);Object.keys(e).length>0&&(s[i]=e)}for(const e of i)s[e]=Vc(r[e]);return s},ip=(e,t,i,r)=>{var s=i.split(t)[1];s=s[0].toLowerCase()+s.slice(1),s=rp[s]||s;const a=e[i];null!=a&&(r[s]=a.value)},rp={altLabel:"aliases"},{labels:sp,descriptions:ap,aliases:np,lemmas:op,glosses:lp}=Fu,{simplifyClaim:up,simplifyPropertyClaims:cp,simplifyClaims:pp,simplifyQualifier:hp,simplifyPropertyQualifiers:mp,simplifyQualifiers:fp}=_c,{simplifyForm:dp,simplifyForms:gp}=Tc,{simplifySense:bp,simplifySenses:yp}=Cc;var vp,_p={labels:sp,descriptions:ap,aliases:np,claim:up,propertyClaims:cp,claims:pp,qualifier:hp,propertyQualifiers:mp,qualifiers:fp,sitelinks:(e,t={})=>{const{addUrl:i}=t;return Object.keys(e).reduce(zc(e,i),{})},snak:up,propertySnaks:cp,snaks:pp,lemmas:op,glosses:lp,form:dp,forms:gp,sense:bp,senses:yp,sparqlResults:(e,t={})=>{"string"==typeof e&&(e=JSON.parse(e));const{vars:i}=e.head,r=e.results.bindings;if(1===i.length&&!0===t.minimize){const e=i[0];return r.map(t=>Vc(t[e])).filter(e=>null!=e)}const{richVars:s,associatedVars:a,standaloneVars:n}=Zc(i);return r.map(tp(s,a,n))}};const xp=(e,t)=>{const{type:i}=e,r={id:e.id,type:i,modified:e.modified};return e.datatype&&(r.datatype=e.datatype),"item"===i?(wp(e,r,"labels"),wp(e,r,"descriptions"),wp(e,r,"aliases"),wp(e,r,"claims",t),wp(e,r,"sitelinks",t)):"property"===i?(r.datatype=e.datatype,wp(e,r,"labels"),wp(e,r,"descriptions"),wp(e,r,"aliases"),wp(e,r,"claims",t)):"lexeme"===i&&(wp(e,r,"lemmas"),r.lexicalCategory=e.lexicalCategory,r.language=e.language,wp(e,r,"claims",t),wp(e,r,"forms",t),wp(e,r,"senses",t)),r},wp=(e,t,i,r)=>{null!=e[i]&&(t[i]=_p[i](e[i],r))};_p.entity=xp,_p.entities=(e,t={})=>{e.entities&&(e=e.entities);const{entityPrefix:i}=t;return Object.keys(e).reduce((r,s)=>{const a=e[s];return i&&(s=`${i}:${s}`),r[s]=xp(a,t),r},{})},vp={simplifyEntity:xp};const{simplifyEntity:Ep}=vp;var Ap={wd:{entities:e=>{e=e.body||e;const{entities:t}=e;return Object.keys(t).forEach(e=>{t[e]=Ep(t[e])}),t}}},Tp={stringify:e=>{var t="";for(const i in e){const r=e[i];r&&(t+=`&${i}=${r}`)}return t=t.slice(1),encodeURI?encodeURI(t):t}};function Sp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Op=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Qp=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},kp=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function Cp(e,t){if(e.map)return e.map(t);for(var i=[],r=0;r<e.length;r++)i.push(t(e[r],r));return i}var Ip=Object.keys||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t},Np={};Np.decode=Np.parse=function(e,t,i,r){t=t||"&",i=i||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var n=1e3;r&&"number"==typeof r.maxKeys&&(n=r.maxKeys);var o=e.length;n>0&&o>n&&(o=n);for(var l=0;l<o;++l){var u,c,p,h,m=e[l].replace(a,"%20"),f=m.indexOf(i);f>=0?(u=m.substr(0,f),c=m.substr(f+1)):(u=m,c=""),p=decodeURIComponent(u),h=decodeURIComponent(c),Sp(s,p)?Op(s[p])?s[p].push(h):s[p]=[s[p],h]:s[p]=h}return s},Np.encode=Np.stringify=function(e,t,i,r){return t=t||"&",i=i||"=",null===e&&(e=void 0),"object"==typeof e?Cp(Ip(e),(function(r){var s=encodeURIComponent(Qp(r))+i;return kp(e[r])?Cp(e[r],(function(e){return s+encodeURIComponent(Qp(e))})).join(t):s+encodeURIComponent(Qp(e[r]))})).join(t):r?encodeURIComponent(Qp(r))+i+encodeURIComponent(Qp(e)):""};const Rp=(e,t)=>i=>{if(!Vu[t](i))throw new Error(`invalid ${e}: ${i}`)};var Pp={entityId:Rp("entity id","isEntityId"),propertyId:Rp("property id","isPropertyId"),entityPageTitle:Rp("entity page title","isEntityPageTitle"),revisionId:Rp("revision id","isRevisionId")};const{isPlainObject:Dp}=ju,jp=Object.assign({simplify:_p,parse:Ap},Vu,Gc,lc),Lp=function(e){if(!Dp(e))throw new Error("invalid config");const{instance:t,sparqlEndpoint:p}=e;if(!t&&!p)throw new Error("one of instance or sparqlEndpoint should be set at initialization.\nTip: if you just want to access functions that don't need an instance or a sparqlEndpoint,\nthose are also exposed directly on the module object. Exemple:\nconst { isItemId, simplify } = require('wikibase-sdk')");var h,m,f,d;if(t){Mp("instance",t),f=(m=t.replace(/\/$/,"").replace("/w/api.php",""))+"/w/api.php";const e=c({})(f);h={searchEntities:u({})(e),getEntities:l({})(e),getManyEntities:o({})(e),getRevisions:n({})(e),getEntityRevision:a({})(t),getEntitiesFromSitelinks:s({})(e)}}else h={searchEntities:Fp("searchEntities"),getEntities:Fp("getEntities"),getManyEntities:Fp("getManyEntities"),getRevisions:Fp("getRevisions"),getEntityRevision:Fp("getEntityRevision"),getEntitiesFromSitelinks:Fp("getEntitiesFromSitelinks")};p?(Mp("sparqlEndpoint",p),d={sparqlQuery:r({})(p),getReverseClaims:i({})(p)}):d={sparqlQuery:Up("sparqlQuery"),getReverseClaims:Up("getReverseClaims")};const g={instance:{root:m,apiEndpoint:f}};return Object.assign(g,jp,h,d)};Object.assign(Lp,jp);const Mp=(e,t)=>{if("string"!=typeof t||!t.startsWith("http"))throw new Error(`invalid ${e}: ${t}`)},Bp=e=>t=>()=>{throw new Error(`${t} requires ${e} to be set at initialization`)},Up=Bp("a sparqlEndpoint"),Fp=Bp("an instance");var Gp=Lp({instance:"https://www.wikidata.org",sparqlEndpoint:"https://query.wikidata.org/sparql"}),qp={langs:["en"]},zp={};Object.defineProperty(zp,"__esModule",{value:!0}),zp.default=zp.parse=void 0;var Vp=Wp(Gp),Hp=Wp(qp);function Wp(e){return e&&e.__esModule?e:{default:e}}zp.default=zp.parse=function(e,t){const i=[].concat(e);return[].concat(Vp.default.getManyEntities(i,t||Hp.default.langs))};var $p={};Object.defineProperty($p,"__esModule",{value:!0}),$p.parse=function(e){return[].concat(e).map(Yp)},$p.parseAsync=function(e){return Promise.all([].concat(e).map(Jp))};const{fetchFile:Yp,fetchFileAsync:Jp}=Wa.util;var Xp={};Object.defineProperty(Xp,"__esModule",{value:!0}),Xp.fillCache=ph,Xp.parse=function(e){return ch(e,ph(e))},Xp.fillCacheAsync=hh,Xp.parseAsync=async function(e){return ch(e,await hh(e))};const Kp={keepQualifiers:!0,timeConverter:"simple-day"},Zp={P17:null},eh={P740:Zp,P159:Zp},th={P50:null,P57:null,P86:null,P98:null,P110:null,P655:null,P1817:null,P921:{P50:null},P407:null,P364:null,P123:eh,P629:{P50:null,P123:eh},P437:null,P186:null,P179:{P98:null},P1433:{P4745:{P276:Zp}},P361:{P50:null}};function ih(e,t){return e.push(...t),e}function rh(e,t){return t?(e._needed=Object.assign(e._needed||{},t),Object.keys(e.claims).filter(e=>e in t).map(t=>e.claims[t].map(({value:e})=>e.id||e)).reduce(ih,[])):[]}function sh(e,t){if(!t){const t=[];for(const i in e){const r=rh(e[i],th);for(const e of r)t.includes(e)||t.push(e)}return t}const i=[];for(var r of t){var s=e[r];if(s._needed){for(var a in s.claims)if(a in s._needed)for(const t of s.claims[a])t.value&&t.value.id||(t.value=e[t.value],i.push(...rh(t.value,s._needed[a])));delete s._needed}}return i}function ah(e){return Gp.simplify.entities(e,Kp)}function nh(e,t){return{needed:sh(t),incomplete:Object.keys(e)}}function oh(e,t){const i=e.filter((i,r)=>!(i in t)&&e.indexOf(i)===r);return(0,zp.parse)(i)}function lh(e,t){const{entities:i}=JSON.parse(e);Object.assign(t,ah(i))}function uh(e,t){return{needed:sh(t,e.incomplete),incomplete:e.needed}}function ch(e,t){return Object.keys(e).map(e=>t[e])}function ph(e){const t=ah(e);let i=nh(e,t);for(;i.needed.length;)oh(i.needed,t).map(e=>lh((0,$p.parse)(e),t)),i=uh(i,t);return t}async function hh(e){const t=ah(e);let i=nh(e,t);for(;i.needed.length;){const e=oh(i.needed,t);await Promise.all(e.map(async e=>lh(await(0,$p.parseAsync)(e),t))),i=uh(i,t)}return t}var mh={};Object.defineProperty(mh,"__esModule",{value:!0}),mh.default=mh.parse=mh.parseProp=function(e,t,i){switch(e){case"type":return Ah(t);case"author":case"director":case"container-author":case"collection-editor":case"composer":case"editor":case"illustrator":case"original-author":case"recipient":case"reviewed-author":case"translator":return vh(t);case"issued":case"original-date":return(0,Sn.parse)(t);case"event-date":return Eh(t);case"keyword":return wh(t);case"container-title":case"collection-title":case"event":case"medium":case"publisher":case"original-publisher":return xh(t);case"event-place":case"original-publisher-place":case"publisher-place":return _h(t);case"collection-number":return bh(t[0].qualifiers);case"number-of-volumes":return t.length;default:return t}},mh.parseType=Ah,mh.getLabel=Th;var fh=gh(qp),dh=gh({Q191067:"article",Q1266946:"thesis",Q187685:"thesis",Q265158:"review",Q1172284:"dataset",Q2352616:"dataset",Q367035:"dataset",Q4006:"map",Q133792:"map",Q842617:"map",Q1425895:"map",Q2334719:"legal_case",Q36774:"webpage",Q15474042:"webpage",Q58494026:"webpage",Q17379835:"webpage",Q17442446:"webpage",Q21281405:"webpage",Q16222597:"webpage",Q653848:"map",Q21944833:"map",Q11424:"motion_picture",Q157443:"motion_picture",Q571:"book",Q87167:"manuscript",Q131569:"treaty",Q216665:"book",Q686822:"bill",Q10870555:"report",Q3099732:"report",Q252550:"treaty",Q3536928:"treaty",Q5707594:"article-newspaper",Q59908:"article",Q1164267:"book",Q18011172:"motion_picture",Q19389637:"article",Q11578774:"broadcast",Q15416:"broadcast",Q1555508:"broadcast",Q26260507:"broadcast",Q580922:"article",Q651270:"article",Q759838:"article",Q1580166:"entry-dictionary",Q1809676:"article",Q2106255:"article",Q1004391:"report",Q2438528:"article",Q6646525:"article",Q7216866:"post",Q7318358:"article",Q7582241:"article",Q10389811:"entry",Q13442814:"article-journal",Q17518557:"article",Q19917774:"article",Q30070590:"article-magazine",Q37974534:"article",Q637866:"review-book",Q5196473:"review",Q5251247:"review",Q42350535:"article",Q51282711:"thesis",Q51282766:"thesis",Q51282798:"thesis",Q51282875:"thesis",Q51282918:"thesis",Q51282969:"thesis",Q51282999:"thesis",Q51283026:"thesis",Q51283053:"thesis",Q51283145:"thesis",Q51283327:"thesis",Q55399605:"thesis",Q58010711:"article",Q60559362:"article",Q480498:"legal_case",Q697327:"legal_case",Q1469824:"dataset",Q2055205:"legal_case",Q162827:"map",Q460214:"map",Q2259701:"map",Q253623:"patent",Q22909582:"review",Q1172480:"dataset",Q45941145:"dataset",Q56515249:"review",Q61992233:"review",Q16968990:"book",Q21191270:"broadcast",Q26225677:"motion_picture",Q56753859:"map",Q57933693:"book",Q2823677:"legal_case",Q2865639:"legal_case",Q7307130:"legal_case",Q8016240:"legal_case",Q11827307:"legal_case",Q16738832:"legal_case",Q18146819:"legal_case",Q18536127:"legal_case",Q20917517:"legal_case",Q7366:"song",Q7302866:"song",Q25203386:"song",Q30637971:"legal_case",Q52768654:"map",Q56123235:"song",Q56612794:"song",Q60566516:"song",Q60809954:"song",Q61221204:"legal_case",Q24634210:"broadcast",Q61855877:"broadcast",Q1006160:"dataset",Q1980247:"chapter",Q19692072:"legal_case",Q23927052:"paper-conference",Q178651:"interview",Q861911:"speech",Q216526:"map",Q2940514:"map",Q3391101:"map",Q55089312:"dataset",Q56704157:"legal_case",Q26205359:"webpage",Q28326484:"webpage",Q28326490:"webpage",Q57312861:"webpage",Q106833:"book",Q128093:"book",Q20540385:"book",Q7433672:"book",Q193495:"book",Q3831846:"book",Q203490:"book",Q254554:"book",Q448980:"book",Q604219:"book",Q605076:"book",Q642946:"book",Q48498:"manuscript",Q727715:"book",Q747381:"book",Q855753:"book",Q890239:"book",Q913554:"book",Q918038:"book",Q922203:"book",Q944359:"book",Q1009641:"book",Q1631107:"dataset",Q26876682:"dataset",Q47114558:"dataset",Q1050259:"book",Q1062404:"book",Q1106827:"book",Q1173065:"book",Q1184488:"book",Q1238720:"book",Q1414013:"book",Q1415108:"book",Q162206:"map",Q191072:"map",Q320228:"map",Q352416:"map",Q441903:"map",Q573980:"map",Q602481:"map",Q715789:"map",Q728502:"map",Q1403728:"map",Q1410020:"map",Q1496857:"book",Q1528894:"book",Q1609706:"book",Q1616547:"book",Q1650727:"book",Q1760610:"book",Q1785330:"book",Q1870591:"book",Q1883939:"book",Q1977520:"book",Q1986787:"book",Q2069066:"book",Q2072218:"book",Q2104296:"book",Q2122442:"book",Q2128336:"book",Q2135225:"book",Q2208044:"book",Q2314679:"book",Q2331348:"book",Q2363145:"book",Q2374324:"book",Q2377289:"book",Q2396513:"book",Q2514954:"book",Q2537127:"book",Q2787237:"book",Q2831984:"book",Q3045706:"book",Q3831821:"book",Q3831847:"book",Q3915339:"book",Q4067007:"book",Q4224691:"book",Q4515179:"book",Q4677625:"book",Q4686085:"book",Q4931288:"book",Q5073531:"book",Q5093328:"book",Q5159310:"book",Q6675210:"book",Q8275050:"book",Q10666342:"book",Q11396303:"book",Q11750596:"book",Q12308638:"book",Q12410152:"book",Q12731131:"book",Q13137339:"book",Q13430107:"book",Q13636757:"book",Q13751595:"book",Q16046027:"book",Q16385949:"book",Q16507688:"book",Q16736578:"book",Q17134316:"book",Q21598767:"book",Q21662746:"book",Q22988237:"book",Q25679217:"book",Q12912091:"motion_picture",Q1453402:"map",Q1502030:"map",Q1664468:"map",Q1783108:"map",Q1787111:"dataset",Q1875628:"map",Q2089517:"map",Q2127425:"map",Q2353983:"map",Q2368091:"map",Q2426254:"map",Q2470969:"map",Q2471702:"map",Q2620815:"map",Q2656361:"map",Q2940478:"map",Q3509676:"map",Q3515498:"map",Q4505959:"map",Q4845530:"map",Q26267321:"book",Q26271823:"book",Q27560760:"book",Q29154430:"book",Q29586870:"book",Q31946409:"book",Q38143661:"book",Q52005090:"book",Q52153485:"book",Q55610842:"book",Q56552233:"book",Q57790812:"book",Q58142059:"book",Q58211632:"book",Q58807269:"book",Q60226001:"book",Q60475414:"book",Q60475468:"book",Q60627667:"book",Q61696018:"book",Q5047387:"map",Q5177325:"map",Q5434353:"map",Q6017843:"map",Q6664848:"map",Q7104865:"map",Q10544122:"map",Q11426259:"map",Q11618908:"map",Q14321585:"map",Q15877105:"map",Q17047956:"map",Q21935483:"map",Q22125384:"map",Q59457513:"map",Q60054914:"map",Q846662:"broadcast",Q5778924:"motion_picture",Q8513:"dataset",Q178376:"dataset",Q1675302:"map",Q267628:"article",Q871232:"article",Q3694604:"article",Q3719255:"article",Q19375673:"article",Q442919:"interview",Q850171:"interview",Q1384479:"interview",Q1477475:"interview",Q1067324:"motion_picture",Q1941707:"motion_picture",Q3055290:"interview",Q3055291:"interview",Q450873:"patent",Q681875:"patent",Q913351:"patent",Q5465504:"patent",Q2049275:"manuscript",Q213924:"manuscript",Q274076:"manuscript",Q597695:"manuscript",Q720106:"manuscript",Q865595:"manuscript",Q1067768:"manuscript",Q1266076:"manuscript",Q2209578:"manuscript",Q2217259:"manuscript",Q2531964:"manuscript",Q2816501:"manuscript",Q19787436:"patent",Q19787437:"patent",Q35639987:"patent",Q43305660:"patent",Q59818481:"dataset",Q1949797:"legal_case",Q18918145:"article-journal",Q2782326:"article-journal",Q3149408:"legal_case",Q18342738:"speech",Q3228788:"speech",Q3731370:"legal_case",Q17123524:"book",Q336144:"motion_picture",Q867242:"book",Q1093720:"treaty",Q193170:"treaty",Q625298:"treaty",Q837144:"treaty",Q864737:"treaty",Q931855:"treaty",Q1242841:"treaty",Q1414340:"treaty",Q1414472:"treaty",Q1498487:"treaty",Q1646218:"treaty",Q1671773:"treaty",Q1711115:"treaty",Q2290707:"treaty",Q2300991:"treaty",Q2465017:"treaty",Q3125472:"manuscript",Q3220177:"manuscript",Q3240926:"manuscript",Q3252544:"manuscript",Q3560324:"manuscript",Q3749265:"manuscript",Q3824506:"treaty",Q3960554:"manuscript",Q4426710:"treaty",Q4475654:"manuscript",Q4872029:"treaty",Q4985043:"treaty",Q7012086:"manuscript",Q7452368:"manuscript",Q9026959:"manuscript",Q11613006:"manuscript",Q13430250:"manuscript",Q17143154:"manuscript",Q21089188:"manuscript",Q22669850:"manuscript",Q22948347:"manuscript",Q25351420:"manuscript",Q31078443:"manuscript",Q33308141:"manuscript",Q11122:"treaty",Q451584:"legal_case",Q876477:"bill",Q1006544:"bill",Q1288220:"legal_case",Q2206565:"legal_case",Q2783852:"legal_case",Q5500839:"legal_case",Q7246224:"bill",Q7257705:"bill",Q7885007:"bill",Q859161:"dataset",Q1650567:"webpage",Q11439:"webpage",Q16602140:"bill",Q16821677:"bill",Q28457660:"bill",Q2261569:"webpage",Q2641220:"webpage",Q2737701:"webpage",Q14204246:"webpage",Q21025364:"webpage",Q23691297:"webpage",Q58040463:"webpage",Q44873079:"interview",Q4202018:"interview",Q4317093:"interview",Q7256239:"interview",Q7625207:"interview",Q8776455:"interview",Q45933791:"interview",Q60723716:"interview",Q6908053:"treaty",Q6934728:"treaty",Q6944158:"treaty",Q9160460:"treaty",Q9557810:"treaty",Q11455760:"treaty",Q11637357:"treaty",Q16567729:"treaty",Q19357149:"book",Q184528:"speech",Q203737:"speech",Q261197:"speech",Q554211:"speech",Q749054:"speech",Q787020:"speech",Q805093:"speech",Q960189:"speech",Q1346967:"speech",Q1840948:"speech",Q1980740:"speech",Q2183050:"speech",Q2895132:"speech",Q3030189:"speech",Q3040417:"speech",Q4329077:"speech",Q4388316:"speech",Q5152362:"speech",Q200092:"motion_picture",Q224700:"motion_picture",Q248583:"motion_picture",Q457832:"motion_picture",Q622548:"motion_picture",Q624771:"motion_picture",Q16835935:"treaty",Q16956642:"treaty",Q19958750:"treaty",Q27768121:"treaty",Q29526855:"treaty",Q29527278:"treaty",Q29527544:"treaty",Q29883540:"treaty",Q30921722:"treaty",Q38653134:"treaty",Q39234269:"treaty",Q41535471:"treaty",Q50192946:"treaty",Q57205857:"treaty",Q1194534:"dataset",Q7979513:"speech",Q11261492:"speech",Q11496736:"speech",Q11504413:"speech",Q13611058:"speech",Q13632631:"speech",Q15853847:"speech",Q18907443:"speech",Q19776345:"speech",Q28472611:"speech",Q56191193:"speech",Q56192445:"speech",Q60061482:"speech",Q60780612:"speech",Q47123453:"report",Q1054574:"motion_picture",Q860626:"motion_picture",Q959790:"motion_picture",Q1788980:"motion_picture",Q2331945:"motion_picture",Q188473:"motion_picture",Q2678111:"motion_picture",Q2991560:"motion_picture",Q2484376:"motion_picture",Q16950433:"motion_picture",Q18331260:"motion_picture",Q19952560:"motion_picture",Q5428822:"broadcast",Q13582719:"song",Q388480:"song",Q950683:"book",Q39825:"dataset",Q49918:"dataset",Q82753:"dataset",Q186588:"dataset",Q15706459:"article-journal",Q59387148:"report",Q6960620:"book",Q7094076:"dataset",Q367680:"dataset",Q857354:"dataset",Q1503133:"book",Q3219655:"dataset",Q3304360:"dataset",Q5227330:"dataset",Q7943567:"dataset",Q17305522:"dataset",Q18814183:"dataset",Q21264512:"dataset",Q43570203:"dataset",Q44106130:"dataset",Q50826803:"dataset",Q55387750:"dataset",Q593744:"dataset",Q83790:"book",Q539662:"dataset",Q605175:"dataset",Q550089:"dataset",Q36524:"dataset",Q1673963:"dataset",Q17152639:"dataset",Q20088085:"entry-dictionary",Q15633587:"webpage",Q15138389:"webpage",Q20088089:"entry-dictionary",Q5398426:"broadcast",Q1259759:"broadcast",Q7724161:"broadcast",Q21664088:"broadcast",Q234262:"chapter",Q21481766:"chapter",Q26989423:"chapter",Q29154515:"chapter",Q43148525:"chapter",Q43180447:"chapter",Q53460949:"chapter",Q327349:"dataset",Q1394657:"dataset",Q1988927:"dataset",Q201456:"dataset",Q220393:"dataset",Q3071343:"dataset",Q254213:"dataset",Q319949:"dataset",Q672598:"dataset",Q780605:"dataset",Q815410:"dataset",Q819688:"dataset",Q854459:"dataset",Q897682:"dataset",Q1114135:"dataset",Q1147639:"dataset",Q1400059:"dataset",Q1665882:"dataset",Q1754061:"dataset",Q1915979:"dataset",Q1991865:"dataset",Q2038458:"dataset",Q2249973:"dataset",Q2597555:"dataset",Q3346024:"dataset",Q5141544:"dataset",Q5146094:"dataset",Q5962346:"dataset",Q6941730:"dataset",Q7096331:"dataset",Q10413470:"dataset",Q15194024:"dataset",Q11722865:"dataset",Q273057:"dataset",Q16832380:"dataset",Q20820424:"dataset",Q22692845:"dataset",Q52666561:"dataset",Q59209277:"dataset",Q59977151:"dataset",Q60686104:"dataset",Q2262868:"dataset",Q7449052:"dataset",Q596138:"motion_picture",Q3464665:"broadcast",Q24862:"motion_picture",Q7751682:"motion_picture",Q187044:"article-newspaper",Q22812458:"broadcast",Q170238:"broadcast",Q309481:"article-newspaper",Q2495037:"article-newspaper",Q2602337:"article-newspaper",Q5149212:"article-newspaper",Q17628188:"article-newspaper",Q17633526:"article-newspaper",Q17928402:"post-weblog",Q50081413:"webpage",Q20136634:"article",Q43290228:"article",Q57988118:"post",Q40745:"legal_case",Q245072:"legal_case",Q321568:"legal_case",Q375727:"legal_case",Q699735:"report",Q836925:"report",Q788874:"legal_case",Q830689:"report",Q1668727:"report",Q1498464:"legal_case",Q1926270:"report",Q2070370:"legal_case",Q2145003:"legal_case",Q2307704:"report",Q2309880:"report",Q2677586:"report",Q3000100:"report",Q3922396:"legal_case",Q4343952:"report",Q4690599:"report",Q6451276:"report",Q7968600:"legal_case",Q7918438:"report",Q12038591:"legal_case",Q13433827:"entry",Q15629444:"report",Q17090395:"report",Q17329259:"entry-encyclopedia",Q19355445:"report",Q61704031:"broadcast",Q27027169:"report",Q41274869:"report",Q47126552:"report",Q56013707:"report",Q58089619:"legal_case",Q157394:"motion_picture",Q207601:"broadcast",Q1504425:"article-journal",Q1241826:"broadcast",Q2155186:"broadcast",Q2435927:"broadcast",Q2774197:"article-journal",Q3588923:"broadcast",Q5177022:"broadcast",Q7316896:"article-journal",Q7551315:"motion_picture",Q10709386:"broadcast",Q622812:"broadcast",Q11079003:"broadcast",Q10885494:"article-journal",Q11293915:"broadcast",Q11325507:"broadcast",Q11334197:"broadcast",Q11351206:"broadcast",Q11378697:"broadcast",Q187947:"musical_score",Q11451968:"broadcast",Q11483878:"broadcast",Q11491683:"broadcast",Q12183006:"article-journal",Q18458820:"broadcast",Q56478376:"article-journal",Q58038936:"article-journal",Q58898396:"article-journal",Q58900805:"article-journal",Q58901470:"article-journal",Q58902427:"article-journal",Q59458414:"article-journal",Q4249087:"legal_case",Q5710433:"legal_case",Q60456691:"legal_case",Q17074865:"map",Q18609332:"legal_case",Q29197:"broadcast",Q18011171:"motion_picture",Q506240:"motion_picture",Q653916:"motion_picture",Q240862:"motion_picture",Q914242:"motion_picture",Q5287435:"broadcast",Q5338721:"motion_picture",Q13359539:"broadcast",Q21191265:"broadcast",Q26225765:"motion_picture",Q29555881:"broadcast",Q50062923:"broadcast",Q50914552:"broadcast",Q61220733:"broadcast",Q1924747:"dataset",Q26868375:"dataset",Q61782522:"dataset",Q2033233:"dataset",Q39086821:"review",Q595971:"dataset",Q3539533:"dataset",Q276:"broadcast",Q182415:"broadcast",Q336181:"broadcast",Q356055:"broadcast",Q358942:"broadcast",Q431102:"broadcast",Q661436:"broadcast",Q677466:"motion_picture",Q854995:"broadcast",Q986699:"broadcast",Q1261214:"broadcast",Q1358344:"broadcast",Q1366112:"broadcast",Q1407240:"broadcast",Q1407245:"broadcast",Q1472288:"broadcast",Q1619206:"broadcast",Q1684600:"broadcast",Q1819008:"broadcast",Q1962634:"broadcast",Q1857766:"broadcast",Q1924371:"broadcast",Q1948292:"broadcast",Q2081003:"broadcast",Q2231383:"broadcast",Q2304946:"broadcast",Q3744532:"broadcast",Q5455086:"broadcast",Q6626746:"broadcast",Q7697093:"broadcast",Q14623351:"broadcast",Q3511312:"broadcast",Q10676514:"broadcast",Q202866:"motion_picture",Q1107:"motion_picture",Q581714:"broadcast",Q21191019:"broadcast",Q11086742:"motion_picture",Q11504513:"broadcast",Q14942329:"broadcast",Q15836186:"broadcast",Q16068806:"broadcast",Q16206641:"broadcast",Q17145545:"broadcast",Q18640746:"broadcast",Q19845560:"broadcast",Q19973797:"broadcast",Q21217315:"broadcast",Q25090976:"broadcast",Q27912070:"broadcast",Q28664032:"broadcast",Q34682961:"broadcast",Q46706005:"broadcast",Q118171:"dataset",Q192588:"dataset",Q193351:"dataset",Q212805:"dataset",Q333761:"dataset",Q702448:"dataset",Q1869909:"motion_picture",Q29982285:"broadcast",Q780524:"dataset",Q989016:"dataset",Q1172362:"dataset",Q1235236:"dataset",Q1373925:"dataset",Q1391125:"dataset",Q1393704:"dataset",Q1414426:"dataset",Q1494224:"dataset",Q1519460:"dataset",Q1787017:"dataset",Q1957894:"dataset",Q2599456:"dataset",Q2274762:"dataset",Q2302053:"dataset",Q2404903:"dataset",Q2532732:"dataset",Q2881060:"dataset",Q2912944:"dataset",Q3133368:"dataset",Q3454922:"dataset",Q4117139:"dataset",Q4501235:"dataset",Q4677551:"dataset",Q5062195:"dataset",Q5322831:"dataset",Q5473309:"dataset",Q5572370:"dataset",Q7246853:"dataset",Q7702836:"dataset",Q9067653:"dataset",Q14806568:"dataset",Q15097084:"dataset",Q15100572:"dataset",Q16155335:"dataset",Q17014602:"dataset",Q22811662:"dataset",Q24579448:"dataset",Q28146196:"dataset",Q33270056:"dataset",Q36570165:"dataset",Q45028176:"dataset",Q54933017:"dataset",Q55341040:"dataset",Q59157251:"dataset",Q13406463:"webpage",Q60856733:"dataset",Q521414:"dataset",Q883895:"dataset",Q986756:"dataset",Q1345528:"dataset",Q3404855:"dataset",Q3405306:"dataset",Q3518943:"dataset",Q3664416:"dataset",Q4127466:"dataset",Q4350734:"dataset",Q60557971:"dataset",Q4350735:"dataset",Q4350754:"dataset",Q5058966:"dataset",Q5058970:"dataset",Q5058971:"dataset",Q5058968:"dataset",Q5058969:"dataset",Q5058974:"dataset",Q5058975:"dataset",Q5058972:"dataset",Q5058978:"dataset",Q5058977:"dataset",Q5058981:"dataset",Q5058989:"dataset",Q5334384:"dataset",Q7015254:"dataset",Q10497456:"dataset",Q12058091:"dataset",Q16056280:"dataset",Q19894430:"dataset",Q24934691:"dataset",Q25383554:"dataset",Q26207721:"dataset",Q28730356:"dataset",Q29795177:"dataset",Q8025448:"book",Q1114458:"book",Q3027814:"book",Q3268307:"book",Q3491290:"book",Q4955683:"book",Q5197887:"book",Q6071891:"book",Q5296:"webpage",Q57819011:"legal_case",Q57821094:"legal_case",Q218013:"dataset",Q283579:"dataset",Q426674:"dataset",Q479833:"dataset",Q721795:"dataset",Q838281:"dataset",Q843670:"dataset",Q877809:"dataset",Q900856:"dataset",Q949532:"dataset",Q1265166:"dataset",Q1571814:"dataset",Q2025786:"book",Q2250844:"book",Q4034405:"book",Q5227352:"dataset",Q2115:"dataset",Q14679:"dataset",Q577697:"map",Q5150048:"map",Q16840211:"book",Q21032630:"book",Q8034663:"book",Q11191558:"book",Q13769783:"dataset",Q14902318:"dataset",Q24063789:"dataset",Q25975660:"dataset",Q26260540:"dataset",Q11266439:"webpage",Q26267864:"dataset",Q26987229:"dataset",Q27198004:"dataset",Q28948553:"dataset",Q29053519:"dataset",Q29694587:"dataset",Q41709380:"dataset",Q47459830:"dataset",Q57936091:"book",Q58902997:"book",Q7572716:"dataset",Q59913845:"song",Q2143665:"motion_picture",Q1957385:"motion_picture",Q5769663:"motion_picture",Q5855976:"motion_picture",Q1441669:"broadcast",Q1441929:"broadcast",Q16943561:"broadcast",Q19858063:"broadcast",Q19858074:"broadcast",Q19858077:"broadcast",Q19858082:"broadcast",Q19858080:"broadcast",Q19858086:"broadcast",Q19858087:"broadcast",Q19858088:"broadcast",Q19858095:"broadcast",Q19858093:"broadcast",Q19858098:"broadcast",Q19858107:"broadcast",Q19858110:"broadcast",Q19858108:"broadcast",Q19858123:"broadcast",Q19858126:"broadcast",Q19858124:"broadcast",Q19858125:"broadcast",Q19858142:"broadcast",Q19858143:"broadcast",Q19858140:"broadcast",Q19858141:"broadcast",Q19859744:"broadcast",Q19859780:"broadcast",Q1271915:"dataset",Q2250805:"map",Q2359829:"map",Q2415383:"map",Q2869471:"map",Q4816871:"map",Q5135690:"map",Q11025270:"map",Q21936815:"map",Q21938018:"map",Q26885495:"map",Q333779:"map",Q640492:"map",Q690851:"manuscript",Q1105486:"manuscript",Q1501880:"map",Q1501945:"map",Q1550537:"map",Q1974665:"map",Q2915844:"map",Q54298448:"map",Q21188110:"broadcast",Q918098:"broadcast",Q4765080:"broadcast",Q17113138:"broadcast",Q856314:"manuscript",Q928128:"manuscript",Q19969434:"manuscript",Q5647631:"manuscript",Q1190781:"manuscript",Q1620808:"manuscript",Q1675712:"manuscript",Q3637297:"manuscript",Q18558914:"manuscript",Q492264:"musical_score",Q10590726:"motion_picture",Q60259696:"manuscript",Q60323106:"manuscript",Q60325498:"manuscript",Q60363009:"manuscript",Q2552822:"musical_score",Q7452061:"musical_score",Q3962157:"map",Q16825889:"map",Q1826720:"map",Q3935817:"dataset",Q18616720:"dataset",Q7601206:"dataset",Q7620972:"map",Q1353555:"dataset",Q22961568:"book",Q93204:"motion_picture",Q7832972:"motion_picture",Q312083:"map",Q322943:"treaty",Q459435:"motion_picture",Q587240:"manuscript",Q595819:"treaty",Q850950:"dataset",Q1003870:"treaty",Q1688818:"map",Q1048515:"map",Q1473669:"manuscript",Q1667520:"map",Q2723202:"map",Q2941628:"dataset",Q2981686:"manuscript",Q2981685:"manuscript",Q7551149:"motion_picture",Q2933856:"book",Q266680:"map",Q1702772:"map",Q2035351:"map",Q2073537:"manuscript",Q2204393:"map",Q2325507:"map",Q5469880:"report",Q5469893:"report",Q5469912:"report",Q10438653:"map",Q42793629:"speech",Q2678443:"dataset",Q1923776:"book",Q2981450:"book",Q1413174:"dataset",Q185529:"motion_picture",Q16254232:"motion_picture",Q31803237:"treaty",Q32945468:"dataset",Q59825643:"dataset",Q934552:"dataset",Q200562:"broadcast",Q303064:"broadcast",Q1484397:"broadcast",Q2049337:"broadcast",Q2123557:"broadcast",Q2308891:"report",Q2665960:"report",Q5227671:"broadcast",Q18030695:"report",Q18385907:"broadcast",Q21190411:"broadcast",Q47512784:"report",Q56330488:"book",Q33111614:"motion_picture",Q484692:"song",Q1033831:"song",Q1497584:"book",Q19705:"book",Q628080:"book",Q1535505:"book",Q2333573:"book",Q3357101:"book",Q12041885:"book",Q5151497:"motion_picture",Q7999883:"article",Q18398246:"motion_picture",Q56309057:"manuscript",Q61314299:"dataset",Q234280:"chapter",Q234300:"chapter",Q862334:"book",Q2973181:"motion_picture",Q3072049:"motion_picture",Q1747837:"motion_picture",Q12029612:"dataset",Q50380591:"book",Q51881567:"book",Q60029764:"book",Q914229:"article",Q5465451:"article",Q20135338:"motion_picture",Q1541065:"report",Q2594143:"dataset",Q16664076:"report",Q441261:"dataset",Q457843:"dataset",Q783287:"dataset",Q1115961:"dataset",Q1713174:"dataset",Q3327521:"dataset",Q151:"dataset",Q17123180:"motion_picture",Q15982056:"article-newspaper",Q59191021:"dataset",Q59248059:"dataset",Q59248072:"dataset",Q1371849:"dataset",Q17438413:"dataset",Q61914117:"dataset",Q3352071:"motion_picture",Q25051296:"webpage",Q25054829:"dataset",Q267136:"dataset",Q488053:"book",Q914881:"book",Q1397073:"dataset",Q1662581:"dataset",Q2268965:"dataset",Q3292731:"book",Q3406872:"dataset",Q5033354:"dataset",Q5227322:"dataset",Q5532670:"dataset",Q7515656:"book",Q7598341:"dataset",Q7995661:"dataset",Q14523803:"book",Q17146953:"dataset",Q25110279:"book",Q30008669:"book",Q30009376:"book",Q41623316:"dataset",Q38647918:"book",Q249697:"speech",Q1428914:"dataset",Q255135:"book",Q471894:"book",Q586744:"book",Q956165:"book",Q1569753:"book",Q2939758:"book",Q12040484:"book",Q13583784:"book",Q59351530:"book",Q61020892:"book",Q17086104:"map",Q17147147:"map",Q19393521:"map",Q58884:"broadcast",Q2635894:"broadcast",Q193842:"map",Q261468:"map",Q943929:"song",Q1123037:"song",Q336822:"song",Q336371:"map",Q459798:"map",Q831939:"map",Q865144:"map",Q889561:"map",Q1152543:"map",Q1187667:"broadcast",Q1281814:"map",Q1674401:"map",Q1742009:"broadcast",Q1778220:"map",Q1800237:"map",Q2126801:"map",Q2125867:"broadcast",Q2298569:"map",Q2940627:"map",Q4903803:"map",Q5687679:"map",Q10480692:"map",Q10604395:"map",Q10916116:"book",Q11960416:"map",Q12008992:"map",Q58901209:"dataset",Q19969268:"broadcast",Q20741385:"book",Q21009694:"book",Q24879310:"dataset",Q56028349:"book",Q56240541:"broadcast",Q56697520:"book",Q60586493:"dataset",Q183169:"webpage",Q825914:"book",Q1391116:"dataset",Q1516252:"book",Q1569406:"dataset",Q1609353:"dataset",Q1609504:"dataset",Q1862738:"book",Q2110197:"dataset",Q3237931:"broadcast",Q3956369:"broadcast",Q3962380:"dataset",Q4769616:"dataset",Q4804740:"book",Q5051330:"dataset",Q5615468:"dataset",Q6822329:"dataset",Q6912943:"broadcast",Q7144753:"dataset",Q10688394:"book",Q12331427:"dataset",Q15961983:"broadcast",Q18311760:"broadcast",Q1499601:"dataset",Q5374928:"map",Q7444356:"motion_picture",Q6729489:"motion_picture",Q7444692:"map",Q8036547:"map",Q1383152:"dataset",Q3564515:"speech",Q3890208:"dataset",Q21050458:"dataset",Q21050912:"dataset",Q26721650:"dataset",Q31841013:"dataset",Q1865123:"dataset",Q206290:"dataset",Q1088118:"dataset",Q7502102:"dataset",Q17121221:"map",Q23888763:"book",Q46992920:"speech",Q52506277:"dataset",Q51719975:"broadcast",Q19364663:"book",Q22938710:"book",Q193977:"motion_picture",Q59032066:"song",Q1989725:"song",Q2135500:"manuscript",Q3153927:"speech",Q526877:"broadcast",Q742157:"article-newspaper",Q6899707:"map",Q725377:"book",Q10541153:"book",Q21198407:"book",Q369074:"dataset",Q3249257:"motion_picture",Q4373044:"motion_picture",Q172067:"motion_picture",Q1046788:"motion_picture",Q24886171:"broadcast",Q53746253:"broadcast",Q16709869:"book",Q16960707:"book",Q19941906:"book",Q21660824:"book",Q21818614:"book",Q57987419:"interview",Q57987455:"interview",Q57987589:"interview",Q61725752:"book",Q225672:"book",Q263790:"book",Q284465:"book",Q431193:"book",Q608971:"book",Q634123:"book",Q817063:"book",Q833590:"book",Q1027825:"book",Q1385360:"book",Q1754581:"book",Q2114246:"book",Q2144117:"book",Q2732056:"book",Q2955456:"book",Q4203401:"book",Q7163040:"book",Q7603925:"broadcast",Q12765421:"book",Q15276670:"book",Q15627042:"book",Q6548306:"book",Q12046416:"map",Q472298:"legal_case",Q1261319:"map",Q5563391:"map",Q26644852:"broadcast",Q29167422:"dataset",Q7211:"dataset",Q48473:"dataset",Q217327:"legal_case",Q951437:"dataset",Q636033:"dataset",Q672593:"dataset",Q739047:"dataset",Q891854:"legal_case",Q1207369:"dataset",Q1391014:"dataset",Q1642648:"dataset",Q2859990:"dataset",Q3307317:"dataset",Q4330194:"dataset",Q6813020:"legal_case",Q6901292:"legal_case",Q7251471:"dataset",Q18711682:"legal_case",Q20057286:"dataset",Q23015465:"dataset",Q24243801:"dataset",Q24249534:"dataset",Q25917186:"legal_case",Q27214933:"dataset",Q28934204:"legal_case",Q39740866:"dataset",Q59495116:"dataset",Q60208424:"dataset",Q61037469:"legal_case",Q40426579:"map",Q43037778:"map",Q47008743:"map",Q26225493:"book",Q29043181:"dataset",Q55850593:"song",Q55850643:"song",Q58885732:"song",Q58885754:"song",Q927803:"song",Q430010:"song",Q2292588:"song",Q2499178:"dataset",Q2560570:"dataset",Q3077240:"dataset",Q3491832:"dataset",Q1235234:"dataset",Q7096323:"dataset",Q7831478:"song",Q1564816:"legal_case",Q2698974:"legal_case",Q20089346:"motion_picture",Q5366020:"motion_picture",Q11526166:"speech",Q4167410:"webpage",Q845159:"motion_picture",Q1003021:"dataset",Q4167836:"webpage",Q1249224:"report",Q11382506:"webpage",Q15475226:"webpage",Q15475319:"webpage",Q1991869:"book",Q11690026:"book",Q31209114:"webpage",Q35243371:"webpage",Q48781895:"motion_picture",Q56005592:"webpage",Q17586363:"book",Q20043999:"book",Q59738577:"webpage",Q61033232:"webpage",Q61033736:"dataset",Q61034350:"webpage",Q29573701:"dataset",Q645928:"motion_picture",Q3209941:"report",Q5165404:"bill",Q11078958:"report",Q45182324:"article-journal",Q56119332:"post-weblog",Q60797:"speech",Q1474597:"speech",Q2069352:"book",Q2983424:"motion_picture",Q19359000:"report",Q24067746:"post-weblog",Q51844620:"dataset",Q51539995:"webpage",Q55422400:"broadcast",Q130232:"motion_picture",Q635115:"dataset",Q1553078:"dataset",Q1784036:"book",Q1813223:"book",Q2326951:"book",Q2500820:"book",Q3423635:"dataset",Q4363806:"book",Q14605760:"webpage",Q21875313:"book",Q24633474:"broadcast",Q28136925:"broadcast",Q28135032:"broadcast",Q28472638:"speech",Q28472722:"speech",Q1011299:"broadcast",Q3276244:"broadcast",Q29883647:"treaty",Q42214612:"treaty",Q60215679:"broadcast",Q60215966:"broadcast",Q7033567:"treaty",Q8576:"treaty",Q3257212:"book",Q5166307:"treaty",Q7865023:"treaty",Q8187836:"treaty",Q16923948:"treaty",Q17211914:"treaty",Q20874666:"treaty",Q39233713:"treaty",Q8041497:"patent",Q50823049:"report",Q61715571:"book",Q193934:"book",Q193955:"book",Q990683:"book",Q12047175:"book",Q1250520:"dataset",Q2334774:"song",Q22001389:"dataset",Q61782519:"dataset",Q112762:"song",Q177771:"song",Q178122:"song",Q207683:"song",Q216860:"song",Q261434:"song",Q318894:"song",Q319448:"song",Q380233:"song",Q493169:"song",Q502658:"song",Q523896:"song",Q591990:"song",Q608253:"song",Q744327:"song",Q758422:"song",Q783874:"song",Q784074:"song",Q820119:"song",Q844450:"song",Q873000:"song",Q944800:"song",Q959583:"song",Q988502:"song",Q1009280:"song",Q2281713:"song",Q1033810:"song",Q1033813:"song",Q1151663:"song",Q1195253:"song",Q1195630:"song",Q1228189:"song",Q20477577:"dataset",Q1972954:"dataset",Q842256:"motion_picture",Q643684:"motion_picture",Q1033573:"dataset",Q1205607:"dataset",Q1971947:"dataset",Q2145124:"dataset",Q2819247:"dataset",Q4685824:"dataset",Q7002108:"dataset",Q7200622:"dataset",Q8267601:"dataset",Q9732903:"webpage",Q11002482:"webpage",Q12096573:"webpage",Q16059585:"webpage",Q16059613:"webpage",Q16059624:"webpage",Q19208935:"webpage",Q21450877:"webpage",Q31936067:"dataset",Q47500192:"dataset",Q1229479:"song",Q1232283:"song",Q1236108:"song",Q1288193:"song",Q1372064:"song",Q1382036:"song",Q1779217:"song",Q1779319:"song",Q1899706:"song",Q1905727:"song",Q1942905:"song",Q1956166:"song",Q1963108:"song",Q1966622:"song",Q2038845:"song",Q2058312:"song",Q2108499:"song",Q2165184:"song",Q2235992:"song",Q2298624:"song",Q2312959:"song",Q2358279:"song",Q2544997:"song",Q2707688:"song",Q2737175:"song",Q2891357:"song",Q2894096:"song",Q2956164:"song",Q2956172:"song",Q3033130:"song",Q3246270:"song",Q3299089:"song",Q3482281:"song",Q3562031:"song",Q3843655:"song",Q3889661:"song",Q3918025:"song",Q4056436:"song",Q4130112:"song",Q4528554:"song",Q4770819:"song",Q4797274:"song",Q5031532:"song",Q5037289:"song",Q5747946:"song",Q5766029:"song",Q6109162:"song",Q7148059:"song",Q7314000:"song",Q7561608:"song",Q7824869:"song",Q8053529:"song",Q8261762:"song",Q10677514:"song",Q21653344:"song",Q56572789:"song",Q503354:"song",Q11214531:"song",Q12115862:"song",Q12135013:"song",Q12313565:"song",Q13829124:"song",Q15810872:"song",Q15907187:"song",Q16084298:"song",Q16194930:"song",Q16912992:"song",Q17118203:"song",Q17150323:"song",Q18012876:"song",Q18406550:"song",Q19607140:"song",Q20087039:"song",Q20107778:"song",Q20980372:"song",Q21127215:"song",Q22086714:"song",Q23072435:"song",Q25022242:"song",Q27981708:"song",Q27981857:"song",Q29051387:"song",Q37731261:"song",Q42681239:"song",Q46863086:"song",Q55596270:"song",Q56425213:"song",Q56425237:"song",Q61688673:"song",Q229390:"motion_picture",Q319221:"motion_picture",Q369747:"motion_picture",Q370630:"motion_picture",Q421719:"motion_picture",Q430525:"motion_picture",Q455315:"motion_picture",Q459290:"motion_picture",Q505119:"motion_picture",Q517386:"motion_picture",Q652256:"motion_picture",Q663106:"motion_picture",Q790192:"motion_picture",Q848512:"motion_picture",Q1060398:"motion_picture",Q1146335:"motion_picture",Q1200678:"motion_picture",Q1251417:"motion_picture",Q1320115:"motion_picture",Q1361932:"motion_picture",Q1397462:"motion_picture",Q1933746:"motion_picture",Q1935609:"motion_picture",Q2125170:"motion_picture",Q2156835:"motion_picture",Q2165644:"motion_picture",Q2301591:"motion_picture",Q4382232:"broadcast",Q2321734:"motion_picture",Q2553613:"motion_picture",Q2903140:"motion_picture",Q3072043:"motion_picture",Q3250548:"motion_picture",Q3585697:"motion_picture",Q3648909:"motion_picture",Q3677141:"motion_picture",Q3677185:"motion_picture",Q3745400:"motion_picture",Q3745430:"motion_picture",Q4220915:"motion_picture",Q4484381:"motion_picture",Q5145881:"motion_picture",Q5378150:"motion_picture",Q7130449:"motion_picture",Q7858343:"motion_picture",Q9259727:"motion_picture",Q12309044:"motion_picture",Q12377598:"motion_picture",Q16721823:"motion_picture",Q16909344:"motion_picture",Q19799105:"motion_picture",Q19799133:"motion_picture",Q20442589:"motion_picture",Q20650540:"motion_picture",Q21182682:"motion_picture",Q24887738:"motion_picture",Q28735856:"motion_picture",Q29017630:"motion_picture",Q30070675:"motion_picture",Q30897819:"motion_picture",Q33373157:"motion_picture",Q43079104:"motion_picture",Q54086290:"motion_picture",Q54344007:"motion_picture",Q56192069:"motion_picture",Q58415294:"motion_picture",Q58903570:"motion_picture",Q61283808:"motion_picture",Q219557:"motion_picture",Q226730:"motion_picture",Q24865:"motion_picture",Q24869:"motion_picture",Q31235:"motion_picture",Q3956596:"book",Q20012720:"book",Q27070652:"book",Q738826:"speech",Q2623953:"speech",Q2781658:"speech",Q3479856:"speech",Q7454995:"speech",Q735478:"motion_picture",Q124922:"motion_picture",Q472637:"motion_picture",Q1092621:"motion_picture",Q1323308:"motion_picture",Q1352102:"motion_picture",Q1464369:"motion_picture",Q1474387:"motion_picture",Q1480924:"motion_picture",Q1760864:"motion_picture",Q1800833:"motion_picture",Q2084909:"motion_picture",Q27697957:"motion_picture",Q2670855:"motion_picture",Q3566966:"motion_picture",Q4765076:"motion_picture",Q20732395:"motion_picture",Q1684595:"dataset",Q7168625:"motion_picture",Q8192124:"motion_picture",Q5008290:"dataset",Q220399:"dataset",Q285745:"dataset",Q542475:"motion_picture",Q846544:"motion_picture",Q3072039:"motion_picture",Q23739:"broadcast",Q338632:"broadcast",Q288608:"broadcast",Q3421644:"broadcast",Q5465514:"broadcast",Q5812300:"broadcast",Q18340550:"webpage",Q21232614:"broadcast",Q1224870:"dataset",Q79715:"broadcast",Q278425:"dataset",Q548206:"motion_picture",Q632149:"motion_picture",Q996838:"motion_picture",Q1147986:"motion_picture",Q2258523:"map",Q2514870:"dataset",Q2559958:"broadcast",Q4342538:"map",Q15518544:"broadcast",Q15518777:"broadcast",Q20707560:"dataset",Q20871935:"motion_picture",Q55960075:"motion_picture",Q1224984:"dataset",Q5227308:"dataset",Q12328550:"dataset",Q20089094:"motion_picture",Q21040941:"dataset",Q668312:"motion_picture",Q30047053:"dataset",Q18493502:"legal_case",Q1067692:"motion_picture",Q18655723:"motion_picture",Q844993:"song",Q4763437:"book",Q19894488:"book",Q262533:"speech",Q591055:"speech",Q1851305:"speech",Q3588034:"speech",Q20669604:"speech",Q29642901:"dataset",Q1061420:"map",Q2914518:"map",Q186286:"broadcast",Q940462:"broadcast",Q15823625:"map",Q54328426:"broadcast",Q1713326:"motion_picture",Q4453959:"motion_picture",Q5905221:"musical_score",Q23368955:"motion_picture",Q55848868:"motion_picture",Q3072024:"motion_picture",Q965136:"map",Q3546572:"broadcast",Q5449041:"motion_picture",Q6645282:"broadcast",Q25360500:"broadcast",Q376820:"dataset",Q2422383:"dataset",Q14552560:"article-newspaper",Q219897:"dataset",Q787397:"map",Q14943256:"book",Q15715669:"map",Q3196335:"book",Q4700148:"book",Q11669289:"map",Q56683168:"map",Q6749508:"dataset",Q13039854:"dataset",Q19354904:"legal_case",Q25917154:"legal_case",Q25456031:"dataset",Q47484674:"dataset",Q948454:"dataset",Q1734165:"dataset",Q5441632:"book",Q7321644:"book",Q7890265:"book",Q28406796:"dataset",Q46130774:"dataset",Q54820068:"book",Q17146139:"map",Q23691:"song",Q54251760:"motion_picture",Q851995:"map",Q25336664:"dataset",Q11310550:"dataset",Q18086661:"dataset",Q18086666:"dataset",Q18086667:"dataset",Q18086665:"dataset",Q18086671:"dataset",Q18089574:"dataset",Q18089575:"dataset",Q18099930:"dataset",Q18100125:"dataset",Q18889352:"dataset",Q18922463:"dataset",Q20005020:"dataset",Q798134:"thesis",Q1414362:"thesis",Q30749496:"thesis",Q46629343:"thesis",Q51282441:"thesis",Q52823264:"thesis",Q58210330:"thesis",Q1907875:"thesis",Q23745:"broadcast",Q399811:"broadcast",Q775344:"broadcast",Q1658957:"broadcast",Q1786567:"broadcast",Q4783297:"broadcast",Q5219865:"broadcast",Q7185299:"broadcast",Q7731786:"broadcast",Q7892363:"broadcast",Q11086745:"broadcast",Q20986817:"broadcast",Q60393504:"broadcast",Q16342:"dataset",Q632285:"dataset",Q1751819:"dataset",Q2560532:"dataset",Q6517465:"dataset",Q1898445:"map",Q41436524:"book",Q50310598:"dataset",Q5366501:"broadcast",Q9018710:"broadcast",Q11935070:"broadcast",Q688869:"manuscript",Q962741:"manuscript",Q7797194:"dataset",Q1662452:"motion_picture",Q4499034:"song",Q6009879:"book",Q595801:"book",Q894351:"map",Q1352815:"broadcast",Q1569955:"dataset",Q2538131:"book",Q3348148:"dataset",Q5535082:"dataset",Q7574095:"dataset",Q47214765:"broadcast",Q61990518:"broadcast",Q2933978:"broadcast",Q6537693:"dataset",Q6888313:"book",Q12270042:"book",Q21292860:"broadcast",Q350514:"map",Q357674:"map",Q5191437:"dataset",Q24265951:"dataset",Q25110971:"book",Q29966258:"dataset",Q25894883:"dataset",Q2093973:"book",Q1711400:"broadcast",Q3071014:"broadcast",Q61029068:"webpage",Q61996773:"webpage",Q175902:"dataset",Q1295532:"webpage",Q1474116:"webpage",Q1501313:"dataset",Q1916557:"dataset",Q5333554:"dataset",Q7247749:"dataset",Q4330198:"dataset",Q5570651:"dataset",Q7251500:"dataset",Q7277178:"dataset",Q7689673:"dataset",Q15407973:"webpage",Q15647814:"webpage",Q16335141:"dataset",Q18392279:"dataset",Q15623926:"webpage",Q22808320:"webpage",Q24571879:"webpage",Q24574745:"webpage",Q17362920:"webpage",Q28065731:"webpage",Q28208970:"dataset",Q30432511:"webpage",Q54662266:"webpage",Q56428020:"webpage",Q58036154:"webpage",Q58181524:"webpage",Q58423626:"webpage",Q59541917:"webpage",Q59542487:"webpage",Q5227321:"dataset",Q178840:"broadcast",Q482612:"broadcast",Q662197:"broadcast",Q1054760:"broadcast",Q1273568:"broadcast",Q1676730:"broadcast",Q1802588:"broadcast",Q2388283:"broadcast",Q3189895:"broadcast",Q3951815:"broadcast",Q5778915:"broadcast",Q7050677:"broadcast",Q7135559:"broadcast",Q9335577:"broadcast",Q9671105:"broadcast",Q20061443:"broadcast",Q20220309:"broadcast",Q20267837:"broadcast",Q21233490:"broadcast",Q21191068:"broadcast",Q27868077:"broadcast",Q30939244:"broadcast",Q55082620:"broadcast",Q56320653:"broadcast",Q45787211:"dataset",Q1799894:"broadcast",Q19220511:"dataset",Q7841716:"motion_picture",Q5987970:"book",Q7864671:"motion_picture",Q21504449:"broadcast",Q61896850:"motion_picture",Q61911910:"motion_picture",Q15184295:"webpage",Q29581299:"book",Q3507630:"dataset",Q5571730:"webpage",Q13231199:"webpage",Q15851373:"webpage",Q19692233:"webpage",Q2921195:"book",Q20009925:"webpage",Q21167233:"webpage",Q25456482:"webpage",Q26884324:"webpage",Q28197061:"webpage",Q30032916:"webpage",Q33532284:"webpage",Q37152856:"webpage",Q19887878:"webpage",Q30044873:"report",Q11664270:"broadcast",Q1852859:"map",Q2297927:"motion_picture",Q2188827:"manuscript",Q4922471:"broadcast",Q16247289:"broadcast",Q25381170:"book",Q25696292:"dataset",Q11398:"dataset",Q210918:"dataset",Q267474:"dataset",Q1062352:"dataset",Q548492:"dataset",Q732744:"dataset",Q1520859:"dataset",Q1744559:"dataset",Q2748242:"dataset",Q3445240:"dataset",Q3518464:"dataset",Q3546241:"dataset",Q5172500:"dataset",Q6857882:"dataset",Q7398671:"dataset",Q22808060:"song",Q22298551:"dataset",Q22935148:"dataset",Q23014490:"dataset",Q23015153:"dataset",Q185867:"motion_picture",Q192625:"dataset",Q784969:"dataset",Q917904:"dataset",Q3546232:"dataset",Q4382932:"dataset",Q2357684:"dataset",Q2490652:"dataset",Q562667:"treaty",Q11510761:"treaty",Q39234115:"treaty",Q39235586:"treaty",Q39236188:"treaty",Q39236506:"treaty",Q39237589:"treaty",Q691836:"dataset",Q2299775:"dataset",Q2584888:"dataset",Q934210:"dataset",Q16355541:"dataset",Q57560929:"song",Q59826893:"dataset",Q478216:"dataset",Q1138178:"dataset",Q2621880:"dataset",Q2859969:"dataset",Q2964498:"dataset",Q4223049:"dataset",Q4421014:"dataset",Q16549505:"dataset",Q21441341:"dataset",Q26975748:"dataset",Q5366097:"motion_picture",Q1137588:"song",Q6022825:"broadcast",Q15977715:"broadcast",Q24906243:"broadcast",Q471839:"motion_picture",Q1794431:"motion_picture",Q3080071:"broadcast",Q6942568:"motion_picture",Q11900986:"motion_picture",Q16677772:"motion_picture",Q17517379:"motion_picture",Q20667187:"motion_picture",Q29168811:"motion_picture",Q34487266:"broadcast",Q47486001:"motion_picture",Q57780531:"motion_picture",Q223770:"motion_picture",Q4836991:"motion_picture",Q212781:"motion_picture",Q41270:"song",Q383904:"song",Q564848:"song",Q721644:"song",Q5158512:"song",Q6037387:"song",Q3962943:"motion_picture",Q21759196:"motion_picture",Q60630702:"motion_picture",Q222639:"motion_picture",Q1033891:"motion_picture",Q1535153:"motion_picture",Q1740789:"motion_picture",Q1776156:"motion_picture",Q1894374:"motion_picture",Q2421031:"motion_picture",Q332564:"motion_picture",Q853630:"motion_picture",Q909586:"motion_picture",Q987831:"motion_picture",Q1341051:"motion_picture",Q1342372:"motion_picture",Q1696148:"motion_picture",Q2584671:"motion_picture",Q4174664:"motion_picture",Q883179:"motion_picture",Q4925568:"motion_picture",Q5551875:"motion_picture",Q13377551:"motion_picture",Q16247268:"motion_picture",Q18089587:"motion_picture",Q18355406:"motion_picture",Q18648407:"motion_picture",Q4840473:"motion_picture",Q20656232:"motion_picture",Q23044991:"motion_picture",Q25110269:"motion_picture",Q27959357:"motion_picture",Q28968258:"motion_picture",Q28968511:"motion_picture",Q43911809:"motion_picture",Q1276148:"dataset",Q3546236:"dataset",Q819652:"motion_picture",Q1433443:"motion_picture",Q2096633:"motion_picture",Q10654943:"motion_picture",Q15898171:"motion_picture",Q1502766:"motion_picture",Q22981906:"motion_picture",Q33218678:"dataset",Q33219080:"dataset",Q1502102:"dataset",Q290066:"dataset",Q21473954:"dataset",Q884257:"map",Q1136047:"song",Q3442060:"motion_picture",Q6722594:"motion_picture",Q22802898:"dataset",Q1147354:"song",Q541947:"song",Q762917:"song",Q896981:"song",Q1329536:"song",Q1523875:"song",Q1802243:"song",Q4666464:"song",Q5419334:"song",Q5956747:"song",Q5956766:"song",Q10288496:"song",Q13142456:"song",Q54932319:"broadcast",Q16523070:"book",Q1345076:"dataset",Q1331138:"dataset",Q4984974:"motion_picture",Q5442753:"motion_picture",Q59688552:"motion_picture",Q1030329:"motion_picture",Q2560052:"motion_picture",Q50306849:"dataset",Q9351310:"dataset",Q17093751:"motion_picture",Q55616422:"motion_picture",Q5400070:"motion_picture",Q7097859:"motion_picture",Q2518205:"motion_picture",Q39774781:"song",Q40039114:"song",Q496523:"motion_picture",Q586250:"motion_picture",Q658334:"song",Q1206090:"song",Q2642760:"motion_picture",Q2956178:"song",Q3656521:"song",Q4184716:"song",Q4400497:"song",Q5897543:"motion_picture",Q10743749:"song",Q11989328:"song",Q12623540:"song",Q19367312:"motion_picture",Q47011432:"broadcast",Q61057707:"broadcast",Q1192644:"broadcast",Q1193356:"broadcast",Q1193877:"broadcast",Q1193889:"broadcast",Q1198546:"broadcast",Q1200102:"broadcast",Q1200891:"broadcast",Q1203502:"broadcast",Q1328971:"broadcast",Q15548228:"broadcast",Q18611586:"broadcast",Q27986339:"broadcast",Q16984663:"motion_picture",Q535518:"motion_picture",Q583768:"motion_picture",Q1377546:"motion_picture",Q2254193:"motion_picture",Q2292320:"motion_picture",Q3677202:"motion_picture",Q4044177:"motion_picture",Q4075563:"motion_picture",Q731194:"motion_picture",Q5578091:"motion_picture",Q5768328:"motion_picture",Q6926334:"motion_picture",Q7116678:"motion_picture",Q2527949:"dataset",Q6410349:"song",Q58006100:"dataset",Q1065413:"dataset",Q1334294:"dataset",Q5281480:"dataset",Q14806579:"dataset",Q21629439:"broadcast",Q27965091:"broadcast",Q27965088:"broadcast",Q27965089:"broadcast",Q1117103:"motion_picture",Q15077373:"song",Q21848887:"song",Q42525933:"song",Q1246452:"song",Q1564657:"song",Q1786016:"song",Q4138449:"song",Q26211803:"dataset",Q28107644:"dataset",Q438958:"dataset",Q893182:"dataset",Q1361620:"dataset",Q1744558:"dataset",Q2558761:"broadcast",Q3663344:"dataset",Q5837451:"dataset",Q17080472:"dataset",Q18762344:"dataset",Q22936940:"dataset",Q51282626:"thesis",Q51283070:"thesis",Q51283092:"thesis",Q51283110:"thesis",Q51283164:"thesis",Q51283181:"thesis",Q51283199:"thesis",Q51283219:"thesis",Q51283231:"thesis",Q51283362:"thesis",Q1789476:"dataset",Q1741854:"broadcast",Q11396323:"motion_picture",Q1428162:"song",Q4440575:"song",Q2137852:"motion_picture",Q20443008:"motion_picture",Q9049284:"song",Q2976573:"dataset",Q7247163:"dataset",Q18327786:"dataset",Q18327800:"dataset",Q28444881:"song",Q47009776:"motion_picture",Q4078107:"song",Q12242979:"broadcast",Q1308255:"dataset",Q828962:"dataset",Q2976602:"dataset",Q881912:"broadcast",Q16861376:"dataset",Q59784758:"broadcast",Q829147:"song",Q6457531:"motion_picture",Q28030321:"broadcast",Q28225717:"broadcast",Q4663261:"webpage",Q15145755:"webpage",Q18707678:"webpage",Q18711811:"webpage",Q20160182:"webpage",Q20870830:"webpage",Q22676729:"webpage",Q26214208:"webpage",Q28801937:"webpage",Q30279428:"webpage",Q55510433:"webpage",Q59259626:"webpage",Q20769287:"webpage",Q23894233:"webpage",Q24046192:"webpage",Q24514938:"webpage",Q30330522:"webpage",Q38084761:"webpage",Q58118449:"webpage",Q2886579:"dataset",Q21623879:"webpage",Q28092864:"webpage",Q52147067:"webpage",Q18043430:"webpage",Q18810260:"dataset",Q18889371:"dataset",Q18889411:"dataset",Q20893947:"legal_case",Q43096126:"motion_picture",Q56876503:"webpage",Q58408484:"webpage",Q58492747:"webpage",Q61984657:"webpage",Q3309896:"motion_picture",Q5864844:"motion_picture",Q6190581:"webpage",Q25826840:"webpage",Q220898:"motion_picture",Q2513417:"dataset",Q56885002:"webpage",Q179600:"dataset",Q714750:"dataset",Q15101896:"dataset",Q56558180:"song",Q845648:"webpage",Q58310010:"book",Q16937368:"song",Q28135297:"song",Q50309914:"dataset",Q57560968:"song",Q61740934:"song",Q61729725:"song",Q1047299:"motion_picture",Q2281511:"motion_picture",Q4292083:"motion_picture",Q11446446:"motion_picture",Q11464558:"motion_picture",Q11620244:"motion_picture",Q11673786:"motion_picture",Q16000226:"motion_picture",Q43069510:"motion_picture",Q8066387:"motion_picture",Q16824564:"motion_picture",Q52631698:"song",Q20589414:"song",Q20621902:"song",Q19659229:"song",Q2997685:"song",Q5124548:"song",Q512410:"song",Q23978249:"song",Q6647160:"webpage",Q18170752:"song",Q5881246:"song",Q1723850:"motion_picture",Q169672:"motion_picture",Q622310:"motion_picture",Q3072042:"motion_picture",Q5104880:"motion_picture",Q193605:"song",Q20818018:"dataset",Q1065444:"motion_picture",Q5258881:"motion_picture",Q856638:"dataset",Q5769583:"motion_picture",Q5769580:"motion_picture",Q5769586:"motion_picture",Q5769589:"motion_picture",Q5769592:"motion_picture",Q34848596:"motion_picture",Q2145099:"motion_picture",Q43082648:"broadcast",Q21441352:"dataset",Q2976563:"dataset",Q4680764:"dataset",Q4936202:"dataset",Q4992609:"dataset",Q5281190:"dataset",Q5281191:"dataset",Q5281189:"dataset",Q5281192:"dataset",Q5281193:"dataset",Q5465786:"dataset",Q5575198:"dataset",Q7133628:"dataset",Q7133619:"dataset",Q7133626:"dataset",Q7133625:"dataset",Q7133631:"dataset",Q7133632:"dataset",Q7133633:"dataset",Q7135076:"dataset",Q7136196:"dataset",Q7532102:"dataset",Q7539622:"dataset",Q7539620:"dataset",Q7992082:"dataset",Q7992083:"dataset",Q7992119:"dataset",Q7992116:"dataset",Q7992128:"dataset",Q7992164:"dataset",Q17145514:"dataset",Q28130146:"dataset",Q28130147:"dataset",Q28130145:"dataset",Q28134034:"dataset",Q28134060:"dataset",Q28134100:"dataset",Q28134126:"dataset",Q4179738:"song",Q26829682:"webpage",Q22870229:"webpage",Q22875692:"webpage",Q22876063:"webpage",Q22876332:"webpage",Q25737003:"webpage",Q25830508:"webpage",Q57971242:"webpage",Q5611964:"webpage",Q5613278:"webpage",Q5615491:"webpage",Q5618337:"webpage",Q5620523:"webpage",Q5621344:"webpage",Q5622928:"webpage",Q5624848:"webpage",Q5626725:"webpage",Q5636579:"webpage",Q5827463:"webpage",Q5904431:"webpage",Q5911510:"webpage",Q6072180:"webpage",Q6232685:"webpage",Q6305829:"webpage",Q6372354:"webpage",Q6419146:"webpage",Q6499145:"webpage",Q6584170:"webpage",Q6584434:"webpage",Q6606549:"webpage",Q6622740:"webpage",Q6632234:"webpage",Q7241821:"webpage",Q7485705:"webpage",Q8784047:"webpage",Q10560362:"webpage",Q10584970:"webpage",Q10712699:"webpage",Q10730006:"webpage",Q10805463:"webpage",Q10992965:"webpage",Q11011669:"webpage",Q11052053:"webpage",Q11223110:"webpage",Q11839555:"webpage",Q12930680:"webpage",Q13383621:"webpage",Q13394564:"webpage",Q13492790:"webpage",Q13512760:"webpage",Q13763959:"webpage",Q14335223:"webpage",Q14336297:"webpage",Q14336339:"webpage",Q14358273:"webpage",Q14358335:"webpage",Q14358826:"webpage",Q14358898:"webpage",Q14358899:"webpage",Q14396951:"webpage",Q14404469:"webpage",Q14445515:"webpage",Q22867433:"webpage",Q15709178:"webpage",Q17615621:"webpage",Q18340985:"webpage",Q18881752:"webpage",Q22668105:"webpage",Q22706969:"webpage",Q22830149:"webpage",Q22834716:"webpage",Q22834726:"webpage",Q22838914:"webpage",Q22844738:"webpage",Q22846593:"webpage",Q22846942:"webpage",Q22846954:"webpage",Q22846964:"webpage",Q22858302:"webpage",Q22862005:"webpage",Q22867722:"webpage",Q22869003:"webpage",Q33130924:"motion_picture",Q30415057:"webpage",Q55648788:"webpage",Q4663903:"webpage",Q21528878:"webpage",Q22247630:"webpage",Q249083:"dataset",Q1750705:"dataset",Q955185:"dataset",Q1326107:"dataset",Q1520639:"dataset",Q2943040:"dataset",Q6404298:"dataset",Q7248117:"dataset",Q7674850:"dataset",Q29057009:"webpage",Q35250433:"webpage",Q35779580:"webpage",Q47382471:"webpage",Q47524402:"webpage",Q54734643:"webpage",Q58573615:"webpage",Q61866692:"webpage",Q8615872:"webpage",Q21286738:"webpage",Q21469493:"webpage",Q21479588:"webpage",Q23841178:"webpage",Q24571886:"webpage",Q26211786:"dataset",Q28368760:"webpage",Q28373483:"webpage",Q849666:"motion_picture",Q18089617:"motion_picture",Q18889701:"dataset",Q20010800:"webpage",Q163126:"dataset",Q1967745:"dataset",Q2122972:"dataset",Q2565860:"dataset",Q3516420:"dataset",Q13331174:"webpage",Q15088954:"dataset",Q15885744:"dataset",Q16069643:"dataset",Q17146890:"dataset",Q18435139:"dataset",Q20107258:"dataset",Q23894246:"webpage",Q57733325:"dataset",Q17175676:"motion_picture",Q26196748:"motion_picture",Q21484471:"webpage",Q265147:"song",Q56558213:"song",Q627181:"song",Q1151259:"song",Q7023411:"song",Q190635:"dataset",Q526334:"dataset",Q1982918:"dataset",Q2362354:"dataset",Q22842824:"webpage",Q3129804:"motion_picture",Q22677515:"webpage",Q48552277:"webpage",Q56876519:"webpage",Q11753321:"webpage",Q15671253:"webpage",Q20769160:"webpage",Q24731821:"webpage",Q26142649:"webpage",Q36330215:"webpage",Q6306272:"webpage",Q14385296:"webpage",Q14403646:"webpage",Q20107493:"dataset",Q20743001:"webpage",Q14460829:"webpage",Q11643859:"song",Q16141944:"song",Q17990546:"song",Q20043946:"song",Q44292661:"webpage",Q29075123:"webpage",Q40218570:"webpage",Q910144:"dataset",Q5622823:"webpage",Q13565583:"webpage",Q19648608:"webpage",Q19915239:"dataset",Q21278897:"webpage",Q21441359:"dataset",Q21441363:"dataset",Q23841351:"webpage",Q26932615:"webpage",Q26961029:"webpage",Q27949687:"webpage",Q27949697:"webpage",Q28858528:"webpage",Q29075121:"webpage",Q922853:"song",Q3879286:"song",Q3368338:"dataset",Q10997407:"webpage",Q19842659:"webpage",Q56062113:"webpage"});function gh(e){return e&&e.__esModule?e:{default:e}}const bh=({P1545:e})=>e?parseInt(e[0]):-1,yh=({value:e,qualifiers:t})=>{let[i]=(e=>[].concat(...[e.P1932,e.P1810].filter(Boolean)))(t);return i||(i="string"==typeof e?e:Th(e)),(i=i?(0,Dr.parse)(i):{literal:i})._ordinal=bh(t),i},vh=e=>e.map(yh).sort((e,t)=>e._ordinal-t._ordinal),_h=e=>{const t=e.claims.P17[0].value,i=t.claims.P1813.filter(({qualifiers:{P31:e}})=>!e||"Q28840786"!==e[0]);return Th(e)+", "+(i[0]||t.claims.P1448[0]).value},xh=e=>e.claims.P1476?e.claims.P1476[0].value:Th(e),wh=e=>e.map(({value:e})=>Th(e)).join(","),Eh=e=>({"date-parts":e.map(e=>(0,Sn.parse)(e.value)).filter(e=>e&&e["date-parts"]).map(e=>e["date-parts"][0])});function Ah(e){return dh.default[e]?dh.default[e]:(Wa.logger.unmapped("[plugin-wikidata]","publication type",e),"book")}function Th(e){if(!e)return;const t=fh.default.langs.find(t=>e.labels[t]);return e.labels[t]}var Sh={props:{author:{values:"all",props:["P50","P2093"]},composer:{values:"all",props:["P86"]},"collection-editor":{values:"all",props:["P179.P98"]},"collection-number":{values:"all",props:["P179"]},"collection-title":"P179","container-author":{values:"all",props:["P1433.P50","P1433.P2093","P361.P50","P361.P2093"]},"container-title":{values:"any",props:["P1433","P361"]},"container-title-short":{values:"any",props:["P1433.P1813","P1433.P1160"]},director:{values:"all",props:["P57"]},DOI:"P356",edition:"P393",editor:{values:"all",props:["P98"]},event:"P1433.P4745","event-date":{values:"all",props:["P1433.P4745.P580","P1433.P4745.P582"]},"event-place":"P1433.P4745.P276",illustrator:{values:"all",props:["P110"]},ISBN:{values:"any",props:["P212","P957"]},ISSN:"P1433.P236",issue:"P433",issued:"P577",journalAbbreviation:{values:"any",props:["P1433.P1813","P1433.P1160"]},keyword:{values:"all",props:["P921"]},language:{values:"any",props:["P407.P218","P364.P218"]},medium:{values:"any",props:["P437","P186"]},"number-of-pages":"P1104","number-of-volumes":{values:"all",props:["P179.P527"]},"original-author":{values:"all",props:["P629.P50","P629.P2093"]},"original-date":"P629.P577","original-publisher":"P629.P123","original-publisher-place":{values:"any",props:["P629.P123.P740","P629.P123.P159"]},"original-title":"P629.P1476",page:"P304",PMID:"P698",PMCID:"P932",publisher:"P123","publisher-place":{values:"any",props:["P123.P740","P123.P159"]},recipient:{values:"all",props:["P1817"]},"reviewed-title":"P921.P1476","reviewed-author":{values:"all",props:["P921.P50","P921.P2093"]},scale:"P1752",title:"P1476",translator:{values:"all",props:["P655"]},type:"P31",version:"P348",volume:"P478",URL:{values:"any",props:["P856","P953","P973","P2699"]}},ignoredProps:{P2860:"Cites",P921:"Main subject",P3181:"OpenCitations bibliographic resource ID",P364:"Original language of work"}},Oh={};Object.defineProperty(Oh,"__esModule",{value:!0}),Oh.parseEntity=Ih,Oh.parseAsync=Oh.parseEntitiesAsync=async function({entities:e}){return(await Qh.parseAsync(e)).map(Ih)},Oh.default=Oh.parse=Oh.parseEntities=function({entities:e}){return Qh.parse(e).map(Ih)};var Qh=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,t&&t.set(e,i),i}(Xp);function kh(e,t,i){const r=e.split(".");return i.delete(r[0]),function e([t,...i],{claims:r}){return i.length?r[t]&&r[t].length?e(i,r[t][0].value):void 0:r[t]}(r,t)}function Ch(e,t,i){if("object"!=typeof e){const r=kh(e,t,i);return r&&r[0].value}const r=[].concat(...e.props.map(e=>kh(e,t,i)).filter(Boolean));return"all"===e.values?r[0]&&r:r[0]&&r[0].value}function Ih(e){const t={id:e.id,_wikiId:e.id,source:"Wikidata"},i=new Set(Object.keys(e.claims));for(const r in Sh.props){const s=Ch(Sh.props[r],e,i);if(s){const i=(0,mh.parseProp)(r,s,e);i&&(t[r]=i)}}for(const r of i)r in Sh.ignoredProps||Wa.logger.unmapped("[plugin-wikidata]","property",r);return t.title||(t.title=(0,mh.getLabel)(e)),(t["reviewed-title"]||t["reviewed-author"])&&("review"!==t.type.slice(0,6)&&(t.type="review"),delete t.keyword),t.recipient&&(t.type="personal_communication"),t.event&&(t.type="paper-conference"),t}var Nh={};Object.defineProperty(Nh,"__esModule",{value:!0}),Nh.parse=void 0,Nh.parse=e=>e.match(/\/(Q\d+)(?:[#?/]|\s*$)/)[1];var Rh={};Object.defineProperty(Rh,"__esModule",{value:!0}),Rh.formats=Rh.parsers=Rh.ref=void 0;var Ph,Dh=Gh(zp),jh=Gh(Oh),Lh=Gh(mh),Mh=Gh(Nh),Bh=Gh($p),Uh=(Ph=qp)&&Ph.__esModule?Ph:{default:Ph};function Fh(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return Fh=function(){return e},e}function Gh(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=Fh();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,t&&t.set(e,i),i}Rh.ref="@wikidata";const qh={id:Dh,entity:jh,prop:Lh,url:Mh,api:Bh};Rh.parsers=qh;const zh={"@wikidata/id":{parse:Dh.parse,parseType:{dataType:"String",predicate:/^Q\d+$/}},"@wikidata/list+text":{parse:e=>e.trim().split(/(?:[\s,]\s*)/g),parseType:{dataType:"String",predicate:/^\s*((?:Q\d+(?:[\s,]\s*))*Q\d+)\s*$/}},"@wikidata/api":{parse:Bh.parse,parseAsync:Bh.parseAsync,parseType:{dataType:"String",predicate:/^(https?:\/\/(?:www\.)?wikidata.org\/w\/api\.php(?:\?.*)?)$/,extends:"@else/url"}},"@wikidata/array+api":{parse:Bh.parse,parseAsync:Bh.parseAsync,parseType:{dataType:"Array",elementConstraint:"@wikidata/api"}},"@wikidata/url":{parse:Mh.parse,parseType:{dataType:"String",predicate:/\/(Q\d+)(?:[#?/]|\s*$)/,extends:"@else/url"}},"@wikidata/list+object":{parse:Dh.parse,parseType:{dataType:"Array",elementConstraint:"@wikidata/id"}},"@wikidata/object":{parse:jh.parse,parseAsync:jh.parseAsync,parseType:{dataType:"SimpleObject",propertyConstraint:{props:"entities"}}},"@wikidata/array+object":{parse:e=>e.reduce((e,{success:t,entities:i})=>(e.success&=t,Object.assign(e.entities,i),e),{}),parseType:{dataType:"Array",elementConstraint:"@wikidata/object"},outputs:"@wikidata/object"},"@wikidata/prop":{parse:Lh.parseProp},"@wikidata/type":{parse:Lh.parseType}};Rh.formats=zh,Wa.plugins.add("@wikidata",{input:zh,config:Uh.default});var Vh={};const Hh={getAttributedEntry:(e,t,i)=>e.replace(/^\s*<[a-z]+/i,`$& data-${t}="${i}"`),getPrefixedEntry:(e,t)=>Hh.getAttributedEntry(e,"csl-entry-id",t),getWrappedEntry(e,t,i){const r=(e,t)=>"function"==typeof t?t(e):null==t?t:"";if(null==i.prepend&&null==i.append)return e;const s=r(t,i.prepend),a=r(t,i.append);let n="",o="";const l=e.match(/^([^>]+>)([\s\S]+)(<[^<]+)$/i);return l&&(n=l[1],e=l[2],o=l[3]),n+s+e+a+o}};function Wh(e,t){if(!(this instanceof Wh))return new Wh(e,t);var i=new Wa.Cite(e,t);this._options=i._options,this.log=i.log,this.data=i.data}Wh.prototype=Object.create(Wa.Cite.prototype),Wh.async=Wa.Cite.async,Wh.validateOptions=Wa.Cite.validateOptions,Wh.validateOutputOptions=Wa.Cite.validateOutputOptions,Wh.input=Wa.plugins.input.chain,Wh.inputAsync=Wa.plugins.input.chainAsync,Wh.util=Object.assign({attr:Hh},Wa.util),Wh.version={cite:Wa.version,citeproc:Fo.PROCESSOR_VERSION};const $h=Wa.plugins.config.get("@csl");var Yh,Jh,Xh;Wh.CSL={engine:Zo.fetchEngine,item:e=>t=>e.find(e=>e.id===t),locale:e=>$h.styles.get($h.styles.has(e)?e:"en-US"),style:e=>$h.templates.get($h.templates.has(e)?e:"apa"),register:{addTemplate:$h.templates.add.bind($h.templates),getTemplate:$h.templates.get.bind($h.templates),hasTemplate:$h.templates.has.bind($h.templates),addLocale:$h.locales.add.bind($h.locales),getLocale:$h.locales.get.bind($h.locales),hasLocale:$h.locales.has.bind($h.locales)}},Wh.plugins=function e(t){const i={};for(const r in t)i[r]="object"==typeof t[r]?e(t[r]):t[r];return i}(Wa.plugins),delete Wh.plugins.input.util.clean,Wh.parse=Object.assign({input:{chain:Wa.plugins.input.chain,chainAsync:Wa.plugins.input.chainAsync,chainLink:Wa.plugins.input.chainLink,chainLinkAsync:Wa.plugins.input.chainLinkAsync,data:Wa.plugins.input.data,dataAsync:Wa.plugins.input.dataAsync,type:Wa.plugins.input.type,async:{chain:Wa.plugins.input.chainAsync,chainLink:Wa.plugins.input.chainLinkAsync,data:Wa.plugins.input.dataAsync}},name:Dr.parse,date:Sn.parse,csl:Wa.plugins.input.util.clean,bibjson:cu.parsers.json.record,bibtex:(Xh=Wn,{json:Xh.parsers.json.parse,prop:Xh.parsers.prop.parse,text:Xh.parsers.text.parse,type:Xh.parsers.type.parse}),bibtxt:(e=>({text:e.parse,textEntry:e.textEntry}))(Fn),doi:(Jh=Ou,{api:Jh.parsers.api.parse,id:Jh.parsers.id.parse,async:{api:Jh.parsers.api.parseAsync}}),json:ba.parsers.json.parse,wikidata:(Yh=Rh,{json:Yh.parsers.entity.parse,list:Yh.parsers.id.parse,prop:Yh.parsers.prop.parse,type:Yh.parsers.prop.parseType,async:{json:Yh.parsers.entity.parseAsync,prop(...e){return Promise.resolve(Yh.parsers.prop.parse.apply(this,e))}}})},Wh.plugins.input),Wh.get=Object.assign({dict:Wh.plugins.dict,name:Dr.format,date:Sn.format,bibtex:{json:lo.default,label:ao.default,text:mo.default,type:ro.default},bibtxt:wo.default,json:Ba.default.data,label:Ba.default.label},Wh.plugins.output),Vh=Wh;var Kh=[{id:"brooksTelAvivCluster2010",accessed:{"date-parts":[[2020,10,22]]},author:[{family:"Brooks",given:"David"}],"container-title":"The New York Times",ISSN:"0362-4331",issued:{"date-parts":[[2010,1,11]]},language:"en-US",section:"Opinion",source:"NYTimes.com",title:"The Tel Aviv Cluster",type:"article-newspaper",URL:"https://www.nytimes.com/2010/01/12/opinion/12brooks.html"},{id:"chouCritiqueNotionModel2008",accessed:{"date-parts":[[2020,12,10]]},author:[{family:"Chou",given:"Chih-Chieh"}],"container-title":"Asian Ethnicity","container-title-short":"Asian Ethnicity",DOI:"10.1080/14631360802349239",ISSN:"1463-1369, 1469-2953",issue:"3",issued:{"date-parts":[[2008,10]]},language:"en",page:"219-229",source:"DOI.org (Crossref)",title:"Critique on the notion of model minority: an alternative racism to Asian American?","title-short":"Critique on the notion of model minority",type:"article-journal",URL:"http://www.tandfonline.com/doi/abs/10.1080/14631360802349239",volume:"9"},{id:"cornellThatStoryOur2000",author:[{family:"Cornell",given:"Stephen"}],"container-title":"We Are a People: narrative and multiplicity in constructing ethnic identity",editor:[{family:"Spickard",given:"Paul"},{family:"Burroughs",given:"W Jeffrey"}],"event-place":"Philadelphia",issued:{"date-parts":[[2e3]]},page:"41-53",publisher:"Temple University Press","publisher-place":"Philadelphia",title:"That's the Story of Our Life",type:"chapter"},{id:"ellen2020",author:[{family:"",given:"Ellen"}],interviewer:[{family:"Graber-Mitchell",given:"Cole"}],issued:{"date-parts":[[2020,11,1]]},type:"interview",URL:"https://momi.cgm616.me/transcripts/ellen/"},{id:"foxJewishGeneticPotency2020",accessed:{"date-parts":[[2020,12,9]]},author:[{family:"Fox",given:"Dory"}],"container-title":"American Jewish History","container-title-short":"American Jewish History",DOI:"10.1353/ajh.2020.0014",ISSN:"1086-3141",issue:"1",issued:{"date-parts":[[2020]]},language:"en",page:"59-86",source:"DOI.org (Crossref)",title:"Jewish Genetic Potency: The Meaning of Jewish Ancestry in the 21st-Century United States","title-short":"Jewish Genetic Potency",type:"article-journal",URL:"https://muse.jhu.edu/article/755260",volume:"104"},{id:"gabe2020",author:[{family:"",given:"Gabe"}],interviewer:[{family:"Graber-Mitchell",given:"Cole"}],issued:{"date-parts":[[2020,11,13]]},type:"interview",URL:"https://momi.cgm616.me/transcripts/gabe/"},{id:"gansAmericanJewryPresent1956",accessed:{"date-parts":[[2020,10,21]]},author:[{family:"Gans",given:"Herbert J."}],"container-title":"Commentary Magazine",issued:{"date-parts":[[1956,5,1]]},language:"en-US",title:"American Jewry, Present and Future: Part I: Present","title-short":"American Jewry, Present and Future",type:"article-magazine",URL:"https://www.commentarymagazine.com/articles/herbert-gans/american-jewry-present-and-future-part-i-present/"},{id:"glennBloodConsentDescent2002",accessed:{"date-parts":[[2020,12,9]]},author:[{family:"Glenn",given:"Susan A."}],"container-title":"Jewish Social Studies","container-title-short":"Jewish Social Studies",DOI:"10.1353/jss.2002.0006",ISSN:"1527-2028",issue:"2",issued:{"date-parts":[[2002]]},language:"en",page:"139-152",source:"DOI.org (Crossref)",title:"In the Blood? Consent, Descent, and the Ironies of Jewish Identity","title-short":"In the Blood?",type:"article-journal",URL:"http://muse.jhu.edu/content/crossref/journals/jewish_social_studies/v008/8.2glenn.html",volume:"8"},{id:"gonzalez-lesserJewishnessSuiGeneris2020",accessed:{"date-parts":[[2020,12,10]]},author:[{family:"Gonzalez-Lesser",given:"Emma"}],"container-title":"Ethnic and Racial Studies","container-title-short":"Ethnic and Racial Studies",DOI:"10.1080/01419870.2019.1643487",ISSN:"0141-9870, 1466-4356",issue:"3",issued:{"date-parts":[[2020,2,19]]},language:"en",page:"479-500",source:"DOI.org (Crossref)",title:"Jewishness as sui generis: extending theorizations beyond the debate of \u201crace, ethnicity, or religion\u201d","title-short":"Jewishness as sui generis",type:"article-journal",URL:"https://www.tandfonline.com/doi/full/10.1080/01419870.2019.1643487",volume:"43"},{id:"hollingerRichPowerfulSmart2004",accessed:{"date-parts":[[2020,10,22]]},author:[{family:"Hollinger",given:"David A."}],"container-title":"Jewish Quarterly Review",DOI:"10.1353/jqr.2004.0004",ISSN:"1553-0604",issue:"4",issued:{"date-parts":[[2004]]},language:"en",page:"595-602",publisher:"University of Pennsylvania Press",source:"Project MUSE",title:"Rich, Powerful, and Smart: Jewish Overrepresentation Should Be Explained Instead of Avoided or Mystified","title-short":"Rich, Powerful, and Smart",type:"article-journal",URL:"http://muse.jhu.edu/article/390228/summary",volume:"94"},{id:"lara2020",author:[{family:"",given:"Lara"}],interviewer:[{family:"Graber-Mitchell",given:"Cole"}],issued:{"date-parts":[[2020,11,5]]},type:"interview",URL:"https://momi.cgm616.me/transcripts/lara/"},{id:"PortraitJewishAmericans2013","collection-title":"Religion and Public Life Project","container-title":"Pew Research Center",issued:{"date-parts":[[2013,10,1]]},language:"en",page:"214",source:"Zotero",title:"A Portrait of Jewish Americans: Findings from a Pew Research Center Survey of U.S. Jews","title-short":"A Portrait of Jewish Americans",type:"article-journal"},{id:"ritchieDoingOralHistory2003",accessed:{"date-parts":[[2020,10,8]]},author:[{family:"Ritchie",given:"Donald A."}],"event-place":"Cary, United Kingdom",ISBN:"978-0-19-803513-8",issued:{"date-parts":[[2003]]},publisher:"Oxford University Press","publisher-place":"Cary, United Kingdom",source:"ProQuest Ebook Central",title:"Doing Oral History: A Practical Guide","title-short":"Doing Oral History",type:"book",URL:"http://ebookcentral.proquest.com/lib/amherst/detail.action?docID=422722"},{id:"wertheimerPewSurveyReanalyzed2014",accessed:{"date-parts":[[2020,12,9]]},author:[{family:"Wertheimer",given:"Jack"},{family:"Cohen",given:"Steven"}],"container-title":"Mosaic",issued:{"date-parts":[[2014,11,2]]},title:"The Pew Survey Reanalyzed: More Bad News, but a Glimmer of Hope","title-short":"The Pew Survey Reanalyzed",type:"article-magazine",URL:"https://mosaicmagazine.com/essay/uncategorized/2014/11/the-pew-survey-reanalyzed/"},{id:"yuAsianAmericansOverrepresented2020",accessed:{"date-parts":[[2020,10,22]]},author:[{family:"Yu",given:"Corinna J."}],"container-title":"ASA Monitor","container-title-short":"ASA Monitor",DOI:"10.1097/01.M99.0000688732.01865.74",ISSN:"2380-4017",issue:"7",issued:{"date-parts":[[2020,7,1]]},language:"en",page:"32-33",publisher:"American Society of Anesthesiologists",source:"pubs.asahq.org",title:"Asian Americans: The Overrepresented Minority? Dispelling the \u2018Model Minority\u2019 Myth","title-short":"Asian Americans",type:"article-journal",URL:"https://pubs.asahq.org/monitor/article/84/7/32/108588/Asian-Americans-The-Overrepresented-Minority",volume:"84"}];(function(e){(function(){e.window.subtitle=Yi,Vh.plugins.config.get("@csl").templates.add("chicago",'<?xml version="1.0" encoding="utf-8"?><style xmlns="http://purl.org/net/xbiblio/csl" class="note" version="1.0" demote-non-dropping-particle="display-and-sort" page-range-format="chicago"><info><title>Chicago Manual of Style 17th edition (full note)</title><id>http://www.zotero.org/styles/chicago-fullnote-bibliography</id><link href="http://www.zotero.org/styles/chicago-fullnote-bibliography" rel="self"/><link href="http://www.chicagomanualofstyle.org/tools_citationguide.html" rel="documentation"/><author><name>Julian Onions</name><email>julian.onions@gmail.com</email></author><contributor><name>Simon Kornblith</name><email>simon@simonster.com</email></contributor><contributor><name>Elena Razlogova</name><email>elena.razlogova@gmail.com</email></contributor><contributor><name>Frank Bennett</name><email>biercenator@gmail.com</email></contributor><contributor><name>Andrew Dunning</name><email>andrew.dunning@utoronto.ca</email></contributor><contributor><name>Sebastian Karcher</name></contributor><contributor><name>Brenton M. Wiernik</name></contributor><category citation-format="note"/><category field="generic-base"/><summary>Chicago format with full notes and bibliography</summary><updated>2020-04-26T18:22:50+00:00</updated><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights></info><locale xml:lang="en"><terms><term name="editor" form="verb-short">ed.</term><term name="translator" form="verb-short">trans.</term><term name="translator" form="short">trans.</term><term name="editortranslator" form="verb-short">ed. and trans.</term><term name="editortranslator" form="verb">Edited and translated by</term><term name="translator" form="short">trans.</term></terms></locale><macro name="editor-translator"><group delimiter=", "><group delimiter=" "><choose><if variable="container-author reviewed-author" match="any"><group><names variable="container-author reviewed-author"><label form="verb-short" text-case="lowercase" suffix=" "/><name and="text" delimiter=", "/></names></group></if></choose></group><names variable="editor translator" delimiter=", "><label form="verb-short" text-case="lowercase" suffix=" "/><name and="text" delimiter=", "/></names></group></macro><macro name="secondary-contributors-note"><choose><if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="none"><text macro="editor-translator"/></if></choose></macro><macro name="container-contributors-note"><choose><if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="any"><text macro="editor-translator"/></if></choose></macro><macro name="secondary-contributors"><choose><if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="none"><names variable="editor translator" delimiter=". "><label form="verb" text-case="capitalize-first" suffix=" "/><name and="text" delimiter=", "/></names></if></choose></macro><macro name="container-contributors"><choose><if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="any"><group delimiter=", "><choose><if variable="author"><choose><if variable="container-author" match="any"><names variable="container-author"><label form="verb-short" text-case="lowercase" suffix=" "/><name and="text" delimiter=", "/></names></if></choose>\x3c!--This includes page numers after the container author, e.g. for Introductions --\x3e<choose><if variable="container-author author" match="all"><group delimiter=". "><text variable="page"/><names variable="editor translator" delimiter=", "><label form="verb" suffix=" "/><name and="text" delimiter=", "/></names></group></if><else><names variable="editor translator" delimiter=", "><label form="verb" text-case="lowercase" suffix=" "/><name and="text" delimiter=", "/></names></else></choose></if></choose></group></if></choose></macro><macro name="recipient-note"><names variable="recipient" delimiter=", "><label form="verb" text-case="lowercase" suffix=" "/><name and="text" delimiter=", "/></names></macro><macro name="contributors-note"><group delimiter=" "><names variable="author"><name and="text" sort-separator=", " delimiter=", "/><label form="short" prefix=", "/><substitute><names variable="editor"/><names variable="translator"/></substitute></names><text macro="recipient-note"/></group></macro><macro name="editor"><names variable="editor"><name name-as-sort-order="first" and="text" sort-separator=", " delimiter=", " delimiter-precedes-last="always"/><label form="short" prefix=", "/></names></macro><macro name="translator"><names variable="translator"><name name-as-sort-order="first" and="text" sort-separator=", " delimiter=", " delimiter-precedes-last="always"/><label form="verb-short" prefix=", "/></names></macro><macro name="recipient"><group delimiter=" "><choose><if type="personal_communication"><choose><if variable="genre"><text variable="genre" text-case="capitalize-first"/></if><else><text term="letter" text-case="capitalize-first"/></else></choose></if></choose><text macro="recipient-note"/></group></macro><macro name="contributors"><group delimiter=". "><names variable="author"><name name-as-sort-order="first" and="text" sort-separator=", " delimiter=", " delimiter-precedes-last="always"/><substitute><text macro="editor"/><text macro="translator"/><choose><if type="webpage post-weblog" match="any"><text variable="container-title"/></if></choose></substitute></names><text macro="recipient"/></group></macro><macro name="recipient-short"><names variable="recipient"><label form="verb" text-case="lowercase" suffix=" "/><name form="short" and="text" delimiter=", "/></names></macro><macro name="contributors-short"><group delimiter=" "><names variable="author"><name form="short" and="text" delimiter=", "/><substitute><names variable="editor"/><names variable="translator"/></substitute></names><text macro="recipient-short"/></group></macro><macro name="contributors-sort"><names variable="author"><name name-as-sort-order="all" and="text" sort-separator=", " delimiter=", " delimiter-precedes-last="always"/><substitute><names variable="editor"/><names variable="translator"/><text macro="title"/></substitute></names></macro><macro name="interviewer-note"><names variable="interviewer" delimiter=", "><label form="verb" text-case="lowercase" suffix=" "/><name and="text" delimiter=", "/></names></macro><macro name="interviewer"><names variable="interviewer" delimiter=", "><label form="verb" text-case="capitalize-first" suffix=" "/><name and="text" delimiter=", "/></names></macro><macro name="title-note"><choose><if variable="title" match="none"><text variable="genre"/></if><else-if type="book graphic map motion_picture song" match="any"><text variable="title" text-case="title" font-style="italic"/><group delimiter=" " prefix=", "><text term="version"/><text variable="version"/></group></else-if><else-if type="legal_case interview patent" match="any"><text variable="title"/></else-if><else-if variable="reviewed-author"><text variable="title" font-style="italic" prefix="review of "/></else-if><else><text variable="title" text-case="title" quotes="true"/></else></choose></macro><macro name="title"><choose><if variable="title" match="none"><choose><if type="personal_communication" match="none"><text variable="genre" text-case="capitalize-first"/></if></choose></if><else-if type="book graphic motion_picture song" match="any"><text variable="title" text-case="title" font-style="italic"/><group prefix=" (" suffix=")" delimiter=" "><text term="version"/><text variable="version"/></group></else-if><else-if variable="reviewed-author"><group delimiter=", "><text variable="title" font-style="italic" prefix="Review of "/><names variable="reviewed-author"><label form="verb-short" text-case="lowercase" suffix=" "/><name and="text" delimiter=", "/></names></group></else-if><else-if type="bill legislation legal_case interview patent" match="any"><text variable="title"/></else-if><else><text variable="title" text-case="title" quotes="true"/></else></choose></macro><macro name="title-short"><choose><if variable="title" match="none"><choose><if type="interview"><text term="interview"/></if><else-if type="manuscript speech" match="any"><text variable="genre" form="short"/></else-if></choose></if><else-if type="book graphic motion_picture song" match="any"><text variable="title" text-case="title" form="short" font-style="italic"/></else-if><else-if type="legal_case" variable="title-short" match="all"><text variable="title" font-style="italic" form="short"/></else-if><else-if type="patent interview" match="any"><text variable="title" form="short"/></else-if><else-if type="legal_case bill legislation" match="any"><text variable="title"/></else-if><else><text variable="title" text-case="title" form="short" quotes="true"/></else></choose></macro><macro name="date-disambiguate"><choose><if disambiguate="true" type="personal_communication" match="any"><text macro="issued"/></if></choose></macro><macro name="description-note"><group delimiter=", "><text macro="interviewer-note"/><text variable="medium"/><choose><if variable="title" match="none"/><else-if type="manuscript thesis speech" match="any"/><else-if type="patent"><group delimiter=" "><text variable="authority"/><text variable="number"/></group></else-if><else><text variable="genre"/></else></choose><choose><if type="map"><text variable="scale"/></if><else-if type="graphic"><text variable="dimensions"/></else-if></choose></group></macro><macro name="description"><group delimiter=", "><group delimiter=". "><text macro="interviewer"/><text variable="medium" text-case="capitalize-first"/></group><choose><if variable="title" match="none"/><else-if type="thesis speech" match="any"/><else-if type="patent"><group delimiter=" "><text variable="authority"/><text variable="number"/></group></else-if><else><text variable="genre" text-case="capitalize-first"/></else></choose><choose><if type="map"><text variable="scale"/></if><else-if type="graphic"><text variable="dimensions"/></else-if></choose></group></macro><macro name="container-title-note"><group delimiter=" "><choose><if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="any"><text term="in"/></if></choose><choose><if type="webpage"><text variable="container-title"/></if><else-if type="post-weblog"><text variable="container-title" text-case="title" font-style="italic" suffix=" (blog)"/></else-if><else-if type="bill legislation legal_case" match="none"><text variable="container-title" text-case="title" font-style="italic"/></else-if></choose></group></macro><macro name="container-title"><group delimiter=" "><choose><if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="any"><text term="in" text-case="capitalize-first"/></if></choose><choose><if type="webpage"><text variable="container-title"/></if><else-if type="post-weblog"><text variable="container-title" text-case="title" font-style="italic" suffix=" (blog)"/></else-if><else-if type="bill legislation legal_case" match="none"><text variable="container-title" text-case="title" font-style="italic"/></else-if></choose></group></macro><macro name="collection-title"><choose><if match="none" type="article-journal"><choose><if match="none" is-numeric="collection-number"><group delimiter=", "><text variable="collection-title" text-case="title"/><text variable="collection-number"/></group></if><else><group delimiter=" "><text variable="collection-title" text-case="title"/><text variable="collection-number"/></group></else></choose></if></choose></macro><macro name="collection-title-journal"><choose><if type="article-journal"><group delimiter=" "><text variable="collection-title"/><text variable="collection-number"/></group></if></choose></macro><macro name="edition-note"><choose><if type="book chapter graphic motion_picture paper-conference report song" match="any"><choose><if is-numeric="edition"><group delimiter=" "><number variable="edition" form="ordinal"/><text term="edition" form="short"/></group></if><else><text variable="edition"/></else></choose></if></choose></macro><macro name="edition"><choose><if type="book chapter graphic motion_picture paper-conference report song" match="any"><choose><if is-numeric="edition"><group delimiter=" "><number variable="edition" form="ordinal"/><text term="edition" form="short"/></group></if><else><text variable="edition" text-case="capitalize-first" suffix="."/></else></choose></if></choose></macro><macro name="locators-note-join-with-space"><choose><if type="article-journal" variable="volume" match="all"><choose><if match="none" variable="collection-title"><text macro="locators-note"/></if></choose></if></choose></macro><macro name="locators-note-join-with-comma"><choose><if type="article-journal" match="none"><text macro="locators-note"/></if><else-if type="article-journal"><choose><if variable="volume" match="none"><text macro="locators-note"/></if><else-if match="any" variable="collection-title"><text macro="locators-note"/></else-if></choose></else-if></choose></macro><macro name="locators-note"><choose><if type="article-journal"><group delimiter=", "><text macro="collection-title-journal"/><text variable="volume"/><group delimiter=" "><text term="issue" form="short"/><text variable="issue"/></group></group></if><else-if type="bill legislation legal_case" match="any"><text macro="legal-cites"/></else-if><else-if type="book chapter graphic motion_picture paper-conference report song" match="any"><group delimiter=", "><text macro="edition-note"/><group delimiter=" "><text term="volume" form="short"/><number variable="volume" form="numeric"/></group><choose><if variable="locator" match="none"><group delimiter=" "><number variable="number-of-volumes" form="numeric"/><text term="volume" form="short" plural="true"/></group></if></choose></group></else-if></choose></macro><macro name="legal-cites"><choose><if type="legal_case" match="any"><group delimiter=" "><choose><if variable="container-title"><text variable="volume"/><text variable="container-title"/><group delimiter=" ">\x3c!--change to label variable="section" as that becomes available --\x3e<text term="section" form="symbol"/><text variable="section"/></group><text variable="page"/></if><else><text variable="number" prefix="No. "/></else></choose></group></if><else-if type="bill legislation" match="any"><group delimiter=", "><choose><if variable="number">\x3c!--There\'s a public law number--\x3e<text variable="number" prefix="Pub. L. No. "/><group delimiter=" ">\x3c!--change to label variable="section" as that becomes available --\x3e<text term="section" form="symbol"/><text variable="section"/></group><group delimiter=" "><text variable="volume"/><text variable="container-title"/><text variable="page-first"/></group></if><else><group delimiter=" "><text variable="volume"/><text variable="container-title"/>\x3c!--change to label variable="section" as that becomes available --\x3e<text term="section" form="symbol"/><text variable="section"/></group></else></choose></group></else-if></choose></macro><macro name="locators-join-with-space"><choose><if type="article-journal" variable="volume" match="all"><choose><if match="none" variable="collection-title"><text macro="locators"/></if></choose></if></choose></macro><macro name="locators-join-with-comma"><choose><if type="bill chapter legislation legal_case paper-conference" match="any"><text macro="locators"/></if><else-if type="article-journal"><choose><if variable="volume" match="none"><text macro="locators"/></if><else-if match="any" variable="collection-title"><text macro="locators"/></else-if></choose></else-if></choose></macro><macro name="locators-join-with-period"><choose><if type="bill legislation legal_case article-journal chapter paper-conference" match="none"><text macro="locators"/></if></choose></macro><macro name="locators"><choose><if type="article-journal"><group delimiter=", "><text macro="collection-title-journal"/><text variable="volume"/><group delimiter=" "><text term="issue" form="short"/><text variable="issue"/></group></group></if><else-if type="bill legislation legal_case" match="any"><text macro="legal-cites"/></else-if><else-if type="book graphic motion_picture report song" match="any"><group delimiter=". "><text macro="edition"/><group delimiter=" "><text term="volume" form="short" text-case="capitalize-first"/><number variable="volume" form="numeric"/></group><group delimiter=" "><number variable="number-of-volumes" form="numeric"/><text term="volume" form="short" plural="true"/></group></group></else-if><else-if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="any"><group delimiter=". "><text macro="edition"/><choose><if variable="page" match="none"><group delimiter=" "><text term="volume" form="short" text-case="capitalize-first"/><number variable="volume" form="numeric"/></group></if></choose></group></else-if></choose></macro><macro name="locators-newspaper"><choose><if type="article-newspaper"><group delimiter=", "><group delimiter=" "><number variable="edition"/><text term="edition"/></group><group delimiter=" "><text term="section" form="short"/><text variable="section"/></group></group></if></choose></macro><macro name="event-note"><text variable="event"/></macro><macro name="event"><choose><if variable="title"><group delimiter=" "><choose><if variable="genre"><text term="presented at"/></if><else><text term="presented at" text-case="capitalize-first"/></else></choose><text variable="event"/></group></if><else><group delimiter=" "><text term="presented at" text-case="capitalize-first"/><text variable="event"/></group></else></choose></macro><macro name="originally-published"><group delimiter=", "><group delimiter=": "><text variable="original-publisher-place"/><text variable="original-publisher"/></group><choose><if is-uncertain-date="original-date"><date variable="original-date" form="numeric" date-parts="year" prefix="[" suffix="?]"/></if><else><date variable="original-date" form="numeric" date-parts="year"/></else></choose></group></macro><macro name="reprint-note">\x3c!--needs localization--\x3e<choose><if variable="original-date issued" match="all"><choose>\x3c!--for whatever reason in notes, when we have both original and new publishers, reprint doesn\'t appear--\x3e<if variable="original-publisher original-publisher-place" match="none"><text value="repr."/></if></choose></if></choose></macro><macro name="reprint">\x3c!--needs localization--\x3e<choose><if variable="original-date issued" match="all"><text value="reprint" text-case="capitalize-first"/></if></choose></macro><macro name="publisher"><choose><if type="thesis"><text variable="publisher"/></if><else-if type="speech"><text variable="event-place"/></else-if><else><group delimiter=": "><text variable="publisher-place"/><text variable="publisher"/></group></else></choose></macro><macro name="issued"><choose><if variable="issued"><choose><if type="legal_case"><group delimiter=" "><text variable="authority"/><choose><if variable="container-title" match="any">\x3c!--Only print year for cases published in reporters--\x3e<date variable="issued" form="numeric" date-parts="year"/></if><else><date variable="issued" form="text"/></else></choose></group></if><else-if type="book bill chapter  legislation motion_picture paper-conference song thesis" match="any"><choose><if is-uncertain-date="issued"><date variable="issued" form="numeric" date-parts="year" prefix="[" suffix="?]"/></if><else><date variable="issued" form="numeric" date-parts="year"/></else></choose></else-if><else-if type="patent"><group delimiter=", "><group delimiter=" ">\x3c!--Needs Localization--\x3e<text value="filed"/><date variable="submitted" form="text"/></group><group delimiter=" "><choose><if variable="issued submitted" match="all"><text term="and"/></if></choose>\x3c!--Needs Localization--\x3e<text value="issued"/><date variable="issued" form="text"/></group></group></else-if><else><choose><if is-uncertain-date="issued"><date variable="issued" form="text" prefix="[" suffix="?]"/></if><else><date variable="issued" form="text"/></else></choose></else></choose></if><else-if variable="status"><text variable="status"/></else-if><else-if variable="accessed URL" match="all"/><else><text term="no date" form="short"/></else></choose></macro><macro name="point-locators-subsequent"><choose><if type="legal_case" variable="locator" match="all"><choose><if locator="page"><group delimiter=":"><text variable="volume"/><text variable="locator"/></group></if><else><group delimiter=" "><label variable="locator" form="short"/><text variable="locator"/></group></else></choose></if><else-if variable="locator"><choose><if locator="page" match="none"><group delimiter=" "><choose><if type="book graphic motion_picture report song" match="any"><choose><if variable="volume"><group delimiter=", "><group delimiter=" "><text term="volume" form="short"/><number variable="volume" form="numeric"/></group><label variable="locator" form="short"/></group></if><else><label variable="locator" form="short"/></else></choose></if><else><label variable="locator" form="short"/></else></choose><text variable="locator"/></group></if><else-if type="book graphic motion_picture report song" match="any"><group delimiter=":"><number variable="volume" form="numeric"/><text variable="locator"/></group></else-if><else><text variable="locator"/></else></choose></else-if></choose></macro><macro name="point-locators-join-with-colon"><choose><if type="article-journal"><choose><if variable="locator page" match="any"><choose><if variable="volume issue" match="any"><text macro="point-locators"/></if></choose></if></choose></if></choose></macro><macro name="point-locators-join-with-comma"><choose><if type="article-journal" match="none"><text macro="point-locators"/></if><else-if variable="volume issue" match="none"><text macro="point-locators"/></else-if></choose></macro><macro name="point-locators"><choose><if variable="locator" match="none"><choose><if type="article-journal chapter paper-conference" match="any"><text variable="page"/></if></choose></if><else-if type="article-journal"><group delimiter=" "><choose><if locator="page" match="none"><label variable="locator" form="short" suffix=" "/></if></choose><text variable="locator"/></group></else-if><else-if type="legal_case"/><else><group delimiter=" "><choose><if locator="page" match="none"><label variable="locator" form="short"/></if></choose><text variable="locator"/></group></else></choose></macro><macro name="locators-chapter"><choose><if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="any"><choose><if variable="author container-author" match="all"/><else><choose><if variable="page"><text variable="volume" suffix=":"/><text variable="page"/></if></choose></else></choose></if></choose></macro><macro name="locators-journal-join-with-colon"><choose><if type="article-journal"><choose><if variable="volume issue" match="any"><text variable="page"/></if></choose></if></choose></macro><macro name="locators-journal-join-with-comma"><choose><if type="article-journal"><choose><if variable="volume issue" match="none"><text variable="page"/></if></choose></if></choose></macro><macro name="archive-note"><choose><if type="thesis"><group delimiter=" "><text variable="archive"/><text variable="archive_location" prefix="(" suffix=")"/></group></if><else><group delimiter=", "><text variable="archive_location"/><text variable="archive"/><text variable="archive-place"/></group></else></choose></macro><macro name="archive"><choose><if type="thesis"><group delimiter=" "><text variable="archive"/><text variable="archive_location" prefix="(" suffix=")"/></group></if><else><group delimiter=". "><text variable="archive_location" text-case="capitalize-first"/><text variable="archive"/><text variable="archive-place"/></group></else></choose></macro><macro name="issue-note-join-with-space"><choose><if type="article-journal bill legislation legal_case manuscript thesis" variable="publisher-place event-place publisher" match="any">\x3c!--Chicago doesn\'t use publisher/place for Newspapers and we want the date delimited by a comma--\x3e<choose><if type="article-newspaper" match="none"><choose><if type="article-journal" match="none"><text macro="issue-note"/></if><else-if variable="issue volume" match="any"><text macro="issue-note"/></else-if></choose></if></choose></if></choose></macro><macro name="issue-note-join-with-comma"><choose><if type="article-journal bill legislation legal_case manuscript speech thesis" variable="publisher-place publisher" match="none"><text macro="issue-note"/></if><else-if type="article-newspaper"><text macro="issue-note"/></else-if><else-if type="article-journal"><choose><if variable="volume issue" match="none"><text macro="issue-note"/></if></choose></else-if></choose></macro><macro name="issue-map-graphic">\x3c!--See CMoS 17th ed. 14.235 and 14.237--\x3e<choose><if type="graphic map" match="any"><choose><if variable="publisher publisher-place" match="none"><text macro="issued"/></if></choose></if></choose></macro><macro name="issue-note"><choose><if type="bill legislation legal_case" match="any"><text macro="issued" prefix="(" suffix=")"/></if><else-if type="article-journal"><choose><if variable="volume issue" match="any"><text macro="issued" prefix="(" suffix=")"/></if><else><text macro="issued"/></else></choose></else-if><else-if type="article-newspaper"><text macro="issued"/></else-if><else-if type="manuscript thesis speech" match="any"><group delimiter=", " prefix="(" suffix=")"><choose><if variable="title" match="any"><text variable="genre"/></if></choose><text variable="event"/><text variable="event-place"/><text variable="publisher"/><text macro="issued"/></group></else-if><else-if variable="publisher-place event-place publisher" match="any"><group prefix="(" suffix=")" delimiter=", "><text macro="event-note"/><group delimiter="; "><text macro="originally-published"/><group delimiter=", "><text macro="reprint-note"/><text macro="publisher"/></group></group><text macro="issued"/></group></else-if><else><text macro="issued"/></else></choose></macro><macro name="issue-join-with-space"><choose><if type="article-journal" match="any"><choose><if variable="issue volume" match="any"><text macro="issue"/></if></choose></if><else-if type="bill legislation legal_case" match="any"><text macro="issue"/></else-if></choose></macro><macro name="issue-join-with-period"><choose><if type="article-journal bill legislation legal_case" match="none"><choose><if type="speech" variable="publisher publisher-place" match="any"><text macro="issue"/></if></choose></if></choose></macro><macro name="issue-join-with-comma"><choose><if type="bill legislation legal_case" match="none"><choose><if type="article-journal" match="none"><choose><if type="speech" variable="publisher publisher-place" match="none"><text macro="issue"/></if></choose></if><else-if variable="volume issue" match="none"><text macro="issue"/></else-if></choose></if></choose></macro><macro name="issue"><choose><if type="bill legislation legal_case" match="any"><text macro="issued" prefix="(" suffix=")"/></if><else-if type="article-journal"><choose><if variable="issue volume" match="any"><text macro="issued" prefix="(" suffix=")"/></if><else><text macro="issued"/></else></choose></else-if><else-if type="speech"><group delimiter=", "><group delimiter=" "><choose><if variable="title" match="none"/><else><text variable="genre" text-case="capitalize-first"/></else></choose><text macro="event"/></group><text variable="event-place"/><text macro="issued"/></group></else-if>\x3c!--Chicago doesn\'t use publisher/place for Newspapers --\x3e<else-if type="article-newspaper"><text macro="issued"/></else-if><else-if variable="publisher-place publisher" match="any"><group delimiter=", "><choose><if type="thesis"><text variable="genre" text-case="capitalize-first"/></if></choose><group delimiter=". "><text macro="originally-published"/><group delimiter=", "><text macro="reprint"/><text macro="publisher"/></group></group><text macro="issued"/></group></else-if>\x3c!--location for data for maps and artwork is different--\x3e<else-if type="graphic map" match="none"><text macro="issued"/></else-if></choose></macro><macro name="access-note"><group delimiter=", "><choose><if type="graphic report" match="any"><text macro="archive-note"/></if><else-if type="article-journal bill book chapter legal_case legislation motion_picture paper-conference" match="none"><text macro="archive-note"/></else-if></choose><choose><if variable="issued" match="none"><group delimiter=" "><text term="accessed"/><date variable="accessed" form="text"/></group></if></choose><choose><if type="legal_case" match="none"><choose><if variable="DOI"><text variable="DOI" prefix="https://doi.org/"/></if><else><text variable="URL"/></else></choose></if></choose></group></macro><macro name="access"><group delimiter=". "><choose><if type="graphic report" match="any"><text macro="archive"/></if><else-if type="article-journal bill book chapter legal_case legislation motion_picture paper-conference" match="none"><text macro="archive"/></else-if></choose><choose><if variable="issued" match="none"><group delimiter=" "><text term="accessed" text-case="capitalize-first"/><date variable="accessed" form="text"/></group></if></choose><choose><if type="legal_case" match="none"><choose><if variable="DOI"><text variable="DOI" prefix="https://doi.org/"/></if><else><text variable="URL"/></else></choose></if></choose></group></macro><macro name="case-locator-subsequent"><choose><if type="legal_case"><group delimiter=" "><text variable="volume"/><text variable="container-title"/></group></if></choose></macro><macro name="case-pinpoint-subsequent"><choose><if type="legal_case"><group delimiter=" "><choose><if locator="page"><text term="at"/><text variable="locator"/></if><else><label variable="locator"/><text variable="locator"/></else></choose></group></if></choose></macro><citation et-al-min="4" et-al-use-first="1" disambiguate-add-names="true"><layout suffix="." delimiter="; "><choose><if position="ibid ibid-with-locator" match="any"><group delimiter=", "><text macro="contributors-short"/><group delimiter=" "><group delimiter=", "><choose><if variable="author editor translator" match="none"><text macro="title-short"/></if></choose><text macro="case-locator-subsequent"/></group><text macro="case-pinpoint-subsequent"/></group><choose><if match="none" type="legal_case"><text macro="point-locators-subsequent"/></if></choose></group></if><else-if position="subsequent"><group delimiter=", "><text macro="contributors-short"/><group delimiter=" "><group delimiter=", "><text macro="title-short"/>\x3c!--if title & author are the same: --\x3e<text macro="date-disambiguate"/><text macro="case-locator-subsequent"/></group><text macro="case-pinpoint-subsequent"/></group><choose><if match="none" type="legal_case"><text macro="point-locators-subsequent"/></if></choose></group></else-if><else><group delimiter=", "><group delimiter=": "><group delimiter=", "><group delimiter=" "><group delimiter=", "><group delimiter=" "><group delimiter=", "><group delimiter=", "><text macro="contributors-note"/><text macro="title-note"/><text macro="issue-map-graphic"/></group><text macro="description-note"/><text macro="secondary-contributors-note"/><text macro="container-title-note"/><text macro="container-contributors-note"/></group><text macro="locators-note-join-with-space"/></group><text macro="locators-note-join-with-comma"/><text macro="collection-title"/><text macro="issue-note-join-with-comma"/></group><text macro="issue-note-join-with-space"/></group><text macro="locators-newspaper"/><text macro="point-locators-join-with-comma"/></group><text macro="point-locators-join-with-colon"/></group><text macro="access-note"/></group></else></choose></layout></citation><bibliography hanging-indent="true" et-al-min="11" et-al-use-first="7" subsequent-author-substitute="&#8212;&#8212;&#8212;" entry-spacing="0"><sort><key macro="contributors-sort"/><key variable="title"/><key variable="genre"/><key variable="issued"/></sort><layout suffix="."><group delimiter=". "><group delimiter=": "><group delimiter=", "><group delimiter=" "><group delimiter=". "><group delimiter=" "><group delimiter=", "><group delimiter=". "><group delimiter=". "><text macro="contributors"/><text macro="title"/><text macro="issue-map-graphic"/></group><text macro="description"/><text macro="secondary-contributors"/><group delimiter=", "><text macro="container-title"/><text macro="container-contributors"/></group><text macro="locators-join-with-period"/></group><text macro="locators-join-with-comma"/><text macro="locators-chapter"/></group><text macro="locators-join-with-space"/></group><text macro="collection-title"/><text macro="issue-join-with-period"/></group><text macro="issue-join-with-space"/></group><text macro="issue-join-with-comma"/><text macro="locators-journal-join-with-comma"/><text macro="locators-newspaper"/></group><text macro="locators-journal-join-with-colon"/></group><text macro="access"/></group></layout></bibliography></style>');const t={lara:"/srt/lara.srt",ellen:"/srt/ellen.srt",gabe:"/srt/gabe.srt"},i={lara:"/audio/lara.m4a",ellen:"/audio/ellen.m4a",gabe:"/audio/gabe.m4a"};function r(e){const t=Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0);t.length>0&&t.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.target,i=document.getElementById(t);e.classList.toggle("is-active"),i.classList.toggle("is-active")})}),document.querySelectorAll("a").forEach(e=>{var t=e.parentElement;e.hostname!==window.location.hostname||"entrance"===e.id||t.classList.contains("footnote-reference")||e.addEventListener("click",t=>{t.preventDefault(),n(e.href,e.pathname,!1)})}),function(e){for(var t of e){var i=t.getAttribute("person");t.hasAttribute("full")?c(i,t):p(t)}}(document.getElementsByClassName("transcript")),function(e){let t=new Vh(Kh);for(var i of e){let e=i.childNodes[0],r=JSON.parse("{"+e.getAttribute("href").split("#")[1]+"}"),s=i.nextElementSibling,n=r.keys.split(","),o=t.format("citation",{entry:n,format:"html",template:"chicago",append:r.pages});s.innerHTML=a(o),e.addEventListener("click",e=>{e.preventDefault(),s.classList.toggle("is-hidden")})}}(document.getElementsByClassName("footnote-reference"));const i=document.getElementById("bibliography");if(i&&function(e){let t=new Vh(Kh).format("bibliography",{format:"html",template:"chicago"});e.innerHTML=a(t)}(i),e){const e=document.getElementById("audio-selector");null!==e&&(e.addEventListener("change",t=>{h(e.value)}),h(e.value));const t=document.getElementById("goto-transcript");t.addEventListener("click",i=>{i.preventDefault();var r=e.value;if(""!==r){var s="/transcripts/"+r+"/";t.href=s,n(t.href,t.pathname,!1)}})}}window.onpopstate=function(e){if(e.state){var t=new URL(e.state);n(t.href,t.pathname,!0)}},document.addEventListener("DOMContentLoaded",()=>{r(!0),window.history.replaceState(window.location.href,window.title,window.location.pathname)});const s=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;function a(e){return e.replace(s,(function(e){return'<a href="'+e+'">'+e+"</a>"}))}async function n(e,t,i){let s=await fetch(e),a=await s.text();var n=(new DOMParser).parseFromString(a,"text/html"),l=n.getElementById("root"),u=document.getElementById("root");u.classList.toggle("fade"),await o(1050),u.innerHTML=l.innerHTML,document.title=n.title,i||history.pushState(e,n.title,t),r(!1),await o(50),u.classList.toggle("fade"),window.scrollTo(0,0);var c=e.indexOf("#");if(-1!==c){console.log(e);var p=e.substring(c+1);console.log(p),console.log(document),document.getElementById(p).scrollIntoView()}}function o(e){return new Promise(t=>setTimeout(t,e))}function l(e){var t=document.getElementById("audio-controller"),i=e.target.getAttribute("millis"),r=e.target.getAttribute("person");const s=document.getElementById("audio-selector");s.value!==r&&(s.value=r),h(r),t.currentTime=Number(i)/1e3,t.play()}function u(e){let t=e=>e<=99?("0"+e).slice(-2):e;var i=e/1e3,r=i/60,s=r/60;return Math.floor(s)+":"+t(Math.floor(r)%60)+":"+t(Math.floor(i)%60)}async function c(e,i){var r=t[e],s=await fetch(r),a=await s.text(),n=window.subtitle.parseSync(a),o=document.createElement("div");o.classList.value="columns is-multiline";const c=/---/g;for(var p of n){var h=p.data.text.split(":"),m=h[0].trim(),f=h[1].trim().replace(c,"\u2014"),d=document.createElement("div");d.classList.value="column is-2",d.id=p.data.start.toString();var g=document.createElement("p"),b=document.createElement("strong");b.innerText=m+": ";var y=document.createElement("em");y.classList.value="timestamp",y.setAttribute("millis",p.data.start.toString()),y.setAttribute("person",e),y.innerText="("+u(p.data.start)+")",y.addEventListener("click",e=>l(e)),g.appendChild(b),g.appendChild(y),d.appendChild(g);var v=document.createElement("div");v.classList.value="column is-10";var _=document.createElement("p");_.innerText=f,v.appendChild(_),o.appendChild(d),o.appendChild(v)}i.appendChild(o)}async function p(e){e.querySelector(".timestamp").addEventListener("click",e=>l(e))}function h(e){var t=document.getElementById("audio-controller");""===e&&t.removeAttribute("src"),t.getAttribute("src")!==i[e]&&t.setAttribute("src",i[e])}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}();