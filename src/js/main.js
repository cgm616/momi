var subtitle = require('subtitle');
global.window.subtitle = subtitle;

const Cite = require('citation-js');
let chicago = '<?xml version="1.0" encoding="utf-8"?>< style xmlns = "http://purl.org/net/xbiblio/csl" class="note" version = "1.0" demote - non - dropping - particle="display-and-sort" page - range - format="chicago" ><info><title>Chicago Manual of Style 17th edition (full note)</title> <id>http://www.zotero.org/styles/chicago-fullnote-bibliography</id> <link href="http://www.zotero.org/styles/chicago-fullnote-bibliography" rel="self"/> <link href="http://www.chicagomanualofstyle.org/tools_citationguide.html" rel="documentation"/> <author> <name>Julian Onions</name> <email>julian.onions@gmail.com</email> </author> <contributor> <name>Simon Kornblith</name> <email>simon@simonster.com</email> </contributor> <contributor> <name>Elena Razlogova</name> <email>elena.razlogova@gmail.com</email> </contributor> <contributor> <name>Frank Bennett</name> <email>biercenator@gmail.com</email> </contributor> <contributor> <name>Andrew Dunning</name> <email>andrew.dunning@utoronto.ca</email> </contributor> <contributor> <name>Sebastian Karcher</name> </contributor> <contributor> <name>Brenton M. Wiernik</name> </contributor> <category citation-format="note"/> <category field="generic-base"/> <summary>Chicago format with full notes and bibliography</summary> <updated>2017-10-12T12:00:00+00:00</updated> <rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights> </info> <locale xml:lang="en"> <terms> <term name="editor" form="verb-short">ed.</term> <term name="translator" form="verb-short">trans.</term> <term name="translator" form="short">trans.</term> <term name="editortranslator" form="verb-short">ed. and trans.</term> <term name="editortranslator" form="verb">Edited and translated by</term> <term name="translator" form="short">trans.</term> </terms> </locale> <macro name="editor-translator"> <group delimiter=", "> <group delimiter=" "> <choose> <if variable="container-author reviewed-author" match="any"> <group> <names variable="container-author reviewed-author"> <label form="verb-short" text-case="lowercase" suffix=" "/> <name and="text" delimiter=", "/> </names> </group> </if> </choose> </group> <names variable="editor translator" delimiter=", "> <label form="verb-short" text-case="lowercase" suffix=" "/> <name and="text" delimiter=", "/> </names> </group> </macro> <macro name="secondary-contributors-note"> <choose> <if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="none"> <text macro="editor-translator"/> </if> </choose> </macro> <macro name="container-contributors-note"> <choose> <if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="any"> <text macro="editor-translator"/> </if> </choose> </macro> <macro name="secondary-contributors"> <choose> <if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="none"> <names variable="editor translator" delimiter=". "> <label form="verb" text-case="capitalize-first" suffix=" "/> <name and="text" delimiter=", "/> </names> </if> </choose> </macro> <macro name="container-contributors"> <choose> <if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="any"> <group delimiter=", "> <choose> <if variable="author"> <choose> <if variable="container-author" match="any"> <names variable="container-author"> <label form="verb-short" text-case="lowercase" suffix=" "/> <name and="text" delimiter=", "/> </names> </if> </choose> <!--This includes page numers after the container author, e.g. for Introductions --> <choose> <if variable="container-author author" match="all"> <group delimiter=". "> <text variable="page"/> <names variable="editor translator" delimiter=", "> <label form="verb" suffix=" "/> <name and="text" delimiter=", "/> </names> </group> </if> <else> <names variable="editor translator" delimiter=", "> <label form="verb" text-case="lowercase" suffix=" "/> <name and="text" delimiter=", "/> </names> </else> </choose> </if> </choose> </group> </if> </choose> </macro> <macro name="recipient-note"> <names variable="recipient" delimiter=", "> <label form="verb" text-case="lowercase" suffix=" "/> <name and="text" delimiter=", "/> </names> </macro> <macro name="contributors-note"> <group delimiter=" "> <names variable="author"> <name and="text" sort-separator=", " delimiter=", "/> <label form="short" prefix=", "/> <substitute> <names variable="editor"/> <names variable="translator"/> </substitute> </names> <text macro="recipient-note"/> </group> </macro> <macro name="editor"> <names variable="editor"> <name name-as-sort-order="first" and="text" sort-separator=", " delimiter=", " delimiter-precedes-last="always"/> <label form="short" prefix=", "/> </names> </macro> <macro name="translator"> <names variable="translator"> <name name-as-sort-order="first" and="text" sort-separator=", " delimiter=", " delimiter-precedes-last="always"/> <label form="verb-short" prefix=", "/> </names> </macro> <macro name="recipient"> <group delimiter=" "> <choose> <if type="personal_communication"> <choose> <if variable="genre"> <text variable="genre" text-case="capitalize-first"/> </if> <else> <text term="letter" text-case="capitalize-first"/> </else> </choose> </if> </choose> <text macro="recipient-note"/> </group> </macro> <macro name="contributors"> <group delimiter=". "> <names variable="author"> <name name-as-sort-order="first" and="text" sort-separator=", " delimiter=", " delimiter-precedes-last="always"/> <substitute> <text macro="editor"/> <text macro="translator"/> <choose> <if type="webpage post-weblog" match="any"> <text variable="container-title"/> </if> </choose> </substitute> </names> <text macro="recipient"/> </group> </macro> <macro name="recipient-short"> <names variable="recipient"> <label form="verb" text-case="lowercase" suffix=" "/> <name form="short" and="text" delimiter=", "/> </names> </macro> <macro name="contributors-short"> <group delimiter=" "> <names variable="author"> <name form="short" and="text" delimiter=", "/> <substitute> <names variable="editor"/> <names variable="translator"/> </substitute> </names> <text macro="recipient-short"/> </group> </macro> <macro name="contributors-sort"> <names variable="author"> <name name-as-sort-order="all" and="text" sort-separator=", " delimiter=", " delimiter-precedes-last="always"/> <substitute> <names variable="editor"/> <names variable="translator"/> <text macro="title"/> </substitute> </names> </macro> <macro name="interviewer-note"> <names variable="interviewer" delimiter=", "> <label form="verb" text-case="lowercase" suffix=" "/> <name and="text" delimiter=", "/> </names> </macro> <macro name="interviewer"> <names variable="interviewer" delimiter=", "> <label form="verb" text-case="capitalize-first" suffix=" "/> <name and="text" delimiter=", "/> </names> </macro> <macro name="title-note"> <choose> <if variable="title" match="none"> <text variable="genre"/> </if> <else-if type="book graphic map motion_picture song" match="any"> <text variable="title" text-case="title" font-style="italic"/> <group delimiter=" " prefix=", "> <text term="version"/> <text variable="version"/> </group> </else-if> <else-if type="legal_case interview patent" match="any"> <text variable="title"/> </else-if> <else-if variable="reviewed-author"> <text variable="title" font-style="italic" prefix="review of "/> </else-if> <else> <text variable="title" text-case="title" quotes="true"/> </else> </choose> </macro> <macro name="title"> <choose> <if variable="title" match="none"> <choose> <if type="personal_communication" match="none"> <text variable="genre" text-case="capitalize-first"/> </if> </choose> </if> <else-if type="book graphic motion_picture song" match="any"> <text variable="title" text-case="title" font-style="italic"/> <group prefix=" (" suffix=")" delimiter=" "> <text term="version"/> <text variable="version"/> </group> </else-if> <else-if variable="reviewed-author"> <group delimiter=", "> <text variable="title" font-style="italic" prefix="Review of "/> <names variable="reviewed-author"> <label form="verb-short" text-case="lowercase" suffix=" "/> <name and="text" delimiter=", "/> </names> </group> </else-if> <else-if type="bill legislation legal_case interview patent" match="any"> <text variable="title"/> </else-if> <else> <text variable="title" text-case="title" quotes="true"/> </else> </choose> </macro> <macro name="title-short"> <choose> <if variable="title" match="none"> <choose> <if type="interview"> <text term="interview"/> </if> <else-if type="manuscript speech" match="any"> <text variable="genre" form="short"/> </else-if> </choose> </if> <else-if type="book graphic motion_picture song" match="any"> <text variable="title" text-case="title" form="short" font-style="italic"/> </else-if> <else-if type="legal_case" variable="title-short" match="all"> <text variable="title" font-style="italic" form="short"/> </else-if> <else-if type="patent interview" match="any"> <text variable="title" form="short"/> </else-if> <else-if type="legal_case bill legislation" match="any"> <text variable="title"/> </else-if> <else> <text variable="title" text-case="title" form="short" quotes="true"/> </else> </choose> </macro> <macro name="date-disambiguate"> <choose> <if disambiguate="true" type="personal_communication" match="any"> <text macro="issued"/> </if> </choose> </macro> <macro name="description-note"> <group delimiter=", "> <text macro="interviewer-note"/> <text variable="medium"/> <choose> <if variable="title" match="none"/> <else-if type="manuscript thesis speech" match="any"/> <else-if type="patent"> <group delimiter=" "> <text variable="authority"/> <text variable="number"/> </group> </else-if> <else> <text variable="genre"/> </else> </choose> <choose> <if type="map"> <text variable="scale"/> </if> <else-if type="graphic"> <text variable="dimensions"/> </else-if> </choose> </group> </macro> <macro name="description"> <group delimiter=", "> <group delimiter=". "> <text macro="interviewer"/> <text variable="medium" text-case="capitalize-first"/> </group> <choose> <if variable="title" match="none"/> <else-if type="thesis speech" match="any"/> <else-if type="patent"> <group delimiter=" "> <text variable="authority"/> <text variable="number"/> </group> </else-if> <else> <text variable="genre" text-case="capitalize-first"/> </else> </choose> <choose> <if type="map"> <text variable="scale"/> </if> <else-if type="graphic"> <text variable="dimensions"/> </else-if> </choose> </group> </macro> <macro name="container-title-note"> <group delimiter=" "> <choose> <if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="any"> <text term="in"/> </if> </choose> <choose> <if type="webpage"> <text variable="container-title"/> </if> <else-if type="post-weblog"> <text variable="container-title" text-case="title" font-style="italic" suffix=" (blog)"/> </else-if> <else-if type="bill legislation legal_case" match="none"> <text variable="container-title" text-case="title" font-style="italic"/> </else-if> </choose> </group> </macro> <macro name="container-title"> <group delimiter=" "> <choose> <if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="any"> <text term="in" text-case="capitalize-first"/> </if> </choose> <choose> <if type="webpage"> <text variable="container-title"/> </if> <else-if type="post-weblog"> <text variable="container-title" text-case="title" font-style="italic" suffix=" (blog)"/> </else-if> <else-if type="bill legislation legal_case" match="none"> <text variable="container-title" text-case="title" font-style="italic"/> </else-if> </choose> </group> </macro> <macro name="collection-title"> <choose> <if match="none" type="article-journal"> <choose> <if match="none" is-numeric="collection-number"> <group delimiter=", "> <text variable="collection-title" text-case="title"/> <text variable="collection-number"/> </group> </if> <else> <group delimiter=" "> <text variable="collection-title" text-case="title"/> <text variable="collection-number"/> </group> </else> </choose> </if> </choose> </macro> <macro name="collection-title-journal"> <choose> <if type="article-journal"> <group delimiter=" "> <text variable="collection-title"/> <text variable="collection-number"/> </group> </if> </choose> </macro> <macro name="edition-note"> <choose> <if type="book chapter graphic motion_picture paper-conference report song" match="any"> <choose> <if is-numeric="edition"> <group delimiter=" "> <number variable="edition" form="ordinal"/> <text term="edition" form="short"/> </group> </if> <else> <text variable="edition"/> </else> </choose> </if> </choose> </macro> <macro name="edition"> <choose> <if type="book chapter graphic motion_picture paper-conference report song" match="any"> <choose> <if is-numeric="edition"> <group delimiter=" "> <number variable="edition" form="ordinal"/> <text term="edition" form="short"/> </group> </if> <else> <text variable="edition" text-case="capitalize-first" suffix="."/> </else> </choose> </if> </choose> </macro> <macro name="locators-note-join-with-space"> <choose> <if type="article-journal" variable="volume" match="all"> <choose> <if match="none" variable="collection-title"> <text macro="locators-note"/> </if> </choose> </if> </choose> </macro> <macro name="locators-note-join-with-comma"> <choose> <if type="article-journal" match="none"> <text macro="locators-note"/> </if> <else-if type="article-journal"> <choose> <if variable="volume" match="none"> <text macro="locators-note"/> </if> <else-if match="any" variable="collection-title"> <text macro="locators-note"/> </else-if> </choose> </else-if> </choose> </macro> <macro name="locators-note"> <choose> <if type="article-journal"> <group delimiter=", "> <text macro="collection-title-journal"/> <text variable="volume"/> <group delimiter=" "> <text term="issue" form="short"/> <text variable="issue"/> </group> </group> </if> <else-if type="bill legislation legal_case" match="any"> <text macro="legal-cites"/> </else-if> <else-if type="book chapter graphic motion_picture paper-conference report song" match="any"> <group delimiter=", "> <text macro="edition-note"/> <group delimiter=" "> <text term="volume" form="short"/> <number variable="volume" form="numeric"/> </group> <choose> <if variable="locator" match="none"> <group delimiter=" "> <number variable="number-of-volumes" form="numeric"/> <text term="volume" form="short" plural="true"/> </group> </if> </choose> </group> </else-if> </choose> </macro> <macro name="legal-cites"> <choose> <if type="legal_case" match="any"> <group delimiter=" "> <choose> <if variable="container-title"> <text variable="volume"/> <text variable="container-title"/> <group delimiter=" "> <!--change to label variable="section" as that becomes available --> <text term="section" form="symbol"/> <text variable="section"/> </group> <text variable="page"/> </if> <else> <text variable="number" prefix="No. "/> </else> </choose> </group> </if> <else-if type="bill legislation" match="any"> <group delimiter=", "> <choose> <if variable="number"> <!--There\'s a public law number--> <text variable="number" prefix="Pub. L. No. "/> <group delimiter=" "> <!--change to label variable="section" as that becomes available --> <text term="section" form="symbol"/> <text variable="section"/> </group> <group delimiter=" "> <text variable="volume"/> <text variable="container-title"/> <text variable="page-first"/> </group> </if> <else> <group delimiter=" "> <text variable="volume" /> <text variable="container-title" /> <!--change to label variable="section" as that becomes available --> <text term="section" form="symbol" /> <text variable="section" /> </group> </else> </choose > </group > </else -if> </choose > </macro > <macro name="locators-join-with-space"> <choose> <if type="article-journal" variable="volume" match="all"> <choose> <if match="none" variable="collection-title"> <text macro="locators"/> </if> </choose> </if> </choose> </macro> <macro name="locators-join-with-comma"> <choose> <if type="bill chapter legislation legal_case paper-conference" match="any"> <text macro="locators"/> </if> <else-if type="article-journal"> <choose> <if variable="volume" match="none"> <text macro="locators"/> </if> <else-if match="any" variable="collection-title"> <text macro="locators"/> </else-if> </choose> </else-if> </choose> </macro> <macro name="locators-join-with-period"> <choose> <if type="bill legislation legal_case article-journal chapter paper-conference" match="none"> <text macro="locators"/> </if> </choose> </macro> <macro name="locators"> <choose> <if type="article-journal"> <group delimiter=", "> <text macro="collection-title-journal"/> <text variable="volume"/> <group delimiter=" "> <text term="issue" form="short"/> <text variable="issue"/> </group> </group> </if> <else-if type="bill legislation legal_case" match="any"> <text macro="legal-cites"/> </else-if> <else-if type="book graphic motion_picture report song" match="any"> <group delimiter=". "> <text macro="edition"/> <group delimiter=" "> <text term="volume" form="short" text-case="capitalize-first"/> <number variable="volume" form="numeric"/> </group> <group delimiter=" "> <number variable="number-of-volumes" form="numeric"/> <text term="volume" form="short" plural="true"/> </group> </group> </else-if> <else-if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="any"> <group delimiter=". "> <text macro="edition"/> <choose> <if variable="page" match="none"> <group delimiter=" "> <text term="volume" form="short" text-case="capitalize-first"/> <number variable="volume" form="numeric"/> </group> </if> </choose> </group> </else-if> </choose> </macro> <macro name="locators-newspaper"> <choose> <if type="article-newspaper"> <group delimiter=", "> <group delimiter=" "> <number variable="edition"/> <text term="edition"/> </group> <group delimiter=" "> <text term="section" form="short"/> <text variable="section"/> </group> </group> </if> </choose> </macro> <macro name="event-note"> <text variable="event"/> </macro> <macro name="event"> <choose> <if variable="title"> <group delimiter=" "> <choose> <if variable="genre"> <text term="presented at"/> </if> <else> <text term="presented at" text-case="capitalize-first"/> </else> </choose> <text variable="event"/> </group> </if> <else> <group delimiter=" "> <text term="presented at" text-case="capitalize-first"/> <text variable="event"/> </group> </else> </choose> </macro> <macro name="originally-published"> <group delimiter=", "> <group delimiter=": "> <text variable="original-publisher-place"/> <text variable="original-publisher"/> </group> <choose> <if is-uncertain-date="original-date"> <date variable="original-date" form="numeric" date-parts="year" prefix="[" suffix="?]"/> </if> <else> <date variable="original-date" form="numeric" date-parts="year"/> </else> </choose> </group> </macro> <macro name="reprint-note"> <!--needs localization--> <choose> <if variable="original-date issued" match="all"> <choose> <!--for whatever reason in notes, when we have both original and new publishers, reprint doesn\'t appear--> <if variable="original-publisher original-publisher-place" match="none"> <text value="repr."/> </if> </choose> </if> </choose> </macro> <macro name="reprint"> <!--needs localization--> <choose> <if variable="original-date issued" match="all"> <text value="reprint" text-case="capitalize-first"/> </if> </choose> </macro> <macro name="publisher"> <choose> <if type="thesis"> <text variable="publisher"/> </if> <else-if type="speech"> <text variable="event-place"/> </else-if> <else> <group delimiter=": "> <text variable="publisher-place"/> <text variable="publisher"/> </group> </else> </choose> </macro> <macro name="issued"> <choose> <if variable="issued"> <choose> <if type="legal_case"> <group delimiter=" "> <text variable="authority"/> <choose> <if variable="container-title" match="any"> <!--Only print year for cases published in reporters--> <date variable="issued" form="numeric" date-parts="year"/> </if> <else> <date variable="issued" form="text"/> </else> </choose> </group> </if> <else-if type="book bill chapter legislation motion_picture paper-conference song thesis" match="any"> <choose> <if is-uncertain-date="issued"> <date variable="issued" form="numeric" date-parts="year" prefix="[" suffix="?]"/> </if> <else> <date variable="issued" form="numeric" date-parts="year"/> </else> </choose> </else-if> <else-if type="patent"> <group delimiter=", "> <group delimiter=" "> <!--Needs Localization--> <text value="filed"/> <date variable="submitted" form="text"/> </group> <group delimiter=" "> <choose> <if variable="issued submitted" match="all"> <text term="and"/> </if> </choose> <!--Needs Localization--> <text value="issued"/> <date variable="issued" form="text"/> </group> </group> </else-if> <else> <choose> <if is-uncertain-date="issued"> <date variable="issued" form="text" prefix="[" suffix="?]"/> </if> <else> <date variable="issued" form="text"/> </else> </choose> </else> </choose> </if> <else-if variable="status"> <text variable="status"/> </else-if> <else-if variable="accessed URL" match="all"/> <else> <text term="no date" form="short"/> </else> </choose> </macro> <macro name="point-locators-subsequent"> <choose> <if type="legal_case" variable="locator" match="all"> <choose> <if locator="page"> <group delimiter=":"> <text variable="volume"/> <text variable="locator"/> </group> </if> <else> <group delimiter=" "> <label variable="locator" form="short"/> <text variable="locator"/> </group> </else> </choose> </if> <else-if variable="locator"> <choose> <if locator="page" match="none"> <group delimiter=" "> <choose> <if type="book graphic motion_picture report song" match="any"> <choose> <if variable="volume"> <group delimiter=", "> <group delimiter=" "> <text term="volume" form="short"/> <number variable="volume" form="numeric"/> </group> <label variable="locator" form="short"/> </group> </if> <else> <label variable="locator" form="short"/> </else> </choose> </if> <else> <label variable="locator" form="short"/> </else> </choose> <text variable="locator"/> </group> </if> <else-if type="book graphic motion_picture report song" match="any"> <group delimiter=":"> <number variable="volume" form="numeric"/> <text variable="locator"/> </group> </else-if> <else> <text variable="locator"/> </else> </choose> </else-if> </choose> </macro> <macro name="point-locators-join-with-colon"> <choose> <if type="article-journal"> <choose> <if variable="locator page" match="any"> <choose> <if variable="volume issue" match="any"> <text macro="point-locators"/> </if> </choose> </if> </choose> </if> </choose> </macro> <macro name="point-locators-join-with-comma"> <choose> <if type="article-journal" match="none"> <text macro="point-locators"/> </if> <else-if variable="volume issue" match="none"> <text macro="point-locators"/> </else-if> </choose> </macro> <macro name="point-locators"> <choose> <if variable="locator" match="none"> <choose> <if type="article-journal chapter paper-conference" match="any"> <text variable="page"/> </if> </choose> </if> <else-if type="article-journal"> <group delimiter=" "> <choose> <if locator="page" match="none"> <label variable="locator" form="short" suffix=" "/> </if> </choose> <text variable="locator"/> </group> </else-if> <else-if type="legal_case"/> <else> <group delimiter=" "> <choose> <if locator="page" match="none"> <label variable="locator" form="short"/> </if> </choose> <text variable="locator"/> </group> </else> </choose> </macro> <macro name="locators-chapter"> <choose> <if type="chapter entry-dictionary entry-encyclopedia paper-conference" match="any"> <choose> <if variable="author container-author" match="all"/> <else> <choose> <if variable="page"> <text variable="volume" suffix=":"/> <text variable="page"/> </if> </choose> </else> </choose> </if> </choose> </macro> <macro name="locators-journal-join-with-colon"> <choose> <if type="article-journal"> <choose> <if variable="volume issue" match="any"> <text variable="page"/> </if> </choose> </if> </choose> </macro> <macro name="locators-journal-join-with-comma"> <choose> <if type="article-journal"> <choose> <if variable="volume issue" match="none"> <text variable="page"/> </if> </choose> </if> </choose> </macro> <macro name="archive-note"> <choose> <if type="thesis"> <group delimiter=" "> <text variable="archive"/> <text variable="archive_location" prefix="(" suffix=")"/> </group> </if> <else> <group delimiter=", "> <text variable="archive_location"/> <text variable="archive"/> <text variable="archive-place"/> </group> </else> </choose> </macro> <macro name="archive"> <choose> <if type="thesis"> <group delimiter=" "> <text variable="archive"/> <text variable="archive_location" prefix="(" suffix=")"/> </group> </if> <else> <group delimiter=". "> <text variable="archive_location" text-case="capitalize-first"/> <text variable="archive"/> <text variable="archive-place"/> </group> </else> </choose> </macro> <macro name="issue-note-join-with-space"> <choose> <if type="article-journal bill legislation legal_case manuscript thesis" variable="publisher-place event-place publisher" match="any"> <!--Chicago doesn\'t use publisher/place for Newspapers and we want the date delimited by a comma--> <choose> <if type="article-newspaper" match="none"> <choose> <if type="article-journal" match="none"> <text macro="issue-note"/> </if> <else-if variable="issue volume" match="any"> <text macro="issue-note"/> </else-if> </choose> </if> </choose> </if> </choose> </macro> <macro name="issue-note-join-with-comma"> <choose> <if type="article-journal bill legislation legal_case manuscript speech thesis" variable="publisher-place publisher" match="none"> <text macro="issue-note"/> </if> <else-if type="article-newspaper"> <text macro="issue-note"/> </else-if> <else-if type="article-journal"> <choose> <if variable="volume issue" match="none"> <text macro="issue-note"/> </if> </choose> </else-if> </choose> </macro> <macro name="issue-map-graphic"> <!--See CMoS 17th ed. 14.235 and 14.237--> <choose> <if type="graphic map" match="any"> <choose> <if variable="publisher publisher-place" match="none"> <text macro="issued"/> </if> </choose> </if> </choose> </macro> <macro name="issue-note"> <choose> <if type="bill legislation legal_case" match="any"> <text macro="issued" prefix="(" suffix=")"/> </if> <else-if type="article-journal"> <choose> <if variable="volume issue" match="any"> <text macro="issued" prefix="(" suffix=")"/> </if> <else> <text macro="issued"/> </else> </choose> </else-if> <else-if type="article-newspaper"> <text macro="issued"/> </else-if> <else-if type="manuscript thesis speech" match="any"> <group delimiter=", " prefix="(" suffix=")"> <choose> <if variable="title" match="any"> <text variable="genre"/> </if> </choose> <text variable="event"/> <text variable="event-place"/> <text variable="publisher"/> <text macro="issued"/> </group> </else-if> <else-if variable="publisher-place event-place publisher" match="any"> <group prefix="(" suffix=")" delimiter=", "> <text macro="event-note"/> <group delimiter="; "> <text macro="originally-published"/> <group delimiter=", "> <text macro="reprint-note"/> <text macro="publisher"/> </group> </group> <text macro="issued"/> </group> </else-if> <else> <text macro="issued"/> </else> </choose> </macro> <macro name="issue-join-with-space"> <choose> <if type="article-journal" match="any"> <choose> <if variable="issue volume" match="any"> <text macro="issue"/> </if> </choose> </if> <else-if type="bill legislation legal_case" match="any"> <text macro="issue"/> </else-if> </choose> </macro> <macro name="issue-join-with-period"> <choose> <if type="article-journal bill legislation legal_case" match="none"> <choose> <if type="speech" variable="publisher publisher-place" match="any"> <text macro="issue"/> </if> </choose> </if> </choose> </macro> <macro name="issue-join-with-comma"> <choose> <if type="bill legislation legal_case" match="none"> <choose> <if type="article-journal" match="none"> <choose> <if type="speech" variable="publisher publisher-place" match="none"> <text macro="issue"/> </if> </choose> </if> <else-if variable="volume issue" match="none"> <text macro="issue"/> </else-if> </choose> </if> </choose> </macro> <macro name="issue"> <choose> <if type="bill legislation legal_case" match="any"> <text macro="issued" prefix="(" suffix=")"/> </if> <else-if type="article-journal"> <choose> <if variable="issue volume" match="any"> <text macro="issued" prefix="(" suffix=")"/> </if> <else> <text macro="issued"/> </else> </choose> </else-if> <else-if type="speech"> <group delimiter=", "> <group delimiter=" "> <choose> <if variable="title" match="none"/> <else> <text variable="genre" text-case="capitalize-first"/> </else> </choose> <text macro="event"/> </group> <text variable="event-place"/> <text macro="issued"/> </group> </else-if> <!--Chicago doesn\'t use publisher/place for Newspapers --> <else-if type="article-newspaper"> <text macro="issued"/> </else-if> <else-if variable="publisher-place publisher" match="any"> <group delimiter=", "> <choose> <if type="thesis"> <text variable="genre" text-case="capitalize-first"/> </if> </choose> <group delimiter=". "> <text macro="originally-published"/> <group delimiter=", "> <text macro="reprint"/> <text macro="publisher"/> </group> </group> <text macro="issued"/> </group> </else-if> <!--location for data for maps and artwork is different--> <else-if type="graphic map" match="none"> <text macro="issued"/> </else-if> </choose> </macro> <macro name="access-note"> <group delimiter=", "> <choose> <if type="graphic report" match="any"> <text macro="archive-note"/> </if> <else-if type="article-journal bill book chapter legal_case legislation motion_picture paper-conference" match="none"> <text macro="archive-note"/> </else-if> </choose> <choose> <if variable="issued" match="none"> <group delimiter=" "> <text term="accessed"/> <date variable="accessed" form="text"/> </group> </if> </choose> <choose> <if type="legal_case" match="none"> <choose> <if variable="DOI"> <text variable="DOI" prefix="https://doi.org/"/> </if> <else> <text variable="URL"/> </else> </choose> </if> </choose> </group> </macro> <macro name="access"> <group delimiter=". "> <choose> <if type="graphic report" match="any"> <text macro="archive"/> </if> <else-if type="article-journal bill book chapter legal_case legislation motion_picture paper-conference" match="none"> <text macro="archive"/> </else-if> </choose> <choose> <if variable="issued" match="none"> <group delimiter=" "> <text term="accessed" text-case="capitalize-first"/> <date variable="accessed" form="text"/> </group> </if> </choose> <choose> <if type="legal_case" match="none"> <choose> <if variable="DOI"> <text variable="DOI" prefix="https://doi.org/"/> </if> <else> <text variable="URL"/> </else> </choose> </if> </choose> </group> </macro> <macro name="case-locator-subsequent"> <choose> <if type="legal_case"> <group delimiter=" "> <text variable="volume"/> <text variable="container-title"/> </group> </if> </choose> </macro> <macro name="case-pinpoint-subsequent"> <choose> <if type="legal_case"> <group delimiter=" "> <choose> <if locator="page"> <text term="at"/> <text variable="locator"/> </if> <else> <label variable="locator"/> <text variable="locator"/> </else> </choose> </group> </if> </choose> </macro> <citation et-al-min="4" et-al-use-first="1" disambiguate-add-names="true"> <layout suffix="." delimiter="; "> <choose> <if position="ibid ibid-with-locator" match="any"> <group delimiter=", "> <text macro="contributors-short"/> <group delimiter=" "> <group delimiter=", "> <choose> <if variable="author editor translator" match="none"> <text macro="title-short"/> </if> </choose> <text macro="case-locator-subsequent"/> </group> <text macro="case-pinpoint-subsequent"/> </group> <choose> <if match="none" type="legal_case"> <text macro="point-locators-subsequent"/> </if> </choose> </group> </if> <else-if position="subsequent"> <group delimiter=", "> <text macro="contributors-short"/> <group delimiter=" "> <group delimiter=", "> <text macro="title-short"/> <!--if title & author are the same: --> <text macro="date-disambiguate"/> <text macro="case-locator-subsequent"/> </group> <text macro="case-pinpoint-subsequent"/> </group> <choose> <if match="none" type="legal_case"> <text macro="point-locators-subsequent"/> </if> </choose> </group> </else-if> <else> <group delimiter=", "> <group delimiter=": "> <group delimiter=", "> <group delimiter=" "> <group delimiter=", "> <group delimiter=" "> <group delimiter=", "> <group delimiter=", "> <text macro="contributors-note"/> <text macro="title-note"/> <text macro="issue-map-graphic"/> </group> <text macro="description-note"/> <text macro="secondary-contributors-note"/> <text macro="container-title-note"/> <text macro="container-contributors-note"/> </group> <text macro="locators-note-join-with-space"/> </group> <text macro="locators-note-join-with-comma"/> <text macro="collection-title"/> <text macro="issue-note-join-with-comma"/> </group> <text macro="issue-note-join-with-space"/> </group> <text macro="locators-newspaper"/> <text macro="point-locators-join-with-comma"/> </group> <text macro="point-locators-join-with-colon"/> </group> <text macro="access-note"/> </group> </else> </choose> </layout> </citation> <bibliography hanging-indent="true" et-al-min="11" et-al-use-first="7" subsequent-author-substitute="&#8212;&#8212;&#8212;" entry-spacing="0"> <sort> <key macro="contributors-sort"/> <key variable="title"/> <key variable="genre"/> <key variable="issued"/> </sort> <layout suffix="."> <group delimiter=". "> <group delimiter=": "> <group delimiter=", "> <group delimiter=" "> <group delimiter=". "> <group delimiter=" "> <group delimiter=", "> <group delimiter=". "> <group delimiter=". "> <text macro="contributors"/> <text macro="title"/> <text macro="issue-map-graphic"/> </group> <text macro="description"/> <text macro="secondary-contributors"/> <group delimiter=", "> <text macro="container-title"/> <text macro="container-contributors"/> </group> <text macro="locators-join-with-period"/> </group> <text macro="locators-join-with-comma"/> <text macro="locators-chapter"/> </group> <text macro="locators-join-with-space"/> </group> <text macro="collection-title"/> <text macro="issue-join-with-period"/> </group> <text macro="issue-join-with-space"/> </group> <text macro="issue-join-with-comma"/> <text macro="locators-journal-join-with-comma"/> <text macro="locators-newspaper"/> </group> <text macro="locators-journal-join-with-colon"/> </group> <text macro="access"/> </group> </layout> </bibliography> </style >'
let config = Cite.plugins.config.get("@csl");
config.templates.add("chicago", chicago);

const transcriptURLS = {
    "lara": "/srt/lara.srt",
    "ellen": "/srt/ellen.srt",
    "gabe": "/srt/gabe.srt"
};

const audioURLS = {
    "lara": "/audio/lara.m4a",
    "ellen": "/audio/ellen.m4a",
    "gabe": "/audio/gabe.m4a"
};

window.onpopstate = function (event) {
    if (event.state) {
        var url = new URL(event.state);
        replacePage(url.href, url.pathname, true);
    }
};

function initPage(hard) {
    // Get all "navbar-burger" elements
    const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

    // Check if there are any navbar burgers
    if ($navbarBurgers.length > 0) {

        // Add a click event on each of them
        $navbarBurgers.forEach(el => {
            el.addEventListener('click', () => {

                // Get the target from the "data-target" attribute
                const target = el.dataset.target;
                const $target = document.getElementById(target);

                // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
                el.classList.toggle('is-active');
                $target.classList.toggle('is-active');

            });
        });
    }

    const links = document.querySelectorAll('a');
    processLinks(links);

    const transcripts = document.getElementsByClassName('transcript');
    renderTranscripts(transcripts);

    const footnotes = document.getElementsByClassName('footnote-reference');
    updateFootnotes(footnotes);

    if (hard) {
        const audioSelector = document.getElementById("audio-selector");
        if (audioSelector !== null) {
            audioSelector.addEventListener('change', ev => {
                loadAudio(audioSelector.value);
            });
            loadAudio(audioSelector.value);
        }

        const transcriptButton = document.getElementById("goto-transcript");
        transcriptButton.addEventListener('click', ev => {
            ev.preventDefault();
            var person = audioSelector.value;
            if (person === "") {
                return;
            }
            var link = "/transcripts/" + person + "/";
            transcriptButton.href = link;
            replacePage(transcriptButton.href, transcriptButton.pathname, false);
        });
    }
}

document.addEventListener('DOMContentLoaded', () => {
    initPage(true);
    window.history.replaceState(window.location.href, window.title, window.location.pathname);
});

var csljson = [
    { "id": "altmanExplorationJewishEthnic2010", "abstract": "Despite a growing amount of research on the topic of ethnic identity, Jews, and the important aspects of a Jewish identity, have not been included in the multicultural and psychological literature. Using consensual qualitative research (C. E. Hill et al., 2005), the authors sought to gain an understanding of Jewish ethnic identity in 10 American young adults, ages 20–27, who identified as Conservative Jews. Six themes were identified: (a) perception of Jewish identity based in multiple influences, (b) personalization of a Jewish identity, (c) reinforcers of a Jewish identity, (d) challenges in holding on to Jewish identity, (e) critical incidents necessitating the expression of one's Jewishness, and (f) critical incidents necessitating the denial of one's Jewishness.", "accessed": { "date-parts": [[2020, 10, 21]] }, "author": [{ "family": "Altman", "given": "Abby N." }, { "family": "Inman", "given": "Arpana G." }, { "family": "Fine", "given": "Stephanie G." }, { "family": "Ritter", "given": "Hollie A." }, { "family": "Howard", "given": "Erin E." }], "container-title": "Journal of Counseling & Development", "DOI": "10.1002/j.1556-6678.2010.tb00005.x", "ISSN": "1556-6676", "issue": "2", "issued": { "date-parts": [[2010]] }, "language": "en", "note": "_eprint: https://onlinelibrary.wiley.com/doi/pdf/10.1002/j.1556-6678.2010.tb00005.x", "page": "163-173", "source": "Wiley Online Library", "title": "Exploration of Jewish Ethnic Identity", "type": "article-journal", "URL": "http://onlinelibrary.wiley.com/doi/abs/10.1002/j.1556-6678.2010.tb00005.x", "volume": "88" },
    { "id": "amyotJewsJudaismAssimilation1996", "abstract": "Objective. As Jewish Americans have become more integrated into the social \"mainstream,\" questions have arisen about the survival of Jewish identity in the United States. The purpose of this research is to model the impact of religiosity and personal contact with other Jews upon Jewish identification in order to cast new light on the \"Jewishness\" of the most assimilated Jews. Methods. A regression model is estimated based on data from the 1990 National Jewish Population Survey. Results. The statistical results suggest that lower levels of religiosity and social contact are associated with a weaker sense of Jewish identity; that declining religiosity poses a greater threat to Jewish identity than declining social contact does; and that the \"base\" of Jewish identity seems fairly impervious to the erosive impacts of declining religiosity and social contact. Conclusions. Judaism plays the central role in defining and maintaining Jewish identity; although close interpersonal relations with other Jews play an important role, religious devotion is the main pillar of Jewish identity in the United States. For those who are most assimilated, Jewish identity has been transformed from predominantly religious to predominantly ethnic.", "accessed": { "date-parts": [[2020, 10, 21]] }, "author": [{ "family": "Amyot", "given": "Robert P." }, { "family": "Sigelman", "given": "Lee" }], "container-title": "Social Science Quarterly", "ISSN": "0038-4941", "issue": "1", "issued": { "date-parts": [[1996]] }, "page": "177-189", "publisher": "[University of Texas Press, Wiley]", "source": "JSTOR", "title": "Jews without Judaism? Assimilation and Jewish Identity in the United States", "title-short": "Jews without Judaism?", "type": "article-journal", "URL": "https://www.jstor.org/stable/42863438", "volume": "77" },
    { "id": "brooksTelAvivCluster2010", "abstract": "Israelis’ embrace of technology and commerce has had a desultory effect on the nation’s public life, but an invigorating one on its economy.", "accessed": { "date-parts": [[2020, 10, 22]] }, "author": [{ "family": "Brooks", "given": "David" }], "container-title": "The New York Times", "ISSN": "0362-4331", "issued": { "date-parts": [[2010, 1, 11]] }, "language": "en-US", "section": "Opinion", "source": "NYTimes.com", "title": "The Tel Aviv Cluster", "type": "article-newspaper", "URL": "https://www.nytimes.com/2010/01/12/opinion/12brooks.html" },
    { "id": "gansAmericanJewryPresent1956", "abstract": "In The flurry of assertions about the future occasioned by the tercentenary of the American Jewish community, virtually no one, it would seem, took a real look at that community", "accessed": { "date-parts": [[2020, 10, 21]] }, "author": [{ "family": "Gans", "given": "Herbert J." }], "container-title": "Commentary Magazine", "issued": { "date-parts": [[1956, 5, 1]] }, "language": "en-US", "title": "American Jewry, Present and Future: Part I: Present", "title-short": "American Jewry, Present and Future", "type": "post-weblog", "URL": "https://www.commentarymagazine.com/articles/herbert-gans/american-jewry-present-and-future-part-i-present/" },
    { "id": "gansFutureAmericanJewry1956", "abstract": "The main trends in the development of the American Jewish community can be traced most clearly in the changes that take place between generations. These, in turn, are reflected, at", "accessed": { "date-parts": [[2020, 10, 21]] }, "author": [{ "family": "Gans", "given": "Herbert J." }], "container-title": "Commentary Magazine", "issued": { "date-parts": [[1956, 6, 1]] }, "language": "en-US", "title": "The Future of American Jewry: Part II", "title-short": "The Future of American Jewry", "type": "post-weblog", "URL": "https://www.commentarymagazine.com/articles/herbert-gans/the-future-of-american-jewry-part-ii/" },
    { "id": "gersenUncomfortableTruthAffirmative", "abstract": "Since the nineties, the share of Asians in Harvard’s freshman class has remained stable, while the percentage of Asians in the U.S. population has more than doubled.", "accessed": { "date-parts": [[2020, 10, 22]] }, "author": [{ "family": "Gersen", "given": "Jeannie Suk" }], "container-title": "The New Yorker", "language": "en-us", "title": "The Uncomfortable Truth About Affirmative Action and Asian-Americans", "type": "webpage", "URL": "https://www.newyorker.com/news/news-desk/the-uncomfortable-truth-about-affirmative-action-and-asian-americans" },
    { "id": "hechtSometimesJewishSometimes2000", "abstract": "We explored the negotiation of Jewish American identity from a Communication Theory of Identity perspective. Interviews with 26 Jewish Americans revealed that participants contend with their group‐based identity on personal and relational levels when faced with decisions about whether to reveal or conceal their Jewish identity. Participants discussed Jewish identity management in their own lives and in the lives of other people they know. Analyses resulting in the themes of closeting, centrality of identity, and potential consequences reflect participants’ personal and relational levels of identity. These themes are played out in the how, when, why, and if of participants’ identity management. Rules were derived to explain these processes and the implications of the themes are discussed in light of the Communication Theory of Identity and Communication Boundary Management.", "accessed": { "date-parts": [[2020, 10, 21]] }, "author": [{ "family": "Hecht", "given": "Michael L." }, { "family": "Faulkner", "given": "Sandra L." }], "container-title": "Communication Studies", "DOI": "10.1080/10510970009388532", "ISSN": "1051-0974", "issue": "4", "issued": { "date-parts": [[2000, 12, 1]] }, "note": "_eprint: https://doi.org/10.1080/10510970009388532", "page": "372-387", "publisher": "Routledge", "source": "Taylor and Francis+NEJM", "title": "Sometimes Jewish, sometimes not: The closeting of Jewish American identity", "title-short": "Sometimes Jewish, sometimes not", "type": "article-journal", "URL": "https://doi.org/10.1080/10510970009388532", "volume": "51" },
    { "id": "hollingerRichPowerfulSmart2004", "abstract": "T H E JE W I S H Q UA R T E R LY R E V I E W, Vol. 94, No. 4 (Fall 2004) 595–602 Rich, Powerful, and Smart Jewish Overrepresentation Should Be Explained Instead of Avoided or Mystified DAVID A. HOLLINGER IN THE CLOSING SCENE of Philip Roth’s The Human Stain (New York, 2000) two white men, one a Jew and one who might be called a ‘‘poor white,’’ confront one another while standing on a sheet of white ice beneath which is an expanse of blackness. The dark water beneath the ice is an obvious symbol for a dead man the reader has learned was born black but had managed to pass as white, although at enormous personal cost. Indeed, his whiteness was like the ice, easily broken in the event of a change in the social weather. The Jew knows that the man born black had died some months earlier in the very waters of the now-ice-covered lake, murdered by the crude, uneducated man he was facing. But he can’t prove it. After a few minutes of tense and evasive dialogue the Jew turns and walks away. The Jew, as a well-to-do, highly educated, self-aware person, is able to drive then to New Jersey to engage the black family of the dead man openly and honestly. But the local poor white, who never had much going for him to begin with and lost what humane capabilities he had when the government made him into a killing machine in Vietnam, remains on the white ice of the remote Berkshire lake. The ‘‘cracker’’ is imprisoned by his war-related clinical depression and by the petty prejudices against which his class and culture have given him all too little protection. This scene, created by a writer whose unyielding preoccupation for more than thirty-five years has been the psychology of Jewishness in the historically specific conditions of late-twentieth-century America, displays features of American life that invite the sustained attention of historians : the success of Jews, and the relevance of a Jewish background to lives lived outside communal Jewry. Neither Roth nor his protagonist, Nathan Zuckerman, is significantly defined by the communal framework that is central to what we normally understand as ‘‘Jewish history.’’ Yet The Jewish Quarterly Review (Fall 2004) Copyright 䉷 2004 Center for Advanced Judaic Studies. All rights reserved. 596 JQR 94:4 (2004) their personae are deeply marked by a Jewish past. The Jewish experience that animates Roth’s entire saga of class and culture, moreover, is not defined by the victimization that has been made all the more central to popular understandings of Jewish history by the Holocaust Museum near the National Mall in Washington, D.C. Rather, the salient Jewish experience is that of relative success, however refracted through neuroses and chaotic family dynamics. Our national debates on public policy and our social-science literature frequently discuss cases of underrepresentation in employment pools, in academia, in legislatures, in business leadership, and in the ranks generally of the middle class. But do not underrepresentation and overrepresentation form a logical syndrome? Should we not expect the same principles of causation to apply to both sides of the phenomenon? Might what we learn about the overrepresentation of particular descent groups help us to understand the underrepresentation of others, and vice versa? This might seem obvious, but the analysis of overrepresentation, and of the historical processes by which ethno-racial groups that were once underrepresented have become overrepresented, usually stops with the white color line. The Irish, the Italians, the Poles, and the Jews, we say, ‘‘became white.’’ But invoking whiteness does not carry us very far. Rural poor whites are not overrepresented at Harvard and in the great brokerage firms. Philip Roth understands the difference very well. By almost any index, Jews are demographically overrepresented among the wealthiest, the most politically powerful, and the most intellectually accomplished of Americans. Jewish experience since 1945 is the most dramatic single case in all of American history in which a stigmatized descent group that had been systematically discriminated against under the protection of law suddenly became overrepresented many times...", "accessed": { "date-parts": [[2020, 10, 22]] }, "author": [{ "family": "Hollinger", "given": "David A." }], "container-title": "Jewish Quarterly Review", "DOI": "10.1353/jqr.2004.0004", "ISSN": "1553-0604", "issue": "4", "issued": { "date-parts": [[2004]] }, "language": "en", "page": "595-602", "publisher": "University of Pennsylvania Press", "source": "Project MUSE", "title": "Rich, Powerful, and Smart: Jewish Overrepresentation Should Be Explained Instead of Avoided or Mystified", "title-short": "Rich, Powerful, and Smart", "type": "article-journal", "URL": "http://muse.jhu.edu/article/390228/summary", "volume": "94" },
    { "id": "horowitzReframingStudyContemporary2002", "accessed": { "date-parts": [[2020, 10, 21]] }, "author": [{ "family": "Horowitz", "given": "Bethamie" }], "container-title": "Contemporary Jewry", "container-title-short": "Cont Jewry", "DOI": "10.1007/BF02967927", "ISSN": "0147-1694, 1876-5165", "issue": "1", "issued": { "date-parts": [[2002, 12]] }, "language": "en", "page": "14-34", "source": "DOI.org (Crossref)", "title": "Reframing the study of contemporary American Jewish Identity", "type": "article-journal", "URL": "http://link.springer.com/10.1007/BF02967927", "volume": "23" },
    { "id": "meddingJewishIdentityConversionary1992", "accessed": { "date-parts": [[2020, 10, 21]] }, "author": [{ "family": "Medding", "given": "Peter Y." }, { "family": "Tobin", "given": "Gary A." }, { "family": "Fishman", "given": "Sylvia Barack" }, { "family": "Rimor", "given": "Mordechai" }], "container-title": "The American Jewish Year Book", "ISSN": "0065-8987", "issued": { "date-parts": [[1992]] }, "page": "3-76", "publisher": "American Jewish Committee", "source": "JSTOR", "title": "Jewish Identity in Conversionary and Mixed Marriages", "type": "article-journal", "URL": "https://www.jstor.org/stable/23605964", "volume": "92" },
    { "id": "PortraitJewishAmericans2013", "collection-title": "Religion and Public Life Project", "container-title": "Pew Research Center", "issued": { "date-parts": [[2013, 10, 1]] }, "language": "en", "page": "214", "source": "Zotero", "title": "A Portrait of Jewish Americans: Findings from a Pew Research Center Survey of U.S. Jews", "title-short": "A Portrait of Jewish Americans", "type": "article-journal" },
    { "id": "ritchieDoingOralHistory2003", "abstract": "Oral history is vital to our understanding of the cultures and experiences of the past. Unlike written history, oral history forever captures people's feelings, expressions, and nuances of language. But what exactly is oral history? How reliable is the information gathered by oral history? And what does it take to become an oral historian? Donald A. Ritchie, a leading expert in the field, answers these questions and in particular, explains the principles and guidelines created by the Oral History Association to ensure the professional standards of oral historians. Doing Oral History has become one of the premier resources in oral history. It explores all aspects of the field, from starting an oral history project, including funding, staffing, and equipment to conducting interviews; publishing; videotaping; preserving materials; teaching oral history; and using oral history in museums and on the radio. In this second edition, the author has incorporated new trends and scholarship, updated and expanded the bibliography and appendices, and added a new focus on digital technology and the Internet. Appendices include sample legal release forms and information on oral history organizations. Doing Oral History is a definitive step-by-step guide that provides advice and explanations on how to create recordings that illuminate human experience for generations to come. Illustrated with examples from a wide range of fascinating projects, this authoritative guide offers clear, practical, and detailed advice for students, teachers, researchers, and amateur genealogists who wish to record the history of their own families and communities.", "accessed": { "date-parts": [[2020, 10, 8]] }, "author": [{ "family": "Ritchie", "given": "Donald A." }], "event-place": "Cary, UNITED KINGDOM", "ISBN": "978-0-19-803513-8", "issued": { "date-parts": [[2003]] }, "publisher": "Oxford University Press, Incorporated", "publisher-place": "Cary, UNITED KINGDOM", "source": "ProQuest Ebook Central", "title": "Doing Oral History: A Practical Guide", "title-short": "Doing Oral History", "type": "book", "URL": "http://ebookcentral.proquest.com/lib/amherst/detail.action?docID=422722" },
    { "id": "yuAsianAmericansOverrepresented2020", "accessed": { "date-parts": [[2020, 10, 22]] }, "author": [{ "family": "Yu", "given": "Corinna J." }], "container-title": "ASA Monitor", "container-title-short": "ASA Monitor", "DOI": "10.1097/01.M99.0000688732.01865.74", "ISSN": "2380-4017", "issue": "7", "issued": { "date-parts": [[2020, 7, 1]] }, "language": "en", "page": "32-33", "publisher": "American Society of Anesthesiologists", "source": "pubs.asahq.org", "title": "Asian Americans: The Overrepresented Minority? Dispelling the ‘Model Minority’ Myth", "title-short": "Asian Americans", "type": "article-journal", "URL": "https://pubs.asahq.org/monitor/article/84/7/32/108588/Asian-Americans-The-Overrepresented-Minority", "volume": "84" },
    { "id": "zakDimensionsJewishAmericanIdentity1973", "abstract": "The main problem posed in this study is: What are the content and structure of Jewish and American identity? The Jewish-American Identity Scale, which was adapted and refined for this study, was administered in 1971 to four samples, totaling 1006 Jewish-American college students from various parts of the United States. Initially, factor analysis was applied to the separate samples. Intersample comparisons of factor structures indicated a high degree of congruency; consequently, the samples were combined for subsequent analyses. Factor analysis of the test scores demonstrated that most of the common factor variance was appropriated by two relatively orthogonal factors. Items dealing with American identity and those dealing with Jewish identity had medium to high loadings on the two respective factors. These findings supported the hypothesis of the duality and the orthogonality of dimensions of Jewish and American identity, and cast doubt on the notion forwarded by some researchers that Jewish-American identity forms a bipolar continuum.", "accessed": { "date-parts": [[2020, 10, 21]] }, "author": [{ "family": "Zak", "given": "Itai" }], "container-title": "Psychological Reports", "container-title-short": "Psychol Rep", "DOI": "10.2466/pr0.1973.33.3.891", "ISSN": "0033-2941", "issue": "3", "issued": { "date-parts": [[1973, 12, 1]] }, "language": "en", "page": "891-900", "publisher": "SAGE Publications Inc", "source": "SAGE Journals", "title": "Dimensions of Jewish-American Identity", "type": "article-journal", "URL": "https://doi.org/10.2466/pr0.1973.33.3.891", "volume": "33" }
];

function updateFootnotes(footnotes) {
    let citations = new Cite(csljson);

    for (var footnote of footnotes) {
        let link = footnote.childNodes[0];
        let data = JSON.parse("{" + link.getAttribute("href").split('#')[1] + "}");
        let container = footnote.nextElementSibling;

        let keys = data["keys"].split(",");
        container.innerText = citations.format('citation', {
            entry: keys,
            format: 'html',
            // template: 'chicago',
        });

        link.addEventListener('click', ev => {
            ev.preventDefault();
            container.classList.toggle("is-hidden");
        });
    }
}

function processLinks(links) {
    links.forEach(link => {
        var parent = link.parentElement;
        if (link.hostname === window.location.hostname && link.id !== "entrance" && !parent.classList.contains("footnote-reference")) {
            link.addEventListener('click', (ev) => {
                ev.preventDefault();
                replacePage(link.href, link.pathname, false);
            })
        }
    });
}

async function replacePage(href, pathname, back) {
    let resp = await fetch(href);
    let html = await resp.text();

    var parser = new DOMParser();
    var newDoc = parser.parseFromString(html, "text/html");

    var newRoot = newDoc.getElementById("root");
    var root = document.getElementById("root");

    root.classList.toggle("fade");
    await sleep(1050);

    root.innerHTML = newRoot.innerHTML;
    document.title = newDoc.title;

    if (!back) {
        history.pushState(href, newDoc.title, pathname);
    }

    initPage(false);

    await sleep(50)

    root.classList.toggle("fade");
}

function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms))
}

function renderTranscripts(transcripts) {
    for (var transcript of transcripts) {
        var person = transcript.getAttribute('person');
        var full = transcript.hasAttribute('full');

        if (full) {
            renderFullTranscript(person, transcript);
        } else {
            renderPartialTranscript(transcript);
        }
    }
}

function seekToMillis(ev) {
    var controller = document.getElementById("audio-controller");

    var time = ev.target.getAttribute("millis");
    var person = ev.target.getAttribute("person");
    const audioSelector = document.getElementById("audio-selector");

    if (audioSelector.value !== person) {
        audioSelector.value = person;
    }
    loadAudio(person);
    controller.currentTime = Number(time) / 1000;
    controller.play();
}

function convertMillis(millis) {
    let padToTwo = number => number <= 99 ? `0${number}`.slice(-2) : number;

    var seconds = millis / 1000;
    var minutes = seconds / 60;
    var hours = minutes / 60;
    return Math.floor(hours) + ":" + padToTwo(Math.floor(minutes) % 60) + ":" + padToTwo(Math.floor(seconds) % 60);
}

async function renderFullTranscript(person, el) {
    var url = transcriptURLS[person];
    var resp = await fetch(url);
    var srt = await resp.text();

    var nodes = window.subtitle.parseSync(srt);

    var columns = document.createElement("div");
    columns.classList.value = "columns is-multiline";

    for (var node of nodes) {
        var parts = node.data.text.split(":");
        var name = parts[0].trim();
        var text = parts[1].trim().replace(/---/g, "—");

        var metaParent = document.createElement("div");
        metaParent.classList.value = "column is-2";
        metaParent.id = node.data.start.toString();
        var metaInner = document.createElement("p");
        var speaker = document.createElement("strong");
        speaker.innerText = name + ": ";
        var timestamp = document.createElement("em");
        timestamp.classList.value = "timestamp";
        timestamp.setAttribute("millis", node.data.start.toString());
        timestamp.setAttribute("person", person);
        timestamp.innerText = "(" + convertMillis(node.data.start) + ")";
        timestamp.addEventListener("click", ev => seekToMillis(ev));

        metaInner.appendChild(speaker);
        metaInner.appendChild(timestamp);
        metaParent.appendChild(metaInner);

        var textParent = document.createElement("div");
        textParent.classList.value = "column is-10";
        var textInner = document.createElement("p");
        textInner.innerText = text;
        textParent.appendChild(textInner);

        columns.appendChild(metaParent);
        columns.appendChild(textParent);
    }

    el.appendChild(columns);
}

async function renderPartialTranscript(transcript) {
    var timestamp = transcript.querySelector(".timestamp");
    timestamp.addEventListener("click", ev => seekToMillis(ev));
}

function loadAudio(person) {
    var controller = document.getElementById("audio-controller");
    if (person === "") {
        controller.removeAttribute("src");
    }

    if (controller.getAttribute("src") !== audioURLS[person]) {
        controller.setAttribute("src", audioURLS[person]);
    }
}